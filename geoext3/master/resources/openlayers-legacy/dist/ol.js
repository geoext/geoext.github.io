"use strict";var _excluded=["headers","credentials","maxRanges","allowFullFile"],_excluded2=["headers","maxRanges","allowFullFile"],_excluded3=["headers","maxRanges","allowFullFile"],_excluded4=["forceXHR"];function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key];}}return target;}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key];}return target;}function _toArray(arr){return _arrayWithHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableRest();}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map():undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function");}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper);}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor);}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class);};return _wrapNativeSuper(Class);}function _construct(Parent,args,Class){if(_isNativeReflectConstruct()){_construct=Reflect.construct.bind();}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor();if(Class)_setPrototypeOf(instance,Class.prototype);return instance;};}return _construct.apply(null,arguments);}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1;}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e27){throw _e27;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e28){didErr=true;err=_e28;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return exports;};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key];}try{define({},"");}catch(err){define=function define(obj,key,value){return obj[key]=value;};}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult();}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult;}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg);}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done};}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg);}};}(innerFn,self,context),generator;}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)};}catch(err){return{type:"throw",arg:err};}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,function(){return this;});var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){define(prototype,method,function(arg){return this._invoke(method,arg);});});}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject);},function(err){invoke("throw",err,resolve,reject);}):PromiseImpl.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result);},function(error){return invoke("throw",error,resolve,reject);});}reject(record.arg);}var previousPromise;this._invoke=function(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl(function(resolve,reject){invoke(method,arg,resolve,reject);});}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();};}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(undefined===method){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method");}return ContinueSentinel;}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel);}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry);}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record;}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0);}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;){if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;}return next.value=undefined,next.done=!0,next;};return next.next=next;}}return{next:doneResult};}function doneResult(){return{value:undefined,done:!0};}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(Gp,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name));},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun;},exports.awrap=function(arg){return{__await:arg};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,function(){return this;}),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next();});},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,function(){return this;}),define(Gp,"toString",function(){return"[object Generator]";}),exports.keys=function(object){var keys=[];for(var key in object){keys.push(key);}return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next;}return next.done=!0,next;};},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this){"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined);}},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval;},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught;}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break;}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record);},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel;},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel;}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry);}return thrown;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel;}},exports;}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}/*! For license information please see ol.js.LICENSE.txt */!function(t,n){"object"==(typeof exports==="undefined"?"undefined":_typeof(exports))&&"object"==(typeof module==="undefined"?"undefined":_typeof(module))?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==(typeof exports==="undefined"?"undefined":_typeof(exports))?exports.ol=n():t.ol=n();}(self,function(){return function(){var t,n={226:function _(t,n){n.read=function(t,n,i,r,e){var o,s,u=8*e-r-1,a=(1<<u)-1,h=a>>1,f=-7,c=i?e-1:0,l=i?-1:1,v=t[n+c];for(c+=l,o=v&(1<<-f)-1,v>>=-f,f+=u;f>0;o=256*o+t[n+c],c+=l,f-=8){;}for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=256*s+t[n+c],c+=l,f-=8){;}if(0===o)o=1-h;else{if(o===a)return s?NaN:1/0*(v?-1:1);s+=Math.pow(2,r),o-=h;}return(v?-1:1)*s*Math.pow(2,o-r);},n.write=function(t,n,i,r,e,o){var s,u,a,h=8*o-e-1,f=(1<<h)-1,c=f>>1,l=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,v=r?0:o-1,p=r?1:-1,d=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(u=isNaN(n)?1:0,s=f):(s=Math.floor(Math.log(n)/Math.LN2),n*(a=Math.pow(2,-s))<1&&(s--,a*=2),(n+=s+c>=1?l/a:l*Math.pow(2,1-c))*a>=2&&(s++,a/=2),s+c>=f?(u=0,s=f):s+c>=1?(u=(n*a-1)*Math.pow(2,e),s+=c):(u=n*Math.pow(2,c-1)*Math.pow(2,e),s=0));e>=8;t[i+v]=255&u,v+=p,u/=256,e-=8){;}for(s=s<<e|u,h+=e;h>0;t[i+v]=255&s,v+=p,s/=256,h-=8){;}t[i+v-p]|=128*d;};},875:function _(t,n,i){"use strict";var r=i(692),e=Symbol("max"),o=Symbol("length"),s=Symbol("lengthCalculator"),u=Symbol("allowStale"),a=Symbol("maxAge"),h=Symbol("dispose"),f=Symbol("noDisposeOnSet"),c=Symbol("lruList"),l=Symbol("cache"),v=Symbol("updateAgeOnGet"),p=function p(){return 1;};var d=function d(t,n,i){var r=t[l].get(n);if(r){var _n2=r.value;if(y(t,_n2)){if(w(t,r),!t[u])return;}else i&&(t[v]&&(r.value.now=Date.now()),t[c].unshiftNode(r));return _n2.value;}},y=function y(t,n){if(!n||!n.maxAge&&!t[a])return!1;var i=Date.now()-n.now;return n.maxAge?i>n.maxAge:t[a]&&i>t[a];},m=function m(t){if(t[o]>t[e])for(var _n3=t[c].tail;t[o]>t[e]&&null!==_n3;){var _i2=_n3.prev;w(t,_n3),_n3=_i2;}},w=function w(t,n){if(n){var _i3=n.value;t[h]&&t[h](_i3.key,_i3.value),t[o]-=_i3.length,t[l].delete(_i3.key),t[c].removeNode(n);}};var g=/*#__PURE__*/_createClass(function g(t,n,i,r,e){_classCallCheck(this,g);this.key=t,this.value=n,this.length=i,this.now=r,this.maxAge=e||0;});var b=function b(t,n,i,r){var e=i.value;y(t,e)&&(w(t,i),t[u]||(e=void 0)),e&&n.call(r,e.value,e.key,t);};t.exports=/*#__PURE__*/function(){function _class(t){_classCallCheck(this,_class);if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[e]=t.max||1/0;var n=t.length||p;if(this[s]="function"!=typeof n?p:n,this[u]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[a]=t.maxAge||0,this[h]=t.dispose,this[f]=t.noDisposeOnSet||!1,this[v]=t.updateAgeOnGet||!1,this.reset();}_createClass(_class,[{key:"max",get:function get(){return this[e];},set:function set(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[e]=t||1/0,m(this);}},{key:"allowStale",get:function get(){return this[u];},set:function set(t){this[u]=!!t;}},{key:"maxAge",get:function get(){return this[a];},set:function set(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[a]=t,m(this);}},{key:"lengthCalculator",get:function get(){return this[s];},set:function set(t){var _this=this;"function"!=typeof t&&(t=p),t!==this[s]&&(this[s]=t,this[o]=0,this[c].forEach(function(t){t.length=_this[s](t.value,t.key),_this[o]+=t.length;})),m(this);}},{key:"length",get:function get(){return this[o];}},{key:"itemCount",get:function get(){return this[c].length;}},{key:"rforEach",value:function rforEach(t,n){n=n||this;for(var _i4=this[c].tail;null!==_i4;){var _r2=_i4.prev;b(this,t,_i4,n),_i4=_r2;}}},{key:"forEach",value:function forEach(t,n){n=n||this;for(var _i5=this[c].head;null!==_i5;){var _r3=_i5.next;b(this,t,_i5,n),_i5=_r3;}}},{key:"keys",value:function keys(){return this[c].toArray().map(function(t){return t.key;});}},{key:"values",value:function values(){return this[c].toArray().map(function(t){return t.value;});}},{key:"reset",value:function reset(){var _this2=this;this[h]&&this[c]&&this[c].length&&this[c].forEach(function(t){return _this2[h](t.key,t.value);}),this[l]=new Map(),this[c]=new r(),this[o]=0;}},{key:"dump",value:function dump(){var _this3=this;return this[c].map(function(t){return!y(_this3,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)};}).toArray().filter(function(t){return t;});}},{key:"dumpLru",value:function dumpLru(){return this[c];}},{key:"set",value:function set(t,n,i){if((i=i||this[a])&&"number"!=typeof i)throw new TypeError("maxAge must be a number");var r=i?Date.now():0,u=this[s](n,t);if(this[l].has(t)){if(u>this[e])return w(this,this[l].get(t)),!1;var _s2=this[l].get(t).value;return this[h]&&(this[f]||this[h](t,_s2.value)),_s2.now=r,_s2.maxAge=i,_s2.value=n,this[o]+=u-_s2.length,_s2.length=u,this.get(t),m(this),!0;}var v=new g(t,n,u,r,i);return v.length>this[e]?(this[h]&&this[h](t,n),!1):(this[o]+=v.length,this[c].unshift(v),this[l].set(t,this[c].head),m(this),!0);}},{key:"has",value:function has(t){if(!this[l].has(t))return!1;var n=this[l].get(t).value;return!y(this,n);}},{key:"get",value:function get(t){return d(this,t,!0);}},{key:"peek",value:function peek(t){return d(this,t,!1);}},{key:"pop",value:function pop(){var t=this[c].tail;return t?(w(this,t),t.value):null;}},{key:"del",value:function del(t){w(this,this[l].get(t));}},{key:"load",value:function load(t){this.reset();var n=Date.now();for(var _i6=t.length-1;_i6>=0;_i6--){var _r4=t[_i6],_e2=_r4.e||0;if(0===_e2)this.set(_r4.k,_r4.v);else{var _t2=_e2-n;_t2>0&&this.set(_r4.k,_r4.v,_t2);}}}},{key:"prune",value:function prune(){var _this4=this;this[l].forEach(function(t,n){return d(_this4,n,!1);});}}]);return _class;}();},98:function _(t,n,i){"use strict";t.exports=e;var r=i(226);function e(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length;}e.Varint=0,e.Fixed64=1,e.Bytes=2,e.Fixed32=5;var o=4294967296,s=1/o,u="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function a(t){return t.type===e.Bytes?t.readVarint()+t.pos:t.pos+1;}function h(t,n,i){return i?4294967296*n+(t>>>0):4294967296*(n>>>0)+(t>>>0);}function f(t,n,i){var r=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));i.realloc(r);for(var e=i.pos-1;e>=t;e--){i.buf[e+r]=i.buf[e];}}function c(t,n){for(var i=0;i<t.length;i++){n.writeVarint(t[i]);}}function l(t,n){for(var i=0;i<t.length;i++){n.writeSVarint(t[i]);}}function v(t,n){for(var i=0;i<t.length;i++){n.writeFloat(t[i]);}}function p(t,n){for(var i=0;i<t.length;i++){n.writeDouble(t[i]);}}function d(t,n){for(var i=0;i<t.length;i++){n.writeBoolean(t[i]);}}function y(t,n){for(var i=0;i<t.length;i++){n.writeFixed32(t[i]);}}function m(t,n){for(var i=0;i<t.length;i++){n.writeSFixed32(t[i]);}}function w(t,n){for(var i=0;i<t.length;i++){n.writeFixed64(t[i]);}}function g(t,n){for(var i=0;i<t.length;i++){n.writeSFixed64(t[i]);}}function b(t,n){return(t[n]|t[n+1]<<8|t[n+2]<<16)+16777216*t[n+3];}function x(t,n,i){t[i]=n,t[i+1]=n>>>8,t[i+2]=n>>>16,t[i+3]=n>>>24;}function M(t,n){return(t[n]|t[n+1]<<8|t[n+2]<<16)+(t[n+3]<<24);}e.prototype={destroy:function destroy(){this.buf=null;},readFields:function readFields(t,n,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),e=r>>3,o=this.pos;this.type=7&r,t(e,n,this),this.pos===o&&this.skip(r);}return n;},readMessage:function readMessage(t,n){return this.readFields(t,n,this.readVarint()+this.pos);},readFixed32:function readFixed32(){var t=b(this.buf,this.pos);return this.pos+=4,t;},readSFixed32:function readSFixed32(){var t=M(this.buf,this.pos);return this.pos+=4,t;},readFixed64:function readFixed64(){var t=b(this.buf,this.pos)+b(this.buf,this.pos+4)*o;return this.pos+=8,t;},readSFixed64:function readSFixed64(){var t=b(this.buf,this.pos)+M(this.buf,this.pos+4)*o;return this.pos+=8,t;},readFloat:function readFloat(){var t=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t;},readDouble:function readDouble(){var t=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t;},readVarint:function readVarint(t){var n,i,r=this.buf;return n=127&(i=r[this.pos++]),i<128?n:(n|=(127&(i=r[this.pos++]))<<7,i<128?n:(n|=(127&(i=r[this.pos++]))<<14,i<128?n:(n|=(127&(i=r[this.pos++]))<<21,i<128?n:function(t,n,i){var r,e,o=i.buf;if(e=o[i.pos++],r=(112&e)>>4,e<128)return h(t,r,n);if(e=o[i.pos++],r|=(127&e)<<3,e<128)return h(t,r,n);if(e=o[i.pos++],r|=(127&e)<<10,e<128)return h(t,r,n);if(e=o[i.pos++],r|=(127&e)<<17,e<128)return h(t,r,n);if(e=o[i.pos++],r|=(127&e)<<24,e<128)return h(t,r,n);if(e=o[i.pos++],r|=(1&e)<<31,e<128)return h(t,r,n);throw new Error("Expected varint not more than 10 bytes");}(n|=(15&(i=r[this.pos]))<<28,t,this))));},readVarint64:function readVarint64(){return this.readVarint(!0);},readSVarint:function readSVarint(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2;},readBoolean:function readBoolean(){return Boolean(this.readVarint());},readString:function readString(){var t=this.readVarint()+this.pos,n=this.pos;return this.pos=t,t-n>=12&&u?function(t,n,i){return u.decode(t.subarray(n,i));}(this.buf,n,t):function(t,n,i){var r="",e=n;for(;e<i;){var o,s,u,a=t[e],h=null,f=a>239?4:a>223?3:a>191?2:1;if(e+f>i)break;1===f?a<128&&(h=a):2===f?128==(192&(o=t[e+1]))&&(h=(31&a)<<6|63&o)<=127&&(h=null):3===f?(o=t[e+1],s=t[e+2],128==(192&o)&&128==(192&s)&&((h=(15&a)<<12|(63&o)<<6|63&s)<=2047||h>=55296&&h<=57343)&&(h=null)):4===f&&(o=t[e+1],s=t[e+2],u=t[e+3],128==(192&o)&&128==(192&s)&&128==(192&u)&&((h=(15&a)<<18|(63&o)<<12|(63&s)<<6|63&u)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,f=1):h>65535&&(h-=65536,r+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),r+=String.fromCharCode(h),e+=f;}return r;}(this.buf,n,t);},readBytes:function readBytes(){var t=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,t);return this.pos=t,n;},readPackedVarint:function readPackedVarint(t,n){if(this.type!==e.Bytes)return t.push(this.readVarint(n));var i=a(this);for(t=t||[];this.pos<i;){t.push(this.readVarint(n));}return t;},readPackedSVarint:function readPackedSVarint(t){if(this.type!==e.Bytes)return t.push(this.readSVarint());var n=a(this);for(t=t||[];this.pos<n;){t.push(this.readSVarint());}return t;},readPackedBoolean:function readPackedBoolean(t){if(this.type!==e.Bytes)return t.push(this.readBoolean());var n=a(this);for(t=t||[];this.pos<n;){t.push(this.readBoolean());}return t;},readPackedFloat:function readPackedFloat(t){if(this.type!==e.Bytes)return t.push(this.readFloat());var n=a(this);for(t=t||[];this.pos<n;){t.push(this.readFloat());}return t;},readPackedDouble:function readPackedDouble(t){if(this.type!==e.Bytes)return t.push(this.readDouble());var n=a(this);for(t=t||[];this.pos<n;){t.push(this.readDouble());}return t;},readPackedFixed32:function readPackedFixed32(t){if(this.type!==e.Bytes)return t.push(this.readFixed32());var n=a(this);for(t=t||[];this.pos<n;){t.push(this.readFixed32());}return t;},readPackedSFixed32:function readPackedSFixed32(t){if(this.type!==e.Bytes)return t.push(this.readSFixed32());var n=a(this);for(t=t||[];this.pos<n;){t.push(this.readSFixed32());}return t;},readPackedFixed64:function readPackedFixed64(t){if(this.type!==e.Bytes)return t.push(this.readFixed64());var n=a(this);for(t=t||[];this.pos<n;){t.push(this.readFixed64());}return t;},readPackedSFixed64:function readPackedSFixed64(t){if(this.type!==e.Bytes)return t.push(this.readSFixed64());var n=a(this);for(t=t||[];this.pos<n;){t.push(this.readSFixed64());}return t;},skip:function skip(t){var n=7&t;if(n===e.Varint)for(;this.buf[this.pos++]>127;){;}else if(n===e.Bytes)this.pos=this.readVarint()+this.pos;else if(n===e.Fixed32)this.pos+=4;else{if(n!==e.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8;}},writeTag:function writeTag(t,n){this.writeVarint(t<<3|n);},realloc:function realloc(t){for(var n=this.length||16;n<this.pos+t;){n*=2;}if(n!==this.length){var i=new Uint8Array(n);i.set(this.buf),this.buf=i,this.length=n;}},finish:function finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length);},writeFixed32:function writeFixed32(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4;},writeSFixed32:function writeSFixed32(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4;},writeFixed64:function writeFixed64(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*s),this.pos+4),this.pos+=8;},writeSFixed64:function writeSFixed64(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*s),this.pos+4),this.pos+=8;},writeVarint:function writeVarint(t){(t=+t||0)>268435455||t<0?function(t,n){var i,r;t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),function(t,n,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t;}(i,0,n),function(t,n){var i=(7&t)<<4;if(n.buf[n.pos++]|=i|((t>>>=3)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;n.buf[n.pos++]=127&t;}(r,n);}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))));},writeSVarint:function writeSVarint(t){this.writeVarint(t<0?2*-t-1:2*t);},writeBoolean:function writeBoolean(t){this.writeVarint(Boolean(t));},writeString:function writeString(t){t=String(t),this.realloc(4*t.length),this.pos++;var n=this.pos;this.pos=function(t,n,i){for(var r,e,o=0;o<n.length;o++){if((r=n.charCodeAt(o))>55295&&r<57344){if(!e){r>56319||o+1===n.length?(t[i++]=239,t[i++]=191,t[i++]=189):e=r;continue;}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,e=r;continue;}r=e-55296<<10|r-56320|65536,e=null;}else e&&(t[i++]=239,t[i++]=191,t[i++]=189,e=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128);}return i;}(this.buf,t,this.pos);var i=this.pos-n;i>=128&&f(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i;},writeFloat:function writeFloat(t){this.realloc(4),r.write(this.buf,t,this.pos,!0,23,4),this.pos+=4;},writeDouble:function writeDouble(t){this.realloc(8),r.write(this.buf,t,this.pos,!0,52,8),this.pos+=8;},writeBytes:function writeBytes(t){var n=t.length;this.writeVarint(n),this.realloc(n);for(var i=0;i<n;i++){this.buf[this.pos++]=t[i];}},writeRawMessage:function writeRawMessage(t,n){this.pos++;var i=this.pos;t(n,this);var r=this.pos-i;r>=128&&f(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r;},writeMessage:function writeMessage(t,n,i){this.writeTag(t,e.Bytes),this.writeRawMessage(n,i);},writePackedVarint:function writePackedVarint(t,n){n.length&&this.writeMessage(t,c,n);},writePackedSVarint:function writePackedSVarint(t,n){n.length&&this.writeMessage(t,l,n);},writePackedBoolean:function writePackedBoolean(t,n){n.length&&this.writeMessage(t,d,n);},writePackedFloat:function writePackedFloat(t,n){n.length&&this.writeMessage(t,v,n);},writePackedDouble:function writePackedDouble(t,n){n.length&&this.writeMessage(t,p,n);},writePackedFixed32:function writePackedFixed32(t,n){n.length&&this.writeMessage(t,y,n);},writePackedSFixed32:function writePackedSFixed32(t,n){n.length&&this.writeMessage(t,m,n);},writePackedFixed64:function writePackedFixed64(t,n){n.length&&this.writeMessage(t,w,n);},writePackedSFixed64:function writePackedSFixed64(t,n){n.length&&this.writeMessage(t,g,n);},writeBytesField:function writeBytesField(t,n){this.writeTag(t,e.Bytes),this.writeBytes(n);},writeFixed32Field:function writeFixed32Field(t,n){this.writeTag(t,e.Fixed32),this.writeFixed32(n);},writeSFixed32Field:function writeSFixed32Field(t,n){this.writeTag(t,e.Fixed32),this.writeSFixed32(n);},writeFixed64Field:function writeFixed64Field(t,n){this.writeTag(t,e.Fixed64),this.writeFixed64(n);},writeSFixed64Field:function writeSFixed64Field(t,n){this.writeTag(t,e.Fixed64),this.writeSFixed64(n);},writeVarintField:function writeVarintField(t,n){this.writeTag(t,e.Varint),this.writeVarint(n);},writeSVarintField:function writeSVarintField(t,n){this.writeTag(t,e.Varint),this.writeSVarint(n);},writeStringField:function writeStringField(t,n){this.writeTag(t,e.Bytes),this.writeString(n);},writeFloatField:function writeFloatField(t,n){this.writeTag(t,e.Fixed32),this.writeFloat(n);},writeDoubleField:function writeDoubleField(t,n){this.writeTag(t,e.Fixed64),this.writeDouble(n);},writeBooleanField:function writeBooleanField(t,n){this.writeVarintField(t,Boolean(n));}};},72:function _(t){t.exports=function(){"use strict";function t(t,r,e,o,s){!function t(i,r,e,o,s){for(;o>e;){if(o-e>600){var u=o-e+1,a=r-e+1,h=Math.log(u),f=.5*Math.exp(2*h/3),c=.5*Math.sqrt(h*f*(u-f)/u)*(a-u/2<0?-1:1);t(i,r,Math.max(e,Math.floor(r-a*f/u+c)),Math.min(o,Math.floor(r+(u-a)*f/u+c)),s);}var l=i[r],v=e,p=o;for(n(i,e,r),s(i[o],l)>0&&n(i,e,o);v<p;){for(n(i,v,p),v++,p--;s(i[v],l)<0;){v++;}for(;s(i[p],l)>0;){p--;}}0===s(i[e],l)?n(i,e,p):n(i,++p,o),p<=r&&(e=p+1),r<=p&&(o=p-1);}}(t,r,e||0,o||t.length-1,s||i);}function n(t,n,i){var r=t[n];t[n]=t[i],t[i]=r;}function i(t,n){return t<n?-1:t>n?1:0;}var r=function r(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear();};function e(t,n,i){if(!i)return n.indexOf(t);for(var r=0;r<n.length;r++){if(i(t,n[r]))return r;}return-1;}function o(t,n){s(t,0,t.children.length,n,t);}function s(t,n,i,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var o=n;o<i;o++){var s=t.children[o];u(e,t.leaf?r(s):s);}return e;}function u(t,n){return t.minX=Math.min(t.minX,n.minX),t.minY=Math.min(t.minY,n.minY),t.maxX=Math.max(t.maxX,n.maxX),t.maxY=Math.max(t.maxY,n.maxY),t;}function a(t,n){return t.minX-n.minX;}function h(t,n){return t.minY-n.minY;}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY);}function c(t){return t.maxX-t.minX+(t.maxY-t.minY);}function l(t,n){return t.minX<=n.minX&&t.minY<=n.minY&&n.maxX<=t.maxX&&n.maxY<=t.maxY;}function v(t,n){return n.minX<=t.maxX&&n.minY<=t.maxY&&n.maxX>=t.minX&&n.maxY>=t.minY;}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};}function d(n,i,r,e,o){for(var s=[i,r];s.length;){if(!((r=s.pop())-(i=s.pop())<=e)){var u=i+Math.ceil((r-i)/e/2)*e;t(n,u,i,r,o),s.push(i,u,u,r);}}}return r.prototype.all=function(){return this._all(this.data,[]);},r.prototype.search=function(t){var n=this.data,i=[];if(!v(t,n))return i;for(var r=this.toBBox,e=[];n;){for(var o=0;o<n.children.length;o++){var s=n.children[o],u=n.leaf?r(s):s;v(t,u)&&(n.leaf?i.push(s):l(t,u)?this._all(s,i):e.push(s));}n=e.pop();}return i;},r.prototype.collides=function(t){var n=this.data;if(!v(t,n))return!1;for(var i=[];n;){for(var r=0;r<n.children.length;r++){var e=n.children[r],o=n.leaf?this.toBBox(e):e;if(v(t,o)){if(n.leaf||l(t,o))return!0;i.push(e);}}n=i.pop();}return!1;},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var n=0;n<t.length;n++){this.insert(t[n]);}return this;}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length){if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r;}this._insert(i,this.data.height-i.height-1,!0);}}else this.data=i;return this;},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this;},r.prototype.clear=function(){return this.data=p([]),this;},r.prototype.remove=function(t,n){if(!t)return this;for(var i,r,o,s=this.data,u=this.toBBox(t),a=[],h=[];s||a.length;){if(s||(s=a.pop(),r=a[a.length-1],i=h.pop(),o=!0),s.leaf){var f=e(t,s.children,n);if(-1!==f)return s.children.splice(f,1),a.push(s),this._condense(a),this;}o||s.leaf||!l(s,u)?r?(i++,s=r.children[i],o=!1):s=null:(a.push(s),h.push(i),i=0,r=s,s=s.children[0]);}return this;},r.prototype.toBBox=function(t){return t;},r.prototype.compareMinX=function(t,n){return t.minX-n.minX;},r.prototype.compareMinY=function(t,n){return t.minY-n.minY;},r.prototype.toJSON=function(){return this.data;},r.prototype.fromJSON=function(t){return this.data=t,this;},r.prototype._all=function(t,n){for(var i=[];t;){t.leaf?n.push.apply(n,t.children):i.push.apply(i,t.children),t=i.pop();}return n;},r.prototype._build=function(t,n,i,r){var e,s=i-n+1,u=this._maxEntries;if(s<=u)return o(e=p(t.slice(n,i+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(s)/Math.log(u)),u=Math.ceil(s/Math.pow(u,r-1))),(e=p([])).leaf=!1,e.height=r;var a=Math.ceil(s/u),h=a*Math.ceil(Math.sqrt(u));d(t,n,i,h,this.compareMinX);for(var f=n;f<=i;f+=h){var c=Math.min(f+h-1,i);d(t,f,c,a,this.compareMinY);for(var l=f;l<=c;l+=a){var v=Math.min(l+a-1,c);e.children.push(this._build(t,l,v,r-1));}}return o(e,this.toBBox),e;},r.prototype._chooseSubtree=function(t,n,i,r){for(;r.push(n),!n.leaf&&r.length-1!==i;){for(var e=1/0,o=1/0,s=void 0,u=0;u<n.children.length;u++){var a=n.children[u],h=f(a),c=(l=t,v=a,(Math.max(v.maxX,l.maxX)-Math.min(v.minX,l.minX))*(Math.max(v.maxY,l.maxY)-Math.min(v.minY,l.minY))-h);c<o?(o=c,e=h<e?h:e,s=a):c===o&&h<e&&(e=h,s=a);}n=s||n.children[0];}var l,v;return n;},r.prototype._insert=function(t,n,i){var r=i?t:this.toBBox(t),e=[],o=this._chooseSubtree(r,this.data,n,e);for(o.children.push(t),u(o,r);n>=0&&e[n].children.length>this._maxEntries;){this._split(e,n),n--;}this._adjustParentBBoxes(r,e,n);},r.prototype._split=function(t,n){var i=t[n],r=i.children.length,e=this._minEntries;this._chooseSplitAxis(i,e,r);var s=this._chooseSplitIndex(i,e,r),u=p(i.children.splice(s,i.children.length-s));u.height=i.height,u.leaf=i.leaf,o(i,this.toBBox),o(u,this.toBBox),n?t[n-1].children.push(u):this._splitRoot(i,u);},r.prototype._splitRoot=function(t,n){this.data=p([t,n]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox);},r.prototype._chooseSplitIndex=function(t,n,i){for(var r,e,o,u,a,h,c,l=1/0,v=1/0,p=n;p<=i-n;p++){var d=s(t,0,p,this.toBBox),y=s(t,p,i,this.toBBox),m=(e=d,o=y,u=void 0,a=void 0,h=void 0,c=void 0,u=Math.max(e.minX,o.minX),a=Math.max(e.minY,o.minY),h=Math.min(e.maxX,o.maxX),c=Math.min(e.maxY,o.maxY),Math.max(0,h-u)*Math.max(0,c-a)),w=f(d)+f(y);m<l?(l=m,r=p,v=w<v?w:v):m===l&&w<v&&(v=w,r=p);}return r||i-n;},r.prototype._chooseSplitAxis=function(t,n,i){var r=t.leaf?this.compareMinX:a,e=t.leaf?this.compareMinY:h;this._allDistMargin(t,n,i,r)<this._allDistMargin(t,n,i,e)&&t.children.sort(r);},r.prototype._allDistMargin=function(t,n,i,r){t.children.sort(r);for(var e=this.toBBox,o=s(t,0,n,e),a=s(t,i-n,i,e),h=c(o)+c(a),f=n;f<i-n;f++){var l=t.children[f];u(o,t.leaf?e(l):l),h+=c(o);}for(var v=i-n-1;v>=n;v--){var p=t.children[v];u(a,t.leaf?e(p):p),h+=c(a);}return h;},r.prototype._adjustParentBBoxes=function(t,n,i){for(var r=i;r>=0;r--){u(n[r],t);}},r.prototype._condense=function(t){for(var n=t.length-1,i=void 0;n>=0;n--){0===t[n].children.length?n>0?(i=t[n-1].children).splice(i.indexOf(t[n]),1):this.clear():o(t[n],this.toBBox);}},r;}();},760:function _(t){var n=function(t){"use strict";var n,i=Object.prototype,r=i.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},o=e.iterator||"@@iterator",s=e.asyncIterator||"@@asyncIterator",u=e.toStringTag||"@@toStringTag";function a(t,n,i){return Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[n];}try{a({},"");}catch(t){a=function a(t,n,i){return t[n]=i;};}function h(t,n,i,r){var e=n&&n.prototype instanceof y?n:y,o=Object.create(e.prototype),s=new T(r||[]);return o._invoke=function(t,n,i){var r=c;return function(e,o){if(r===v)throw new Error("Generator is already running");if(r===p){if("throw"===e)throw o;return P();}for(i.method=e,i.arg=o;;){var s=i.delegate;if(s){var u=O(s,i);if(u){if(u===d)continue;return u;}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===c)throw r=p,i.arg;i.dispatchException(i.arg);}else"return"===i.method&&i.abrupt("return",i.arg);r=v;var a=f(t,n,i);if("normal"===a.type){if(r=i.done?p:l,a.arg===d)continue;return{value:a.arg,done:i.done};}"throw"===a.type&&(r=p,i.method="throw",i.arg=a.arg);}};}(t,i,s),o;}function f(t,n,i){try{return{type:"normal",arg:t.call(n,i)};}catch(t){return{type:"throw",arg:t};}}t.wrap=h;var c="suspendedStart",l="suspendedYield",v="executing",p="completed",d={};function y(){}function m(){}function w(){}var g={};a(g,o,function(){return this;});var b=Object.getPrototypeOf,x=b&&b(b(A([])));x&&x!==i&&r.call(x,o)&&(g=x);var M=w.prototype=y.prototype=Object.create(g);function _(t){["next","throw","return"].forEach(function(n){a(t,n,function(t){return this._invoke(n,t);});});}function S(t,n){function i(e,o,s,u){var a=f(t[e],t,o);if("throw"!==a.type){var h=a.arg,c=h.value;return c&&"object"==_typeof(c)&&r.call(c,"__await")?n.resolve(c.__await).then(function(t){i("next",t,s,u);},function(t){i("throw",t,s,u);}):n.resolve(c).then(function(t){h.value=t,s(h);},function(t){return i("throw",t,s,u);});}u(a.arg);}var e;this._invoke=function(t,r){function o(){return new n(function(n,e){i(t,r,n,e);});}return e=e?e.then(o,o):o();};}function O(t,i){var r=t.iterator[i.method];if(r===n){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=n,O(t,i),"throw"===i.method))return d;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method");}return d;}var e=f(r,t.iterator,i.arg);if("throw"===e.type)return i.method="throw",i.arg=e.arg,i.delegate=null,d;var o=e.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=n),i.delegate=null,d):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,d);}function j(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n);}function E(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n;}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0);}function A(t){if(t){var i=t[o];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,s=function i(){for(;++e<t.length;){if(r.call(t,e))return i.value=t[e],i.done=!1,i;}return i.value=n,i.done=!0,i;};return s.next=s;}}return{next:P};}function P(){return{value:n,done:!0};}return m.prototype=w,a(M,"constructor",w),a(w,"constructor",m),m.displayName=a(w,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===m||"GeneratorFunction"===(n.displayName||n.name));},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,a(t,u,"GeneratorFunction")),t.prototype=Object.create(M),t;},t.awrap=function(t){return{__await:t};},_(S.prototype),a(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(n,i,r,e,o){void 0===o&&(o=Promise);var s=new S(h(n,i,r,e),o);return t.isGeneratorFunction(i)?s:s.next().then(function(t){return t.done?t.value:s.next();});},_(M),a(M,u,"Generator"),a(M,o,function(){return this;}),a(M,"toString",function(){return"[object Generator]";}),t.keys=function(t){var n=[];for(var i in t){n.push(i);}return n.reverse(),function i(){for(;n.length;){var r=n.pop();if(r in t)return i.value=r,i.done=!1,i;}return i.done=!0,i;};},t.values=A,T.prototype={constructor:T,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(E),!t)for(var i in this){"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=n);}},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var i=this;function e(r,e){return u.type="throw",u.arg=t,i.next=r,e&&(i.method="next",i.arg=n),!!e;}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],u=s.completion;if("root"===s.tryLoc)return e("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),h=r.call(s,"finallyLoc");if(a&&h){if(this.prev<s.catchLoc)return e(s.catchLoc,!0);if(this.prev<s.finallyLoc)return e(s.finallyLoc);}else if(a){if(this.prev<s.catchLoc)return e(s.catchLoc,!0);}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return e(s.finallyLoc);}}}},abrupt:function abrupt(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc<=this.prev&&r.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var o=e;break;}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=n,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s);},complete:function complete(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),d;},finish:function finish(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),E(i),d;}},catch:function _catch(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var e=r.arg;E(i);}return e;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,i,r){return this.delegate={iterator:A(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=n),d;}},t;}(t.exports);try{regeneratorRuntime=n;}catch(t){"object"==(typeof globalThis==="undefined"?"undefined":_typeof(globalThis))?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n);}},496:function _(t){function n(t,n){var i=new RegExp(n,"g"),r=t.match(i);return r?r.length:0;}t.exports=n,t.exports.default=n;},617:function _(t,n,i){var r=i(279),e=i(282),o=i(496);function s(t,n,i){var s=i&&i.debug||!1,u=!(i&&!1===_typeof(i.nested)),a=i&&i.startIndex||0;s&&console.log("[xml-utils] starting findTagByName with",n," and ",i);var h=r(t,"<".concat(n,"[ >/]"),a);if(s&&console.log("[xml-utils] start:",h),-1===h)return;var f=t.slice(h+n.length);var c=e(f,"^[^<]*[ /]>",0);var l=-1!==c&&"/"===f[c-1];if(s&&console.log("[xml-utils] selfClosing:",l),!1===l)if(u){var _t3=0,_i7=1,_r5=0;for(;-1!==(c=e(f,"[ /]"+n+">",_t3));){var _e3=f.substring(_t3,c+1);if(_i7+=o(_e3,"<"+n),_r5+=o(_e3,"/"+n+">"),_r5>=_i7)break;_t3=c;}}else c=e(f,"[ /]"+n+">",0);var v=h+n.length+c+1;if(s&&console.log("[xml-utils] end:",v),-1===v)return;var p=t.slice(h,v);var d;return d=l?null:p.slice(p.indexOf(">")+1,p.lastIndexOf("<")),{inner:d,outer:p,start:h,end:v};}t.exports=s,t.exports.default=s;},51:function _(t,n,i){var r=i(617);function e(t,n,i){var e=[],o=i&&i.debug||!1,s=!i||"boolean"!=typeof i.nested||i.nested;var u,a=i&&i.startIndex||0;for(;u=r(t,n,{debug:o,startIndex:a});){a=s?u.start+1+n.length:u.end,e.push(u);}return o&&console.log("findTagsByName found",e.length,"tags"),e;}t.exports=e,t.exports.default=e;},802:function _(t){function n(t,n,i){var r=i&&i.debug||!1;r&&console.log("getting "+n+" in "+t);var e="object"==_typeof(t)?t.outer:t,o="".concat(n,"\\=\"([^\"]*)\"");r&&console.log("pattern:",o);var s=new RegExp(o).exec(e);if(r&&console.log("match:",s),s)return s[1];}t.exports=n,t.exports.default=n;},282:function _(t){function n(t,n,i){var r=new RegExp(n).exec(t.slice(i));return r?i+r.index+r[0].length-1:-1;}t.exports=n,t.exports.default=n;},279:function _(t){function n(t,n,i){var r=new RegExp(n).exec(t.slice(i));return r?i+r.index:-1;}t.exports=n,t.exports.default=n;},518:function _(t){"use strict";t.exports=function(t){t.prototype[Symbol.iterator]=/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _t4;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_t4=this.head;case 1:if(!_t4){_context.next=7;break;}_context.next=4;return _t4.value;case 4:_t4=_t4.next;_context.next=1;break;case 7:case"end":return _context.stop();}}},_callee,this);});};},692:function _(t,n,i){"use strict";function r(t){var n=this;if(n instanceof r||(n=new r()),n.tail=null,n.head=null,n.length=0,t&&"function"==typeof t.forEach)t.forEach(function(t){n.push(t);});else if(arguments.length>0)for(var i=0,e=arguments.length;i<e;i++){n.push(arguments[i]);}return n;}function e(t,n,i){var r=n===t.head?new u(i,null,n,t):new u(i,n,n.next,t);return null===r.next&&(t.tail=r),null===r.prev&&(t.head=r),t.length++,r;}function o(t,n){t.tail=new u(n,t.tail,null,t),t.head||(t.head=t.tail),t.length++;}function s(t,n){t.head=new u(n,null,t.head,t),t.tail||(t.tail=t.head),t.length++;}function u(t,n,i,r){if(!(this instanceof u))return new u(t,n,i,r);this.list=r,this.value=t,n?(n.next=this,this.prev=n):this.prev=null,i?(i.prev=this,this.next=i):this.next=null;}t.exports=r,r.Node=u,r.create=r,r.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var n=t.next,i=t.prev;return n&&(n.prev=i),i&&(i.next=n),t===this.head&&(this.head=n),t===this.tail&&(this.tail=i),t.list.length--,t.next=null,t.prev=null,t.list=null,n;},r.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var n=this.head;t.list=this,t.next=n,n&&(n.prev=t),this.head=t,this.tail||(this.tail=t),this.length++;}},r.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var n=this.tail;t.list=this,t.prev=n,n&&(n.next=t),this.tail=t,this.head||(this.head=t),this.length++;}},r.prototype.push=function(){for(var t=0,n=arguments.length;t<n;t++){o(this,arguments[t]);}return this.length;},r.prototype.unshift=function(){for(var t=0,n=arguments.length;t<n;t++){s(this,arguments[t]);}return this.length;},r.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t;}},r.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t;}},r.prototype.forEach=function(t,n){n=n||this;for(var i=this.head,r=0;null!==i;r++){t.call(n,i.value,r,this),i=i.next;}},r.prototype.forEachReverse=function(t,n){n=n||this;for(var i=this.tail,r=this.length-1;null!==i;r--){t.call(n,i.value,r,this),i=i.prev;}},r.prototype.get=function(t){for(var n=0,i=this.head;null!==i&&n<t;n++){i=i.next;}if(n===t&&null!==i)return i.value;},r.prototype.getReverse=function(t){for(var n=0,i=this.tail;null!==i&&n<t;n++){i=i.prev;}if(n===t&&null!==i)return i.value;},r.prototype.map=function(t,n){n=n||this;for(var i=new r(),e=this.head;null!==e;){i.push(t.call(n,e.value,this)),e=e.next;}return i;},r.prototype.mapReverse=function(t,n){n=n||this;for(var i=new r(),e=this.tail;null!==e;){i.push(t.call(n,e.value,this)),e=e.prev;}return i;},r.prototype.reduce=function(t,n){var i,r=this.head;if(arguments.length>1)i=n;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,i=this.head.value;}for(var e=0;null!==r;e++){i=t(i,r.value,e),r=r.next;}return i;},r.prototype.reduceReverse=function(t,n){var i,r=this.tail;if(arguments.length>1)i=n;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,i=this.tail.value;}for(var e=this.length-1;null!==r;e--){i=t(i,r.value,e),r=r.prev;}return i;},r.prototype.toArray=function(){for(var t=new Array(this.length),n=0,i=this.head;null!==i;n++){t[n]=i.value,i=i.next;}return t;},r.prototype.toArrayReverse=function(){for(var t=new Array(this.length),n=0,i=this.tail;null!==i;n++){t[n]=i.value,i=i.prev;}return t;},r.prototype.slice=function(t,n){(n=n||this.length)<0&&(n+=this.length),(t=t||0)<0&&(t+=this.length);var i=new r();if(n<t||n<0)return i;t<0&&(t=0),n>this.length&&(n=this.length);for(var e=0,o=this.head;null!==o&&e<t;e++){o=o.next;}for(;null!==o&&e<n;e++,o=o.next){i.push(o.value);}return i;},r.prototype.sliceReverse=function(t,n){(n=n||this.length)<0&&(n+=this.length),(t=t||0)<0&&(t+=this.length);var i=new r();if(n<t||n<0)return i;t<0&&(t=0),n>this.length&&(n=this.length);for(var e=this.length,o=this.tail;null!==o&&e>n;e--){o=o.prev;}for(;null!==o&&e>t;e--,o=o.prev){i.push(o.value);}return i;},r.prototype.splice=function(t,n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var i=0,r=this.head;null!==r&&i<t;i++){r=r.next;}var o=[];for(i=0;r&&i<n;i++){o.push(r.value),r=this.removeNode(r);}null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(i=0;i<(arguments.length<=2?0:arguments.length-2);i++){r=e(this,r,i+2<2||arguments.length<=i+2?void 0:arguments[i+2]);}return o;},r.prototype.reverse=function(){for(var t=this.head,n=this.tail,i=t;null!==i;i=i.prev){var r=i.prev;i.prev=i.next,i.next=r;}return this.head=n,this.tail=t,this;};try{i(518)(r);}catch(t){}},752:function _(){},640:function _(){},630:function _(){},570:function _(t,n,i){"use strict";function r(){return function(){throw new Error("Unimplemented abstract method.");}();}i.d(n,{default:function _default(){return bL;}});var e=0;function o(t){return t.ol_uid||(t.ol_uid=String(++e));}var _s3,u="6.15.1",a=(_s3=function s(t,n){return _s3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_s3(t,n);},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t;}_s3(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i());}),h=function(t){function n(n){var i=this,r="Assertion failed. See https://openlayers.org/en/"+("v"+u.split("-")[0])+"/doc/errors/#"+n+" for details.";return(i=t.call(this,r)||this).code=n,i.name="AssertionError",i.message=r,i;}return a(n,t),n;}(Error);function f(t){t.stopPropagation();}var c=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null;}return t.prototype.preventDefault=function(){this.defaultPrevented=!0;},t.prototype.stopPropagation=function(){this.propagationStopped=!0;},t;}(),l="propertychange",v=function(){function t(){this.disposed=!1;}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal());},t.prototype.disposeInternal=function(){},t;}();function p(t,n,i){for(var r,e,o=i||d,s=0,u=t.length,a=!1;s<u;){(e=+o(t[r=s+(u-s>>1)],n))<0?s=r+1:(u=r,a=!e);}return a?s:~s;}function d(t,n){return t>n?1:t<n?-1:0;}function y(t,n){return t.indexOf(n)>=0;}function m(t,n,i){var r=t.length;if(t[0]<=n)return 0;if(n<=t[r-1])return r-1;var e=void 0;if(i>0){for(e=1;e<r;++e){if(t[e]<n)return e-1;}}else if(i<0){for(e=1;e<r;++e){if(t[e]<=n)return e;}}else for(e=1;e<r;++e){if(t[e]==n)return e;if(t[e]<n)return"function"==typeof i?i(n,t[e-1],t[e])>0?e-1:e:t[e-1]-n<n-t[e]?e-1:e;}return r-1;}function w(t,n,i){for(;n<i;){var r=t[n];t[n]=t[i],t[i]=r,++n,--i;}}function g(t,n){for(var i=Array.isArray(n)?n:[n],r=i.length,e=0;e<r;e++){t[t.length]=i[e];}}function b(t,n){for(var i,r=t.length>>>0,e=0;e<r;e++){if(n(i=t[e],e,t))return i;}return null;}function x(t,n){var i=t.length;if(i!==n.length)return!1;for(var r=0;r<i;r++){if(t[r]!==n[r])return!1;}return!0;}function M(t,n){var i;return!t.every(function(r,e){return i=e,!n(r,e,t);})?i:-1;}function _(t,n,i){var r=n||d;return t.every(function(n,e){if(0===e)return!0;var o=r(t[e-1],n);return!(o>0||i&&0===o);});}function S(){return!0;}function O(){return!1;}function j(){}function E(t){var n,i,r,e=!1;return function(){var o=Array.prototype.slice.call(arguments);return e&&this===r&&x(o,i)||(e=!0,r=this,i=o,n=t.apply(this,arguments)),n;};}function T(t){return function(){var n;try{n=t();}catch(t){return Promise.reject(t);}return n instanceof Promise?n:Promise.resolve(n);}();}var A="function"==typeof Object.assign?Object.assign:function(t,n){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),r=1,e=arguments.length;r<e;++r){var o=arguments[r];if(null!=o)for(var s in o){o.hasOwnProperty(s)&&(i[s]=o[s]);}}return i;};function P(t){for(var n in t){delete t[n];}}var C="function"==typeof Object.values?Object.values:function(t){var n=[];for(var i in t){n.push(t[i]);}return n;};function k(t){var n;for(n in t){return!1;}return!n;}var N=function(){var _t5=function t(n,i){return _t5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t5(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t5(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),I=function(t){function n(n){var i=t.call(this)||this;return i.t=n,i._=null,i.S=null,i.O=null,i;}return N(n,t),n.prototype.addEventListener=function(t,n){if(t&&n){var i=this.O||(this.O={}),r=i[t]||(i[t]=[]);-1===r.indexOf(n)&&r.push(n);}},n.prototype.dispatchEvent=function(t){var n="string"==typeof t,i=n?t:t.type,r=this.O&&this.O[i];if(r){var e=n?new c(t):t;e.target||(e.target=this.t||this);var o,s=this.S||(this.S={}),u=this._||(this._={});i in s||(s[i]=0,u[i]=0),++s[i];for(var a=0,h=r.length;a<h;++a){if(!1===(o="handleEvent"in r[a]?r[a].handleEvent(e):r[a].call(this,e))||e.propagationStopped){o=!1;break;}}if(0==--s[i]){var f=u[i];for(delete u[i];f--;){this.removeEventListener(i,j);}delete s[i];}return o;}},n.prototype.disposeInternal=function(){this.O&&P(this.O);},n.prototype.getListeners=function(t){return this.O&&this.O[t]||void 0;},n.prototype.hasListener=function(t){return!!this.O&&(t?t in this.O:Object.keys(this.O).length>0);},n.prototype.removeEventListener=function(t,n){var i=this.O&&this.O[t];if(i){var r=i.indexOf(n);-1!==r&&(this._&&t in this._?(i[r]=j,++this._[t]):(i.splice(r,1),0===i.length&&delete this.O[t]));}},n;}(v),z="change",L="error",R="contextmenu",F="click",G="dblclick",D="dragenter",q="dragover",U="drop",B="keydown",X="keypress",V="load",W="resize",Y="touchmove",K="wheel";function Z(t,n,_i8,r,e){if(r&&r!==t&&(_i8=_i8.bind(r)),e){var o=_i8;_i8=function i(){t.removeEventListener(n,_i8),o.apply(this,arguments);};}var s={target:t,type:n,listener:_i8};return t.addEventListener(n,_i8),s;}function $(t,n,i,r){return Z(t,n,i,r,!0);}function H(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),P(t));}var J=function(){var _t6=function t(n,i){return _t6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t6(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t6(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Q=function(t){function n(){var n=t.call(this)||this;return n.on=n.onInternal,n.once=n.onceInternal,n.un=n.unInternal,n.T=0,n;}return J(n,t),n.prototype.changed=function(){++this.T,this.dispatchEvent(z);},n.prototype.getRevision=function(){return this.T;},n.prototype.onInternal=function(t,n){if(Array.isArray(t)){for(var i=t.length,r=new Array(i),e=0;e<i;++e){r[e]=Z(this,t[e],n);}return r;}return Z(this,t,n);},n.prototype.onceInternal=function(t,n){var i;if(Array.isArray(t)){var r=t.length;i=new Array(r);for(var e=0;e<r;++e){i[e]=$(this,t[e],n);}}else i=$(this,t,n);return n.ol_key=i,i;},n.prototype.unInternal=function(t,n){var i=n.ol_key;if(i)tt(i);else if(Array.isArray(t))for(var r=0,e=t.length;r<e;++r){this.removeEventListener(t[r],n);}else this.removeEventListener(t,n);},n;}(I);function tt(t){if(Array.isArray(t))for(var n=0,i=t.length;n<i;++n){H(t[n]);}else H(t);}Q.prototype.on,Q.prototype.once,Q.prototype.un;var nt=Q,it=function(){var _t7=function t(n,i){return _t7=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t7(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t7(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),rt=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.key=i,e.oldValue=r,e;}return it(n,t),n;}(c),et=function(t){function n(n){var i=t.call(this)||this;return i.on,i.once,i.un,o(i),i.A=null,void 0!==n&&i.setProperties(n),i;}return it(n,t),n.prototype.get=function(t){var n;return this.A&&this.A.hasOwnProperty(t)&&(n=this.A[t]),n;},n.prototype.getKeys=function(){return this.A&&Object.keys(this.A)||[];},n.prototype.getProperties=function(){return this.A&&A({},this.A)||{};},n.prototype.hasProperties=function(){return!!this.A;},n.prototype.notify=function(t,n){var i;i="change:".concat(t),this.hasListener(i)&&this.dispatchEvent(new rt(i,t,n)),i=l,this.hasListener(i)&&this.dispatchEvent(new rt(i,t,n));},n.prototype.addChangeListener=function(t,n){this.addEventListener("change:".concat(t),n);},n.prototype.removeChangeListener=function(t,n){this.removeEventListener("change:".concat(t),n);},n.prototype.set=function(t,n,i){var r=this.A||(this.A={});if(i)r[t]=n;else{var e=r[t];r[t]=n,e!==n&&this.notify(t,e);}},n.prototype.setProperties=function(t,n){for(var i in t){this.set(i,t[i],n);}},n.prototype.applyProperties=function(t){t.A&&A(this.A||(this.A={}),t.A);},n.prototype.unset=function(t,n){if(this.A&&t in this.A){var i=this.A[t];delete this.A[t],k(this.A)&&(this.A=null),n||this.notify(t,i);}},n;}(nt),ot="add",st="remove",ut=function(){var _t8=function t(n,i){return _t8=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t8(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t8(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),at="length",ht=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.element=i,e.index=r,e;}return ut(n,t),n;}(c),ft=function(t){function n(n,i){var r=t.call(this)||this;r.on,r.once,r.un;var e=i||{};if(r.P=!!e.unique,r.C=n||[],r.P)for(var o=0,s=r.C.length;o<s;++o){r.R(r.C[o],o);}return r.G(),r;}return ut(n,t),n.prototype.clear=function(){for(;this.getLength()>0;){this.pop();}},n.prototype.extend=function(t){for(var n=0,i=t.length;n<i;++n){this.push(t[n]);}return this;},n.prototype.forEach=function(t){for(var n=this.C,i=0,r=n.length;i<r;++i){t(n[i],i,n);}},n.prototype.getArray=function(){return this.C;},n.prototype.item=function(t){return this.C[t];},n.prototype.getLength=function(){return this.get(at);},n.prototype.insertAt=function(t,n){this.P&&this.R(n),this.C.splice(t,0,n),this.G(),this.dispatchEvent(new ht(ot,n,t));},n.prototype.pop=function(){return this.removeAt(this.getLength()-1);},n.prototype.push=function(t){this.P&&this.R(t);var n=this.getLength();return this.insertAt(n,t),this.getLength();},n.prototype.remove=function(t){for(var n=this.C,i=0,r=n.length;i<r;++i){if(n[i]===t)return this.removeAt(i);}},n.prototype.removeAt=function(t){var n=this.C[t];return this.C.splice(t,1),this.G(),this.dispatchEvent(new ht(st,n,t)),n;},n.prototype.setAt=function(t,n){var i=this.getLength();if(t<i){this.P&&this.R(n,t);var r=this.C[t];this.C[t]=n,this.dispatchEvent(new ht(st,r,t)),this.dispatchEvent(new ht(ot,n,t));}else{for(var e=i;e<t;++e){this.insertAt(e,void 0);}this.insertAt(t,n);}},n.prototype.G=function(){this.set(at,this.C.length);},n.prototype.R=function(t,n){for(var i=0,r=this.C.length;i<r;++i){if(this.C[i]===t&&i!==n)throw new h(58);}},n;}(et),ct=ft,lt=0,vt=1,pt=2,dt=3,yt=4;function mt(t){return Math.pow(t,3);}function wt(t){return 1-mt(1-t);}function gt(t){return 3*t*t-2*t*t*t;}function bt(t){return t;}var xt=function(){var _t9=function t(n,i){return _t9=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t9(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t9(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Mt=function(t){function n(n,i,r){var e=t.call(this)||this,o=r||{};return e.tileCoord=n,e.state=i,e.interimTile=null,e.key="",e.D=void 0===o.transition?250:o.transition,e.q={},e.interpolate=!!o.interpolate,e;}return xt(n,t),n.prototype.changed=function(){this.dispatchEvent(z);},n.prototype.release=function(){},n.prototype.getKey=function(){return this.key+"/"+this.tileCoord;},n.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==pt)return this.D=0,t;t=t.interimTile;}while(t);return this;},n.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,n=this;do{if(t.getState()==pt){t.interimTile=null;break;}t.getState()==vt?n=t:t.getState()==lt?n.interimTile=t.interimTile:n=t,t=n.interimTile;}while(t);}},n.prototype.getTileCoord=function(){return this.tileCoord;},n.prototype.getState=function(){return this.state;},n.prototype.setState=function(t){if(this.state!==dt&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed();},n.prototype.load=function(){r();},n.prototype.getAlpha=function(t,n){if(!this.D)return 1;var i=this.q[t];if(i){if(-1===i)return 1;}else i=n,this.q[t]=i;var r=n-i+1e3/60;return r>=this.D?1:mt(r/this.D);},n.prototype.inTransition=function(t){return!!this.D&&-1!==this.q[t];},n.prototype.endTransition=function(t){this.D&&(this.q[t]=-1);},n;}(I),_t=Mt,St=function(){var _t10=function t(n,i){return _t10=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t10(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t10(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Ot=function(t){function n(n){var i=this,r=lt;return(i=t.call(this,n.tileCoord,r,{transition:n.transition,interpolate:n.interpolate})||this).U=n.loader,i.B=null,i.V=null,i.W=n.size||[256,256],i;}return St(n,t),n.prototype.getSize=function(){return this.W;},n.prototype.getData=function(){return this.B;},n.prototype.getError=function(){return this.V;},n.prototype.load=function(){if(this.state===lt||this.state===dt){this.state=vt,this.changed();var t=this;this.U().then(function(n){t.B=n,t.state=pt,t.changed();}).catch(function(n){t.V=n,t.state=dt,t.changed();});}},n;}(_t),jt=Ot;function Et(t,n){if(!t)throw new h(n);}var Tt=function(){var _t11=function t(n,i){return _t11=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t11(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t11(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),At=function(t){function n(n){var i=t.call(this)||this;if(i.on,i.once,i.un,i.K=void 0,i.$="geometry",i.H=null,i.tt=void 0,i.nt=null,i.addChangeListener(i.$,i.it),n)if("function"==typeof n.getSimplifiedGeometry){var r=n;i.setGeometry(r);}else{var e=n;i.setProperties(e);}return i;}return Tt(n,t),n.prototype.clone=function(){var t=new n(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var r=this.getStyle();return r&&t.setStyle(r),t;},n.prototype.getGeometry=function(){return this.get(this.$);},n.prototype.getId=function(){return this.K;},n.prototype.getGeometryName=function(){return this.$;},n.prototype.getStyle=function(){return this.H;},n.prototype.getStyleFunction=function(){return this.tt;},n.prototype.rt=function(){this.changed();},n.prototype.it=function(){this.nt&&(H(this.nt),this.nt=null);var t=this.getGeometry();t&&(this.nt=Z(t,z,this.rt,this)),this.changed();},n.prototype.setGeometry=function(t){this.set(this.$,t);},n.prototype.setStyle=function(t){this.H=t,this.tt=t?Pt(t):void 0,this.changed();},n.prototype.setId=function(t){this.K=t,this.changed();},n.prototype.setGeometryName=function(t){this.removeChangeListener(this.$,this.it),this.$=t,this.addChangeListener(this.$,this.it),this.it();},n;}(et);function Pt(t){return"function"==typeof t?t:(Array.isArray(t)?n=t:(Et("function"==typeof t.getZIndex,41),n=[t]),function(){return n;});var n;}var Ct=At,kt="XY",Nt="XYZ",It="XYM",zt="XYZM",Lt={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Rt={9001:Lt.METERS,9002:Lt.FEET,9003:Lt.USFEET,9101:Lt.RADIANS,9102:Lt.DEGREES};function Ft(t){return Rt[t];}var Gt={};Gt[Lt.RADIANS]=6370997/(2*Math.PI),Gt[Lt.DEGREES]=2*Math.PI*6370997/360,Gt[Lt.FEET]=.3048,Gt[Lt.METERS]=1,Gt[Lt.USFEET]=1200/3937;var Dt,qt=Lt,Ut="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",Bt=-1!==Ut.indexOf("firefox"),Xt=-1!==Ut.indexOf("safari")&&-1==Ut.indexOf("chrom"),Vt=Xt&&!!(Ut.indexOf("version/15.4")>=0||Ut.match(/cpu (os|iphone os) 15_4 like mac os x/)),Wt=-1!==Ut.indexOf("webkit")&&-1==Ut.indexOf("edge"),Yt=-1!==Ut.indexOf("macintosh"),Kt="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Zt="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,$t="undefined"!=typeof Image&&Image.prototype.decode,Ht=function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function get(){t=!0;}});window.addEventListener("_",null,n),window.removeEventListener("_",null,n);}catch(t){}return t;}(),Jt=new Array(6);function Qt(){return[1,0,0,1,0,0];}function tn(t){return rn(t,1,0,0,1,0,0);}function nn(t,n){var i=t[0],r=t[1],e=t[2],o=t[3],s=t[4],u=t[5],a=n[0],h=n[1],f=n[2],c=n[3],l=n[4],v=n[5];return t[0]=i*a+e*h,t[1]=r*a+o*h,t[2]=i*f+e*c,t[3]=r*f+o*c,t[4]=i*l+e*v+s,t[5]=r*l+o*v+u,t;}function rn(t,n,i,r,e,o,s){return t[0]=n,t[1]=i,t[2]=r,t[3]=e,t[4]=o,t[5]=s,t;}function en(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t;}function on(t,n){var i=n[0],r=n[1];return n[0]=t[0]*i+t[2]*r+t[4],n[1]=t[1]*i+t[3]*r+t[5],n;}function sn(t,n){var i=Math.cos(n),r=Math.sin(n);return nn(t,rn(Jt,i,r,-r,i,0,0));}function un(t,n,i){return nn(t,rn(Jt,n,0,0,i,0,0));}function an(t,n,i){return rn(t,n,0,0,i,0,0);}function hn(t,n,i){return nn(t,rn(Jt,1,0,0,1,n,i));}function fn(t,n,i,r,e,o,s,u){var a=Math.sin(o),h=Math.cos(o);return t[0]=r*h,t[1]=e*a,t[2]=-r*a,t[3]=e*h,t[4]=s*r*h-u*r*a+n,t[5]=s*e*a+u*e*h+i,t;}function cn(t,n){var i=ln(n);Et(0!==i,32);var r=n[0],e=n[1],o=n[2],s=n[3],u=n[4],a=n[5];return t[0]=s/i,t[1]=-e/i,t[2]=-o/i,t[3]=r/i,t[4]=(o*a-s*u)/i,t[5]=-(r*a-e*u)/i,t;}function ln(t){return t[0]*t[3]-t[1]*t[2];}function vn(t){var n="matrix("+t.join(", ")+")";if(Zt)return n;var i=Dt||(Dt=document.createElement("div"));return i.style.transform=n,i.style.transform;}var pn=0,dn=1,yn=2,mn=4,wn=8,gn=16;function bn(t){for(var n=Tn(),i=0,r=t.length;i<r;++i){Ln(n,t[i]);}return n;}function xn(t,n,i){return i?(i[0]=t[0]-n,i[1]=t[1]-n,i[2]=t[2]+n,i[3]=t[3]+n,i):[t[0]-n,t[1]-n,t[2]+n,t[3]+n];}function Mn(t,n){return n?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):t.slice();}function _n(t,n,i){var r,e;return(r=n<t[0]?t[0]-n:t[2]<n?n-t[2]:0)*r+(e=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*e;}function Sn(t,n){return jn(t,n[0],n[1]);}function On(t,n){return t[0]<=n[0]&&n[2]<=t[2]&&t[1]<=n[1]&&n[3]<=t[3];}function jn(t,n,i){return t[0]<=n&&n<=t[2]&&t[1]<=i&&i<=t[3];}function En(t,n){var i=t[0],r=t[1],e=t[2],o=t[3],s=n[0],u=n[1],a=pn;return s<i?a|=gn:s>e&&(a|=mn),u<r?a|=wn:u>o&&(a|=yn),a===pn&&(a=dn),a;}function Tn(){return[1/0,1/0,-1/0,-1/0];}function An(t,n,i,r,e){return e?(e[0]=t,e[1]=n,e[2]=i,e[3]=r,e):[t,n,i,r];}function Pn(t){return An(1/0,1/0,-1/0,-1/0,t);}function Cn(t,n){var i=t[0],r=t[1];return An(i,r,i,r,n);}function kn(t,n,i,r,e){return Fn(Pn(e),t,n,i,r);}function Nn(t,n){return t[0]==n[0]&&t[2]==n[2]&&t[1]==n[1]&&t[3]==n[3];}function In(t,n,i){return Math.abs(t[0]-n[0])<i&&Math.abs(t[2]-n[2])<i&&Math.abs(t[1]-n[1])<i&&Math.abs(t[3]-n[3])<i;}function zn(t,n){return n[0]<t[0]&&(t[0]=n[0]),n[2]>t[2]&&(t[2]=n[2]),n[1]<t[1]&&(t[1]=n[1]),n[3]>t[3]&&(t[3]=n[3]),t;}function Ln(t,n){n[0]<t[0]&&(t[0]=n[0]),n[0]>t[2]&&(t[2]=n[0]),n[1]<t[1]&&(t[1]=n[1]),n[1]>t[3]&&(t[3]=n[1]);}function Rn(t,n){for(var i=0,r=n.length;i<r;++i){Ln(t,n[i]);}return t;}function Fn(t,n,i,r,e){for(;i<r;i+=e){Dn(t,n[i],n[i+1]);}return t;}function Gn(t,n){for(var i=0,r=n.length;i<r;++i){Rn(t,n[i]);}return t;}function Dn(t,n,i){t[0]=Math.min(t[0],n),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],n),t[3]=Math.max(t[3],i);}function qn(t,n){var i;return(i=n(Bn(t)))||(i=n(Xn(t)))||(i=n(Jn(t)))?i:(i=n(Hn(t)))||!1;}function Un(t){var n=0;return ni(t)||(n=Qn(t)*Zn(t)),n;}function Bn(t){return[t[0],t[1]];}function Xn(t){return[t[2],t[1]];}function Vn(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2];}function Wn(t,n){var i;return"bottom-left"===n?i=Bn(t):"bottom-right"===n?i=Xn(t):"top-left"===n?i=Hn(t):"top-right"===n?i=Jn(t):Et(!1,13),i;}function Yn(t,n,i,r,e){var o=Kn(t,n,i,r),s=o[0],u=o[1],a=o[2],h=o[3],f=o[4],c=o[5],l=o[6],v=o[7];return An(Math.min(s,a,f,l),Math.min(u,h,c,v),Math.max(s,a,f,l),Math.max(u,h,c,v),e);}function Kn(t,n,i,r){var e=n*r[0]/2,o=n*r[1]/2,s=Math.cos(i),u=Math.sin(i),a=e*s,h=e*u,f=o*s,c=o*u,l=t[0],v=t[1];return[l-a+c,v-h-f,l-a-c,v-h+f,l+a-c,v+h+f,l+a+c,v+h-f,l-a+c,v-h-f];}function Zn(t){return t[3]-t[1];}function $n(t,n,i){var r=i||[1/0,1/0,-1/0,-1/0];return ti(t,n)?(t[0]>n[0]?r[0]=t[0]:r[0]=n[0],t[1]>n[1]?r[1]=t[1]:r[1]=n[1],t[2]<n[2]?r[2]=t[2]:r[2]=n[2],t[3]<n[3]?r[3]=t[3]:r[3]=n[3]):Pn(r),r;}function Hn(t){return[t[0],t[3]];}function Jn(t){return[t[2],t[3]];}function Qn(t){return t[2]-t[0];}function ti(t,n){return t[0]<=n[2]&&t[2]>=n[0]&&t[1]<=n[3]&&t[3]>=n[1];}function ni(t){return t[2]<t[0]||t[3]<t[1];}function ii(t,n){return n?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):t;}function ri(t,n){var i=(t[2]-t[0])/2*(n-1),r=(t[3]-t[1])/2*(n-1);t[0]-=i,t[2]+=i,t[1]-=r,t[3]+=r;}function ei(t,n,i){var r=!1,e=En(t,n),o=En(t,i);if(e===dn||o===dn)r=!0;else{var s=t[0],u=t[1],a=t[2],h=t[3],f=n[0],c=n[1],l=i[0],v=i[1],p=(v-c)/(l-f),d=void 0,y=void 0;o&yn&&!(e&yn)&&(r=(d=l-(v-h)/p)>=s&&d<=a),r||!(o&mn)||e&mn||(r=(y=v-(l-a)*p)>=u&&y<=h),r||!(o&wn)||e&wn||(r=(d=l-(v-u)/p)>=s&&d<=a),r||!(o&gn)||e&gn||(r=(y=v-(l-s)*p)>=u&&y<=h);}return r;}function oi(t,n,i,r){var e=[];if(r>1)for(var o=t[2]-t[0],s=t[3]-t[1],u=0;u<r;++u){e.push(t[0]+o*u/r,t[1],t[2],t[1]+s*u/r,t[2]-o*u/r,t[3],t[0],t[3]-s*u/r);}else e=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];n(e,e,2);for(var a=[],h=[],f=(u=0,e.length);u<f;u+=2){a.push(e[u]),h.push(e[u+1]);}return function(t,n,i){return An(Math.min.apply(null,t),Math.min.apply(null,n),Math.max.apply(null,t),Math.max.apply(null,n),i);}(a,h,i);}function si(t,n){var i=n.getExtent(),r=Vn(t);if(n.canWrapX()&&(r[0]<i[0]||r[0]>=i[2])){var e=Qn(i),o=Math.floor((r[0]-i[0])/e)*e;t[0]-=o,t[2]-=o;}return t;}function ui(t,n){if(n.canWrapX()){var i=n.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[i[0],t[1],i[2],t[3]]];si(t,n);var r=Qn(i);if(Qn(t)>r)return[[i[0],t[1],i[2],t[3]]];if(t[0]<i[0])return[[t[0]+r,t[1],i[2],t[3]],[i[0],t[1],t[2],t[3]]];if(t[2]>i[2])return[[t[0],t[1],i[2],t[3]],[i[0],t[1],t[2]-r,t[3]]];}return[t];}var ai=function(){function t(t){this.et=t.code,this.ot=t.units,this.st=void 0!==t.extent?t.extent:null,this.ut=void 0!==t.worldExtent?t.worldExtent:null,this.ht=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.ft=void 0!==t.global&&t.global,this.ct=!(!this.ft||!this.st),this.lt=t.getPointResolution,this.vt=null,this.dt=t.metersPerUnit;}return t.prototype.canWrapX=function(){return this.ct;},t.prototype.getCode=function(){return this.et;},t.prototype.getExtent=function(){return this.st;},t.prototype.getUnits=function(){return this.ot;},t.prototype.getMetersPerUnit=function(){return this.dt||Gt[this.ot];},t.prototype.getWorldExtent=function(){return this.ut;},t.prototype.getAxisOrientation=function(){return this.ht;},t.prototype.isGlobal=function(){return this.ft;},t.prototype.setGlobal=function(t){this.ft=t,this.ct=!(!t||!this.st);},t.prototype.getDefaultTileGrid=function(){return this.vt;},t.prototype.setDefaultTileGrid=function(t){this.vt=t;},t.prototype.setExtent=function(t){this.st=t,this.ct=!(!this.ft||!t);},t.prototype.setWorldExtent=function(t){this.ut=t;},t.prototype.setGetPointResolution=function(t){this.lt=t;},t.prototype.getPointResolutionFunc=function(){return this.lt;},t;}();function hi(t,n,i){return Math.min(Math.max(t,n),i);}var fi="cosh"in Math?Math.cosh:function(t){var n=Math.exp(t);return(n+1/n)/2;},ci="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E;};function li(t,n,i,r,e,o){var s=e-i,u=o-r;if(0!==s||0!==u){var a=((t-i)*s+(n-r)*u)/(s*s+u*u);a>1?(i=e,r=o):a>0&&(i+=s*a,r+=u*a);}return vi(t,n,i,r);}function vi(t,n,i,r){var e=i-t,o=r-n;return e*e+o*o;}function pi(t){for(var n=t.length,i=0;i<n;i++){for(var r=i,e=Math.abs(t[i][i]),o=i+1;o<n;o++){var s=Math.abs(t[o][i]);s>e&&(e=s,r=o);}if(0===e)return null;var u=t[r];t[r]=t[i],t[i]=u;for(var a=i+1;a<n;a++){for(var h=-t[a][i]/t[i][i],f=i;f<n+1;f++){i==f?t[a][f]=0:t[a][f]+=h*t[i][f];}}}for(var c=new Array(n),l=n-1;l>=0;l--){c[l]=t[l][n]/t[l][l];for(var v=l-1;v>=0;v--){t[v][n]-=t[v][l]*c[l];}}return c;}function di(t){return 180*t/Math.PI;}function yi(t){return t*Math.PI/180;}function mi(t,n){var i=t%n;return i*n<0?i+n:i;}function wi(t,n,i){return t+i*(n-t);}function gi(t,n){var i=Math.pow(10,n);return Math.round(t*i)/i;}function bi(t,n){return Math.round(gi(t,n));}function xi(t,n){return Math.floor(gi(t,n));}function Mi(t,n){return Math.ceil(gi(t,n));}var _i=function(){var _t12=function t(n,i){return _t12=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t12(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t12(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Si=6378137,Oi=Math.PI*Si,ji=[-Oi,-Oi,Oi,Oi],Ei=[-180,-85,180,85],Ti=Si*Math.log(Math.tan(Math.PI/2)),Ai=function(t){function n(n){return t.call(this,{code:n,units:qt.METERS,extent:ji,global:!0,worldExtent:Ei,getPointResolution:function getPointResolution(t,n){return t/fi(n[1]/Si);}})||this;}return _i(n,t),n;}(ai),Pi=[new Ai("EPSG:3857"),new Ai("EPSG:102100"),new Ai("EPSG:102113"),new Ai("EPSG:900913"),new Ai("http://www.opengis.net/def/crs/EPSG/0/3857"),new Ai("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Ci(t,n,i){var r=t.length,e=i>1?i:2,o=n;void 0===o&&(o=e>2?t.slice():new Array(r));for(var s=0;s<r;s+=e){o[s]=Oi*t[s]/180;var u=Si*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));u>Ti?u=Ti:u<-Ti&&(u=-Ti),o[s+1]=u;}return o;}function ki(t,n,i){var r=t.length,e=i>1?i:2,o=n;void 0===o&&(o=e>2?t.slice():new Array(r));for(var s=0;s<r;s+=e){o[s]=180*t[s]/Oi,o[s+1]=360*Math.atan(Math.exp(t[s+1]/Si))/Math.PI-90;}return o;}var Ni=function(){var _t13=function t(n,i){return _t13=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t13(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t13(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Ii=6378137,zi=[-180,-90,180,90],Li=Math.PI*Ii/180,Ri=function(t){function n(n,i){return t.call(this,{code:n,units:qt.DEGREES,extent:zi,axisOrientation:i,global:!0,metersPerUnit:Li,worldExtent:zi})||this;}return Ni(n,t),n;}(ai),Fi=[new Ri("CRS:84"),new Ri("EPSG:4326","neu"),new Ri("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ri("urn:ogc:def:crs:OGC:2:84"),new Ri("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ri("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ri("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],Gi={};function Di(){Gi={};}function qi(t){return Gi[t]||Gi[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null;}function Ui(t,n){Gi[t]=n;}var Bi={};function Xi(){Bi={};}function Vi(t,n,i){var r=t.getCode(),e=n.getCode();r in Bi||(Bi[r]={}),Bi[r][e]=i;}function Wi(t,n){var i;return t in Bi&&n in Bi[t]&&(i=Bi[t][n]),i;}function Yi(t,n,i){var r=void 0!==i?t.toFixed(i):""+t,e=r.indexOf(".");return(e=-1===e?r.length:e)>n?r:new Array(1+n-e).join("0")+r;}function Ki(t,n){for(var i=(""+t).split("."),r=(""+n).split("."),e=0;e<Math.max(i.length,r.length);e++){var o=parseInt(i[e]||"0",10),s=parseInt(r[e]||"0",10);if(o>s)return 1;if(s>o)return-1;}return 0;}function Zi(t,n){return t[0]+=+n[0],t[1]+=+n[1],t;}function $i(t,n){var i=n.getRadius(),r=n.getCenter(),e=r[0],o=r[1],s=t[0]-e,u=t[1]-o;0===s&&0===u&&(s=1);var a=Math.sqrt(s*s+u*u);return[e+i*s/a,o+i*u/a];}function Hi(t,n){var i,r,e=t[0],o=t[1],s=n[0],u=n[1],a=s[0],h=s[1],f=u[0],c=u[1],l=f-a,v=c-h,p=0===l&&0===v?0:(l*(e-a)+v*(o-h))/(l*l+v*v||0);return p<=0?(i=a,r=h):p>=1?(i=f,r=c):(i=a+p*l,r=h+p*v),[i,r];}function Ji(t,n,i){var r=mi(n+180,360)-180,e=Math.abs(3600*r),o=i||0,s=Math.pow(10,o),u=Math.floor(e/3600),a=Math.floor((e-3600*u)/60),h=e-3600*u-60*a;return(h=Math.ceil(h*s)/s)>=60&&(h=0,a+=1),a>=60&&(a=0,u+=1),u+"° "+Yi(a,2)+"′ "+Yi(h,2,o)+"″"+(0==r?"":" "+t.charAt(r<0?1:0));}function Qi(t,n,i){return t?n.replace("{x}",t[0].toFixed(i)).replace("{y}",t[1].toFixed(i)):"";}function tr(t,n){for(var i=!0,r=t.length-1;r>=0;--r){if(t[r]!=n[r]){i=!1;break;}}return i;}function nr(t,n){var i=Math.cos(n),r=Math.sin(n),e=t[0]*i-t[1]*r,o=t[1]*i+t[0]*r;return t[0]=e,t[1]=o,t;}function ir(t,n){return t[0]*=n,t[1]*=n,t;}function rr(t,n){var i=t[0]-n[0],r=t[1]-n[1];return i*i+r*r;}function er(t,n){return Math.sqrt(rr(t,n));}function or(t,n){return rr(t,Hi(t,n));}function sr(t,n){return Qi(t,"{x}, {y}",n);}function ur(t,n){if(n.canWrapX()){var i=Qn(n.getExtent()),r=ar(t,n,i);r&&(t[0]-=r*i);}return t;}function ar(t,n,i){var r=n.getExtent(),e=0;if(n.canWrapX()&&(t[0]<r[0]||t[0]>r[2])){var o=i||Qn(r);e=Math.floor((t[0]-r[0])/o);}return e;}var hr=6371008.8;function fr(t,n,i){var r=i||hr,e=yi(t[1]),o=yi(n[1]),s=(o-e)/2,u=yi(n[0]-t[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(u)*Math.sin(u)*Math.cos(e)*Math.cos(o);return 2*r*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));}function cr(t,n){for(var i=0,r=0,e=t.length;r<e-1;++r){i+=fr(t[r],t[r+1],n);}return i;}function lr(t,n){for(var i=0,r=t.length,e=t[r-1][0],o=t[r-1][1],s=0;s<r;s++){var u=t[s][0],a=t[s][1];i+=yi(u-e)*(2+Math.sin(yi(o))+Math.sin(yi(a))),e=u,o=a;}return i*n*n/2;}function vr(t,n,i,r){var e=r||hr,o=yi(t[1]),s=yi(t[0]),u=n/e,a=Math.asin(Math.sin(o)*Math.cos(u)+Math.cos(o)*Math.sin(u)*Math.cos(i));return[di(s+Math.atan2(Math.sin(i)*Math.sin(u)*Math.cos(o),Math.cos(u)-Math.sin(o)*Math.sin(a))),di(a)];}var pr=!0;function dr(t){pr=!(void 0===t||t);}function yr(t,n,i){var r;if(void 0!==n){for(var e=0,o=t.length;e<o;++e){n[e]=t[e];}r=n;}else r=t.slice();return r;}function mr(t,n,i){if(void 0!==n&&t!==n){for(var r=0,e=t.length;r<e;++r){n[r]=t[r];}t=n;}return t;}function wr(t){Ui(t.getCode(),t),Vi(t,t,yr);}function gr(t){t.forEach(wr);}function br(t){return"string"==typeof t?qi(t):t||null;}function xr(t,n,i,r){var e,o=(t=br(t)).getPointResolutionFunc();if(o){if(e=o(n,i),r&&r!==t.getUnits())(u=t.getMetersPerUnit())&&(e=e*u/Gt[r]);}else{var s=t.getUnits();if(s==qt.DEGREES&&!r||r==qt.DEGREES)e=n;else{var u,a=Ar(t,br("EPSG:4326"));if(a===mr&&s!==qt.DEGREES)e=n*t.getMetersPerUnit();else{var h=[i[0]-n/2,i[1],i[0]+n/2,i[1],i[0],i[1]-n/2,i[0],i[1]+n/2];e=(fr((h=a(h,h,2)).slice(0,2),h.slice(2,4))+fr(h.slice(4,6),h.slice(6,8)))/2;}void 0!==(u=r?Gt[r]:t.getMetersPerUnit())&&(e/=u);}}return e;}function Mr(t){gr(t),t.forEach(function(n){t.forEach(function(t){n!==t&&Vi(n,t,yr);});});}function _r(t,n,i,r){t.forEach(function(t){n.forEach(function(n){Vi(t,n,i),Vi(n,t,r);});});}function Sr(t,n){return t?"string"==typeof t?br(t):t:br(n);}function Or(t){return function(n,i,r){for(var e=n.length,o=void 0!==r?r:2,s=void 0!==i?i:new Array(e),u=0;u<e;u+=o){for(var a=t(n.slice(u,u+o)),h=a.length,f=0,c=o;f<c;++f){s[u+f]=f>=h?n[u+f]:a[f];}}return s;};}function jr(t,n,i,r){var e=br(t),o=br(n);Vi(e,o,Or(i)),Vi(o,e,Or(r));}function Er(t,n){return dr(),Cr(t,"EPSG:4326",void 0!==n?n:"EPSG:3857");}function Tr(t,n){if(t===n)return!0;var i=t.getUnits()===n.getUnits();return(t.getCode()===n.getCode()||Ar(t,n)===yr)&&i;}function Ar(t,n){var i=Wi(t.getCode(),n.getCode());return i||(i=mr),i;}function Pr(t,n){return Ar(br(t),br(n));}function Cr(t,n,i){return Pr(n,i)(t,void 0,t.length);}function kr(t,n,i,r){return oi(t,Pr(n,i),void 0,r);}var Nr=null;function Ir(t){Nr=br(t);}function zr(){return Nr;}function Lr(t,n){return Nr?Cr(t,n,Nr):t;}function Rr(t,n){return Nr?Cr(t,Nr,n):(pr&&!tr(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(pr=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t);}function Fr(t,n){return Nr?kr(t,n,Nr):t;}function Gr(t,n){return Nr?kr(t,Nr,n):t;}function Dr(t,n){if(!Nr)return t;var i=br(n).getUnits(),r=Nr.getUnits();return i&&r?t*Gt[i]/Gt[r]:t;}function qr(t,n){if(!Nr)return t;var i=br(n).getUnits(),r=Nr.getUnits();return i&&r?t*Gt[r]/Gt[i]:t;}function Ur(t,n,i){return function(r){var e,o;if(t.canWrapX()){var s=t.getExtent(),u=Qn(s);(o=ar(r=r.slice(0),t,u))&&(r[0]=r[0]-o*u),r[0]=hi(r[0],s[0],s[2]),r[1]=hi(r[1],s[1],s[3]),e=i(r);}else e=i(r);return o&&n.canWrapX()&&(e[0]+=o*Qn(n.getExtent())),e;};}function Br(){Mr(Pi),Mr(Fi),_r(Fi,Pi,Ci,ki);}function Xr(t,n,i,r,e,o){for(var s=o||[],u=0,a=n;a<i;a+=r){var h=t[a],f=t[a+1];s[u++]=e[0]*h+e[2]*f+e[4],s[u++]=e[1]*h+e[3]*f+e[5];}return o&&s.length!=u&&(s.length=u),s;}function Vr(t,n,i,r,e,o,s){for(var u=s||[],a=Math.cos(e),h=Math.sin(e),f=o[0],c=o[1],l=0,v=n;v<i;v+=r){var p=t[v]-f,d=t[v+1]-c;u[l++]=f+p*a-d*h,u[l++]=c+p*h+d*a;for(var y=v+2;y<v+r;++y){u[l++]=t[y];}}return s&&u.length!=l&&(u.length=l),u;}function Wr(t,n,i,r,e,o,s,u){for(var a=u||[],h=s[0],f=s[1],c=0,l=n;l<i;l+=r){var v=t[l]-h,p=t[l+1]-f;a[c++]=h+e*v,a[c++]=f+o*p;for(var d=l+2;d<l+r;++d){a[c++]=t[d];}}return u&&a.length!=c&&(a.length=c),a;}function Yr(t,n,i,r,e,o,s){for(var u=s||[],a=0,h=n;h<i;h+=r){u[a++]=t[h]+e,u[a++]=t[h+1]+o;for(var f=h+2;f<h+r;++f){u[a++]=t[f];}}return s&&u.length!=a&&(u.length=a),u;}Br();var Kr=function(){var _t14=function t(n,i){return _t14=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t14(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t14(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Zr=[1,0,0,1,0,0],$r=function(t){function n(){var n=t.call(this)||this;return n.st=[1/0,1/0,-1/0,-1/0],n.yt=-1,n.simplifiedGeometryMaxMinSquaredTolerance=0,n.simplifiedGeometryRevision=0,n.simplifyTransformedInternal=E(function(t,n,i){if(!i)return this.getSimplifiedGeometry(n);var r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(n);}),n;}return Kr(n,t),n.prototype.simplifyTransformed=function(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n);},n.prototype.clone=function(){return r();},n.prototype.closestPointXY=function(t,n,i,e){return r();},n.prototype.containsXY=function(t,n){var i=this.getClosestPoint([t,n]);return i[0]===t&&i[1]===n;},n.prototype.getClosestPoint=function(t,n){var i=n||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i;},n.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1]);},n.prototype.computeExtent=function(t){return r();},n.prototype.getExtent=function(t){if(this.yt!=this.getRevision()){var n=this.computeExtent(this.st);(isNaN(n[0])||isNaN(n[1]))&&Pn(n),this.yt=this.getRevision();}return ii(this.st,t);},n.prototype.rotate=function(t,n){r();},n.prototype.scale=function(t,n,i){r();},n.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t);},n.prototype.getSimplifiedGeometry=function(t){return r();},n.prototype.getType=function(){return r();},n.prototype.applyTransform=function(t){r();},n.prototype.intersectsExtent=function(t){return r();},n.prototype.translate=function(t,n){r();},n.prototype.transform=function(t,n){var i=br(t),r=i.getUnits()==qt.TILE_PIXELS?function(t,r,e){var o=i.getExtent(),s=i.getWorldExtent(),u=Zn(s)/Zn(o);return fn(Zr,s[0],s[3],u,-u,0,0,0),Xr(t,0,t.length,e,Zr,r),Pr(i,n)(t,r,e);}:Pr(i,n);return this.applyTransform(r),this;},n;}(et),Hr=$r,Jr=function(){var _t15=function t(n,i){return _t15=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t15(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t15(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Qr=function(t){function n(){var n=t.call(this)||this;return n.layout=kt,n.stride=2,n.flatCoordinates=null,n;}return Jr(n,t),n.prototype.computeExtent=function(t){return kn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t);},n.prototype.getCoordinates=function(){return r();},n.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride);},n.prototype.getFlatCoordinates=function(){return this.flatCoordinates;},n.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride);},n.prototype.getLayout=function(){return this.layout;},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this);},n.prototype.getSimplifiedGeometryInternal=function(t){return this;},n.prototype.getStride=function(){return this.stride;},n.prototype.setFlatCoordinates=function(t,n){this.stride=te(t),this.layout=t,this.flatCoordinates=n;},n.prototype.setCoordinates=function(t,n){r();},n.prototype.setLayout=function(t,n,i){var r;if(t)r=te(t);else{for(var e=0;e<i;++e){if(0===n.length)return this.layout=kt,void(this.stride=2);n=n[0];}t=function(t){var n;2==t?n=kt:3==t?n=Nt:4==t&&(n=zt);return n;}(r=n.length);}this.layout=t,this.stride=r;},n.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed());},n.prototype.rotate=function(t,n){var i=this.getFlatCoordinates();if(i){var r=this.getStride();Vr(i,0,i.length,r,t,n,i),this.changed();}},n.prototype.scale=function(t,n,i){var r=n;void 0===r&&(r=t);var e=i;e||(e=Vn(this.getExtent()));var o=this.getFlatCoordinates();if(o){var s=this.getStride();Wr(o,0,o.length,s,t,r,e,o),this.changed();}},n.prototype.translate=function(t,n){var i=this.getFlatCoordinates();if(i){var r=this.getStride();Yr(i,0,i.length,r,t,n,i),this.changed();}},n;}(Hr);function te(t){var n;return t==kt?n=2:t==Nt||t==It?n=3:t==zt&&(n=4),n;}function ne(t,n,i){var r=t.getFlatCoordinates();if(r){var e=t.getStride();return Xr(r,0,r.length,e,n,i);}return null;}var ie=Qr;function re(t,n,i,r,e,o,s){var u,a=t[n],h=t[n+1],f=t[i]-a,c=t[i+1]-h;if(0===f&&0===c)u=n;else{var l=((e-a)*f+(o-h)*c)/(f*f+c*c);if(l>1)u=i;else{if(l>0){for(var v=0;v<r;++v){s[v]=wi(t[n+v],t[i+v],l);}return void(s.length=r);}u=n;}}for(v=0;v<r;++v){s[v]=t[u+v];}s.length=r;}function ee(t,n,i,r,e){var o=t[n],s=t[n+1];for(n+=r;n<i;n+=r){var u=t[n],a=t[n+1],h=vi(o,s,u,a);h>e&&(e=h),o=u,s=a;}return e;}function oe(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){var u=i[o];e=ee(t,n,u,r,e),n=u;}return e;}function se(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){var u=i[o];e=oe(t,n,u,r,e),n=u[u.length-1];}return e;}function ue(t,n,i,r,e,o,s,u,a,h,f){if(n==i)return h;var c,l;if(0===e){if((l=vi(s,u,t[n],t[n+1]))<h){for(c=0;c<r;++c){a[c]=t[n+c];}return a.length=r,l;}return h;}for(var v=f||[NaN,NaN],p=n+r;p<i;){if(re(t,p-r,p,r,s,u,v),(l=vi(s,u,v[0],v[1]))<h){for(h=l,c=0;c<r;++c){a[c]=v[c];}a.length=r,p+=r;}else p+=r*Math.max((Math.sqrt(l)-Math.sqrt(h))/e|0,1);}if(o&&(re(t,i-r,n,r,s,u,v),(l=vi(s,u,v[0],v[1]))<h)){for(h=l,c=0;c<r;++c){a[c]=v[c];}a.length=r;}return h;}function ae(t,n,i,r,e,o,s,u,a,h,f){for(var c=f||[NaN,NaN],l=0,v=i.length;l<v;++l){var p=i[l];h=ue(t,n,p,r,e,o,s,u,a,h,c),n=p;}return h;}function he(t,n,i,r,e,o,s,u,a,h,f){for(var c=f||[NaN,NaN],l=0,v=i.length;l<v;++l){var p=i[l];h=ae(t,n,p,r,e,o,s,u,a,h,c),n=p[p.length-1];}return h;}function fe(t,n,i,r){for(var e=0,o=i.length;e<o;++e){t[n++]=i[e];}return n;}function ce(t,n,i,r){for(var e=0,o=i.length;e<o;++e){for(var s=i[e],u=0;u<r;++u){t[n++]=s[u];}}return n;}function le(t,n,i,r,e){for(var o=e||[],s=0,u=0,a=i.length;u<a;++u){var h=ce(t,n,i[u],r);o[s++]=h,n=h;}return o.length=s,o;}function ve(t,n,i,r,e){for(var o=e||[],s=0,u=0,a=i.length;u<a;++u){var h=le(t,n,i[u],r,o[s]);o[s++]=h,n=h[h.length-1];}return o.length=s,o;}function pe(t,n,i,r,e,o,s){var u=(i-n)/r;if(u<3){for(;n<i;n+=r){o[s++]=t[n],o[s++]=t[n+1];}return s;}var a=new Array(u);a[0]=1,a[u-1]=1;for(var h=[n,i-r],f=0;h.length>0;){for(var c=h.pop(),l=h.pop(),v=0,p=t[l],d=t[l+1],y=t[c],m=t[c+1],w=l+r;w<c;w+=r){var g=li(t[w],t[w+1],p,d,y,m);g>v&&(f=w,v=g);}v>e&&(a[(f-n)/r]=1,l+r<f&&h.push(l,f),f+r<c&&h.push(f,c));}for(w=0;w<u;++w){a[w]&&(o[s++]=t[n+w*r],o[s++]=t[n+w*r+1]);}return s;}function de(t,n,i,r,e,o,s,u){for(var a=0,h=i.length;a<h;++a){var f=i[a];s=pe(t,n,f,r,e,o,s),u.push(s),n=f;}return s;}function ye(t,n,i,r,e,o,s){if(i<=n+r){for(;n<i;n+=r){o[s++]=t[n],o[s++]=t[n+1];}return s;}var u=t[n],a=t[n+1];o[s++]=u,o[s++]=a;var h=u,f=a;for(n+=r;n<i;n+=r){vi(u,a,h=t[n],f=t[n+1])>e&&(o[s++]=h,o[s++]=f,u=h,a=f);}return h==u&&f==a||(o[s++]=h,o[s++]=f),s;}function me(t,n){return n*Math.round(t/n);}function we(t,n,i,r,e,o,s){if(n==i)return s;var u,a,h=me(t[n],e),f=me(t[n+1],e);n+=r,o[s++]=h,o[s++]=f;do{if(u=me(t[n],e),a=me(t[n+1],e),(n+=r)==i)return o[s++]=u,o[s++]=a,s;}while(u==h&&a==f);for(;n<i;){var c=me(t[n],e),l=me(t[n+1],e);if(n+=r,c!=u||l!=a){var v=u-h,p=a-f,d=c-h,y=l-f;v*y==p*d&&(v<0&&d<v||v==d||v>0&&d>v)&&(p<0&&y<p||p==y||p>0&&y>p)?(u=c,a=l):(o[s++]=u,o[s++]=a,h=u,f=a,u=c,a=l);}}return o[s++]=u,o[s++]=a,s;}function ge(t,n,i,r,e,o,s,u){for(var a=0,h=i.length;a<h;++a){var f=i[a];s=we(t,n,f,r,e,o,s),u.push(s),n=f;}return s;}function be(t,n,i,r,e,o,s,u){for(var a=0,h=i.length;a<h;++a){var f=i[a],c=[];s=ge(t,n,f,r,e,o,s,c),u.push(c),n=f[f.length-1];}return s;}function xe(t,n,i,r,e){for(var o=void 0!==e?e:[],s=0,u=n;u<i;u+=r){o[s++]=t.slice(u,u+r);}return o.length=s,o;}function Me(t,n,i,r,e){for(var o=void 0!==e?e:[],s=0,u=0,a=i.length;u<a;++u){var h=i[u];o[s++]=xe(t,n,h,r,o[s]),n=h;}return o.length=s,o;}function _e(t,n,i,r,e){for(var o=void 0!==e?e:[],s=0,u=0,a=i.length;u<a;++u){var h=i[u];o[s++]=Me(t,n,h,r,o[s]),n=h[h.length-1];}return o.length=s,o;}function Se(t,n,i,r){for(var e=0,o=t[i-r],s=t[i-r+1];n<i;n+=r){var u=t[n],a=t[n+1];e+=s*u-o*a,o=u,s=a;}return e/2;}function Oe(t,n,i,r){for(var e=0,o=0,s=i.length;o<s;++o){var u=i[o];e+=Se(t,n,u,r),n=u;}return e;}function je(t,n,i,r){for(var e=0,o=0,s=i.length;o<s;++o){var u=i[o];e+=Oe(t,n,u,r),n=u[u.length-1];}return e;}var Ee=function(){var _t16=function t(n,i){return _t16=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t16(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t16(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Te=function(t){function n(n,i){var r=t.call(this)||this;return r.wt=-1,r.gt=-1,void 0===i||Array.isArray(n[0])?r.setCoordinates(n,i):r.setFlatCoordinates(i,n),r;}return Ee(n,t),n.prototype.clone=function(){return new n(this.flatCoordinates.slice(),this.layout);},n.prototype.closestPointXY=function(t,n,i,r){return r<_n(this.getExtent(),t,n)?r:(this.gt!=this.getRevision()&&(this.wt=Math.sqrt(ee(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.gt=this.getRevision()),ue(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.wt,!0,t,n,i,r));},n.prototype.getArea=function(){return Se(this.flatCoordinates,0,this.flatCoordinates.length,this.stride);},n.prototype.getCoordinates=function(){return xe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride);},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=pe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new n(i,kt);},n.prototype.getType=function(){return"LinearRing";},n.prototype.intersectsExtent=function(t){return!1;},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ce(this.flatCoordinates,0,t,this.stride),this.changed();},n;}(ie),Ae=Te,Pe=function(){var _t17=function t(n,i){return _t17=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t17(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t17(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Ce=function(t){function n(n,i){var r=t.call(this)||this;return r.setCoordinates(n,i),r;}return Pe(n,t),n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t;},n.prototype.closestPointXY=function(t,n,i,r){var e=this.flatCoordinates,o=vi(t,n,e[0],e[1]);if(o<r){for(var s=this.stride,u=0;u<s;++u){i[u]=e[u];}return i.length=s,o;}return r;},n.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[];},n.prototype.computeExtent=function(t){return Cn(this.flatCoordinates,t);},n.prototype.getType=function(){return"Point";},n.prototype.intersectsExtent=function(t){return jn(t,this.flatCoordinates[0],this.flatCoordinates[1]);},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=fe(this.flatCoordinates,0,t,this.stride),this.changed();},n;}(ie),ke=Ce;function Ne(t,n,i,r,e){return!qn(e,function(e){return!Ie(t,n,i,r,e[0],e[1]);});}function Ie(t,n,i,r,e,o){for(var s=0,u=t[i-r],a=t[i-r+1];n<i;n+=r){var h=t[n],f=t[n+1];a<=o?f>o&&(h-u)*(o-a)-(e-u)*(f-a)>0&&s++:f<=o&&(h-u)*(o-a)-(e-u)*(f-a)<0&&s--,u=h,a=f;}return 0!==s;}function ze(t,n,i,r,e,o){if(0===i.length)return!1;if(!Ie(t,n,i[0],r,e,o))return!1;for(var s=1,u=i.length;s<u;++s){if(Ie(t,i[s-1],i[s],r,e,o))return!1;}return!0;}function Le(t,n,i,r,e,o){if(0===i.length)return!1;for(var s=0,u=i.length;s<u;++s){var a=i[s];if(ze(t,n,a,r,e,o))return!0;n=a[a.length-1];}return!1;}function Re(t,n,i,r,e,o,s){for(var u,a,h,f,c,l,v,p=e[o+1],y=[],m=0,w=i.length;m<w;++m){var g=i[m];for(f=t[g-r],l=t[g-r+1],u=n;u<g;u+=r){c=t[u],v=t[u+1],(p<=l&&v<=p||l<=p&&p<=v)&&(h=(p-l)/(v-l)*(c-f)+f,y.push(h)),f=c,l=v;}}var b=NaN,x=-1/0;for(y.sort(d),f=y[0],u=1,a=y.length;u<a;++u){c=y[u];var M=Math.abs(c-f);M>x&&ze(t,n,i,r,h=(f+c)/2,p)&&(b=h,x=M),f=c;}return isNaN(b)&&(b=e[o]),s?(s.push(b,p,x),s):[b,p,x];}function Fe(t,n,i,r,e){for(var o=[],s=0,u=i.length;s<u;++s){var a=i[s];o=Re(t,n,a,r,e,2*s,o),n=a[a.length-1];}return o;}function Ge(t,n,i,r,e){var o;for(n+=r;n<i;n+=r){if(o=e(t.slice(n-r,n),t.slice(n,n+r)))return o;}return!1;}function De(t,n,i,r,e){var o=Fn([1/0,1/0,-1/0,-1/0],t,n,i,r);return!!ti(e,o)&&(!!On(e,o)||o[0]>=e[0]&&o[2]<=e[2]||o[1]>=e[1]&&o[3]<=e[3]||Ge(t,n,i,r,function(t,n){return ei(e,t,n);}));}function qe(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){if(De(t,n,i[o],r,e))return!0;n=i[o];}return!1;}function Ue(t,n,i,r,e){return!!De(t,n,i,r,e)||!!Ie(t,n,i,r,e[0],e[1])||!!Ie(t,n,i,r,e[0],e[3])||!!Ie(t,n,i,r,e[2],e[1])||!!Ie(t,n,i,r,e[2],e[3]);}function Be(t,n,i,r,e){if(!Ue(t,n,i[0],r,e))return!1;if(1===i.length)return!0;for(var o=1,s=i.length;o<s;++o){if(Ne(t,i[o-1],i[o],r,e)&&!De(t,i[o-1],i[o],r,e))return!1;}return!0;}function Xe(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){var u=i[o];if(Be(t,n,u,r,e))return!0;n=u[u.length-1];}return!1;}function Ve(t,n,i,r){for(;n<i-r;){for(var e=0;e<r;++e){var o=t[n+e];t[n+e]=t[i-r+e],t[i-r+e]=o;}n+=r,i-=r;}}function We(t,n,i,r){for(var e=0,o=t[i-r],s=t[i-r+1];n<i;n+=r){var u=t[n],a=t[n+1];e+=(u-o)*(a+s),o=u,s=a;}return 0===e?void 0:e>0;}function Ye(t,n,i,r,e){for(var o=void 0!==e&&e,s=0,u=i.length;s<u;++s){var a=i[s],h=We(t,n,a,r);if(0===s){if(o&&h||!o&&!h)return!1;}else if(o&&!h||!o&&h)return!1;n=a;}return!0;}function Ke(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){var u=i[o];if(!Ye(t,n,u,r,e))return!1;u.length&&(n=u[u.length-1]);}return!0;}function Ze(t,n,i,r,e){for(var o=void 0!==e&&e,s=0,u=i.length;s<u;++s){var a=i[s],h=We(t,n,a,r);(0===s?o&&h||!o&&!h:o&&!h||!o&&h)&&Ve(t,n,a,r),n=a;}return n;}function $e(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){n=Ze(t,n,i[o],r,e);}return n;}function He(t,n){for(var i=[],r=0,e=0,o=0,s=n.length;o<s;++o){var u=n[o];if(We(t,r,u,2)){if(0===i.length)continue;i[i.length-1].push(n[e]);}else i.push(n.slice(e,o+1));e=o+1,r=u;}return i;}var Je=function(){var _t18=function t(n,i){return _t18=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t18(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t18(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Qe=function(t){function n(n,i,r){var e=t.call(this)||this;return e.bt=[],e.xt=-1,e.Mt=null,e.wt=-1,e.gt=-1,e._t=-1,e.St=null,void 0!==i&&r?(e.setFlatCoordinates(i,n),e.bt=r):e.setCoordinates(n,i),e;}return Je(n,t),n.prototype.appendLinearRing=function(t){this.flatCoordinates?g(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.bt.push(this.flatCoordinates.length),this.changed();},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout,this.bt.slice());return t.applyProperties(this),t;},n.prototype.closestPointXY=function(t,n,i,r){return r<_n(this.getExtent(),t,n)?r:(this.gt!=this.getRevision()&&(this.wt=Math.sqrt(oe(this.flatCoordinates,0,this.bt,this.stride,0)),this.gt=this.getRevision()),ae(this.flatCoordinates,0,this.bt,this.stride,this.wt,!0,t,n,i,r));},n.prototype.containsXY=function(t,n){return ze(this.getOrientedFlatCoordinates(),0,this.bt,this.stride,t,n);},n.prototype.getArea=function(){return Oe(this.getOrientedFlatCoordinates(),0,this.bt,this.stride);},n.prototype.getCoordinates=function(t){var n;return void 0!==t?Ze(n=this.getOrientedFlatCoordinates().slice(),0,this.bt,this.stride,t):n=this.flatCoordinates,Me(n,0,this.bt,this.stride);},n.prototype.getEnds=function(){return this.bt;},n.prototype.getFlatInteriorPoint=function(){if(this.xt!=this.getRevision()){var t=Vn(this.getExtent());this.Mt=Re(this.getOrientedFlatCoordinates(),0,this.bt,this.stride,t,0),this.xt=this.getRevision();}return this.Mt;},n.prototype.getInteriorPoint=function(){return new ke(this.getFlatInteriorPoint(),It);},n.prototype.getLinearRingCount=function(){return this.bt.length;},n.prototype.getLinearRing=function(t){return t<0||this.bt.length<=t?null:new Ae(this.flatCoordinates.slice(0===t?0:this.bt[t-1],this.bt[t]),this.layout);},n.prototype.getLinearRings=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.bt,r=[],e=0,o=0,s=i.length;o<s;++o){var u=i[o],a=new Ae(n.slice(e,u),t);r.push(a),e=u;}return r;},n.prototype.getOrientedFlatCoordinates=function(){if(this._t!=this.getRevision()){var t=this.flatCoordinates;Ye(t,0,this.bt,this.stride)?this.St=t:(this.St=t.slice(),this.St.length=Ze(this.St,0,this.bt,this.stride)),this._t=this.getRevision();}return this.St;},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=ge(this.flatCoordinates,0,this.bt,this.stride,Math.sqrt(t),i,0,r),new n(i,kt,r);},n.prototype.getType=function(){return"Polygon";},n.prototype.intersectsExtent=function(t){return Be(this.getOrientedFlatCoordinates(),0,this.bt,this.stride,t);},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=le(this.flatCoordinates,0,t,this.stride,this.bt);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed();},n;}(ie),to=Qe;function no(t,n,i,r){for(var e=i||32,o=[],s=0;s<e;++s){g(o,vr(t,n,2*Math.PI*s/e,r));}return o.push(o[0],o[1]),new Qe(o,kt,[o.length]);}function io(t){var n=t[0],i=t[1],r=t[2],e=t[3],o=[n,i,n,e,r,e,r,i,n,i];return new Qe(o,kt,[o.length]);}function ro(t,n,i){for(var r=n||32,e=t.getStride(),o=t.getLayout(),s=t.getCenter(),u=e*(r+1),a=new Array(u),h=0;h<u;h+=e){a[h]=0,a[h+1]=0;for(var f=2;f<e;f++){a[h+f]=s[f];}}var c=[a.length],l=new Qe(a,o,c);return eo(l,s,t.getRadius(),i),l;}function eo(t,n,i,r){for(var e=t.getFlatCoordinates(),o=t.getStride(),s=e.length/o-1,u=r||0,a=0;a<=s;++a){var h=a*o,f=u+2*mi(a,s)*Math.PI/s;e[h]=n[0]+i*Math.cos(f),e[h+1]=n[1]+i*Math.sin(f);}t.changed();}var oo=function(){var _t19=function t(n,i){return _t19=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t19(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t19(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),so="accuracy",uo="accuracyGeometry",ao="altitude",ho="altitudeAccuracy",fo="heading",co="position",lo="projection",vo="speed",po="tracking",yo="trackingOptions",mo=function(t){function n(n){var i=t.call(this,L)||this;return i.code=n.code,i.message=n.message,i;}return oo(n,t),n;}(c),wo=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=n||{};return i.Ot=null,i.jt=mr,i.Et=void 0,i.addChangeListener(lo,i.Tt),i.addChangeListener(po,i.At),void 0!==r.projection&&i.setProjection(r.projection),void 0!==r.trackingOptions&&i.setTrackingOptions(r.trackingOptions),i.setTracking(void 0!==r.tracking&&r.tracking),i;}return oo(n,t),n.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this);},n.prototype.Tt=function(){var t=this.getProjection();t&&(this.jt=Ar(br("EPSG:4326"),t),this.Ot&&this.set(co,this.jt(this.Ot)));},n.prototype.At=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.Et?this.Et=navigator.geolocation.watchPosition(this.Pt.bind(this),this.Ct.bind(this),this.getTrackingOptions()):t||void 0===this.Et||(navigator.geolocation.clearWatch(this.Et),this.Et=void 0);}},n.prototype.Pt=function(t){var n=t.coords;this.set(so,n.accuracy),this.set(ao,null===n.altitude?void 0:n.altitude),this.set(ho,null===n.altitudeAccuracy?void 0:n.altitudeAccuracy),this.set(fo,null===n.heading?void 0:yi(n.heading)),this.Ot?(this.Ot[0]=n.longitude,this.Ot[1]=n.latitude):this.Ot=[n.longitude,n.latitude];var i=this.jt(this.Ot);this.set(co,i),this.set(vo,null===n.speed?void 0:n.speed);var r=no(this.Ot,n.accuracy);r.applyTransform(this.jt),this.set(uo,r),this.changed();},n.prototype.Ct=function(t){this.dispatchEvent(new mo(t));},n.prototype.getAccuracy=function(){return this.get(so);},n.prototype.getAccuracyGeometry=function(){return this.get(uo)||null;},n.prototype.getAltitude=function(){return this.get(ao);},n.prototype.getAltitudeAccuracy=function(){return this.get(ho);},n.prototype.getHeading=function(){return this.get(fo);},n.prototype.getPosition=function(){return this.get(co);},n.prototype.getProjection=function(){return this.get(lo);},n.prototype.getSpeed=function(){return this.get(vo);},n.prototype.getTracking=function(){return this.get(po);},n.prototype.getTrackingOptions=function(){return this.get(yo);},n.prototype.setProjection=function(t){this.set(lo,br(t));},n.prototype.setTracking=function(t){this.set(po,t);},n.prototype.setTrackingOptions=function(t){this.set(yo,t);},n;}(et),go=wo,bo=function(){var _t20=function t(n,i){return _t20=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t20(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t20(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),xo=function(t){function n(n,i,r,e){var o=t.call(this)||this;return o.extent=n,o.kt=r,o.resolution=i,o.state=e,o;}return bo(n,t),n.prototype.changed=function(){this.dispatchEvent(z);},n.prototype.getExtent=function(){return this.extent;},n.prototype.getImage=function(){return r();},n.prototype.getPixelRatio=function(){return this.kt;},n.prototype.getResolution=function(){return this.resolution;},n.prototype.getState=function(){return this.state;},n.prototype.load=function(){r();},n;}(I),Mo=0,_o=1,So=2,Oo=3,jo=4,Eo=function(){var _t21=function t(n,i){return _t21=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t21(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t21(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}();function To(t,n,i){var r=t,e=!0,o=!1,s=!1,u=[$(r,V,function(){s=!0,o||n();})];return r.src&&$t?(o=!0,r.decode().then(function(){e&&n();}).catch(function(t){e&&(s?n():i());})):u.push($(r,L,i)),function(){e=!1,u.forEach(H);};}var Ao=function(t){function n(n,i,r,e,o,s){var u=t.call(this,n,i,r,Mo)||this;return u.Nt=e,u.zt=new Image(),null!==o&&(u.zt.crossOrigin=o),u.Lt=null,u.state=Mo,u.Rt=s,u;}return Eo(n,t),n.prototype.getImage=function(){return this.zt;},n.prototype.Ft=function(){this.state=Oo,this.Gt(),this.changed();},n.prototype.Dt=function(){void 0===this.resolution&&(this.resolution=Zn(this.extent)/this.zt.height),this.state=So,this.Gt(),this.changed();},n.prototype.load=function(){this.state!=Mo&&this.state!=Oo||(this.state=_o,this.changed(),this.Rt(this,this.Nt),this.Lt=To(this.zt,this.Dt.bind(this),this.Ft.bind(this)));},n.prototype.setImage=function(t){this.zt=t,this.resolution=Zn(this.extent)/this.zt.height;},n.prototype.Gt=function(){this.Lt&&(this.Lt(),this.Lt=null);},n;}(xo),Po=function(){var _t22=function t(n,i){return _t22=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t22(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t22(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Co=function(t){function n(n,i,r,e,o){var s=this,u=void 0!==o?Mo:So;return(s=t.call(this,n,i,r,u)||this).U=void 0!==o?o:null,s.qt=e,s.V=null,s;}return Po(n,t),n.prototype.getError=function(){return this.V;},n.prototype.Ut=function(t){t?(this.V=t,this.state=Oo):this.state=So,this.changed();},n.prototype.load=function(){this.state==Mo&&(this.state=_o,this.changed(),this.U(this.Ut.bind(this)));},n.prototype.getImage=function(){return this.qt;},n;}(xo);function ko(t,n,i,r){var e;return e=i&&i.length?i.shift():Zt?new OffscreenCanvas(t||300,n||300):document.createElement("canvas"),t&&(e.width=t),n&&(e.height=n),e.getContext("2d",r);}function No(t){var n=t.canvas;n.width=1,n.height=1,t.clearRect(0,0,1,1);}function Io(t){var n=t.offsetWidth,i=getComputedStyle(t);return n+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10);}function zo(t){var n=t.offsetHeight,i=getComputedStyle(t);return n+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10);}function Lo(t,n){var i=n.parentNode;i&&i.replaceChild(t,n);}function Ro(t){return t&&t.parentNode?t.parentNode.removeChild(t):null;}function Fo(t){for(;t.lastChild;){t.removeChild(t.lastChild);}}function Go(t,n){for(var i=t.childNodes,r=0;;++r){var e=i[r],o=n[r];if(!e&&!o)break;e!==o&&(e?o?t.insertBefore(o,e):(t.removeChild(e),--r):t.appendChild(o));}}var Do=function(){var _t23=function t(n,i){return _t23=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t23(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t23(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}();var qo=function(t){function n(n,i,r,e,o,s){var u=t.call(this,n,i,s)||this;return u.Bt=e,u.Nt=r,u.key=r,u.zt=new Image(),null!==e&&(u.zt.crossOrigin=e),u.Lt=null,u.Xt=o,u;}return Do(n,t),n.prototype.getImage=function(){return this.zt;},n.prototype.setImage=function(t){this.zt=t,this.state=pt,this.Gt(),this.changed();},n.prototype.Ft=function(){var t;this.state=dt,this.Gt(),this.zt=((t=ko(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed();},n.prototype.Dt=function(){var t=this.zt;t.naturalWidth&&t.naturalHeight?this.state=pt:this.state=yt,this.Gt(),this.changed();},n.prototype.load=function(){this.state==dt&&(this.state=lt,this.zt=new Image(),null!==this.Bt&&(this.zt.crossOrigin=this.Bt)),this.state==lt&&(this.state=vt,this.changed(),this.Xt(this,this.Nt),this.Lt=To(this.zt,this.Dt.bind(this),this.Ft.bind(this)));},n.prototype.Gt=function(){this.Lt&&(this.Lt(),this.Lt=null);},n;}(_t),Uo=function(){function t(t,n,i){this.Vt=t,this.Wt=n,this.Yt=i,this.Kt=[],this.Zt=0,this.$t=0;}return t.prototype.begin=function(){this.Kt.length=0,this.Zt=0,this.$t=0;},t.prototype.update=function(t,n){this.Kt.push(t,n,Date.now());},t.prototype.end=function(){if(this.Kt.length<6)return!1;var t=Date.now()-this.Yt,n=this.Kt.length-3;if(this.Kt[n+2]<t)return!1;for(var i=n-3;i>0&&this.Kt[i+2]>t;){i-=3;}var r=this.Kt[n+2]-this.Kt[i+2];if(r<1e3/60)return!1;var e=this.Kt[n]-this.Kt[i],o=this.Kt[n+1]-this.Kt[i+1];return this.Zt=Math.atan2(o,e),this.$t=Math.sqrt(e*e+o*o)/r,this.$t>this.Wt;},t.prototype.getDistance=function(){return(this.Wt-this.$t)/this.Vt;},t.prototype.getAngle=function(){return this.Zt;},t;}(),Bo=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Xo=/^([a-z]*)$|^hsla?\(.*\)$/i;function Vo(t){return"string"==typeof t?t:$o(t);}function Wo(t){var n=document.createElement("div");if(n.style.color=t,""!==n.style.color){document.body.appendChild(n);var i=getComputedStyle(n).color;return document.body.removeChild(n),i;}return"";}var Yo=function(){var t={},n=0;return function(i){var r;if(t.hasOwnProperty(i))r=t[i];else{if(n>=1024){var e=0;for(var o in t){0==(3&e++)&&(delete t[o],--n);}}r=function(t){var n,i,r,e,o;Xo.exec(t)&&(t=Wo(t));if(Bo.exec(t)){var s=t.length-1,u=void 0;u=s<=4?1:2;var a=4===s||8===s;n=parseInt(t.substr(1+0*u,u),16),i=parseInt(t.substr(1+1*u,u),16),r=parseInt(t.substr(1+2*u,u),16),e=a?parseInt(t.substr(1+3*u,u),16):255,1==u&&(n=(n<<4)+n,i=(i<<4)+i,r=(r<<4)+r,a&&(e=(e<<4)+e)),o=[n,i,r,e/255];}else 0==t.indexOf("rgba(")?Zo(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),Zo(o)):Et(!1,14);return o;}(i),t[i]=r,++n;}return r;};}();function Ko(t){return Array.isArray(t)?t:Yo(t);}function Zo(t){return t[0]=hi(t[0]+.5|0,0,255),t[1]=hi(t[1]+.5|0,0,255),t[2]=hi(t[2]+.5|0,0,255),t[3]=hi(t[3],0,1),t;}function $o(t){var n=t[0];n!=(0|n)&&(n=n+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var r=t[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+n+","+i+","+r+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")";}function Ho(t){return Xo.test(t)&&(t=Wo(t)),Bo.test(t)||0===t.indexOf("rgba(")||0===t.indexOf("rgb(");}var Jo=function(){function t(){this.Ht={},this.Jt=0,this.Qt=32;}return t.prototype.clear=function(){this.Ht={},this.Jt=0;},t.prototype.canExpireCache=function(){return this.Jt>this.Qt;},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var n in this.Ht){var i=this.Ht[n];0!=(3&t++)||i.hasListener()||(delete this.Ht[n],--this.Jt);}}},t.prototype.get=function(t,n,i){var r=Qo(t,n,i);return r in this.Ht?this.Ht[r]:null;},t.prototype.set=function(t,n,i,r){var e=Qo(t,n,i);this.Ht[e]=r,++this.Jt;},t.prototype.setSize=function(t){this.Qt=t,this.expire();},t;}();function Qo(t,n,i){return n+":"+t+":"+(i?Vo(i):"null");}var ts=Jo,ns=new Jo(),is="opacity",rs="visible",es="extent",os="zIndex",ss="maxResolution",us="minResolution",as="maxZoom",hs="minZoom",fs="source",cs="map",ls=function(){var _t24=function t(n,i){return _t24=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t24(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t24(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),vs=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un,i.tn=n.background;var r=A({},n);return"object"==_typeof(n.properties)&&(delete r.properties,A(r,n.properties)),r[is]=void 0!==n.opacity?n.opacity:1,Et("number"==typeof r[is],64),r[rs]=void 0===n.visible||n.visible,r[os]=n.zIndex,r[ss]=void 0!==n.maxResolution?n.maxResolution:1/0,r[us]=void 0!==n.minResolution?n.minResolution:0,r[hs]=void 0!==n.minZoom?n.minZoom:-1/0,r[as]=void 0!==n.maxZoom?n.maxZoom:1/0,i.nn=void 0!==r.className?r.className:"ol-layer",delete r.className,i.setProperties(r),i.rn=null,i;}return ls(n,t),n.prototype.getBackground=function(){return this.tn;},n.prototype.getClassName=function(){return this.nn;},n.prototype.getLayerState=function(t){var n=this.rn||{layer:this,managed:void 0===t||t},i=this.getZIndex();return n.opacity=hi(Math.round(100*this.getOpacity())/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=void 0!==i||n.managed?i:1/0,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.rn=n,n;},n.prototype.getLayersArray=function(t){return r();},n.prototype.getLayerStatesArray=function(t){return r();},n.prototype.getExtent=function(){return this.get(es);},n.prototype.getMaxResolution=function(){return this.get(ss);},n.prototype.getMinResolution=function(){return this.get(us);},n.prototype.getMinZoom=function(){return this.get(hs);},n.prototype.getMaxZoom=function(){return this.get(as);},n.prototype.getOpacity=function(){return this.get(is);},n.prototype.getSourceState=function(){return r();},n.prototype.getVisible=function(){return this.get(rs);},n.prototype.getZIndex=function(){return this.get(os);},n.prototype.setBackground=function(t){this.tn=t,this.changed();},n.prototype.setExtent=function(t){this.set(es,t);},n.prototype.setMaxResolution=function(t){this.set(ss,t);},n.prototype.setMinResolution=function(t){this.set(us,t);},n.prototype.setMaxZoom=function(t){this.set(as,t);},n.prototype.setMinZoom=function(t){this.set(hs,t);},n.prototype.setOpacity=function(t){Et("number"==typeof t,64),this.set(is,t);},n.prototype.setVisible=function(t){this.set(rs,t);},n.prototype.setZIndex=function(t){this.set(os,t);},n.prototype.disposeInternal=function(){this.rn&&(this.rn.layer=null,this.rn=null),t.prototype.disposeInternal.call(this);},n;}(et),ps="prerender",ds="postrender",ys="precompose",ms="postcompose",ws="rendercomplete",gs=function(){var _t25=function t(n,i){return _t25=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t25(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t25(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),bs=function(t){function n(n){var i=this,r=A({},n);delete r.source,(i=t.call(this,r)||this).on,i.once,i.un,i.en=null,i.sn=null,i.an=null,i.hn=null,i.rendered=!1,n.render&&(i.render=n.render),n.map&&i.setMap(n.map),i.addChangeListener(fs,i.fn);var e=n.source?n.source:null;return i.setSource(e),i;}return gs(n,t),n.prototype.getLayersArray=function(t){var n=t||[];return n.push(this),n;},n.prototype.getLayerStatesArray=function(t){var n=t||[];return n.push(this.getLayerState()),n;},n.prototype.getSource=function(){return this.get(fs)||null;},n.prototype.getRenderSource=function(){return this.getSource();},n.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():"undefined";},n.prototype.cn=function(){this.changed();},n.prototype.fn=function(){this.an&&(H(this.an),this.an=null);var t=this.getSource();t&&(this.an=Z(t,z,this.cn,this)),this.changed();},n.prototype.getFeatures=function(t){return this.hn?this.hn.getFeatures(t):new Promise(function(t){return t([]);});},n.prototype.getData=function(t){return this.hn&&this.rendered?this.hn.getData(t):null;},n.prototype.render=function(t,n){var i=this.getRenderer();if(i.prepareFrame(t))return this.rendered=!0,i.renderFrame(t,n);},n.prototype.unrender=function(){this.rendered=!1;},n.prototype.setMapInternal=function(t){t||this.unrender(),this.set(cs,t);},n.prototype.getMapInternal=function(){return this.get(cs);},n.prototype.setMap=function(t){this.en&&(H(this.en),this.en=null),t||this.changed(),this.sn&&(H(this.sn),this.sn=null),t&&(this.en=Z(t,ys,function(t){var n=t.frameState.layerStatesArray,i=this.getLayerState(!1);Et(!n.some(function(t){return t.layer===i.layer;}),67),n.push(i);},this),this.sn=Z(this,z,t.render,t),this.changed());},n.prototype.setSource=function(t){this.set(fs,t);},n.prototype.getRenderer=function(){return this.hn||(this.hn=this.createRenderer()),this.hn;},n.prototype.hasRenderer=function(){return!!this.hn;},n.prototype.createRenderer=function(){return null;},n.prototype.disposeInternal=function(){this.hn&&(this.hn.dispose(),delete this.hn),this.setSource(null),t.prototype.disposeInternal.call(this);},n;}(vs);function xs(t,n){if(!t.visible)return!1;var i=n.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;var r=n.zoom;return r>t.minZoom&&r<=t.maxZoom;}var Ms=bs,_s=function(){var _t26=function t(n,i){return _t26=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t26(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t26(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Ss=function(t){function n(n){var i=t.call(this)||this;return i.vn=n,i;}return _s(n,t),n.prototype.dispatchRenderEvent=function(t,n){r();},n.prototype.calculateMatrices2D=function(t){var n=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;fn(i,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),cn(r,i);},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e,o,s,u){var a,h=n.viewState;function f(t,n,i,r){return e.call(o,n,t?i:null,r);}var c=h.projection,l=ur(t.slice(),c),v=[[0,0]];if(c.canWrapX()&&r){var p=Qn(c.getExtent());v.push([-p,0],[p,0]);}for(var d=n.layerStatesArray,y=d.length,m=[],w=[],g=0;g<v.length;g++){for(var b=y-1;b>=0;--b){var x=d[b],M=x.layer;if(M.hasRenderer()&&xs(x,h)&&s.call(u,M)){var _=M.getRenderer(),S=M.getSource();if(_&&S){var O=S.getWrapX()?l:t,j=f.bind(null,x.managed);w[0]=O[0]+v[g][0],w[1]=O[1]+v[g][1],a=_.forEachFeatureAtCoordinate(w,n,i,j,m);}if(a)return a;}}}if(0!==m.length){var E=1/m.length;return m.forEach(function(t,n){return t.distanceSq+=n*E;}),m.sort(function(t,n){return t.distanceSq-n.distanceSq;}),m.some(function(t){return a=t.callback(t.feature,t.layer,t.geometry);}),a;}},n.prototype.forEachLayerAtPixel=function(t,n,i,e,o){return r();},n.prototype.hasFeatureAtCoordinate=function(t,n,i,r,e,o){return void 0!==this.forEachFeatureAtCoordinate(t,n,i,r,S,this,e,o);},n.prototype.getMap=function(){return this.vn;},n.prototype.renderFrame=function(t){r();},n.prototype.scheduleExpireIconCache=function(t){ns.canExpireCache()&&t.postRenderFunctions.push(Os);},n;}(v);function Os(t,n){ns.expire();}var js=Ss,Es=function(){var _t27=function t(n,i){return _t27=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t27(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t27(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Ts=function(t){function n(n,i,r,e){var o=t.call(this,n)||this;return o.inversePixelTransform=i,o.frameState=r,o.context=e,o;}return Es(n,t),n;}(c),As="ol-hidden",Ps="ol-selectable",Cs="ol-unselectable",ks="ol-unsupported",Ns="ol-control",Is="ol-collapsed",zs=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Ls=["style","variant","weight","size","lineHeight","family"],Rs=function Rs(t){var n=t.match(zs);if(!n)return null;for(var i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},r=0,e=Ls.length;r<e;++r){var o=n[r+1];void 0!==o&&(i[Ls[r]]=o);}return i.families=i.family.split(/,\s?/),i;},Fs="10px sans-serif",Gs="#000",Ds="round",qs=[],Us="round",Bs=10,Xs="#000",Vs="center",Ws="middle",Ys=[0,0,0,0],Ks=new et(),Zs=new I();Zs.setSize=function(){console.warn("labelCache is deprecated.");};var $s,Hs,Js=null,Qs={},tu=function(){var t,n,i="32px ",r=["monospace","serif"],e=r.length,o="wmytzilWMYTZIL@#/&?$%10";function s(t,s,u){for(var a=!0,h=0;h<e;++h){var f=r[h];if(n=ru(t+" "+s+" "+i+f,o),u!=f){var c=ru(t+" "+s+" "+i+u+","+f,o);a=a&&c!=n;}}return!!a;}function u(){for(var n=!0,i=Ks.getKeys(),r=0,e=i.length;r<e;++r){var o=i[r];Ks.get(o)<100&&(s.apply(this,o.split("\n"))?(P(Qs),Js=null,$s=void 0,Ks.set(o,100)):(Ks.set(o,Ks.get(o)+1,!0),n=!1));}n&&(clearInterval(t),t=void 0);}return function(n){var i=Rs(n);if(i)for(var r=i.families,e=0,o=r.length;e<o;++e){var a=r[e],h=i.style+"\n"+i.weight+"\n"+a;void 0===Ks.get(h)&&(Ks.set(h,100,!0),s(i.style,i.weight,a)||(Ks.set(h,0,!0),void 0===t&&(t=setInterval(u,32))));}};}(),nu=function nu(t){var n=Qs[t];if(null==n){if(Zt){var i=Rs(t),r=iu(t,"Žg");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent);}else Hs||((Hs=document.createElement("div")).innerHTML="M",Hs.style.minHeight="0",Hs.style.maxHeight="none",Hs.style.height="auto",Hs.style.padding="0",Hs.style.border="none",Hs.style.position="absolute",Hs.style.display="block",Hs.style.left="-99999px"),Hs.style.font=t,document.body.appendChild(Hs),n=Hs.offsetHeight,document.body.removeChild(Hs);Qs[t]=n;}return n;};function iu(t,n){return Js||(Js=ko(1,1)),t!=$s&&(Js.font=t,$s=Js.font),Js.measureText(n);}function ru(t,n){return iu(t,n).width;}function eu(t,n,i){if(n in i)return i[n];var r=n.split("\n").reduce(function(n,i){return Math.max(n,ru(t,i));},0);return i[n]=r,r;}function ou(t,n){for(var i=[],r=[],e=[],o=0,s=0,u=0,a=0,h=0,f=n.length;h<=f;h+=2){var c=n[h];if("\n"!==c&&h!==f){var l=n[h+1]||t.font,v=ru(l,c);i.push(v),s+=v;var p=nu(l);r.push(p),a=Math.max(a,p);}else o=Math.max(o,s),e.push(s),s=0,u+=a;}return{width:o,height:u,widths:i,heights:r,lineWidths:e};}function su(t,n,i,r,e,o,s,u,a,h,f){t.save(),1!==i&&(t.globalAlpha*=i),n&&t.setTransform.apply(t,n),r.contextInstructions?(t.translate(a,h),t.scale(f[0],f[1]),function(t,n){for(var i=t.contextInstructions,r=0,e=i.length;r<e;r+=2){Array.isArray(i[r+1])?n[i[r]].apply(n,i[r+1]):n[i[r]]=i[r+1];}}(r,t)):f[0]<0||f[1]<0?(t.translate(a,h),t.scale(f[0],f[1]),t.drawImage(r,e,o,s,u,0,0,s,u)):t.drawImage(r,e,o,s,u,a,h,s*f[0],u*f[1]),t.restore();}var uu=function(){var _t28=function t(n,i){return _t28=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t28(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t28(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),au=function(t){function n(n){var i=t.call(this,n)||this;i.pn=Z(Ks,l,n.redrawText.bind(n)),i.dn=document.createElement("div");var r=i.dn.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",i.dn.className="ol-unselectable ol-layers";var e=n.getViewport();return e.insertBefore(i.dn,e.firstChild||null),i.yn=[],i.mn=!0,i;}return uu(n,t),n.prototype.dispatchRenderEvent=function(t,n){var i=this.getMap();if(i.hasListener(t)){var r=new Ts(t,void 0,n);i.dispatchEvent(r);}},n.prototype.disposeInternal=function(){H(this.pn),this.dn.parentNode.removeChild(this.dn),t.prototype.disposeInternal.call(this);},n.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(ys,t);var n=t.layerStatesArray.sort(function(t,n){return t.zIndex-n.zIndex;}),i=t.viewState;this.yn.length=0;for(var r=[],e=null,o=0,s=n.length;o<s;++o){var u=n[o];t.layerIndex=o;var a=u.layer,h=a.getSourceState();if(!xs(u,i)||"ready"!=h&&"undefined"!=h)a.unrender();else{var f=a.render(t,e);f&&(f!==e&&(this.yn.push(f),e=f),"getDeclutter"in a&&r.push(a));}}for(o=r.length-1;o>=0;--o){r[o].renderDeclutter(t);}Go(this.dn,this.yn),this.dispatchRenderEvent(ms,t),this.mn||(this.dn.style.display="",this.mn=!0),this.scheduleExpireIconCache(t);}else this.mn&&(this.dn.style.display="none",this.mn=!1);},n.prototype.forEachLayerAtPixel=function(t,n,i,r,e){for(var o=n.viewState,s=n.layerStatesArray,u=s.length-1;u>=0;--u){var a=s[u],h=a.layer;if(h.hasRenderer()&&xs(a,o)&&e(h)){var f=h.getRenderer().getDataAtPixel(t,n,i);if(f){var c=r(h,f);if(c)return c;}}}},n;}(js),hu=function(){var _t29=function t(n,i){return _t29=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t29(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t29(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),fu=function(t){function n(n,i){var r=t.call(this,n)||this;return r.layer=i,r;}return hu(n,t),n;}(c),cu="layers",lu=function(t){function n(n){var i=this,r=n||{},e=A({},r);delete e.layers;var o=r.layers;return(i=t.call(this,e)||this).on,i.once,i.un,i.wn=[],i.gn={},i.addChangeListener(cu,i.bn),o?Array.isArray(o)?o=new ct(o.slice(),{unique:!0}):Et("function"==typeof o.getArray,43):o=new ct(void 0,{unique:!0}),i.setLayers(o),i;}return hu(n,t),n.prototype.xn=function(){this.changed();},n.prototype.bn=function(){this.wn.forEach(H),this.wn.length=0;var t=this.getLayers();for(var n in this.wn.push(Z(t,ot,this.Mn,this),Z(t,st,this._n,this)),this.gn){this.gn[n].forEach(H);}P(this.gn);for(var i=t.getArray(),r=0,e=i.length;r<e;r++){var o=i[r];this.Sn(o),this.dispatchEvent(new fu("addlayer",o));}this.changed();},n.prototype.Sn=function(t){var i=[Z(t,l,this.xn,this),Z(t,z,this.xn,this)];t instanceof n&&i.push(Z(t,"addlayer",this.On,this),Z(t,"removelayer",this.jn,this)),this.gn[o(t)]=i;},n.prototype.On=function(t){this.dispatchEvent(new fu("addlayer",t.layer));},n.prototype.jn=function(t){this.dispatchEvent(new fu("removelayer",t.layer));},n.prototype.Mn=function(t){var n=t.element;this.Sn(n),this.dispatchEvent(new fu("addlayer",n)),this.changed();},n.prototype._n=function(t){var n=t.element,i=o(n);this.gn[i].forEach(H),delete this.gn[i],this.dispatchEvent(new fu("removelayer",n)),this.changed();},n.prototype.getLayers=function(){return this.get(cu);},n.prototype.setLayers=function(t){var n=this.getLayers();if(n)for(var i=n.getArray(),r=0,e=i.length;r<e;++r){this.dispatchEvent(new fu("removelayer",i[r]));}this.set(cu,t);},n.prototype.getLayersArray=function(t){var n=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(n);}),n;},n.prototype.getLayerStatesArray=function(t){var n=void 0!==t?t:[],i=n.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(n);});var r=this.getLayerState(),e=r.zIndex;t||void 0!==r.zIndex||(e=0);for(var o=i,s=n.length;o<s;o++){var u=n[o];u.opacity*=r.opacity,u.visible=u.visible&&r.visible,u.maxResolution=Math.min(u.maxResolution,r.maxResolution),u.minResolution=Math.max(u.minResolution,r.minResolution),u.minZoom=Math.max(u.minZoom,r.minZoom),u.maxZoom=Math.min(u.maxZoom,r.maxZoom),void 0!==r.extent&&(void 0!==u.extent?u.extent=$n(u.extent,r.extent):u.extent=r.extent),void 0===u.zIndex&&(u.zIndex=e);}return n;},n.prototype.getSourceState=function(){return"ready";},n;}(vs),vu=lu,pu=function(){var _t30=function t(n,i){return _t30=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t30(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t30(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),du=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.map=i,e.frameState=void 0!==r?r:null,e;}return pu(n,t),n;}(c),yu=function(){var _t31=function t(n,i){return _t31=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t31(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t31(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),mu=function(t){function n(n,i,r,e,o,s){var u=t.call(this,n,i,o)||this;return u.originalEvent=r,u.En=null,u.Tn=null,u.dragging=void 0!==e&&e,u.activePointers=s,u;}return yu(n,t),Object.defineProperty(n.prototype,"pixel",{get:function get(){return this.En||(this.En=this.map.getEventPixel(this.originalEvent)),this.En;},set:function set(t){this.En=t;},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"coordinate",{get:function get(){return this.Tn||(this.Tn=this.map.getCoordinateFromPixel(this.pixel)),this.Tn;},set:function set(t){this.Tn=t;},enumerable:!1,configurable:!0}),n.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault();},n.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation();},n;}(du),wu={SINGLECLICK:"singleclick",CLICK:F,DBLCLICK:G,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},gu="pointermove",bu="pointerdown",xu="pointerup",Mu="pointerout",_u=function(){var _t32=function t(n,i){return _t32=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t32(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t32(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Su=function(t){function n(n,i){var r=t.call(this,n)||this;r.vn=n,r.An,r.Pn=!1,r.Cn=!1,r.kn=[],r.Nn=void 0===i?1:i,r.In=null;var e=r.vn.getViewport();return r.zn=[],r.Ln={},r.dn=e,r.Rn=Z(e,bu,r.Fn,r),r.Gn,r.Dn=Z(e,gu,r.qn,r),r.Un=r.Bn.bind(r),r.dn.addEventListener(Y,r.Un,!!Ht&&{passive:!1}),r;}return _u(n,t),n.prototype.Xn=function(t){var n=new mu(wu.CLICK,this.vn,t);this.dispatchEvent(n),void 0!==this.An?(clearTimeout(this.An),this.An=void 0,n=new mu(wu.DBLCLICK,this.vn,t),this.dispatchEvent(n)):this.An=setTimeout(function(){this.An=void 0;var n=new mu(wu.SINGLECLICK,this.vn,t);this.dispatchEvent(n);}.bind(this),250);},n.prototype.Vn=function(t){var n=t,i=n.pointerId;if(n.type==wu.POINTERUP||n.type==wu.POINTERCANCEL){for(var r in delete this.Ln[i],this.Ln){if(this.Ln[r].target!==n.target){delete this.Ln[r];break;}}}else n.type!=wu.POINTERDOWN&&n.type!=wu.POINTERMOVE||(this.Ln[i]=n);this.zn=C(this.Ln);},n.prototype.Wn=function(t){this.Vn(t);var n=new mu(wu.POINTERUP,this.vn,t,void 0,void 0,this.zn);this.dispatchEvent(n),this.Pn&&!n.defaultPrevented&&!this.Cn&&this.Yn(t)&&this.Xn(this.In),0===this.zn.length&&(this.kn.forEach(H),this.kn.length=0,this.Cn=!1,this.In=null);},n.prototype.Yn=function(t){return 0===t.button;},n.prototype.Fn=function(t){this.Pn=0===this.zn.length,this.Vn(t);var n=new mu(wu.POINTERDOWN,this.vn,t,void 0,void 0,this.zn);for(var i in this.dispatchEvent(n),this.In={},t){var r=t[i];this.In[i]="function"==typeof r?j:r;}if(0===this.kn.length){var e=this.vn.getOwnerDocument();this.kn.push(Z(e,wu.POINTERMOVE,this.Kn,this),Z(e,wu.POINTERUP,this.Wn,this),Z(this.dn,wu.POINTERCANCEL,this.Wn,this)),this.dn.getRootNode&&this.dn.getRootNode()!==e&&this.kn.push(Z(this.dn.getRootNode(),wu.POINTERUP,this.Wn,this));}},n.prototype.Kn=function(t){if(this.Zn(t)){this.Vn(t),this.Cn=!0;var n=new mu(wu.POINTERDRAG,this.vn,t,this.Cn,void 0,this.zn);this.dispatchEvent(n);}},n.prototype.qn=function(t){this.Gn=t;var n=!(!this.In||!this.Zn(t));this.dispatchEvent(new mu(wu.POINTERMOVE,this.vn,t,n));},n.prototype.Bn=function(t){var n=this.Gn;n&&!n.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault();},n.prototype.Zn=function(t){return this.Cn||Math.abs(t.clientX-this.In.clientX)>this.Nn||Math.abs(t.clientY-this.In.clientY)>this.Nn;},n.prototype.disposeInternal=function(){this.Dn&&(H(this.Dn),this.Dn=null),this.dn.removeEventListener(Y,this.Un),this.Rn&&(H(this.Rn),this.Rn=null),this.kn.forEach(H),this.kn.length=0,this.dn=null,t.prototype.disposeInternal.call(this);},n;}(I),Ou="postrender",ju="movestart",Eu="moveend",Tu="loadstart",Au="loadend",Pu="layergroup",Cu="size",ku="target",Nu="view",Iu=1/0,zu=function(){function t(t,n){this.$n=t,this.Hn=n,this.Jn=[],this.Qn=[],this.ti={};}return t.prototype.clear=function(){this.Jn.length=0,this.Qn.length=0,P(this.ti);},t.prototype.dequeue=function(){var t=this.Jn,n=this.Qn,i=t[0];1==t.length?(t.length=0,n.length=0):(t[0]=t.pop(),n[0]=n.pop(),this.ni(0));var r=this.Hn(i);return delete this.ti[r],i;},t.prototype.enqueue=function(t){Et(!(this.Hn(t)in this.ti),31);var n=this.$n(t);return n!=Iu&&(this.Jn.push(t),this.Qn.push(n),this.ti[this.Hn(t)]=!0,this.ii(0,this.Jn.length-1),!0);},t.prototype.getCount=function(){return this.Jn.length;},t.prototype.ri=function(t){return 2*t+1;},t.prototype.ei=function(t){return 2*t+2;},t.prototype.oi=function(t){return t-1>>1;},t.prototype.si=function(){var t;for(t=(this.Jn.length>>1)-1;t>=0;t--){this.ni(t);}},t.prototype.isEmpty=function(){return 0===this.Jn.length;},t.prototype.isKeyQueued=function(t){return t in this.ti;},t.prototype.isQueued=function(t){return this.isKeyQueued(this.Hn(t));},t.prototype.ni=function(t){for(var n=this.Jn,i=this.Qn,r=n.length,e=n[t],o=i[t],s=t;t<r>>1;){var u=this.ri(t),a=this.ei(t),h=a<r&&i[a]<i[u]?a:u;n[t]=n[h],i[t]=i[h],t=h;}n[t]=e,i[t]=o,this.ii(s,t);},t.prototype.ii=function(t,n){for(var i=this.Jn,r=this.Qn,e=i[n],o=r[n];n>t;){var s=this.oi(n);if(!(r[s]>o))break;i[n]=i[s],r[n]=r[s],n=s;}i[n]=e,r[n]=o;},t.prototype.reprioritize=function(){var t,n,i,r=this.$n,e=this.Jn,o=this.Qn,s=0,u=e.length;for(n=0;n<u;++n){(i=r(t=e[n]))==Iu?delete this.ti[this.Hn(t)]:(o[s]=i,e[s++]=t);}e.length=s,o.length=s,this.si();},t;}(),Lu=function(){var _t33=function t(n,i){return _t33=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t33(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t33(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Ru=function(t){function n(n,i){var r=t.call(this,function(t){return n.apply(null,t);},function(t){return t[0].getKey();})||this;return r.ui=r.handleTileChange.bind(r),r.ai=i,r.hi=0,r.fi={},r;}return Lu(n,t),n.prototype.enqueue=function(n){var i=t.prototype.enqueue.call(this,n);i&&n[0].addEventListener(z,this.ui);return i;},n.prototype.getTilesLoading=function(){return this.hi;},n.prototype.handleTileChange=function(t){var n=t.target,i=n.getState();if(i===pt||i===dt||i===yt){n.removeEventListener(z,this.ui);var r=n.getKey();r in this.fi&&(delete this.fi[r],--this.hi),this.ai();}},n.prototype.loadMoreTiles=function(t,n){for(var i,r,e=0;this.hi<t&&e<n&&this.getCount()>0;){r=(i=this.dequeue()[0]).getKey(),i.getState()!==lt||r in this.fi||(this.fi[r]=!0,++this.hi,++e,i.load());}},n;}(zu),Fu=Ru;function Gu(t,n,i,r,e){if(!t||!(i in t.wantedTiles))return Iu;if(!t.wantedTiles[i][n.getKey()])return Iu;var o=t.viewState.center,s=r[0]-o[0],u=r[1]-o[1];return 65536*Math.log(e)+Math.sqrt(s*s+u*u)/e;}var Du=0,qu=1,Uu={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Bu=256;function Xu(t,n,i){return function(r,e,o,s,u){if(r){if(!e&&!n)return r;var a=n?0:o[0]*e,h=n?0:o[1]*e,f=u?u[0]:0,c=u?u[1]:0,l=t[0]+a/2+f,v=t[2]-a/2+f,p=t[1]+h/2+c,d=t[3]-h/2+c;l>v&&(v=l=(v+l)/2),p>d&&(d=p=(d+p)/2);var y=hi(r[0],l,v),m=hi(r[1],p,d);if(s&&i&&e){var w=30*e;y+=-w*Math.log(1+Math.max(0,l-r[0])/w)+w*Math.log(1+Math.max(0,r[0]-v)/w),m+=-w*Math.log(1+Math.max(0,p-r[1])/w)+w*Math.log(1+Math.max(0,r[1]-d)/w);}return[y,m];}};}function Vu(t){return t;}function Wu(t,n,i,r){var e=Qn(n)/i[0],o=Zn(n)/i[1];return r?Math.min(t,Math.max(e,o)):Math.min(t,Math.min(e,o));}function Yu(t,n,i){var r=Math.min(t,n);return r*=Math.log(1+50*Math.max(0,t/n-1))/50+1,i&&(r=Math.max(r,i),r/=Math.log(1+50*Math.max(0,i/t-1))/50+1),hi(r,i/2,2*n);}function Ku(t,n,i,r){return function(e,o,s,u){if(void 0!==e){var a=t[0],h=t[t.length-1],f=i?Wu(a,i,s,r):a;if(u)return void 0===n||n?Yu(e,f,h):hi(e,h,f);var c=Math.min(f,e),l=Math.floor(m(t,c,o));return t[l]>f&&l<t.length-1?t[l+1]:t[l];}};}function Zu(t,n,i,r,e,o){return function(s,u,a,h){if(void 0!==s){var f=e?Wu(n,e,a,o):n,c=void 0!==i?i:0;if(h)return void 0===r||r?Yu(s,f,c):hi(s,c,f);var l=Math.ceil(Math.log(n/f)/Math.log(t)-1e-9),v=-u*(.5-1e-9)+.5,p=Math.min(f,s),d=Math.floor(Math.log(n/p)/Math.log(t)+v),y=Math.max(l,d);return hi(n/Math.pow(t,y),c,f);}};}function $u(t,n,i,r,e){return function(o,s,u,a){if(void 0!==o){var h=r?Wu(t,r,u,e):t;return(void 0===i||i)&&a?Yu(o,h,n):hi(o,n,h);}};}function Hu(t){return void 0!==t?0:void 0;}function Ju(t){return void 0!==t?t:void 0;}function Qu(t){var n=2*Math.PI/t;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0;};}function ta(t){var n=t||yi(5);return function(t,i){return i?t:void 0!==t?Math.abs(t)<=n?0:t:void 0;};}var na=function(){var _t34=function t(n,i){return _t34=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t34(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t34(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),ia=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=A({},n);return i.ci=[0,0],i.li=[],i.vi,i.di=Sr(r.projection,"EPSG:3857"),i.yi=[100,100],i.mi=null,i.wi,i.gi,i.bi=null,i.xi,i.Mi,i._i=void 0,r.projection&&dr(),r.center&&(r.center=Rr(r.center,i.di)),r.extent&&(r.extent=Gr(r.extent,i.di)),i.Si(r),i;}return na(n,t),n.prototype.Si=function(t){var n=A({},t);for(var i in Uu){delete n[i];}this.setProperties(n,!0);var r=oa(t);this.Oi=r.maxResolution,this.ji=r.minResolution,this.Ei=r.zoomFactor,this.Ti=t.resolutions,this.Ai=t.padding,this.Pi=r.minZoom;var e=ea(t),o=r.constraint,s=sa(t);this.Ci={center:e,resolution:o,rotation:s},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom);},Object.defineProperty(n.prototype,"padding",{get:function get(){return this.Ai;},set:function set(t){var n=this.Ai;this.Ai=t;var i=this.getCenter();if(i){var r=t||[0,0,0,0];n=n||[0,0,0,0];var e=this.getResolution(),o=e/2*(r[3]-n[3]+n[1]-r[1]),s=e/2*(r[0]-n[0]+n[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-s]);}},enumerable:!1,configurable:!0}),n.prototype.ki=function(t){var n=this.getProperties();return void 0!==n.resolution?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),A({},n,t);},n.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),i=0;i<n.length;++i){var r=arguments[i];r.center&&((r=A({},r)).center=Rr(r.center,this.getProjection())),r.anchor&&((r=A({},r)).anchor=Rr(r.anchor,this.getProjection())),n[i]=r;}this.animateInternal.apply(this,n);},n.prototype.animateInternal=function(t){var n,i=arguments.length;i>1&&"function"==typeof arguments[i-1]&&(n=arguments[i-1],--i);for(var r=0;r<i&&!this.isDef();++r){var e=arguments[r];e.center&&this.setCenterInternal(e.center),void 0!==e.zoom?this.setZoom(e.zoom):e.resolution&&this.setResolution(e.resolution),void 0!==e.rotation&&this.setRotation(e.rotation);}if(r!==i){for(var o=Date.now(),s=this.mi.slice(),u=this.wi,a=this.gi,h=[];r<i;++r){var f=arguments[r],c={start:o,complete:!1,anchor:f.anchor,duration:void 0!==f.duration?f.duration:1e3,easing:f.easing||gt,callback:n};if(f.center&&(c.sourceCenter=s,c.targetCenter=f.center.slice(),s=c.targetCenter),void 0!==f.zoom?(c.sourceResolution=u,c.targetResolution=this.getResolutionForZoom(f.zoom),u=c.targetResolution):f.resolution&&(c.sourceResolution=u,c.targetResolution=f.resolution,u=c.targetResolution),void 0!==f.rotation){c.sourceRotation=a;var l=mi(f.rotation-a+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=a+l,a=c.targetRotation;}ua(c)?c.complete=!0:o+=c.duration,h.push(c);}this.li.push(h),this.setHint(Du,1),this.Ni();}else n&&ra(n,!0);},n.prototype.getAnimating=function(){return this.ci[Du]>0;},n.prototype.getInteracting=function(){return this.ci[qu]>0;},n.prototype.cancelAnimations=function(){var t;this.setHint(Du,-this.ci[Du]);for(var n=0,i=this.li.length;n<i;++n){var r=this.li[n];if(r[0].callback&&ra(r[0].callback,!1),!t)for(var e=0,o=r.length;e<o;++e){var s=r[e];if(!s.complete){t=s.anchor;break;}}}this.li.length=0,this._i=t,this.bi=null,this.xi=NaN,this.Mi=NaN;},n.prototype.Ni=function(){if(void 0!==this.vi&&(cancelAnimationFrame(this.vi),this.vi=void 0),this.getAnimating()){for(var t=Date.now(),n=!1,i=this.li.length-1;i>=0;--i){for(var r=this.li[i],e=!0,o=0,s=r.length;o<s;++o){var u=r[o];if(!u.complete){var a=t-u.start,h=u.duration>0?a/u.duration:1;h>=1?(u.complete=!0,h=1):e=!1;var f=u.easing(h);if(u.sourceCenter){var c=u.sourceCenter[0],l=u.sourceCenter[1],v=u.targetCenter[0],p=u.targetCenter[1];this.bi=u.targetCenter;var d=c+f*(v-c),y=l+f*(p-l);this.mi=[d,y];}if(u.sourceResolution&&u.targetResolution){var m=1===f?u.targetResolution:u.sourceResolution+f*(u.targetResolution-u.sourceResolution);if(u.anchor){var w=this.Ii(this.getRotation()),g=this.Ci.resolution(m,0,w,!0);this.mi=this.calculateCenterZoom(g,u.anchor);}this.xi=u.targetResolution,this.wi=m,this.zi(!0);}if(void 0!==u.sourceRotation&&void 0!==u.targetRotation){var b=1===f?mi(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+f*(u.targetRotation-u.sourceRotation);if(u.anchor){var x=this.Ci.rotation(b,!0);this.mi=this.calculateCenterRotate(x,u.anchor);}this.Mi=u.targetRotation,this.gi=b;}if(this.zi(!0),n=!0,!u.complete)break;}}if(e){this.li[i]=null,this.setHint(Du,-1),this.bi=null,this.xi=NaN,this.Mi=NaN;var M=r[0].callback;M&&ra(M,!0);}}this.li=this.li.filter(Boolean),n&&void 0===this.vi&&(this.vi=requestAnimationFrame(this.Ni.bind(this)));}},n.prototype.calculateCenterRotate=function(t,n){var i,r=this.getCenterInternal();return void 0!==r&&(nr(i=[r[0]-n[0],r[1]-n[1]],t-this.getRotation()),Zi(i,n)),i;},n.prototype.calculateCenterZoom=function(t,n){var i,r=this.getCenterInternal(),e=this.getResolution();void 0!==r&&void 0!==e&&(i=[n[0]-t*(n[0]-r[0])/e,n[1]-t*(n[1]-r[1])/e]);return i;},n.prototype.Ii=function(t){var n=this.yi;if(t){var i=n[0],r=n[1];return[Math.abs(i*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(r*Math.cos(t))];}return n;},n.prototype.setViewportSize=function(t){this.yi=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0);},n.prototype.getCenter=function(){var t=this.getCenterInternal();return t?Lr(t,this.getProjection()):t;},n.prototype.getCenterInternal=function(){return this.get(Uu.CENTER);},n.prototype.getConstraints=function(){return this.Ci;},n.prototype.getConstrainResolution=function(){return this.get("constrainResolution");},n.prototype.getHints=function(t){return void 0!==t?(t[0]=this.ci[0],t[1]=this.ci[1],t):this.ci.slice();},n.prototype.calculateExtent=function(t){return Fr(this.calculateExtentInternal(t),this.getProjection());},n.prototype.calculateExtentInternal=function(t){var n=t||this.Li(),i=this.getCenterInternal();Et(i,1);var r=this.getResolution();Et(void 0!==r,2);var e=this.getRotation();return Et(void 0!==e,3),Yn(i,r,e,n);},n.prototype.getMaxResolution=function(){return this.Oi;},n.prototype.getMinResolution=function(){return this.ji;},n.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.ji);},n.prototype.setMaxZoom=function(t){this.Si(this.ki({maxZoom:t}));},n.prototype.getMinZoom=function(){return this.getZoomForResolution(this.Oi);},n.prototype.setMinZoom=function(t){this.Si(this.ki({minZoom:t}));},n.prototype.setConstrainResolution=function(t){this.Si(this.ki({constrainResolution:t}));},n.prototype.getProjection=function(){return this.di;},n.prototype.getResolution=function(){return this.get(Uu.RESOLUTION);},n.prototype.getResolutions=function(){return this.Ti;},n.prototype.getResolutionForExtent=function(t,n){return this.getResolutionForExtentInternal(Gr(t,this.getProjection()),n);},n.prototype.getResolutionForExtentInternal=function(t,n){var i=n||this.Li(),r=Qn(t)/i[0],e=Zn(t)/i[1];return Math.max(r,e);},n.prototype.getResolutionForValueFunction=function(t){var n=t||2,i=this.getConstrainedResolution(this.Oi),r=this.ji,e=Math.log(i/r)/Math.log(n);return function(t){return i/Math.pow(n,t*e);};},n.prototype.getRotation=function(){return this.get(Uu.ROTATION);},n.prototype.getValueForResolutionFunction=function(t){var n=Math.log(t||2),i=this.getConstrainedResolution(this.Oi),r=this.ji,e=Math.log(i/r)/n;return function(t){return Math.log(i/t)/n/e;};},n.prototype.Li=function(t){var n=this.Ii(t),i=this.Ai;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n;},n.prototype.getState=function(){var t=this.getProjection(),n=this.getResolution(),i=this.getRotation(),r=this.getCenterInternal(),e=this.Ai;if(e){var o=this.Li();r=aa(r,this.Ii(),[o[0]/2+e[3],o[1]/2+e[0]],n,i);}return{center:r.slice(0),projection:void 0!==t?t:null,resolution:n,nextCenter:this.bi,nextResolution:this.xi,nextRotation:this.Mi,rotation:i,zoom:this.getZoom()};},n.prototype.getZoom=function(){var t,n=this.getResolution();return void 0!==n&&(t=this.getZoomForResolution(n)),t;},n.prototype.getZoomForResolution=function(t){var n,i,r=this.Pi||0;if(this.Ti){var e=m(this.Ti,t,1);r=e,n=this.Ti[e],i=e==this.Ti.length-1?2:n/this.Ti[e+1];}else n=this.Oi,i=this.Ei;return r+Math.log(n/t)/Math.log(i);},n.prototype.getResolutionForZoom=function(t){if(this.Ti){if(this.Ti.length<=1)return 0;var n=hi(Math.floor(t),0,this.Ti.length-2),i=this.Ti[n]/this.Ti[n+1];return this.Ti[n]/Math.pow(i,hi(t-n,0,1));}return this.Oi/Math.pow(this.Ei,t-this.Pi);},n.prototype.fit=function(t,n){var i;if(Et(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))Et(!ni(t),25),i=io(r=Gr(t,this.getProjection()));else if("Circle"===t.getType()){var r;(i=io(r=Gr(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),Vn(r));}else{var e=zr();i=e?t.clone().transform(e,this.getProjection()):t;}this.fitInternal(i,n);},n.prototype.rotatedExtentForGeometry=function(t){for(var n=this.getRotation(),i=Math.cos(n),r=Math.sin(-n),e=t.getFlatCoordinates(),o=t.getStride(),s=1/0,u=1/0,a=-1/0,h=-1/0,f=0,c=e.length;f<c;f+=o){var l=e[f]*i-e[f+1]*r,v=e[f]*r+e[f+1]*i;s=Math.min(s,l),u=Math.min(u,v),a=Math.max(a,l),h=Math.max(h,v);}return[s,u,a,h];},n.prototype.fitInternal=function(t,n){var i=n||{},r=i.size;r||(r=this.Li());var e,o=void 0!==i.padding?i.padding:[0,0,0,0],s=void 0!==i.nearest&&i.nearest;e=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.getResolutionForZoom(i.maxZoom):0;var u=this.rotatedExtentForGeometry(t),a=this.getResolutionForExtentInternal(u,[r[0]-o[1]-o[3],r[1]-o[0]-o[2]]);a=isNaN(a)?e:Math.max(a,e),a=this.getConstrainedResolution(a,s?0:1);var h=this.getRotation(),f=Math.sin(h),c=Math.cos(h),l=Vn(u);l[0]+=(o[1]-o[3])/2*a,l[1]+=(o[0]-o[2])/2*a;var v=l[0]*c-l[1]*f,p=l[1]*c+l[0]*f,d=this.getConstrainedCenter([v,p],a),y=i.callback?i.callback:j;void 0!==i.duration?this.animateInternal({resolution:a,center:d,duration:i.duration,easing:i.easing},y):(this.wi=a,this.mi=d,this.zi(!1,!0),ra(y,!0));},n.prototype.centerOn=function(t,n,i){this.centerOnInternal(Rr(t,this.getProjection()),n,i);},n.prototype.centerOnInternal=function(t,n,i){this.setCenterInternal(aa(t,n,i,this.getResolution(),this.getRotation()));},n.prototype.calculateCenterShift=function(t,n,i,r){var e,o=this.Ai;if(o&&t){var s=this.Li(-i),u=aa(t,r,[s[0]/2+o[3],s[1]/2+o[0]],n,i);e=[t[0]-u[0],t[1]-u[1]];}return e;},n.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution();},n.prototype.adjustCenter=function(t){var n=Lr(this.mi,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]]);},n.prototype.adjustCenterInternal=function(t){var n=this.mi;this.setCenterInternal([n[0]+t[0],n[1]+t[1]]);},n.prototype.adjustResolution=function(t,n){var i=n&&Rr(n,this.getProjection());this.adjustResolutionInternal(t,i);},n.prototype.adjustResolutionInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),r=this.Ii(this.getRotation()),e=this.Ci.resolution(this.wi*t,0,r,i);n&&(this.mi=this.calculateCenterZoom(e,n)),this.wi*=t,this.zi();},n.prototype.adjustZoom=function(t,n){this.adjustResolution(Math.pow(this.Ei,-t),n);},n.prototype.adjustRotation=function(t,n){n&&(n=Rr(n,this.getProjection())),this.adjustRotationInternal(t,n);},n.prototype.adjustRotationInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),r=this.Ci.rotation(this.gi+t,i);n&&(this.mi=this.calculateCenterRotate(r,n)),this.gi+=t,this.zi();},n.prototype.setCenter=function(t){this.setCenterInternal(t?Rr(t,this.getProjection()):t);},n.prototype.setCenterInternal=function(t){this.mi=t,this.zi();},n.prototype.setHint=function(t,n){return this.ci[t]+=n,this.changed(),this.ci[t];},n.prototype.setResolution=function(t){this.wi=t,this.zi();},n.prototype.setRotation=function(t){this.gi=t,this.zi();},n.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t));},n.prototype.zi=function(t,n){var i=this.getAnimating()||this.getInteracting()||n,r=this.Ci.rotation(this.gi,i),e=this.Ii(r),o=this.Ci.resolution(this.wi,0,e,i),s=this.Ci.center(this.mi,o,e,i,this.calculateCenterShift(this.mi,o,r,e));this.get(Uu.ROTATION)!==r&&this.set(Uu.ROTATION,r),this.get(Uu.RESOLUTION)!==o&&(this.set(Uu.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),s&&this.get(Uu.CENTER)&&tr(this.get(Uu.CENTER),s)||this.set(Uu.CENTER,s),this.getAnimating()&&!t&&this.cancelAnimations(),this._i=void 0;},n.prototype.resolveConstraints=function(t,n,i){var r=void 0!==t?t:200,e=n||0,o=this.Ci.rotation(this.gi),s=this.Ii(o),u=this.Ci.resolution(this.wi,e,s),a=this.Ci.center(this.mi,u,s,!1,this.calculateCenterShift(this.mi,u,o,s));if(0===r&&!this._i)return this.wi=u,this.gi=o,this.mi=a,void this.zi();var h=i||(0===r?this._i:void 0);this._i=void 0,this.getResolution()===u&&this.getRotation()===o&&this.getCenterInternal()&&tr(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:a,resolution:u,duration:r,easing:wt,anchor:h}));},n.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(qu,1);},n.prototype.endInteraction=function(t,n,i){var r=i&&Rr(i,this.getProjection());this.endInteractionInternal(t,n,r);},n.prototype.endInteractionInternal=function(t,n,i){this.setHint(qu,-1),this.resolveConstraints(t,n,i);},n.prototype.getConstrainedCenter=function(t,n){var i=this.Ii(this.getRotation());return this.Ci.center(t,n||this.getResolution(),i);},n.prototype.getConstrainedZoom=function(t,n){var i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,n));},n.prototype.getConstrainedResolution=function(t,n){var i=n||0,r=this.Ii(this.getRotation());return this.Ci.resolution(t,i,r);},n;}(et);function ra(t,n){setTimeout(function(){t(n);},0);}function ea(t){if(void 0!==t.extent){var n=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return Xu(t.extent,t.constrainOnlyCenter,n);}var i=Sr(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&i.isGlobal()){var r=i.getExtent().slice();return r[0]=-1/0,r[2]=1/0,Xu(r,!1,!1);}return Vu;}function oa(t){var n,i,r,e=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28,s=void 0!==t.zoomFactor?t.zoomFactor:2,u=void 0!==t.multiWorld&&t.multiWorld,a=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,h=void 0!==t.showFullExtent&&t.showFullExtent,f=Sr(t.projection,"EPSG:3857"),c=f.getExtent(),l=t.constrainOnlyCenter,v=t.extent;if(u||v||!f.isGlobal()||(l=!1,v=c),void 0!==t.resolutions){var p=t.resolutions;i=p[e],r=void 0!==p[o]?p[o]:p[p.length-1],n=t.constrainResolution?Ku(p,a,!l&&v,h):$u(i,r,a,!l&&v,h);}else{var d=(c?Math.max(Qn(c),Zn(c)):360*Gt[qt.DEGREES]/f.getMetersPerUnit())/Bu/Math.pow(2,0),y=d/Math.pow(2,28);void 0!==(i=t.maxResolution)?e=0:i=d/Math.pow(s,e),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(s,o):d/Math.pow(s,o):y),o=e+Math.floor(Math.log(i/r)/Math.log(s)),r=i/Math.pow(s,o-e),n=t.constrainResolution?Zu(s,i,r,a,!l&&v,h):$u(i,r,a,!l&&v,h);}return{constraint:n,maxResolution:i,minResolution:r,minZoom:e,zoomFactor:s};}function sa(t){if(void 0===t.enableRotation||t.enableRotation){var n=t.constrainRotation;return void 0===n||!0===n?ta():!1===n?Ju:"number"==typeof n?Qu(n):Ju;}return Hu;}function ua(t){return!(t.sourceCenter&&t.targetCenter&&!tr(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation;}function aa(t,n,i,r,e){var o=Math.cos(-e),s=Math.sin(-e),u=t[0]*o-t[1]*s,a=t[1]*o+t[0]*s;return[(u+=(n[0]/2-i[0])*r)*o-(a+=(i[1]-n[1]/2)*r)*(s=-s),a*o+u*s];}var ha=ia;function fa(t,n,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*n,i[1]=t[1]+2*n,i;}function ca(t){return t[0]>0&&t[1]>0;}function la(t,n,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*n+.5|0,i[1]=t[1]*n+.5|0,i;}function va(t,n){return Array.isArray(t)?t:(void 0===n?n=[t,t]:(n[0]=t,n[1]=t),n);}var pa=function(){var _t35=function t(n,i){return _t35=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t35(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t35(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}();function da(t){t instanceof Ms?t.setMapInternal(null):t instanceof vu&&t.getLayers().forEach(da);}function ya(t,n){if(t instanceof Ms)t.setMapInternal(n);else if(t instanceof vu)for(var i=t.getLayers().getArray(),r=0,e=i.length;r<e;++r){ya(i[r],n);}}var ma=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=function(t){var n=null;void 0!==t.keyboardEventTarget&&(n="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,r,e,o={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new vu({layers:t.layers});o[Pu]=s,o[ku]=t.target,o[Nu]=t.view instanceof ha?t.view:new ha(),void 0!==t.controls&&(Array.isArray(t.controls)?i=new ct(t.controls.slice()):(Et("function"==typeof t.controls.getArray,47),i=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new ct(t.interactions.slice()):(Et("function"==typeof t.interactions.getArray,48),r=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?e=new ct(t.overlays.slice()):(Et("function"==typeof t.overlays.getArray,49),e=t.overlays):e=new ct();return{controls:i,interactions:r,keyboardEventTarget:n,overlays:e,values:o};}(n);i.Ri,i.Fi=!0,i.Gi=i.handleBrowserEvent.bind(i),i.Di=void 0!==n.maxTilesLoading?n.maxTilesLoading:16,i.kt=void 0!==n.pixelRatio?n.pixelRatio:Kt,i.qi,i.Ui,i.Bi=function(){this.Ui=void 0,this.Xi(Date.now());}.bind(i),i.Vi=[1,0,0,1,0,0],i.Wi=[1,0,0,1,0,0],i.Yi=0,i.Ki=null,i.Zi=null,i.$i=null,i.Hi=null,i.Ji=null,i.Qi=document.createElement("div"),i.Qi.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),i.Qi.style.position="relative",i.Qi.style.overflow="hidden",i.Qi.style.width="100%",i.Qi.style.height="100%",i.tr=document.createElement("div"),i.tr.style.position="absolute",i.tr.style.zIndex="0",i.tr.style.width="100%",i.tr.style.height="100%",i.tr.style.pointerEvents="none",i.tr.className="ol-overlaycontainer",i.Qi.appendChild(i.tr),i.nr=document.createElement("div"),i.nr.style.position="absolute",i.nr.style.zIndex="0",i.nr.style.width="100%",i.nr.style.height="100%",i.nr.style.pointerEvents="none",i.nr.className="ol-overlaycontainer-stopevent",i.Qi.appendChild(i.nr),i.ir=null,i.Nn=n.moveTolerance,i.rr=r.keyboardEventTarget,i.er=null,i.controls=r.controls||new ct(),i.interactions=r.interactions||new ct(),i.sr=r.overlays,i.ur={},i.hn=null,i.ar=[],i.hr=new Fu(i.getTilePriority.bind(i),i.cr.bind(i)),i.addChangeListener(Pu,i.lr),i.addChangeListener(Nu,i.vr),i.addChangeListener(Cu,i.pr),i.addChangeListener(ku,i.dr),i.setProperties(r.values);var e=i;return!n.view||n.view instanceof ha||n.view.then(function(t){e.setView(new ha(t));}),i.controls.addEventListener(ot,function(t){t.element.setMap(this);}.bind(i)),i.controls.addEventListener(st,function(t){t.element.setMap(null);}.bind(i)),i.interactions.addEventListener(ot,function(t){t.element.setMap(this);}.bind(i)),i.interactions.addEventListener(st,function(t){t.element.setMap(null);}.bind(i)),i.sr.addEventListener(ot,function(t){this.yr(t.element);}.bind(i)),i.sr.addEventListener(st,function(t){var n=t.element.getId();void 0!==n&&delete this.ur[n.toString()],t.element.setMap(null);}.bind(i)),i.controls.forEach(function(t){t.setMap(this);}.bind(i)),i.interactions.forEach(function(t){t.setMap(this);}.bind(i)),i.sr.forEach(i.yr.bind(i)),i;}return pa(n,t),n.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method");},n.prototype.addControl=function(t){this.getControls().push(t);},n.prototype.addInteraction=function(t){this.getInteractions().push(t);},n.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t);},n.prototype.mr=function(t){ya(t.layer,this);},n.prototype.addOverlay=function(t){this.getOverlays().push(t);},n.prototype.yr=function(t){var n=t.getId();void 0!==n&&(this.ur[n.toString()]=t),t.setMap(this);},n.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.sr.clear(),this.setTarget(null),t.prototype.disposeInternal.call(this);},n.prototype.forEachFeatureAtPixel=function(t,n,i){if(this.Ki&&this.hn){var r=this.getCoordinateFromPixelInternal(t),e=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,o=void 0!==i.layerFilter?i.layerFilter:S,s=!1!==i.checkWrapped;return this.hn.forEachFeatureAtCoordinate(r,this.Ki,e,s,n,null,o,null);}},n.prototype.getFeaturesAtPixel=function(t,n){var i=[];return this.forEachFeatureAtPixel(t,function(t){i.push(t);},n),i;},n.prototype.getAllLayers=function(){var t=[];return function n(i){i.forEach(function(i){i instanceof vu?n(i.getLayers()):t.push(i);});}(this.getLayers()),t;},n.prototype.forEachLayerAtPixel=function(t,n,i){if(this.Ki&&this.hn){var r=i||{},e=void 0!==r.hitTolerance?r.hitTolerance:0,o=r.layerFilter||S;return this.hn.forEachLayerAtPixel(t,this.Ki,e,n,o);}},n.prototype.hasFeatureAtPixel=function(t,n){if(!this.Ki||!this.hn)return!1;var i=this.getCoordinateFromPixelInternal(t),r=void 0!==(n=void 0!==n?n:{}).layerFilter?n.layerFilter:S,e=void 0!==n.hitTolerance?n.hitTolerance:0,o=!1!==n.checkWrapped;return this.hn.hasFeatureAtCoordinate(i,this.Ki,e,o,r,null);},n.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t));},n.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t));},n.prototype.getEventPixel=function(t){var n=this.Qi.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-n.left,i.clientY-n.top];},n.prototype.getTarget=function(){return this.get(ku);},n.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null;},n.prototype.getCoordinateFromPixel=function(t){return Lr(this.getCoordinateFromPixelInternal(t),this.getView().getProjection());},n.prototype.getCoordinateFromPixelInternal=function(t){var n=this.Ki;return n?on(n.pixelToCoordinateTransform,t.slice()):null;},n.prototype.getControls=function(){return this.controls;},n.prototype.getOverlays=function(){return this.sr;},n.prototype.getOverlayById=function(t){var n=this.ur[t.toString()];return void 0!==n?n:null;},n.prototype.getInteractions=function(){return this.interactions;},n.prototype.getLayerGroup=function(){return this.get(Pu);},n.prototype.setLayers=function(t){var n=this.getLayerGroup();if(t instanceof ct)n.setLayers(t);else{var i=n.getLayers();i.clear(),i.extend(t);}},n.prototype.getLayers=function(){return this.getLayerGroup().getLayers();},n.prototype.getLoadingOrNotReady=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var r=t[n];if(r.visible){var e=r.layer.getRenderer();if(e&&!e.ready)return!0;var o=r.layer.getSource();if(o&&o.loading)return!0;}}return!1;},n.prototype.getPixelFromCoordinate=function(t){var n=Rr(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n);},n.prototype.getPixelFromCoordinateInternal=function(t){var n=this.Ki;return n?on(n.coordinateToPixelTransform,t.slice(0,2)):null;},n.prototype.getRenderer=function(){return this.hn;},n.prototype.getSize=function(){return this.get(Cu);},n.prototype.getView=function(){return this.get(Nu);},n.prototype.getViewport=function(){return this.Qi;},n.prototype.getOverlayContainer=function(){return this.tr;},n.prototype.getOverlayContainerStopEvent=function(){return this.nr;},n.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document;},n.prototype.getTilePriority=function(t,n,i,r){return Gu(this.Ki,t,n,i,r);},n.prototype.handleBrowserEvent=function(t,n){var i=n||t.type,r=new mu(i,this,t);this.handleMapBrowserEvent(r);},n.prototype.handleMapBrowserEvent=function(t){if(this.Ki){var n=t.originalEvent,i=n.type;if(i===bu||i===K||i===B){var r=this.getOwnerDocument(),e=this.Qi.getRootNode?this.Qi.getRootNode():r,o=n.target;if(this.nr.contains(o)||!(e===r?r.documentElement:e).contains(o))return;}if(t.frameState=this.Ki,!1!==this.dispatchEvent(t))for(var s=this.getInteractions().getArray().slice(),u=s.length-1;u>=0;u--){var a=s[u];if(a.getMap()===this&&a.getActive()&&this.getTargetElement())if(!a.handleEvent(t)||t.propagationStopped)break;}}},n.prototype.handlePostRender=function(){var t=this.Ki,n=this.hr;if(!n.isEmpty()){var i=this.Di,r=i;if(t){var e=t.viewHints;if(e[Du]||e[qu]){var o=Date.now()-t.time>8;i=o?0:8,r=o?0:2;}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,r));}t&&this.hn&&!t.animate&&(!0===this.Ri?(this.hasListener(ws)&&this.hn.dispatchRenderEvent(ws,t),!1===this.Fi&&(this.Fi=!0,this.dispatchEvent(new du(Au,this,t)))):!0===this.Fi&&(this.Fi=!1,this.dispatchEvent(new du(Tu,this,t))));for(var s=this.ar,u=0,a=s.length;u<a;++u){s[u](this,t);}s.length=0;},n.prototype.pr=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render();},n.prototype.dr=function(){if(this.ir){for(var t=0,n=this.er.length;t<n;++t){H(this.er[t]);}this.er=null,this.Qi.removeEventListener(R,this.Gi),this.Qi.removeEventListener(K,this.Gi),this.ir.dispose(),this.ir=null,Ro(this.Qi);}var i=this.getTargetElement();if(i){for(var r in i.appendChild(this.Qi),this.hn||(this.hn=this.createRenderer()),this.ir=new Su(this,this.Nn),wu){this.ir.addEventListener(wu[r],this.handleMapBrowserEvent.bind(this));}this.Qi.addEventListener(R,this.Gi,!1),this.Qi.addEventListener(K,this.Gi,!!Ht&&{passive:!1});var e=this.getOwnerDocument().defaultView,o=this.rr?this.rr:i;this.er=[Z(o,B,this.handleBrowserEvent,this),Z(o,X,this.handleBrowserEvent,this),Z(e,W,this.updateSize,this)];}else this.hn&&(clearTimeout(this.qi),this.qi=void 0,this.ar.length=0,this.hn.dispose(),this.hn=null),this.Ui&&(cancelAnimationFrame(this.Ui),this.Ui=void 0);this.updateSize();},n.prototype.cr=function(){this.render();},n.prototype.wr=function(){this.render();},n.prototype.vr=function(){this.$i&&(H(this.$i),this.$i=null),this.Hi&&(H(this.Hi),this.Hi=null);var t=this.getView();t&&(this.gr(),this.$i=Z(t,l,this.wr,this),this.Hi=Z(t,z,this.wr,this),t.resolveConstraints(0)),this.render();},n.prototype.lr=function(){this.Ji&&(this.Ji.forEach(H),this.Ji=null);var t=this.getLayerGroup();t&&(this.mr(new fu("addlayer",t)),this.Ji=[Z(t,l,this.render,this),Z(t,z,this.render,this),Z(t,"addlayer",this.mr,this),Z(t,"removelayer",this.br,this)]),this.render();},n.prototype.isRendered=function(){return!!this.Ki;},n.prototype.renderSync=function(){this.Ui&&cancelAnimationFrame(this.Ui),this.Bi();},n.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var r=t[n].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged();}},n.prototype.render=function(){this.hn&&void 0===this.Ui&&(this.Ui=requestAnimationFrame(this.Bi));},n.prototype.removeControl=function(t){return this.getControls().remove(t);},n.prototype.removeInteraction=function(t){return this.getInteractions().remove(t);},n.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t);},n.prototype.br=function(t){da(t.layer);},n.prototype.removeOverlay=function(t){return this.getOverlays().remove(t);},n.prototype.Xi=function(t){var n=this,i=this.getSize(),r=this.getView(),e=this.Ki,s=null;if(void 0!==i&&ca(i)&&r&&r.isDef()){var u=r.getHints(this.Ki?this.Ki.viewHints:void 0),a=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.Vi,declutterTree:null,extent:Yn(a.center,a.resolution,a.rotation,i),index:this.Yi++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.kt,pixelToCoordinateTransform:this.Wi,postRenderFunctions:[],size:i,tileQueue:this.hr,time:t,usedTiles:{},viewState:a,viewHints:u,wantedTiles:{},mapId:o(this),renderTargets:{}},a.nextCenter&&a.nextResolution){var h=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=Yn(a.nextCenter,a.nextResolution,h,i);}}if(this.Ki=s,this.hn.renderFrame(s),s){if(s.animate&&this.render(),Array.prototype.push.apply(this.ar,s.postRenderFunctions),e)(!this.Zi||!ni(this.Zi)&&!Nn(s.extent,this.Zi))&&(this.dispatchEvent(new du(ju,this,e)),this.Zi=Pn(this.Zi));this.Zi&&!s.viewHints[Du]&&!s.viewHints[qu]&&!Nn(s.extent,this.Zi)&&(this.dispatchEvent(new du(Eu,this,s)),Mn(s.extent,this.Zi));}this.dispatchEvent(new du(Ou,this,s)),this.Ri=this.hasListener(Tu)||this.hasListener(Au)||this.hasListener(ws)?!this.hr.getTilesLoading()&&!this.hr.getCount()&&!this.getLoadingOrNotReady():void 0,this.qi||(this.qi=setTimeout(function(){n.qi=void 0,n.handlePostRender();},0));},n.prototype.setLayerGroup=function(t){var n=this.getLayerGroup();n&&this.br(new fu("removelayer",n)),this.set(Pu,t);},n.prototype.setSize=function(t){this.set(Cu,t);},n.prototype.setTarget=function(t){this.set(ku,t);},n.prototype.setView=function(t){if(!t||t instanceof ha)this.set(Nu,t);else{this.set(Nu,new ha());var n=this;t.then(function(t){n.setView(new ha(t));});}},n.prototype.updateSize=function(){var t=this.getTargetElement(),n=void 0;if(t){var i=getComputedStyle(t),r=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),e=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);isNaN(r)||isNaN(e)||!ca(n=[r,e])&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0.");}this.setSize(n),this.gr();},n.prototype.gr=function(){var t=this.getView();if(t){var n=void 0,i=getComputedStyle(this.Qi);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(n);}},n;}(et);var wa=ma,ga=function(){var _t36=function t(n,i){return _t36=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t36(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t36(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),ba=function(t){function n(n){var i=t.call(this)||this,r=n.element;return!r||n.target||r.style.pointerEvents||(r.style.pointerEvents="auto"),i.element=r||null,i.Mr=null,i.vn=null,i.listenerKeys=[],n.render&&(i.render=n.render),n.target&&i.setTarget(n.target),i;}return ga(n,t),n.prototype.disposeInternal=function(){Ro(this.element),t.prototype.disposeInternal.call(this);},n.prototype.getMap=function(){return this.vn;},n.prototype.setMap=function(t){this.vn&&Ro(this.element);for(var n=0,i=this.listenerKeys.length;n<i;++n){H(this.listenerKeys[n]);}(this.listenerKeys.length=0,this.vn=t,t)&&((this.Mr?this.Mr:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==j&&this.listenerKeys.push(Z(t,Ou,this.render,this)),t.render());},n.prototype.render=function(t){},n.prototype.setTarget=function(t){this.Mr="string"==typeof t?document.getElementById(t):t;},n;}(et),xa=function(){var _t37=function t(n,i){return _t37=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t37(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t37(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Ma=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this)._r=document.createElement("ul"),i.Sr=void 0===r.collapsed||r.collapsed,i.jr=i.Sr,i.Er=void 0!==r.collapsible,i.Tr=void 0===r.collapsible||r.collapsible,i.Tr||(i.Sr=!1);var e=void 0!==r.className?r.className:"ol-attribution",o=void 0!==r.tipLabel?r.tipLabel:"Attributions",s=void 0!==r.expandClassName?r.expandClassName:e+"-expand",u=void 0!==r.collapseLabel?r.collapseLabel:"›",a=void 0!==r.collapseClassName?r.collapseClassName:e+"-collapse";"string"==typeof u?(i.Ar=document.createElement("span"),i.Ar.textContent=u,i.Ar.className=a):i.Ar=u;var h=void 0!==r.label?r.label:"i";"string"==typeof h?(i.Pr=document.createElement("span"),i.Pr.textContent=h,i.Pr.className=s):i.Pr=h;var f=i.Tr&&!i.Sr?i.Ar:i.Pr;i.Cr=document.createElement("button"),i.Cr.setAttribute("type","button"),i.Cr.setAttribute("aria-expanded",String(!i.Sr)),i.Cr.title=o,i.Cr.appendChild(f),i.Cr.addEventListener(F,i.kr.bind(i),!1);var c=e+" "+"ol-unselectable "+Ns+(i.Sr&&i.Tr?" ol-collapsed":"")+(i.Tr?"":" ol-uncollapsible"),l=i.element;return l.className=c,l.appendChild(i.Cr),l.appendChild(i._r),i.Nr=[],i.mn=!0,i;}return xa(n,t),n.prototype.Ir=function(t){for(var n={},i=[],r=!0,e=t.layerStatesArray,o=0,s=e.length;o<s;++o){var u=e[o];if(xs(u,t.viewState)){var a=u.layer.getSource();if(a){var h=a.getAttributions();if(h){var f=h(t);if(f)if(r=r&&!1!==a.getAttributionsCollapsible(),Array.isArray(f))for(var c=0,l=f.length;c<l;++c){f[c]in n||(i.push(f[c]),n[f[c]]=!0);}else f in n||(i.push(f),n[f]=!0);}}}}return this.Er||this.setCollapsible(r),i;},n.prototype.zr=function(t){if(t){var n=this.Ir(t),i=n.length>0;if(this.mn!=i&&(this.element.style.display=i?"":"none",this.mn=i),!x(n,this.Nr)){Fo(this._r);for(var r=0,e=n.length;r<e;++r){var o=document.createElement("li");o.innerHTML=n[r],this._r.appendChild(o);}this.Nr=n;}}else this.mn&&(this.element.style.display="none",this.mn=!1);},n.prototype.kr=function(t){t.preventDefault(),this.Lr(),this.jr=this.Sr;},n.prototype.Lr=function(){this.element.classList.toggle(Is),this.Sr?Lo(this.Ar,this.Pr):Lo(this.Pr,this.Ar),this.Sr=!this.Sr,this.Cr.setAttribute("aria-expanded",String(!this.Sr));},n.prototype.getCollapsible=function(){return this.Tr;},n.prototype.setCollapsible=function(t){this.Tr!==t&&(this.Tr=t,this.element.classList.toggle("ol-uncollapsible"),this.jr&&this.Lr());},n.prototype.setCollapsed=function(t){this.jr=t,this.Tr&&this.Sr!==t&&this.Lr();},n.prototype.getCollapsed=function(){return this.Sr;},n.prototype.render=function(t){this.zr(t.frameState);},n;}(ba),_a=function(){var _t38=function t(n,i){return _t38=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t38(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t38(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Sa=function(t){function n(n){var i=this,r=n||{};i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this;var e=void 0!==r.className?r.className:"ol-rotate",o=void 0!==r.label?r.label:"⇧",s=void 0!==r.compassClassName?r.compassClassName:"ol-compass";i.Pr=null,"string"==typeof o?(i.Pr=document.createElement("span"),i.Pr.className=s,i.Pr.textContent=o):(i.Pr=o,i.Pr.classList.add(s));var u=r.tipLabel?r.tipLabel:"Reset rotation",a=document.createElement("button");a.className=e+"-reset",a.setAttribute("type","button"),a.title=u,a.appendChild(i.Pr),a.addEventListener(F,i.kr.bind(i),!1);var h=e+" "+"ol-unselectable "+Ns,f=i.element;return f.className=h,f.appendChild(a),i.Rr=r.resetNorth?r.resetNorth:void 0,i.Fr=void 0!==r.duration?r.duration:250,i.Gr=void 0===r.autoHide||r.autoHide,i.Dr=void 0,i.Gr&&i.element.classList.add(As),i;}return _a(n,t),n.prototype.kr=function(t){t.preventDefault(),void 0!==this.Rr?this.Rr():this.qr();},n.prototype.qr=function(){var t=this.getMap().getView();if(t){var n=t.getRotation();void 0!==n&&(this.Fr>0&&n%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.Fr,easing:wt}):t.setRotation(0));}},n.prototype.render=function(t){var n=t.frameState;if(n){var i=n.viewState.rotation;if(i!=this.Dr){var r="rotate("+i+"rad)";if(this.Gr){var e=this.element.classList.contains(As);e||0!==i?e&&0!==i&&this.element.classList.remove(As):this.element.classList.add(As);}this.Pr.style.transform=r;}this.Dr=i;}},n;}(ba),Oa=Sa,ja=function(){var _t39=function t(n,i){return _t39=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t39(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t39(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Ea=function(t){function n(n){var i=this,r=n||{};i=t.call(this,{element:document.createElement("div"),target:r.target})||this;var e=void 0!==r.className?r.className:"ol-zoom",o=void 0!==r.delta?r.delta:1,s=void 0!==r.zoomInClassName?r.zoomInClassName:e+"-in",u=void 0!==r.zoomOutClassName?r.zoomOutClassName:e+"-out",a=void 0!==r.zoomInLabel?r.zoomInLabel:"+",h=void 0!==r.zoomOutLabel?r.zoomOutLabel:"–",f=void 0!==r.zoomInTipLabel?r.zoomInTipLabel:"Zoom in",c=void 0!==r.zoomOutTipLabel?r.zoomOutTipLabel:"Zoom out",l=document.createElement("button");l.className=s,l.setAttribute("type","button"),l.title=f,l.appendChild("string"==typeof a?document.createTextNode(a):a),l.addEventListener(F,i.kr.bind(i,o),!1);var v=document.createElement("button");v.className=u,v.setAttribute("type","button"),v.title=c,v.appendChild("string"==typeof h?document.createTextNode(h):h),v.addEventListener(F,i.kr.bind(i,-o),!1);var p=e+" "+"ol-unselectable "+Ns,d=i.element;return d.className=p,d.appendChild(l),d.appendChild(v),i.Fr=void 0!==r.duration?r.duration:250,i;}return ja(n,t),n.prototype.kr=function(t,n){n.preventDefault(),this.Ur(t);},n.prototype.Ur=function(t){var n=this.getMap().getView();if(n){var i=n.getZoom();if(void 0!==i){var r=n.getConstrainedZoom(i+t);this.Fr>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:r,duration:this.Fr,easing:wt})):n.setZoom(r);}}},n;}(ba);function Ta(t){var n=t||{},i=new ct();return(void 0===n.zoom||n.zoom)&&i.push(new Ea(n.zoomOptions)),(void 0===n.rotate||n.rotate)&&i.push(new Oa(n.rotateOptions)),(void 0===n.attribution||n.attribution)&&i.push(new Ma(n.attributionOptions)),i;}var Aa="active",Pa=function(){var _t40=function t(n,i){return _t40=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t40(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t40(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}();function Ca(t,n,i){var r=t.getCenterInternal();if(r){var e=[r[0]+n[0],r[1]+n[1]];t.animateInternal({duration:void 0!==i?i:250,easing:bt,center:t.getConstrainedCenter(e)});}}function ka(t,n,i,r){var e=t.getZoom();if(void 0!==e){var o=t.getConstrainedZoom(e+n),s=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:s,anchor:i,duration:void 0!==r?r:250,easing:wt});}}var Na=function(t){function n(n){var i=t.call(this)||this;return i.on,i.once,i.un,n&&n.handleEvent&&(i.handleEvent=n.handleEvent),i.vn=null,i.setActive(!0),i;}return Pa(n,t),n.prototype.getActive=function(){return this.get(Aa);},n.prototype.getMap=function(){return this.vn;},n.prototype.handleEvent=function(t){return!0;},n.prototype.setActive=function(t){this.set(Aa,t);},n.prototype.setMap=function(t){this.vn=t;},n;}(et),Ia=function(){var _t41=function t(n,i){return _t41=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t41(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t41(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),za=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.Br=r.delta?r.delta:1,i.Fr=void 0!==r.duration?r.duration:250,i;}return Ia(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==wu.DBLCLICK){var i=t.originalEvent,r=t.map,e=t.coordinate,o=i.shiftKey?-this.Br:this.Br;ka(r.getView(),o,e,this.Fr),i.preventDefault(),n=!0;}return!n;},n;}(Na),La=function(){var _t42=function t(n,i){return _t42=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t42(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t42(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}();function Ra(t){for(var n=t.length,i=0,r=0,e=0;e<n;e++){i+=t[e].clientX,r+=t[e].clientY;}return[i/n,r/n];}var Fa=function(t){function n(n){var i=this,r=n||{};return i=t.call(this,r)||this,r.handleDownEvent&&(i.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(i.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(i.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(i.handleUpEvent=r.handleUpEvent),r.stopDown&&(i.stopDown=r.stopDown),i.handlingDownUpSequence=!1,i.targetPointers=[],i;}return La(n,t),n.prototype.getPointerCount=function(){return this.targetPointers.length;},n.prototype.handleDownEvent=function(t){return!1;},n.prototype.handleDragEvent=function(t){},n.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var n=!1;if(this.Xr(t),this.handlingDownUpSequence){if(t.type==wu.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==wu.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0;}}else if(t.type==wu.POINTERDOWN){var r=this.handleDownEvent(t);this.handlingDownUpSequence=r,n=this.stopDown(r);}else t.type==wu.POINTERMOVE&&this.handleMoveEvent(t);return!n;},n.prototype.handleMoveEvent=function(t){},n.prototype.handleUpEvent=function(t){return!1;},n.prototype.stopDown=function(t){return t;},n.prototype.Xr=function(t){t.activePointers&&(this.targetPointers=t.activePointers);},n;}(Na);function Ga(t){var n=arguments;return function(t){for(var i=!0,r=0,e=n.length;r<e&&(i=i&&n[r](t));++r){;}return i;};}var Da=function Da(t){var n=t.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey;},qa=function qa(t){var n=t.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey;},Ua=function Ua(t){var n=t.map.getTargetElement(),i=t.map.getOwnerDocument().activeElement;return n.contains(i);},Ba=function Ba(t){return!t.map.getTargetElement().hasAttribute("tabindex")||Ua(t);},Xa=S,Va=function Va(t){var n=t.originalEvent;return 0==n.button&&!(Wt&&Yt&&n.ctrlKey);},Wa=O,Ya=function Ya(t){return t.type==wu.SINGLECLICK;},Ka=function Ka(t){var n=t.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey;},Za=function Za(t){var n=t.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey;},$a=function $a(t){var n=t.originalEvent,i=n.target.tagName;return"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i&&!n.target.isContentEditable;},Ha=function Ha(t){var n=t.originalEvent;return Et(void 0!==n,56),"mouse"==n.pointerType;},Ja=function Ja(t){var n=t.originalEvent;return Et(void 0!==n,56),n.isPrimary&&0===n.button;},Qa=function(){var _t43=function t(n,i){return _t43=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t43(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t43(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),th=function(t){function n(n){var i=t.call(this,{stopDown:O})||this,r=n||{};i.Vr=r.kinetic,i.lastCentroid=null,i.Wr,i.Yr=!1;var e=r.condition?r.condition:Ga(Ka,Ja);return i.Kr=r.onFocusOnly?Ga(Ba,e):e,i.Zr=!1,i;}return Qa(n,t),n.prototype.handleDragEvent=function(t){this.Yr||(this.Yr=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=Ra(n);if(n.length==this.Wr){if(this.Vr&&this.Vr.update(i[0],i[1]),this.lastCentroid){var r=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],e=t.map.getView();ir(r,e.getResolution()),nr(r,e.getRotation()),e.adjustCenterInternal(r);}}else this.Vr&&this.Vr.begin();this.lastCentroid=i,this.Wr=n.length,t.originalEvent.preventDefault();},n.prototype.handleUpEvent=function(t){var n=t.map,i=n.getView();if(0===this.targetPointers.length){if(!this.Zr&&this.Vr&&this.Vr.end()){var r=this.Vr.getDistance(),e=this.Vr.getAngle(),o=i.getCenterInternal(),s=n.getPixelFromCoordinateInternal(o),u=n.getCoordinateFromPixelInternal([s[0]-r*Math.cos(e),s[1]-r*Math.sin(e)]);i.animateInternal({center:i.getConstrainedCenter(u),duration:500,easing:wt});}return this.Yr&&(this.Yr=!1,i.endInteraction()),!1;}return this.Vr&&this.Vr.begin(),this.lastCentroid=null,!0;},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.Kr(t)){var n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.Vr&&this.Vr.begin(),this.Zr=this.targetPointers.length>1,!0;}return!1;},n;}(Fa),nh=th,ih=function(){var _t44=function t(n,i){return _t44=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t44(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t44(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),rh=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,{stopDown:O})||this).Kr=r.condition?r.condition:qa,i.$r=void 0,i.Fr=void 0!==r.duration?r.duration:250,i;}return ih(n,t),n.prototype.handleDragEvent=function(t){if(Ha(t)){var n=t.map,i=n.getView();if(i.getConstraints().rotation!==Hu){var r=n.getSize(),e=t.pixel,o=Math.atan2(r[1]/2-e[1],e[0]-r[0]/2);if(void 0!==this.$r){var s=o-this.$r;i.adjustRotationInternal(-s);}this.$r=o;}}},n.prototype.handleUpEvent=function(t){return!Ha(t)||(t.map.getView().endInteraction(this.Fr),!1);},n.prototype.handleDownEvent=function(t){return!!Ha(t)&&!(!Va(t)||!this.Kr(t))&&(t.map.getView().beginInteraction(),this.$r=void 0,!0);},n;}(Fa),eh=rh,oh=function(){var _t45=function t(n,i){return _t45=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t45(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t45(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),sh=function(t){function n(n){var i=t.call(this)||this;return i.Hr=null,i.dn=document.createElement("div"),i.dn.style.position="absolute",i.dn.style.pointerEvents="auto",i.dn.className="ol-box "+n,i.vn=null,i.Jr=null,i.Qr=null,i;}return oh(n,t),n.prototype.disposeInternal=function(){this.setMap(null);},n.prototype.te=function(){var t=this.Jr,n=this.Qr,i="px",r=this.dn.style;r.left=Math.min(t[0],n[0])+i,r.top=Math.min(t[1],n[1])+i,r.width=Math.abs(n[0]-t[0])+i,r.height=Math.abs(n[1]-t[1])+i;},n.prototype.setMap=function(t){if(this.vn){this.vn.getOverlayContainer().removeChild(this.dn);var n=this.dn.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit";}this.vn=t,this.vn&&this.vn.getOverlayContainer().appendChild(this.dn);},n.prototype.setPixels=function(t,n){this.Jr=t,this.Qr=n,this.createOrUpdateGeometry(),this.te();},n.prototype.createOrUpdateGeometry=function(){var t=this.Jr,n=this.Qr,i=[t,[t[0],n[1]],n,[n[0],t[1]]].map(this.vn.getCoordinateFromPixelInternal,this.vn);i[4]=i[0].slice(),this.Hr?this.Hr.setCoordinates([i]):this.Hr=new to([i]);},n.prototype.getGeometry=function(){return this.Hr;},n;}(v),uh=sh,ah=function(){var _t46=function t(n,i){return _t46=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t46(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t46(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),hh="boxstart",fh="boxdrag",ch="boxend",lh="boxcancel",vh=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.coordinate=i,e.mapBrowserEvent=r,e;}return ah(n,t),n;}(c),ph=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=n||{};return i.ne=new uh(r.className||"ol-dragbox"),i.ie=void 0!==r.minArea?r.minArea:64,r.onBoxEnd&&(i.onBoxEnd=r.onBoxEnd),i.Jr=null,i.Kr=r.condition?r.condition:Va,i.re=r.boxEndCondition?r.boxEndCondition:i.defaultBoxEndCondition,i;}return ah(n,t),n.prototype.defaultBoxEndCondition=function(t,n,i){var r=i[0]-n[0],e=i[1]-n[1];return r*r+e*e>=this.ie;},n.prototype.getGeometry=function(){return this.ne.getGeometry();},n.prototype.handleDragEvent=function(t){this.ne.setPixels(this.Jr,t.pixel),this.dispatchEvent(new vh(fh,t.coordinate,t));},n.prototype.handleUpEvent=function(t){this.ne.setMap(null);var n=this.re(t,this.Jr,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new vh(n?ch:lh,t.coordinate,t)),!1;},n.prototype.handleDownEvent=function(t){return!!this.Kr(t)&&(this.Jr=t.pixel,this.ne.setMap(t.map),this.ne.setPixels(this.Jr,this.Jr),this.dispatchEvent(new vh(hh,t.coordinate,t)),!0);},n.prototype.onBoxEnd=function(t){},n;}(Fa),dh=function(){var _t47=function t(n,i){return _t47=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t47(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t47(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),yh=function(t){function n(n){var i=this,r=n||{},e=r.condition?r.condition:Za;return(i=t.call(this,{condition:e,className:r.className||"ol-dragzoom",minArea:r.minArea})||this).Fr=void 0!==r.duration?r.duration:200,i.ee=void 0!==r.out&&r.out,i;}return dh(n,t),n.prototype.onBoxEnd=function(t){var n=this.getMap().getView(),i=this.getGeometry();if(this.ee){var r=n.rotatedExtentForGeometry(i),e=n.getResolutionForExtentInternal(r),o=n.getResolution()/e;(i=i.clone()).scale(o*o);}n.fitInternal(i,{duration:this.Fr,easing:wt});},n;}(ph),mh=37,wh=38,gh=39,bh=40,xh=function(){var _t48=function t(n,i){return _t48=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t48(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t48(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Mh=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.oe=function(t){return Ka(t)&&$a(t);},i.Kr=void 0!==r.condition?r.condition:i.oe,i.Fr=void 0!==r.duration?r.duration:100,i.se=void 0!==r.pixelDelta?r.pixelDelta:128,i;}return xh(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==B){var i=t.originalEvent,r=i.keyCode;if(this.Kr(t)&&(r==bh||r==mh||r==gh||r==wh)){var e=t.map.getView(),o=e.getResolution()*this.se,s=0,u=0;r==bh?u=-o:r==mh?s=-o:r==gh?s=o:u=o;var a=[s,u];nr(a,e.getRotation()),Ca(e,a,this.Fr),i.preventDefault(),n=!0;}}return!n;},n;}(Na),_h=function(){var _t49=function t(n,i){return _t49=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t49(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t49(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Sh=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.Kr=r.condition?r.condition:$a,i.Br=r.delta?r.delta:1,i.Fr=void 0!==r.duration?r.duration:100,i;}return _h(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==B||t.type==X){var i=t.originalEvent,r=i.charCode;if(this.Kr(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var e=t.map,o=r=="+".charCodeAt(0)?this.Br:-this.Br;ka(e.getView(),o,void 0,this.Fr),i.preventDefault(),n=!0;}}return!n;},n;}(Na),Oh=function(){var _t50=function t(n,i){return _t50=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t50(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t50(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),jh="trackpad",Eh="wheel",Th=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,r)||this).ue=0,i.ae=0,i.wt=void 0!==r.maxDelta?r.maxDelta:1,i.Fr=void 0!==r.duration?r.duration:250,i.he=void 0!==r.timeout?r.timeout:80,i.fe=void 0===r.useAnchor||r.useAnchor,i.ce=void 0!==r.constrainResolution&&r.constrainResolution;var e=r.condition?r.condition:Xa;return i.Kr=r.onFocusOnly?Ga(Ba,e):e,i.le=null,i.ve=void 0,i.pe,i.de=void 0,i.ye=400,i.me,i.we=300,i;}return Oh(n,t),n.prototype.ge=function(){this.me=void 0;var t=this.getMap();t&&t.getView().endInteraction(void 0,this.ae?this.ae>0?1:-1:0,this.le);},n.prototype.handleEvent=function(t){if(!this.Kr(t))return!0;if(t.type!==K)return!0;var n,i=t.map,r=t.originalEvent;if(r.preventDefault(),this.fe&&(this.le=t.coordinate),t.type==K&&(n=r.deltaY,Bt&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=Kt),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)),0===n)return!1;this.ae=n;var e=Date.now();void 0===this.ve&&(this.ve=e),(!this.de||e-this.ve>this.ye)&&(this.de=Math.abs(n)<4?jh:Eh);var o=i.getView();if(this.de===jh&&!o.getConstrainResolution()&&!this.ce)return this.me?clearTimeout(this.me):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.me=setTimeout(this.ge.bind(this),this.he),o.adjustZoom(-n/this.we,this.le),this.ve=e,!1;this.ue+=n;var s=Math.max(this.he-(e-this.ve),0);return clearTimeout(this.pe),this.pe=setTimeout(this.be.bind(this,i),s),!1;},n.prototype.be=function(t){var n=t.getView();n.getAnimating()&&n.cancelAnimations();var i=-hi(this.ue,-this.wt*this.we,this.wt*this.we)/this.we;(n.getConstrainResolution()||this.ce)&&(i=i?i>0?1:-1:0),ka(n,i,this.le,this.Fr),this.de=void 0,this.ue=0,this.le=null,this.ve=void 0,this.pe=void 0;},n.prototype.setMouseAnchor=function(t){this.fe=t,t||(this.le=null);},n;}(Na),Ah=function(){var _t51=function t(n,i){return _t51=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t51(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t51(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Ph=function(t){function n(n){var i=this,r=n||{},e=r;return e.stopDown||(e.stopDown=O),(i=t.call(this,e)||this).xe=null,i.$r=void 0,i.Me=!1,i._e=0,i.Se=void 0!==r.threshold?r.threshold:.3,i.Fr=void 0!==r.duration?r.duration:250,i;}return Ah(n,t),n.prototype.handleDragEvent=function(t){var n=0,i=this.targetPointers[0],r=this.targetPointers[1],e=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(void 0!==this.$r){var o=e-this.$r;this._e+=o,!this.Me&&Math.abs(this._e)>this.Se&&(this.Me=!0),n=o;}this.$r=e;var s=t.map,u=s.getView();if(u.getConstraints().rotation!==Hu){var a=s.getViewport().getBoundingClientRect(),h=Ra(this.targetPointers);h[0]-=a.left,h[1]-=a.top,this.xe=s.getCoordinateFromPixelInternal(h),this.Me&&(s.render(),u.adjustRotationInternal(n,this.xe));}},n.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.Fr),!1);},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.xe=null,this.$r=void 0,this.Me=!1,this._e=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0;}return!1;},n;}(Fa),Ch=function(){var _t52=function t(n,i){return _t52=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t52(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t52(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),kh=function(t){function n(n){var i=this,r=n||{},e=r;return e.stopDown||(e.stopDown=O),(i=t.call(this,e)||this).xe=null,i.Fr=void 0!==r.duration?r.duration:400,i.Oe=void 0,i.je=1,i;}return Ch(n,t),n.prototype.handleDragEvent=function(t){var n=1,i=this.targetPointers[0],r=this.targetPointers[1],e=i.clientX-r.clientX,o=i.clientY-r.clientY,s=Math.sqrt(e*e+o*o);void 0!==this.Oe&&(n=this.Oe/s),this.Oe=s;var u=t.map,a=u.getView();1!=n&&(this.je=n);var h=u.getViewport().getBoundingClientRect(),f=Ra(this.targetPointers);f[0]-=h.left,f[1]-=h.top,this.xe=u.getCoordinateFromPixelInternal(f),u.render(),a.adjustResolutionInternal(n,this.xe);},n.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var n=t.map.getView(),i=this.je>1?1:-1;return n.endInteraction(this.Fr,i),!1;}return!0;},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.xe=null,this.Oe=void 0,this.je=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0;}return!1;},n;}(Fa),Nh=kh;function Ih(t){var n=t||{},i=new ct(),r=new Uo(-.005,.05,100);return(void 0===n.altShiftDragRotate||n.altShiftDragRotate)&&i.push(new eh()),(void 0===n.doubleClickZoom||n.doubleClickZoom)&&i.push(new za({delta:n.zoomDelta,duration:n.zoomDuration})),(void 0===n.dragPan||n.dragPan)&&i.push(new nh({onFocusOnly:n.onFocusOnly,kinetic:r})),(void 0===n.pinchRotate||n.pinchRotate)&&i.push(new Ph()),(void 0===n.pinchZoom||n.pinchZoom)&&i.push(new Nh({duration:n.zoomDuration})),(void 0===n.keyboard||n.keyboard)&&(i.push(new Mh()),i.push(new Sh({delta:n.zoomDelta,duration:n.zoomDuration}))),(void 0===n.mouseWheelZoom||n.mouseWheelZoom)&&i.push(new Th({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(void 0===n.shiftDragZoom||n.shiftDragZoom)&&i.push(new yh({duration:n.zoomDuration})),i;}var zh=function(){var _t53=function t(n,i){return _t53=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t53(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t53(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Lh=function(t){function n(n){return(n=A({},n)).controls||(n.controls=Ta()),n.interactions||(n.interactions=Ih({onFocusOnly:!0})),t.call(this,n)||this;}return zh(n,t),n.prototype.createRenderer=function(){return new au(this);},n;}(wa),Rh=function(){var _t54=function t(n,i){return _t54=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t54(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t54(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Fh="element",Gh="map",Dh="offset",qh="position",Uh="positioning",Bh=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un,i.options=n,i.id=n.id,i.insertFirst=void 0===n.insertFirst||n.insertFirst,i.stopEvent=void 0===n.stopEvent||n.stopEvent,i.element=document.createElement("div"),i.element.className=void 0!==n.className?n.className:"ol-overlay-container ol-selectable",i.element.style.position="absolute",i.element.style.pointerEvents="auto";var r=n.autoPan;return r&&"object"!=_typeof(r)&&(r={animation:n.autoPanAnimation,margin:n.autoPanMargin}),i.autoPan=r||!1,i.rendered={jt:"",visible:!0},i.mapPostrenderListenerKey=null,i.addChangeListener(Fh,i.handleElementChanged),i.addChangeListener(Gh,i.handleMapChanged),i.addChangeListener(Dh,i.handleOffsetChanged),i.addChangeListener(qh,i.handlePositionChanged),i.addChangeListener(Uh,i.handlePositioningChanged),void 0!==n.element&&i.setElement(n.element),i.setOffset(void 0!==n.offset?n.offset:[0,0]),i.setPositioning(n.positioning||"top-left"),void 0!==n.position&&i.setPosition(n.position),i;}return Rh(n,t),n.prototype.getElement=function(){return this.get(Fh);},n.prototype.getId=function(){return this.id;},n.prototype.getMap=function(){return this.get(Gh)||null;},n.prototype.getOffset=function(){return this.get(Dh);},n.prototype.getPosition=function(){return this.get(qh);},n.prototype.getPositioning=function(){return this.get(Uh);},n.prototype.handleElementChanged=function(){Fo(this.element);var t=this.getElement();t&&this.element.appendChild(t);},n.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Ro(this.element),H(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Z(t,Ou,this.render,this),this.updatePixelPosition();var n=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan();}},n.prototype.render=function(){this.updatePixelPosition();},n.prototype.handleOffsetChanged=function(){this.updatePixelPosition();},n.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan();},n.prototype.handlePositioningChanged=function(){this.updatePixelPosition();},n.prototype.setElement=function(t){this.set(Fh,t);},n.prototype.setMap=function(t){this.set(Gh,t);},n.prototype.setOffset=function(t){this.set(Dh,t);},n.prototype.setPosition=function(t){this.set(qh,t);},n.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan);},n.prototype.panIntoView=function(t){var n=this.getMap();if(n&&n.getTargetElement()&&this.get(qh)){var i=this.getRect(n.getTargetElement(),n.getSize()),r=this.getElement(),e=this.getRect(r,[Io(r),zo(r)]),o=t||{},s=void 0===o.margin?20:o.margin;if(!On(i,e)){var u=e[0]-i[0],a=i[2]-e[2],h=e[1]-i[1],f=i[3]-e[3],c=[0,0];if(u<0?c[0]=u-s:a<0&&(c[0]=Math.abs(a)+s),h<0?c[1]=h-s:f<0&&(c[1]=Math.abs(f)+s),0!==c[0]||0!==c[1]){var l=n.getView().getCenterInternal(),v=n.getPixelFromCoordinateInternal(l);if(!v)return;var p=[v[0]+c[0],v[1]+c[1]],d=o.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(p),duration:d.duration,easing:d.easing});}}}},n.prototype.getRect=function(t,n){var i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,e=i.top+window.pageYOffset;return[r,e,r+n[0],e+n[1]];},n.prototype.setPositioning=function(t){this.set(Uh,t);},n.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t);},n.prototype.updatePixelPosition=function(){var t=this.getMap(),n=this.getPosition();if(t&&t.isRendered()&&n){var i=t.getPixelFromCoordinate(n),r=t.getSize();this.updateRenderedPosition(i,r);}else this.setVisible(!1);},n.prototype.updateRenderedPosition=function(t,n){var i=this.element.style,r=this.getOffset(),e=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+r[0])+"px",s=Math.round(t[1]+r[1])+"px",u="0%",a="0%";"bottom-right"==e||"center-right"==e||"top-right"==e?u="-100%":"bottom-center"!=e&&"center-center"!=e&&"top-center"!=e||(u="-50%"),"bottom-left"==e||"bottom-center"==e||"bottom-right"==e?a="-100%":"center-left"!=e&&"center-center"!=e&&"center-right"!=e||(a="-50%");var h="translate(".concat(u,", ").concat(a,") translate(").concat(o,", ").concat(s,")");this.rendered.jt!=h&&(this.rendered.jt=h,i.transform=h,i.msTransform=h);},n.prototype.getOptions=function(){return this.options;},n;}(et),Xh=Bh,Vh=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.Ee=0,this.Te={},this.Ae=null,this.Pe=null;}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark;},t.prototype.expireCache=function(t){for(;this.canExpireCache();){this.pop();}},t.prototype.clear=function(){this.Ee=0,this.Te={},this.Ae=null,this.Pe=null;},t.prototype.containsKey=function(t){return this.Te.hasOwnProperty(t);},t.prototype.forEach=function(t){for(var n=this.Ae;n;){t(n.Ce,n.ke,this),n=n.newer;}},t.prototype.get=function(t,n){var i=this.Te[t];return Et(void 0!==i,15),i===this.Pe||(i===this.Ae?(this.Ae=this.Ae.newer,this.Ae.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.Pe,this.Pe.newer=i,this.Pe=i),i.Ce;},t.prototype.remove=function(t){var n=this.Te[t];return Et(void 0!==n,15),n===this.Pe?(this.Pe=n.older,this.Pe&&(this.Pe.newer=null)):n===this.Ae?(this.Ae=n.newer,this.Ae&&(this.Ae.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.Te[t],--this.Ee,n.Ce;},t.prototype.getCount=function(){return this.Ee;},t.prototype.getKeys=function(){var t,n=new Array(this.Ee),i=0;for(t=this.Pe;t;t=t.older){n[i++]=t.ke;}return n;},t.prototype.getValues=function(){var t,n=new Array(this.Ee),i=0;for(t=this.Pe;t;t=t.older){n[i++]=t.Ce;}return n;},t.prototype.peekLast=function(){return this.Ae.Ce;},t.prototype.peekLastKey=function(){return this.Ae.ke;},t.prototype.peekFirstKey=function(){return this.Pe.ke;},t.prototype.peek=function(t){if(this.containsKey(t))return this.Te[t].Ce;},t.prototype.pop=function(){var t=this.Ae;return delete this.Te[t.ke],t.newer&&(t.newer.older=null),this.Ae=t.newer,this.Ae||(this.Pe=null),--this.Ee,t.Ce;},t.prototype.replace=function(t,n){this.get(t),this.Te[t].Ce=n;},t.prototype.set=function(t,n){Et(!(t in this.Te),16);var i={ke:t,newer:null,older:this.Pe,Ce:n};this.Pe?this.Pe.newer=i:this.Ae=i,this.Pe=i,this.Te[t]=i,++this.Ee;},t.prototype.setSize=function(t){this.highWaterMark=t;},t;}();function Wh(t,n,i,r){return void 0!==r?(r[0]=t,r[1]=n,r[2]=i,r):[t,n,i];}function Yh(t,n,i){return t+"/"+n+"/"+i;}function Kh(t){return Yh(t[0],t[1],t[2]);}function Zh(t){var n=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number);return Yh(n[0],n[1],n[2]);}function $h(t){return t.split("/").map(Number);}function Hh(t){return(t[1]<<t[0])+t[2];}function Jh(t,n){var i=t[0],r=t[1],e=t[2];if(n.getMinZoom()>i||i>n.getMaxZoom())return!1;var o=n.getFullTileRange(i);return!o||o.containsXY(r,e);}var Qh=function(){var _t55=function t(n,i){return _t55=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t55(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t55(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),tf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this;}return Qh(n,t),n.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release();}},n.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=$h(this.peekFirstKey())[0];this.forEach(function(n){n.tileCoord[0]!==t&&(this.remove(Kh(n.tileCoord)),n.release());}.bind(this));}},n;}(Vh),nf=tf,rf=function(){function t(t,n,i,r){this.minX=t,this.maxX=n,this.minY=i,this.maxY=r;}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2]);},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY;},t.prototype.containsXY=function(t,n){return this.minX<=t&&t<=this.maxX&&this.minY<=n&&n<=this.maxY;},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY;},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY);},t.prototype.getHeight=function(){return this.maxY-this.minY+1;},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()];},t.prototype.getWidth=function(){return this.maxX-this.minX+1;},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY;},t;}();function ef(t,n,i,r,e){return void 0!==e?(e.minX=t,e.maxX=n,e.minY=i,e.maxY=r,e):new rf(t,n,i,r);}var of=rf,sf=function(){var _t56=function t(n,i){return _t56=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t56(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t56(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),uf=[],af=function(t){function n(n,i,r,e){var o=t.call(this,n,i,{transition:0})||this;return o.Ne={},o.executorGroups={},o.declutterExecutorGroups={},o.loadingSourceTiles=0,o.hitDetectionImageData={},o.ze={},o.sourceTiles=[],o.errorTileKeys={},o.wantedResolution,o.getSourceTiles=e.bind(void 0,o),o.wrappedTileCoord=r,o;}return sf(n,t),n.prototype.getContext=function(t){var n=o(t);return n in this.Ne||(this.Ne[n]=ko(1,1,uf)),this.Ne[n];},n.prototype.hasContext=function(t){return o(t)in this.Ne;},n.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null;},n.prototype.getReplayState=function(t){var n=o(t);return n in this.ze||(this.ze[n]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.ze[n];},n.prototype.load=function(){this.getSourceTiles();},n.prototype.release=function(){for(var n in this.Ne){var i=this.Ne[n];No(i),uf.push(i.canvas),delete this.Ne[n];}t.prototype.release.call(this);},n;}(_t),hf=af,ff=function(){var _t57=function t(n,i){return _t57=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t57(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t57(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),cf=function(t){function n(n,i,r,e,o,s){var u=t.call(this,n,i,s)||this;return u.extent=null,u.Le=e,u.Re=null,u.U,u.projection=null,u.resolution,u.Xt=o,u.Fe=r,u.key=r,u;}return ff(n,t),n.prototype.getFormat=function(){return this.Le;},n.prototype.getFeatures=function(){return this.Re;},n.prototype.load=function(){this.state==lt&&(this.setState(vt),this.Xt(this,this.Fe),this.U&&this.U(this.extent,this.resolution,this.projection));},n.prototype.onLoad=function(t,n){this.setFeatures(t);},n.prototype.onError=function(){this.setState(dt);},n.prototype.setFeatures=function(t){this.Re=t,this.setState(pt);},n.prototype.setLoader=function(t){this.U=t;},n;}(_t),lf=cf;function vf(t){return Array.isArray(t)?$o(t):t;}var pf=!1;function df(t,n,i,r,e,o,s){var u=new XMLHttpRequest();u.open("GET","function"==typeof t?t(i,r,e):t,!0),"arraybuffer"==n.getType()&&(u.responseType="arraybuffer"),u.withCredentials=pf,u.onload=function(t){if(!u.status||u.status>=200&&u.status<300){var r=n.getType(),a=void 0;"json"==r||"text"==r?a=u.responseText:"xml"==r?(a=u.responseXML)||(a=new DOMParser().parseFromString(u.responseText,"application/xml")):"arraybuffer"==r&&(a=u.response),a?o(n.readFeatures(a,{extent:i,featureProjection:e}),n.readProjection(a)):s();}else s();},u.onerror=s,u.send();}function yf(t,n){return function(i,r,e,o,s){var u=this;df(t,n,i,r,e,function(t,n){u.addFeatures(t),void 0!==o&&o(t);},s||j);};}function mf(t,n){return[[-1/0,-1/0,1/0,1/0]];}var wf=function(){var _t58=function t(n,i){return _t58=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t58(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t58(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}();function gf(t,n,i,r){var e=document.createElement("script"),s="olc_"+o(n);function u(){delete window[s],e.parentNode.removeChild(e);}e.async=!0,e.src=t+(-1==t.indexOf("?")?"?":"&")+(r||"callback")+"="+s;var a=setTimeout(function(){u(),i&&i();},1e4);window[s]=function(t){clearTimeout(a),u(),n(t);},document.head.appendChild(e);}var bf,xf=function(t){function n(n){var i=this,r="Unexpected response status: "+n.status;return(i=t.call(this,r)||this).name="ResponseError",i.response=n,i;}return wf(n,t),n;}(Error),Mf=function(t){function n(n){var i=t.call(this,"Failed to issue request")||this;return i.name="ClientError",i.client=n,i;}return wf(n,t),n;}(Error);function _f(t){return new Promise(function(n,i){var r=new XMLHttpRequest();r.addEventListener("load",function(t){var r=t.target;if(!r.status||r.status>=200&&r.status<300){var e=void 0;try{e=JSON.parse(r.responseText);}catch(t){var o="Error parsing response text as JSON: "+t.message;return void i(new Error(o));}n(e);}else i(new xf(r));}),r.addEventListener("error",function(t){i(new Mf(t.target));}),r.open("GET",t),r.setRequestHeader("Accept","application/json"),r.send();});}function Sf(t,n){return n.indexOf("://")>=0?n:new URL(n,t).href;}var Of=function(){function t(){}return t.prototype.drawCustom=function(t,n,i,r){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,n){},t.prototype.drawFeature=function(t,n){},t.prototype.drawGeometryCollection=function(t,n){},t.prototype.drawLineString=function(t,n){},t.prototype.drawMultiLineString=function(t,n){},t.prototype.drawMultiPoint=function(t,n){},t.prototype.drawMultiPolygon=function(t,n){},t.prototype.drawPoint=function(t,n){},t.prototype.drawPolygon=function(t,n){},t.prototype.drawText=function(t,n){},t.prototype.setFillStrokeStyle=function(t,n){},t.prototype.setImageStyle=function(t,n){},t.prototype.setTextStyle=function(t,n){},t;}(),jf=function(){var _t59=function t(n,i){return _t59=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t59(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t59(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Ef=function(t){function n(n,i,r,e,o,s,u){var a=t.call(this)||this;return a.Ne=n,a.kt=i,a.st=r,a.jt=e,a.Ge=o,a.De=s,a.qe=u,a.Ue=null,a.Be=null,a.Xe=null,a.Ve=null,a.We=null,a.zt=null,a.Ye=0,a.Ke=0,a.Ze=0,a.$e=0,a.He=0,a.Je=0,a.Qe=!1,a.no=0,a.io=[0,0],a.ro=0,a.eo="",a.oo=0,a.so=0,a.uo=!1,a.ao=0,a.ho=[0,0],a.fo=null,a.co=null,a.lo=null,a.vo=[],a.po=[1,0,0,1,0,0],a;}return jf(n,t),n.prototype.do=function(t,n,i,r){if(this.zt){var e=Xr(t,n,i,r,this.jt,this.vo),o=this.Ne,s=this.po,u=o.globalAlpha;1!=this.$e&&(o.globalAlpha=u*this.$e);var a=this.no;this.Qe&&(a+=this.Ge);for(var h=0,f=e.length;h<f;h+=2){var c=e[h]-this.Ye,l=e[h+1]-this.Ke;if(0!==a||1!=this.io[0]||1!=this.io[1]){var v=c+this.Ye,p=l+this.Ke;fn(s,v,p,1,1,a,-v,-p),o.setTransform.apply(o,s),o.translate(v,p),o.scale(this.io[0],this.io[1]),o.drawImage(this.zt,this.He,this.Je,this.ro,this.Ze,-this.Ye,-this.Ke,this.ro,this.Ze),o.setTransform(1,0,0,1,0,0);}else o.drawImage(this.zt,this.He,this.Je,this.ro,this.Ze,c,l,this.ro,this.Ze);}1!=this.$e&&(o.globalAlpha=u);}},n.prototype.yo=function(t,n,i,r){if(this.lo&&""!==this.eo){this.fo&&this.mo(this.fo),this.co&&this.wo(this.co),this.bo(this.lo);var e=Xr(t,n,i,r,this.jt,this.vo),o=this.Ne,s=this.ao;for(this.uo&&(s+=this.Ge);n<i;n+=r){var u=e[n]+this.oo,a=e[n+1]+this.so;if(0!==s||1!=this.ho[0]||1!=this.ho[1]){var h=fn(this.po,u,a,1,1,s,-u,-a);o.setTransform.apply(o,h),o.translate(u,a),o.scale(this.ho[0],this.ho[1]),this.co&&o.strokeText(this.eo,0,0),this.fo&&o.fillText(this.eo,0,0),o.setTransform(1,0,0,1,0,0);}else this.co&&o.strokeText(this.eo,u,a),this.fo&&o.fillText(this.eo,u,a);}}},n.prototype.xo=function(t,n,i,r,e){var o=this.Ne,s=Xr(t,n,i,r,this.jt,this.vo);o.moveTo(s[0],s[1]);var u=s.length;e&&(u-=2);for(var a=2;a<u;a+=2){o.lineTo(s[a],s[a+1]);}return e&&o.closePath(),i;},n.prototype.Mo=function(t,n,i,r){for(var e=0,o=i.length;e<o;++e){n=this.xo(t,n,i[e],r,!0);}return n;},n.prototype.drawCircle=function(t){if(ti(this.st,t.getExtent())){if(this.Ve||this.We){this.Ve&&this.mo(this.Ve),this.We&&this.wo(this.We);var n=ne(t,this.jt,this.vo),i=n[2]-n[0],r=n[3]-n[1],e=Math.sqrt(i*i+r*r),o=this.Ne;o.beginPath(),o.arc(n[0],n[1],e,0,2*Math.PI),this.Ve&&o.fill(),this.We&&o.stroke();}""!==this.eo&&this.yo(t.getCenter(),0,2,2);}},n.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText());},n.prototype.setTransform=function(t){this.jt=t;},n.prototype.drawGeometry=function(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);}},n.prototype.drawFeature=function(t,n){var i=n.getGeometryFunction()(t);i&&ti(this.st,i.getExtent())&&(this.setStyle(n),this.drawGeometry(i));},n.prototype.drawGeometryCollection=function(t){for(var n=t.getGeometriesArray(),i=0,r=n.length;i<r;++i){this.drawGeometry(n[i]);}},n.prototype.drawPoint=function(t){this.De&&(t=t.simplifyTransformed(this.De,this.qe));var n=t.getFlatCoordinates(),i=t.getStride();this.zt&&this.do(n,0,n.length,i),""!==this.eo&&this.yo(n,0,n.length,i);},n.prototype.drawMultiPoint=function(t){this.De&&(t=t.simplifyTransformed(this.De,this.qe));var n=t.getFlatCoordinates(),i=t.getStride();this.zt&&this.do(n,0,n.length,i),""!==this.eo&&this.yo(n,0,n.length,i);},n.prototype.drawLineString=function(t){if(this.De&&(t=t.simplifyTransformed(this.De,this.qe)),ti(this.st,t.getExtent())){if(this.We){this.wo(this.We);var n=this.Ne,i=t.getFlatCoordinates();n.beginPath(),this.xo(i,0,i.length,t.getStride(),!1),n.stroke();}if(""!==this.eo){var r=t.getFlatMidpoint();this.yo(r,0,2,2);}}},n.prototype.drawMultiLineString=function(t){this.De&&(t=t.simplifyTransformed(this.De,this.qe));var n=t.getExtent();if(ti(this.st,n)){if(this.We){this.wo(this.We);var i=this.Ne,r=t.getFlatCoordinates(),e=0,o=t.getEnds(),s=t.getStride();i.beginPath();for(var u=0,a=o.length;u<a;++u){e=this.xo(r,e,o[u],s,!1);}i.stroke();}if(""!==this.eo){var h=t.getFlatMidpoints();this.yo(h,0,h.length,2);}}},n.prototype.drawPolygon=function(t){if(this.De&&(t=t.simplifyTransformed(this.De,this.qe)),ti(this.st,t.getExtent())){if(this.We||this.Ve){this.Ve&&this.mo(this.Ve),this.We&&this.wo(this.We);var n=this.Ne;n.beginPath(),this.Mo(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.Ve&&n.fill(),this.We&&n.stroke();}if(""!==this.eo){var i=t.getFlatInteriorPoint();this.yo(i,0,2,2);}}},n.prototype.drawMultiPolygon=function(t){if(this.De&&(t=t.simplifyTransformed(this.De,this.qe)),ti(this.st,t.getExtent())){if(this.We||this.Ve){this.Ve&&this.mo(this.Ve),this.We&&this.wo(this.We);var n=this.Ne,i=t.getOrientedFlatCoordinates(),r=0,e=t.getEndss(),o=t.getStride();n.beginPath();for(var s=0,u=e.length;s<u;++s){var a=e[s];r=this.Mo(i,r,a,o);}this.Ve&&n.fill(),this.We&&n.stroke();}if(""!==this.eo){var h=t.getFlatInteriorPoints();this.yo(h,0,h.length,2);}}},n.prototype.mo=function(t){var n=this.Ne,i=this.Ue;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.Ue={fillStyle:t.fillStyle});},n.prototype.wo=function(t){var n=this.Ne,i=this.Be;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,n.lineCap=t.lineCap),n.setLineDash&&(x(i.lineDash,t.lineDash)||n.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.Be={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle});},n.prototype.bo=function(t){var n=this.Ne,i=this.Xe,r=t.textAlign?t.textAlign:Vs;i?(i.font!=t.font&&(i.font=t.font,n.font=t.font),i.textAlign!=r&&(i.textAlign=r,n.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=r,n.textBaseline=t.textBaseline,this.Xe={font:t.font,textAlign:r,textBaseline:t.textBaseline});},n.prototype.setFillStrokeStyle=function(t,n){var i=this;if(t){var r=t.getColor();this.Ve={fillStyle:vf(r||Gs)};}else this.Ve=null;if(n){var e=n.getColor(),o=n.getLineCap(),s=n.getLineDash(),u=n.getLineDashOffset(),a=n.getLineJoin(),h=n.getWidth(),f=n.getMiterLimit(),c=s||qs;this.We={lineCap:void 0!==o?o:Ds,lineDash:1===this.kt?c:c.map(function(t){return t*i.kt;}),lineDashOffset:(u||0)*this.kt,lineJoin:void 0!==a?a:Us,lineWidth:(void 0!==h?h:1)*this.kt,miterLimit:void 0!==f?f:Bs,strokeStyle:vf(e||Xs)};}else this.We=null;},n.prototype.setImageStyle=function(t){var n;if(t&&(n=t.getSize())){var i=t.getAnchor(),r=t.getOrigin();this.zt=t.getImage(this.kt),this.Ye=i[0]*this.kt,this.Ke=i[1]*this.kt,this.Ze=n[1]*this.kt,this.$e=t.getOpacity(),this.He=r[0],this.Je=r[1],this.Qe=t.getRotateWithView(),this.no=t.getRotation(),this.io=t.getScaleArray(),this.ro=n[0]*this.kt;}else this.zt=null;},n.prototype.setTextStyle=function(t){if(t){var n=t.getFill();if(n){var i=n.getColor();this.fo={fillStyle:vf(i||Gs)};}else this.fo=null;var r=t.getStroke();if(r){var e=r.getColor(),o=r.getLineCap(),s=r.getLineDash(),u=r.getLineDashOffset(),a=r.getLineJoin(),h=r.getWidth(),f=r.getMiterLimit();this.co={lineCap:void 0!==o?o:Ds,lineDash:s||qs,lineDashOffset:u||0,lineJoin:void 0!==a?a:Us,lineWidth:void 0!==h?h:1,miterLimit:void 0!==f?f:Bs,strokeStyle:vf(e||Xs)};}else this.co=null;var c=t.getFont(),l=t.getOffsetX(),v=t.getOffsetY(),p=t.getRotateWithView(),d=t.getRotation(),y=t.getScaleArray(),m=t.getText(),w=t.getTextAlign(),g=t.getTextBaseline();this.lo={font:void 0!==c?c:Fs,textAlign:void 0!==w?w:Vs,textBaseline:void 0!==g?g:Ws},this.eo=void 0!==m?Array.isArray(m)?m.reduce(function(t,n,i){return t+(i%2?" ":n);},""):m:"",this.oo=void 0!==l?this.kt*l:0,this.so=void 0!==v?this.kt*v:0,this.uo=void 0!==p&&p,this.ao=void 0!==d?d:0,this.ho=[this.kt*y[0],this.kt*y[1]];}else this.eo="";},n;}(Of),Tf=Ef,Af={Point:function Point(t,n,i,r,e){var o,s=i.getImage(),u=i.getText();if(s){if(s.getImageState()!=So)return;var a=t;if(e){var h=s.getDeclutterMode();if("none"!==h)if(a=e,"obstacle"===h){var f=t.getBuilder(i.getZIndex(),"Image");f.setImageStyle(s,o),f.drawPoint(n,r);}else u&&u.getText()&&(o={});}var c=a.getBuilder(i.getZIndex(),"Image");c.setImageStyle(s,o),c.drawPoint(n,r);}if(u&&u.getText()){var l=t;e&&(l=e);var v=l.getBuilder(i.getZIndex(),"Text");v.setTextStyle(u,o),v.drawText(n,r);}},LineString:function LineString(t,n,i,r,e){var o=i.getStroke();if(o){var s=t.getBuilder(i.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawLineString(n,r);}var u=i.getText();if(u&&u.getText()){var a=(e||t).getBuilder(i.getZIndex(),"Text");a.setTextStyle(u),a.drawText(n,r);}},Polygon:function Polygon(t,n,i,r,e){var o=i.getFill(),s=i.getStroke();if(o||s){var u=t.getBuilder(i.getZIndex(),"Polygon");u.setFillStrokeStyle(o,s),u.drawPolygon(n,r);}var a=i.getText();if(a&&a.getText()){var h=(e||t).getBuilder(i.getZIndex(),"Text");h.setTextStyle(a),h.drawText(n,r);}},MultiPoint:function MultiPoint(t,n,i,r,e){var o,s=i.getImage(),u=i.getText();if(s){if(s.getImageState()!=So)return;var a=t;if(e){var h=s.getDeclutterMode();if("none"!==h)if(a=e,"obstacle"===h){var f=t.getBuilder(i.getZIndex(),"Image");f.setImageStyle(s,o),f.drawMultiPoint(n,r);}else u&&u.getText()&&(o={});}var c=a.getBuilder(i.getZIndex(),"Image");c.setImageStyle(s,o),c.drawMultiPoint(n,r);}if(u&&u.getText()){var l=t;e&&(l=e);var v=l.getBuilder(i.getZIndex(),"Text");v.setTextStyle(u,o),v.drawText(n,r);}},MultiLineString:function MultiLineString(t,n,i,r,e){var o=i.getStroke();if(o){var s=t.getBuilder(i.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawMultiLineString(n,r);}var u=i.getText();if(u&&u.getText()){var a=(e||t).getBuilder(i.getZIndex(),"Text");a.setTextStyle(u),a.drawText(n,r);}},MultiPolygon:function MultiPolygon(t,n,i,r,e){var o=i.getFill(),s=i.getStroke();if(s||o){var u=t.getBuilder(i.getZIndex(),"Polygon");u.setFillStrokeStyle(o,s),u.drawMultiPolygon(n,r);}var a=i.getText();if(a&&a.getText()){var h=(e||t).getBuilder(i.getZIndex(),"Text");h.setTextStyle(a),h.drawText(n,r);}},GeometryCollection:function GeometryCollection(t,n,i,r,e){var o,s,u=n.getGeometriesArray();for(o=0,s=u.length;o<s;++o){(0,Af[u[o].getType()])(t,u[o],i,r,e);}},Circle:function Circle(t,n,i,r,e){var o=i.getFill(),s=i.getStroke();if(o||s){var u=t.getBuilder(i.getZIndex(),"Circle");u.setFillStrokeStyle(o,s),u.drawCircle(n,r);}var a=i.getText();if(a&&a.getText()){var h=(e||t).getBuilder(i.getZIndex(),"Text");h.setTextStyle(a),h.drawText(n,r);}}};function Pf(t,n){return parseInt(o(t),10)-parseInt(o(n),10);}function Cf(t,n){var i=kf(t,n);return i*i;}function kf(t,n){return .5*t/n;}function Nf(t,n,i,r,e,o,s){var u=!1,a=i.getImage();if(a){var h=a.getImageState();h==So||h==Oo?a.unlistenImageChange(e):(h==Mo&&a.load(),a.listenImageChange(e),u=!0);}return function(t,n,i,r,e,o){var s=i.getGeometryFunction()(n);if(!s)return;var u=s.simplifyTransformed(r,e);if(i.getRenderer())If(t,u,i,n);else{(0,Af[u.getType()])(t,u,i,n,o);}}(t,n,i,r,o,s),u;}function If(t,n,i,r){if("GeometryCollection"!=n.getType())t.getBuilder(i.getZIndex(),"Default").drawCustom(n,r,i.getRenderer(),i.getHitDetectionRenderer());else for(var e=n.getGeometries(),o=0,s=e.length;o<s;++o){If(t,e[o],i,r);}}function zf(t){if(!(t.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");var n,i=t.inversePixelTransform[0],r=t.frameState,e=nn(t.inversePixelTransform.slice(),r.coordinateToPixelTransform),o=Cf(r.viewState.resolution,i),s=zr();return s&&(n=Ar(s,r.viewState.projection)),new Tf(t.context,i,r.extent,e,r.viewState.rotation,o,n);}var Lf,Rf={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},Ff={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0},Gf=[];function Df(t,n,i,r,e){t.beginPath(),t.moveTo(0,0),t.lineTo(n,i),t.lineTo(r,e),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(n,r)+1,Math.max(i,e)),t.restore();}function qf(t,n){return Math.abs(t[4*n]-210)>2||Math.abs(t[4*n+3]-191.25)>2;}function Uf(t,n,i,r){var e=Cr(i,n,t),o=xr(n,r,i),s=n.getMetersPerUnit();void 0!==s&&(o*=s);var u=t.getMetersPerUnit();void 0!==u&&(o/=u);var a=t.getExtent();if(!a||Sn(a,e)){var h=xr(t,o,e)/o;isFinite(h)&&h>0&&(o/=h);}return o;}function Bf(t,n,i,r){var e=Vn(i),o=Uf(t,n,e,r);return(!isFinite(o)||o<=0)&&qn(i,function(i){return o=Uf(t,n,i,r),isFinite(o)&&o>0;}),o;}function Xf(t,n,i,r,e,o,s,u,a,h,f,c){var l=ko(Math.round(i*t),Math.round(i*n),Gf);if(c||A(l,Rf),0===a.length)return l.canvas;function v(t){return Math.round(t*i)/i;}l.scale(i,i),l.globalCompositeOperation="lighter";var p=[1/0,1/0,-1/0,-1/0];a.forEach(function(t,n,i){zn(p,t.extent);});var d=Qn(p),y=Zn(p),m=ko(Math.round(i*d/r),Math.round(i*y/r));c||A(m,Rf);var w=i/r;a.forEach(function(t,n,i){var r=t.extent[0]-p[0],e=-(t.extent[3]-p[3]),o=Qn(t.extent),s=Zn(t.extent);t.image.width>0&&t.image.height>0&&m.drawImage(t.image,h,h,t.image.width-2*h,t.image.height-2*h,r*w,e*w,o*w,s*w);});var g=Hn(s);return u.getTriangles().forEach(function(t,n,e){var s=t.source,u=t.target,a=s[0][0],h=s[0][1],f=s[1][0],d=s[1][1],y=s[2][0],w=s[2][1],b=v((u[0][0]-g[0])/o),x=v(-(u[0][1]-g[1])/o),M=v((u[1][0]-g[0])/o),_=v(-(u[1][1]-g[1])/o),S=v((u[2][0]-g[0])/o),O=v(-(u[2][1]-g[1])/o),j=a,E=h;a=0,h=0;var T=pi([[f-=j,d-=E,0,0,M-b],[y-=j,w-=E,0,0,S-b],[0,0,f,d,_-x],[0,0,y,w,O-x]]);if(T){if(l.save(),l.beginPath(),function(){if(void 0===Lf){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",Df(t,4,5,4,0),Df(t,4,5,0,5);var n=t.getImageData(0,0,3,3).data;Lf=qf(n,0)||qf(n,4)||qf(n,8);}return Lf;}()||!c){l.moveTo(M,_);for(var A=b-M,P=x-_,C=0;C<4;C++){l.lineTo(M+v((C+1)*A/4),_+v(C*P/3)),3!=C&&l.lineTo(M+v((C+1)*A/4),_+v((C+1)*P/3));}l.lineTo(S,O);}else l.moveTo(M,_),l.lineTo(b,x),l.lineTo(S,O);l.clip(),l.transform(T[0],T[2],T[1],T[3],b,x),l.translate(p[0]-j,p[3]-E),l.scale(r/i,-r/i),l.drawImage(m.canvas,0,0),l.restore();}}),f&&(l.save(),l.globalCompositeOperation="source-over",l.strokeStyle="black",l.lineWidth=1,u.getTriangles().forEach(function(t,n,i){var r=t.target,e=(r[0][0]-g[0])/o,s=-(r[0][1]-g[1])/o,u=(r[1][0]-g[0])/o,a=-(r[1][1]-g[1])/o,h=(r[2][0]-g[0])/o,f=-(r[2][1]-g[1])/o;l.beginPath(),l.moveTo(u,a),l.lineTo(e,s),l.lineTo(h,f),l.closePath(),l.stroke();}),l.restore()),l.canvas;}var Vf=[0,0,0],Wf=function(){function t(t){var n;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.Ti=t.resolutions,Et(_(this.Ti,function(t,n){return n-t;},!0),17),!t.origins)for(var i=0,r=this.Ti.length-1;i<r;++i){if(n){if(this.Ti[i]/this.Ti[i+1]!==n){n=void 0;break;}}else n=this.Ti[i]/this.Ti[i+1];}this.Ei=n,this.maxZoom=this.Ti.length-1,this._o=void 0!==t.origin?t.origin:null,this.So=null,void 0!==t.origins&&(this.So=t.origins,Et(this.So.length==this.Ti.length,20));var e=t.extent;void 0===e||this._o||this.So||(this._o=Hn(e)),Et(!this._o&&this.So||this._o&&!this.So,18),this.Oo=null,void 0!==t.tileSizes&&(this.Oo=t.tileSizes,Et(this.Oo.length==this.Ti.length,19)),this.jo=void 0!==t.tileSize?t.tileSize:this.Oo?null:Bu,Et(!this.jo&&this.Oo||this.jo&&!this.Oo,22),this.st=void 0!==e?e:null,this.Eo=null,this.To=[0,0],this.Ao=[0,0,0,0],void 0!==t.sizes?this.Eo=t.sizes.map(function(t,n){var i=new of(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(e){var r=this.getTileRangeForExtentAndZ(e,n);i.minX=Math.max(r.minX,i.minX),i.maxX=Math.min(r.maxX,i.maxX),i.minY=Math.max(r.minY,i.minY),i.maxY=Math.min(r.maxY,i.maxY);}return i;},this):e&&this.Po(e);}return t.prototype.forEachTileCoord=function(t,n,i){for(var r=this.getTileRangeForExtentAndZ(t,n),e=r.minX,o=r.maxX;e<=o;++e){for(var s=r.minY,u=r.maxY;s<=u;++s){i([n,e,s]);}}},t.prototype.forEachTileCoordParentTileRange=function(t,n,i,r){var e,o,s=null,u=t[0]-1;for(2===this.Ei?(e=t[1],o=t[2]):s=this.getTileCoordExtent(t,r);u>=this.minZoom;){if(n(u,2===this.Ei?ef(e=Math.floor(e/2),e,o=Math.floor(o/2),o,i):this.getTileRangeForExtentAndZ(s,u,i)))return!0;--u;}return!1;},t.prototype.getExtent=function(){return this.st;},t.prototype.getMaxZoom=function(){return this.maxZoom;},t.prototype.getMinZoom=function(){return this.minZoom;},t.prototype.getOrigin=function(t){return this._o?this._o:this.So[t];},t.prototype.getResolution=function(t){return this.Ti[t];},t.prototype.getResolutions=function(){return this.Ti;},t.prototype.getTileCoordChildTileRange=function(t,n,i){if(t[0]<this.maxZoom){if(2===this.Ei){var r=2*t[1],e=2*t[2];return ef(r,r+1,e,e+1,n);}var o=this.getTileCoordExtent(t,i||this.Ao);return this.getTileRangeForExtentAndZ(o,t[0]+1,n);}return null;},t.prototype.getTileRangeForTileCoordAndZ=function(t,n,i){if(n>this.maxZoom||n<this.minZoom)return null;var r=t[0],e=t[1],o=t[2];if(n===r)return ef(e,o,e,o,i);if(this.Ei){var s=Math.pow(this.Ei,n-r),u=Math.floor(e*s),a=Math.floor(o*s);return n<r?ef(u,u,a,a,i):ef(u,Math.floor(s*(e+1))-1,a,Math.floor(s*(o+1))-1,i);}var h=this.getTileCoordExtent(t,this.Ao);return this.getTileRangeForExtentAndZ(h,n,i);},t.prototype.getTileRangeExtent=function(t,n,i){var r=this.getOrigin(t),e=this.getResolution(t),o=va(this.getTileSize(t),this.To),s=r[0]+n.minX*o[0]*e,u=r[0]+(n.maxX+1)*o[0]*e;return An(s,r[1]+n.minY*o[1]*e,u,r[1]+(n.maxY+1)*o[1]*e,i);},t.prototype.getTileRangeForExtentAndZ=function(t,n,i){var r=Vf;this.Co(t[0],t[3],n,!1,r);var e=r[1],o=r[2];return this.Co(t[2],t[1],n,!0,r),ef(e,r[1],o,r[2],i);},t.prototype.getTileCoordCenter=function(t){var n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=va(this.getTileSize(t[0]),this.To);return[n[0]+(t[1]+.5)*r[0]*i,n[1]-(t[2]+.5)*r[1]*i];},t.prototype.getTileCoordExtent=function(t,n){var i=this.getOrigin(t[0]),r=this.getResolution(t[0]),e=va(this.getTileSize(t[0]),this.To),o=i[0]+t[1]*e[0]*r,s=i[1]-(t[2]+1)*e[1]*r;return An(o,s,o+e[0]*r,s+e[1]*r,n);},t.prototype.getTileCoordForCoordAndResolution=function(t,n,i){return this.ko(t[0],t[1],n,!1,i);},t.prototype.ko=function(t,n,i,r,e){var o=this.getZForResolution(i),s=i/this.getResolution(o),u=this.getOrigin(o),a=va(this.getTileSize(o),this.To),h=s*(t-u[0])/i/a[0],f=s*(u[1]-n)/i/a[1];return r?(h=Mi(h,5)-1,f=Mi(f,5)-1):(h=xi(h,5),f=xi(f,5)),Wh(o,h,f,e);},t.prototype.Co=function(t,n,i,r,e){var o=this.getOrigin(i),s=this.getResolution(i),u=va(this.getTileSize(i),this.To),a=(t-o[0])/s/u[0],h=(o[1]-n)/s/u[1];return r?(a=Mi(a,5)-1,h=Mi(h,5)-1):(a=xi(a,5),h=xi(h,5)),Wh(i,a,h,e);},t.prototype.getTileCoordForCoordAndZ=function(t,n,i){return this.Co(t[0],t[1],n,!1,i);},t.prototype.getTileCoordResolution=function(t){return this.Ti[t[0]];},t.prototype.getTileSize=function(t){return this.jo?this.jo:this.Oo[t];},t.prototype.getFullTileRange=function(t){return this.Eo?this.Eo[t]:this.st?this.getTileRangeForExtentAndZ(this.st,t):null;},t.prototype.getZForResolution=function(t,n){return hi(m(this.Ti,t,n||0),this.minZoom,this.maxZoom);},t.prototype.tileCoordIntersectsViewport=function(t,n){return Ue(n,0,n.length,2,this.getTileCoordExtent(t));},t.prototype.Po=function(t){for(var n=this.Ti.length,i=new Array(n),r=this.minZoom;r<n;++r){i[r]=this.getTileRangeForExtentAndZ(t,r);}this.Eo=i;},t;}(),Yf=Wf;function Kf(t){var n=t.getDefaultTileGrid();return n||(n=Qf(t),t.setDefaultTileGrid(n)),n;}function Zf(t,n,i){var r=n[0],e=t.getTileCoordCenter(n),o=tc(i);if(Sn(o,e))return n;var s=Qn(o),u=Math.ceil((o[0]-e[0])/s);return e[0]+=s*u,t.getTileCoordForCoordAndZ(e,r);}function $f(t,n,i,r){var e=void 0!==r?r:"top-left",o=Jf(t,n,i);return new Yf({extent:t,origin:Wn(t,e),resolutions:o,tileSize:i});}function Hf(t){var n=t||{},i=n.extent||br("EPSG:3857").getExtent(),r={extent:i,minZoom:n.minZoom,tileSize:n.tileSize,resolutions:Jf(i,n.maxZoom,n.tileSize,n.maxResolution)};return new Yf(r);}function Jf(t,n,i,r){for(var e=void 0!==n?n:42,o=Zn(t),s=Qn(t),u=va(void 0!==i?i:Bu),a=r>0?r:Math.max(s/u[0],o/u[1]),h=e+1,f=new Array(h),c=0;c<h;++c){f[c]=a/Math.pow(2,c);}return f;}function Qf(t,n,i,r){return $f(tc(t),n,i,r);}function tc(t){var n=(t=br(t)).getExtent();if(!n){var i=180*Gt[qt.DEGREES]/t.getMetersPerUnit();n=An(-i,-i,i,i);}return n;}function nc(t,n){var i=/\{z\}/g,r=/\{x\}/g,e=/\{y\}/g,o=/\{-y\}/g;return function(s,u,a){return s?t.replace(i,s[0].toString()).replace(r,s[1].toString()).replace(e,s[2].toString()).replace(o,function(){var t=s[0],i=n.getFullTileRange(t);return Et(i,55),(i.getHeight()-s[2]-1).toString();}):void 0;};}function ic(t,n){for(var i=t.length,r=new Array(i),e=0;e<i;++e){r[e]=nc(t[e],n);}return rc(r);}function rc(t){return 1===t.length?t[0]:function(n,i,r){if(n){var e=mi(Hh(n),t.length);return t[e](n,i,r);}};}function ec(t,n,i){}function oc(t){var n=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var r=i[1].charCodeAt(0),e=i[2].charCodeAt(0),o=void 0;for(o=r;o<=e;++o){n.push(t.replace(i[0],String.fromCharCode(o)));}return n;}if(i=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(i[2],10),u=parseInt(i[1],10);u<=s;u++){n.push(t.replace(i[0],u.toString()));}return n;}return n.push(t),n;}function sc(t,n){var i=[];Object.keys(n).forEach(function(t){null!==n[t]&&void 0!==n[t]&&i.push(t+"="+encodeURIComponent(n[t]));});var r=i.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+r;}var uc,ac=34962,hc=34963,fc=35044,cc=35048,lc=5126,vc=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function pc(t,n){for(var i=A({preserveDrawingBuffer:!0,antialias:!Vt},n),r=vc.length,e=0;e<r;++e){try{var o=t.getContext(vc[e],i);if(o)return o;}catch(t){}}return null;}var dc="http://www.w3.org/2001/XMLSchema-instance";function yc(t,n){return Dc().createElementNS(t,n);}function mc(t,n){return wc(t,n,[]).join("");}function wc(t,n,i){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)n?i.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):i.push(t.nodeValue);else{var r=void 0;for(r=t.firstChild;r;r=r.nextSibling){wc(r,n,i);}}return i;}function gc(t){return"documentElement"in t;}function bc(t,n,i){return t.getAttributeNS(n,i)||"";}function xc(t){return new DOMParser().parseFromString(t,"application/xml");}function Mc(t,n){return function(i,r){var e=t.call(void 0!==n?n:this,i,r);void 0!==e&&g(r[r.length-1],e);};}function _c(t,n){return function(i,r){var e=t.call(void 0!==n?n:this,i,r);void 0!==e&&r[r.length-1].push(e);};}function Sc(t,n){return function(i,r){var e=t.call(void 0!==n?n:this,i,r);void 0!==e&&(r[r.length-1]=e);};}function Oc(t,n,i){return function(r,e){var o=t.call(void 0!==i?i:this,r,e);if(void 0!==o){var s=e[e.length-1],u=void 0!==n?n:r.localName,a=void 0;u in s?a=s[u]:(a=[],s[u]=a),a.push(o);}};}function jc(t,n,i){return function(r,e){var o=t.call(void 0!==i?i:this,r,e);void 0!==o&&(e[e.length-1][void 0!==n?n:r.localName]=o);};}function Ec(t,n){return function(i,r,e){t.call(void 0!==n?n:this,i,r,e),e[e.length-1].node.appendChild(i);};}function Tc(t,n){var i,r;return function(n,e,o){if(void 0===i){i={};var s={};s[n.localName]=t,i[n.namespaceURI]=s,r=Ac(n.localName);}zc(i,r,e,o);};}function Ac(t,n){var i=t;return function(t,r,e){var o=r[r.length-1].node,s=i;return void 0===s&&(s=e),yc(void 0!==n?n:o.namespaceURI,s);};}var Pc=Ac();function Cc(t,n){for(var i=n.length,r=new Array(i),e=0;e<i;++e){r[e]=t[n[e]];}return r;}function kc(t,n,i){var r,e,o=void 0!==i?i:{};for(r=0,e=t.length;r<e;++r){o[t[r]]=n;}return o;}function Nc(t,n,i,r){var e;for(e=n.firstElementChild;e;e=e.nextElementSibling){var o=t[e.namespaceURI];if(void 0!==o){var s=o[e.localName];void 0!==s&&s.call(r,e,i);}}}function Ic(t,n,i,r,e){return r.push(t),Nc(n,i,r,e),r.pop();}function zc(t,n,i,r,e,o){for(var s,u,a=(void 0!==e?e:i).length,h=0;h<a;++h){void 0!==(s=i[h])&&void 0!==(u=n.call(void 0!==o?o:this,s,r,void 0!==e?e[h]:void 0))&&t[u.namespaceURI][u.localName].call(o,u,s,r);}}function Lc(t,n,i,r,e,o,s){return e.push(t),zc(n,i,r,e,o,s),e.pop();}var Rc=void 0;function Fc(){return void 0===Rc&&"undefined"!=typeof XMLSerializer&&(Rc=new XMLSerializer()),Rc;}var Gc=void 0;function Dc(){return void 0===Gc&&"undefined"!=typeof document&&(Gc=document.implementation.createDocument("","",null)),Gc;}var qc=fc,Uc=function(){function t(t,n){this.array=null,this.type=t,Et(t===ac||t===hc,62),this.usage=void 0!==n?n:qc;}return t.prototype.ofSize=function(t){this.array=new(Bc(this.type))(t);},t.prototype.fromArray=function(t){var n=Bc(this.type);this.array=n.from?n.from(t):new n(t);},t.prototype.fromArrayBuffer=function(t){this.array=new(Bc(this.type))(t);},t.prototype.getType=function(){return this.type;},t.prototype.getArray=function(){return this.array;},t.prototype.getUsage=function(){return this.usage;},t.prototype.getSize=function(){return this.array?this.array.length:0;},t;}();function Bc(t){switch(t){case ac:return Float32Array;case hc:return Uint32Array;default:return Float32Array;}}var Xc=Uc,Vc="webglcontextlost",Wc="webglcontextrestored",Yc=function(){function t(t){this.No=t.webGlContext;var n=this.No;this.Io=t.scaleRatio||1,this.zo=n.createTexture(),this.Lo=null,this.Ro=n.createFramebuffer();var i=n.createShader(n.VERTEX_SHADER);n.shaderSource(i,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),n.compileShader(i);var r=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(r,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),n.compileShader(r),this.Fo=n.createProgram(),n.attachShader(this.Fo,i),n.attachShader(this.Fo,r),n.linkProgram(this.Fo),this.Go=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,this.Go),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),n.STATIC_DRAW),this.Do=n.getAttribLocation(this.Fo,"a_position"),this.qo=n.getUniformLocation(this.Fo,"u_screenSize"),this.Uo=n.getUniformLocation(this.Fo,"u_opacity"),this.Bo=n.getUniformLocation(this.Fo,"u_image"),this.Xo=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(i){this.Xo.push({value:t.uniforms[i],location:n.getUniformLocation(this.Fo,i)});}.bind(this));}return t.prototype.getGL=function(){return this.No;},t.prototype.init=function(t){var n=this.getGL(),i=[n.drawingBufferWidth*this.Io,n.drawingBufferHeight*this.Io];if(n.bindFramebuffer(n.FRAMEBUFFER,this.getFrameBuffer()),n.viewport(0,0,i[0],i[1]),!this.Lo||this.Lo[0]!==i[0]||this.Lo[1]!==i[1]){this.Lo=i;var r=n.RGBA,e=n.RGBA,o=n.UNSIGNED_BYTE;n.bindTexture(n.TEXTURE_2D,this.zo),n.texImage2D(n.TEXTURE_2D,0,r,i[0],i[1],0,e,o,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.zo,0);}},t.prototype.apply=function(t,n,i,r){var e=this.getGL(),s=t.size;if(e.bindFramebuffer(e.FRAMEBUFFER,n?n.getFrameBuffer():null),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.zo),!n){var u=o(e.canvas);if(!t.renderTargets[u]){var a=e.getContextAttributes();a&&a.preserveDrawingBuffer&&(e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),t.renderTargets[u]=!0;}}e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.bindBuffer(e.ARRAY_BUFFER,this.Go),e.useProgram(this.Fo),e.enableVertexAttribArray(this.Do),e.vertexAttribPointer(this.Do,2,e.FLOAT,!1,0,0),e.uniform2f(this.qo,s[0],s[1]),e.uniform1i(this.Bo,0);var h=t.layerStatesArray[t.layerIndex].opacity;e.uniform1f(this.Uo,h),this.applyUniforms(t),i&&i(e,t),e.drawArrays(e.TRIANGLES,0,6),r&&r(e,t);},t.prototype.getFrameBuffer=function(){return this.Ro;},t.prototype.applyUniforms=function(t){var n,i=this.getGL(),r=1;this.Xo.forEach(function(e){if((n="function"==typeof e.value?e.value(t):e.value)instanceof HTMLCanvasElement||n instanceof ImageData)e.texture||(e.texture=i.createTexture()),i.activeTexture(i["TEXTURE".concat(r)]),i.bindTexture(i.TEXTURE_2D,e.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),n instanceof ImageData?i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,n.width,n.height,0,i.UNSIGNED_BYTE,new Uint8Array(n.data)):i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n),i.uniform1i(e.location,r++);else if(Array.isArray(n))switch(n.length){case 2:return void i.uniform2f(e.location,n[0],n[1]);case 3:return void i.uniform3f(e.location,n[0],n[1],n[2]);case 4:return void i.uniform4f(e.location,n[0],n[1],n[2],n[3]);default:return;}else"number"==typeof n&&i.uniform1f(e.location,n);});},t;}(),Kc=Yc;function Zc(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];}function $c(t,n){return t[0]=n[0],t[1]=n[1],t[4]=n[2],t[5]=n[3],t[12]=n[4],t[13]=n[5],t;}var Hc=function(){var _t60=function t(n,i){return _t60=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t60(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t60(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Jc="u_projectionMatrix",Qc="u_offsetScaleMatrix",tl="u_offsetRotateMatrix",nl="u_time",il="u_zoom",rl="u_resolution",el={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:lc},ol={};function sl(t){return"shared/"+t;}var ul=0;var al=function(t){function n(n){var i,r=t.call(this)||this,e=n||{};r.Vo=r.handleWebGLContextLost.bind(r),r.Wo=r.handleWebGLContextRestored.bind(r),r.Yo=e.canvasCacheKey?sl(e.canvasCacheKey):(i="unique/"+ul,ul+=1,i),r.qt=function(t){var n=ol[t];if(!n){var i=document.createElement("canvas");i.style.position="absolute",i.style.left="0",n={users:0,canvas:i},ol[t]=n;}return n.users+=1,n.canvas;}(r.Yo),r.No=pc(r.qt),r.Ko={},r.Zo={},r.$o=null,r.qt.addEventListener(Vc,r.Vo),r.qt.addEventListener(Wc,r.Wo),r.Ho=[1,0,0,1,0,0],r.Jo=[1,0,0,1,0,0],r.Qo=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.ts={},r.ns={},r.Xo=[],e.uniforms&&r.setUniforms(e.uniforms);var o=r.getGL();return r.rs=e.postProcesses?e.postProcesses.map(function(t){return new Kc({webGlContext:o,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms});}):[new Kc({webGlContext:o})],r.es=null,r.ve=Date.now(),r;}return Hc(n,t),n.prototype.setUniforms=function(t){for(var n in this.Xo=[],t){this.Xo.push({name:n,value:t[n]});}this.ts={};},n.prototype.canvasCacheKeyMatches=function(t){return this.Yo===sl(t);},n.prototype.getExtension=function(t){if(t in this.Zo)return this.Zo[t];var n=this.No.getExtension(t);return this.Zo[t]=n,n;},n.prototype.bindBuffer=function(t){var n=this.getGL(),i=o(t),r=this.Ko[i];r||(r={buffer:t,webGlBuffer:n.createBuffer()},this.Ko[i]=r);n.bindBuffer(t.getType(),r.webGlBuffer);},n.prototype.flushBufferData=function(t){var n=this.getGL();this.bindBuffer(t),n.bufferData(t.getType(),t.getArray(),t.getUsage());},n.prototype.deleteBuffer=function(t){var n=this.getGL(),i=o(t),r=this.Ko[i];r&&!n.isContextLost()&&n.deleteBuffer(r.webGlBuffer),delete this.Ko[i];},n.prototype.disposeInternal=function(){this.qt.removeEventListener(Vc,this.Vo),this.qt.removeEventListener(Wc,this.Wo),function(t){var n=ol[t];if(n&&(n.users-=1,!(n.users>0))){var i=pc(n.canvas).getExtension("WEBGL_lose_context");i&&i.loseContext(),delete ol[t];}}(this.Yo),delete this.No,delete this.qt;},n.prototype.prepareDraw=function(t,n){var i=this.getGL(),r=this.getCanvas(),e=t.size,o=t.pixelRatio;r.width=e[0]*o,r.height=e[1]*o,r.style.width=e[0]+"px",r.style.height=e[1]+"px",i.useProgram(this.$o);for(var s=this.rs.length-1;s>=0;s--){this.rs[s].init(t);}i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),i.useProgram(this.$o),this.applyFrameState(t),this.applyUniforms(t);},n.prototype.prepareDrawToRenderTarget=function(t,n,i){var r=this.getGL(),e=n.getSize();r.bindFramebuffer(r.FRAMEBUFFER,n.getFramebuffer()),r.viewport(0,0,e[0],e[1]),r.bindTexture(r.TEXTURE_2D,n.getTexture()),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,i?r.ZERO:r.ONE_MINUS_SRC_ALPHA),r.useProgram(this.$o),this.applyFrameState(t),this.applyUniforms(t);},n.prototype.drawElements=function(t,n){var i=this.getGL();this.getExtension("OES_element_index_uint");var r=i.UNSIGNED_INT,e=n-t,o=4*t;i.drawElements(i.TRIANGLES,e,r,o);},n.prototype.finalizeDraw=function(t,n,i){for(var r=0,e=this.rs.length;r<e;r++){r===e-1?this.rs[r].apply(t,null,n,i):this.rs[r].apply(t,this.rs[r+1]);}},n.prototype.getCanvas=function(){return this.qt;},n.prototype.getGL=function(){return this.No;},n.prototype.applyFrameState=function(t){var n=t.size,i=t.viewState.rotation,r=tn(this.Jo);un(r,2/n[0],2/n[1]);var e=tn(this.Ho);0!==i&&sn(e,-i),this.setUniformMatrixValue(Qc,$c(this.Qo,r)),this.setUniformMatrixValue(tl,$c(this.Qo,e)),this.setUniformFloatValue(nl,.001*(Date.now()-this.ve)),this.setUniformFloatValue(il,t.viewState.zoom),this.setUniformFloatValue(rl,t.viewState.resolution);},n.prototype.applyUniforms=function(t){var n,i=this.getGL(),r=0;this.Xo.forEach(function(e){if((n="function"==typeof e.value?e.value(t):e.value)instanceof HTMLCanvasElement||n instanceof HTMLImageElement||n instanceof ImageData)e.texture||(e.prevValue=void 0,e.texture=i.createTexture()),i.activeTexture(i["TEXTURE".concat(r)]),i.bindTexture(i.TEXTURE_2D,e.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),(!(n instanceof HTMLImageElement)||n.complete)&&e.prevValue!==n&&(e.prevValue=n,i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n)),i.uniform1i(this.getUniformLocation(e.name),r++);else if(Array.isArray(n)&&6===n.length)this.setUniformMatrixValue(e.name,$c(this.Qo,n));else if(Array.isArray(n)&&n.length<=4)switch(n.length){case 2:return void i.uniform2f(this.getUniformLocation(e.name),n[0],n[1]);case 3:return void i.uniform3f(this.getUniformLocation(e.name),n[0],n[1],n[2]);case 4:return void i.uniform4f(this.getUniformLocation(e.name),n[0],n[1],n[2],n[3]);default:return;}else"number"==typeof n&&i.uniform1f(this.getUniformLocation(e.name),n);}.bind(this));},n.prototype.useProgram=function(t){return t!=this.$o&&(this.getGL().useProgram(t),this.$o=t,this.ts={},this.ns={},!0);},n.prototype.compileShader=function(t,n){var i=this.getGL(),r=i.createShader(n);return i.shaderSource(r,t),i.compileShader(r),r;},n.prototype.getProgram=function(t,n){var i=this.getGL(),r=this.compileShader(t,i.FRAGMENT_SHADER),e=this.compileShader(n,i.VERTEX_SHADER),o=i.createProgram();if(i.attachShader(o,r),i.attachShader(o,e),i.linkProgram(o),!i.getShaderParameter(r,i.COMPILE_STATUS)){var s="Fragment shader compliation failed: ".concat(i.getShaderInfoLog(r));throw new Error(s);}if(i.deleteShader(r),!i.getShaderParameter(e,i.COMPILE_STATUS)){s="Vertex shader compilation failed: ".concat(i.getShaderInfoLog(e));throw new Error(s);}if(i.deleteShader(e),!i.getProgramParameter(o,i.LINK_STATUS)){s="GL program linking failed: ".concat(i.getShaderInfoLog(e));throw new Error(s);}return o;},n.prototype.getUniformLocation=function(t){return void 0===this.ts[t]&&(this.ts[t]=this.getGL().getUniformLocation(this.$o,t)),this.ts[t];},n.prototype.getAttributeLocation=function(t){return void 0===this.ns[t]&&(this.ns[t]=this.getGL().getAttribLocation(this.$o,t)),this.ns[t];},n.prototype.makeProjectionTransform=function(t,n){var i=t.size,r=t.viewState.rotation,e=t.viewState.resolution,o=t.viewState.center;return tn(n),fn(n,0,0,2/(e*i[0]),2/(e*i[1]),-r,-o[0],-o[1]),n;},n.prototype.setUniformFloatValue=function(t,n){this.getGL().uniform1f(this.getUniformLocation(t),n);},n.prototype.setUniformFloatVec4=function(t,n){this.getGL().uniform4fv(this.getUniformLocation(t),n);},n.prototype.setUniformMatrixValue=function(t,n){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,n);},n.prototype.os=function(t,n,i,r,e){var o=this.getAttributeLocation(t);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,n,i,!1,r,e));},n.prototype.enableAttributes=function(t){for(var n=hl(t),i=0,r=0;r<t.length;r++){var e=t[r];this.os(e.name,e.size,e.type||lc,n,i),i+=e.size*fl(e.type);}},n.prototype.handleWebGLContextLost=function(){P(this.Ko),this.$o=null;},n.prototype.handleWebGLContextRestored=function(){},n.prototype.createTexture=function(t,n,i){var r=this.getGL(),e=i||r.createTexture(),o=r.RGBA,s=r.RGBA,u=r.UNSIGNED_BYTE;return r.bindTexture(r.TEXTURE_2D,e),n?r.texImage2D(r.TEXTURE_2D,0,o,s,u,n):r.texImage2D(r.TEXTURE_2D,0,o,t[0],t[1],0,s,u,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),e;},n;}(v);function hl(t){for(var n=0,i=0;i<t.length;i++){var r=t[i];n+=r.size*fl(r.type);}return n;}function fl(t){switch(t){case el.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case el.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case el.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case el.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT;}}var cl=al,ll=function(){function t(t,n){this.name=t,this.data=n,this.ss=null;}return t.prototype.getTexture=function(t){if(!this.ss){var n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.ss=n;}return this.ss;},t;}(),vl=new Uint8Array(4),pl=function(){function t(t,n){this.us=t;var i=t.getGL();this.ss=i.createTexture(),this.hs=i.createFramebuffer(),this.W=n||[1,1],this.B=new Uint8Array(0),this.fs=!0,this.cs();}return t.prototype.setSize=function(t){x(t,this.W)||(this.W[0]=t[0],this.W[1]=t[1],this.cs());},t.prototype.getSize=function(){return this.W;},t.prototype.clearCachedData=function(){this.fs=!0;},t.prototype.readAll=function(){if(this.fs){var t=this.W,n=this.us.getGL();n.bindFramebuffer(n.FRAMEBUFFER,this.hs),n.readPixels(0,0,t[0],t[1],n.RGBA,n.UNSIGNED_BYTE,this.B),this.fs=!1;}return this.B;},t.prototype.readPixel=function(t,n){if(t<0||n<0||t>this.W[0]||n>=this.W[1])return vl[0]=0,vl[1]=0,vl[2]=0,vl[3]=0,vl;this.readAll();var i=Math.floor(t)+(this.W[1]-Math.floor(n)-1)*this.W[0];return vl[0]=this.B[4*i],vl[1]=this.B[4*i+1],vl[2]=this.B[4*i+2],vl[3]=this.B[4*i+3],vl;},t.prototype.getTexture=function(){return this.ss;},t.prototype.getFramebuffer=function(){return this.hs;},t.prototype.cs=function(){var t=this.W,n=this.us.getGL();this.ss=this.us.createTexture(t,null,this.ss),n.bindFramebuffer(n.FRAMEBUFFER,this.hs),n.viewport(0,0,t[0],t[1]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.ss,0),this.B=new Uint8Array(t[0]*t[1]*4);},t;}(),dl=!0,yl=function(){function t(t,n,i,r,e,o){this.ls=t,this.vs=n;var s={},u=Pr(this.vs,this.ls);this.ps=function(t){var n=t[0]+"/"+t[1];return s[n]||(s[n]=u(t)),s[n];},this.ds=r,this.ys=e*e,this.ws=[],this.gs=!1,this.bs=this.ls.canWrapX()&&!!r&&!!this.ls.getExtent()&&Qn(r)==Qn(this.ls.getExtent()),this.xs=this.ls.getExtent()?Qn(this.ls.getExtent()):null,this.Ms=this.vs.getExtent()?Qn(this.vs.getExtent()):null;var a=Hn(i),h=Jn(i),f=Xn(i),c=Bn(i),l=this.ps(a),v=this.ps(h),p=this.ps(f),d=this.ps(c),y=10+(o?Math.max(0,Math.ceil(ci(Un(i)/(o*o*256*256)))):0);if(this._s(a,h,f,c,l,v,p,d,y),this.gs){var m=1/0;this.ws.forEach(function(t,n,i){m=Math.min(m,t.source[0][0],t.source[1][0],t.source[2][0]);}),this.ws.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-m>this.xs/2){var n=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];n[0][0]-m>this.xs/2&&(n[0][0]-=this.xs),n[1][0]-m>this.xs/2&&(n[1][0]-=this.xs),n[2][0]-m>this.xs/2&&(n[2][0]-=this.xs);var i=Math.min(n[0][0],n[1][0],n[2][0]);Math.max(n[0][0],n[1][0],n[2][0])-i<this.xs/2&&(t.source=n);}}.bind(this));}s={};}return t.prototype.Ss=function(t,n,i,r,e,o){this.ws.push({source:[r,e,o],target:[t,n,i]});},t.prototype._s=function(t,n,i,r,e,o,s,u,a){var h=bn([e,o,s,u]),f=this.xs?Qn(h)/this.xs:null,c=this.xs,l=this.ls.canWrapX()&&f>.5&&f<1,v=!1;if(a>0){if(this.vs.isGlobal()&&this.Ms)v=Qn(bn([t,n,i,r]))/this.Ms>.25||v;!l&&this.ls.isGlobal()&&f&&(v=f>.25||v);}if(!(!v&&this.ds&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3]))||ti(h,this.ds)){var p=0;if(!(v||isFinite(e[0])&&isFinite(e[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(u[0])&&isFinite(u[1])))if(a>0)v=!0;else if(1!=(p=(isFinite(e[0])&&isFinite(e[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(s[0])&&isFinite(s[1])?0:2)+(isFinite(u[0])&&isFinite(u[1])?0:1))&&2!=p&&4!=p&&8!=p)return;if(a>0){if(!v){var d=[(t[0]+i[0])/2,(t[1]+i[1])/2],y=this.ps(d),m=void 0;if(l)m=(mi(e[0],c)+mi(s[0],c))/2-mi(y[0],c);else m=(e[0]+s[0])/2-y[0];var w=(e[1]+s[1])/2-y[1];v=m*m+w*w>this.ys;}if(v){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var g=[(n[0]+i[0])/2,(n[1]+i[1])/2],b=this.ps(g),x=[(r[0]+t[0])/2,(r[1]+t[1])/2],M=this.ps(x);this._s(t,n,g,x,e,o,b,M,a-1),this._s(x,g,i,r,M,b,s,u,a-1);}else{var _=[(t[0]+n[0])/2,(t[1]+n[1])/2],S=this.ps(_),O=[(i[0]+r[0])/2,(i[1]+r[1])/2],j=this.ps(O);this._s(t,_,O,r,e,S,j,u,a-1),this._s(_,n,i,O,S,o,s,j,a-1);}return;}}if(l){if(!this.bs)return;this.gs=!0;}0==(11&p)&&this.Ss(t,i,r,e,s,u),0==(14&p)&&this.Ss(t,i,n,e,s,o),p&&(0==(13&p)&&this.Ss(n,r,t,o,u,e),0==(7&p)&&this.Ss(n,r,i,o,u,s));}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.ws.forEach(function(n,i,r){var e=n.source;Ln(t,e[0]),Ln(t,e[1]),Ln(t,e[2]);}),t;},t.prototype.getTriangles=function(){return this.ws;},t;}(),ml=function(){var _t61=function t(n,i){return _t61=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t61(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t61(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),wl=function(t){function n(n,i,r,e,o,s,u,a,h,f,c,l){var v=t.call(this,o,lt,{interpolate:!!l})||this;v.Os=void 0!==c&&c,v.kt=u,v.js=a,v.qt=null,v.Es=i,v.Ts=e,v.As=s||o,v.Ps=[],v.Cs=null,v.ks=0;var p=e.getTileCoordExtent(v.As),d=v.Ts.getExtent(),y=v.Es.getExtent(),m=d?$n(p,d):p;if(0===Un(m))return v.state=yt,v;var w=n.getExtent();w&&(y=y?$n(y,w):w);var g=e.getResolution(v.As[0]),b=Bf(n,r,m,g);if(!isFinite(b)||b<=0)return v.state=yt,v;var x=void 0!==f?f:.5;if(v.Ns=new yl(n,r,m,y,b*x,g),0===v.Ns.getTriangles().length)return v.state=yt,v;v.ks=i.getZForResolution(b);var M=v.Ns.calculateSourceExtent();if(y&&(n.canWrapX()?(M[1]=hi(M[1],y[1],y[3]),M[3]=hi(M[3],y[1],y[3])):M=$n(M,y)),Un(M)){for(var _=i.getTileRangeForExtentAndZ(M,v.ks),S=_.minX;S<=_.maxX;S++){for(var O=_.minY;O<=_.maxY;O++){var j=h(v.ks,S,O,u);j&&v.Ps.push(j);}}0===v.Ps.length&&(v.state=yt);}else v.state=yt;return v;}return ml(n,t),n.prototype.getImage=function(){return this.qt;},n.prototype.Is=function(){var t=[];if(this.Ps.forEach(function(n,i,r){n&&n.getState()==pt&&t.push({extent:this.Es.getTileCoordExtent(n.tileCoord),image:n.getImage()});}.bind(this)),this.Ps.length=0,0===t.length)this.state=dt;else{var n=this.As[0],i=this.Ts.getTileSize(n),r="number"==typeof i?i:i[0],e="number"==typeof i?i:i[1],o=this.Ts.getResolution(n),s=this.Es.getResolution(this.ks),u=this.Ts.getTileCoordExtent(this.As);this.qt=Xf(r,e,this.kt,s,this.Es.getExtent(),o,u,this.Ns,t,this.js,this.Os,this.interpolate),this.state=pt;}this.changed();},n.prototype.load=function(){if(this.state==lt){this.state=vt,this.changed();var t=0;this.Cs=[],this.Ps.forEach(function(n,i,r){var e=n.getState();if(e==lt||e==vt){t++;var o=Z(n,z,function(i){var r=n.getState();r!=pt&&r!=dt&&r!=yt||(H(o),0===--t&&(this.zs(),this.Is()));},this);this.Cs.push(o);}}.bind(this)),0===t?setTimeout(this.Is.bind(this),0):this.Ps.forEach(function(t,n,i){t.getState()==lt&&t.load();});}},n.prototype.zs=function(){this.Cs.forEach(H),this.Cs=null;},n.prototype.release=function(){this.qt&&(No(this.qt.getContext("2d")),Gf.push(this.qt),this.qt=null),t.prototype.release.call(this);},n;}(_t),gl=wl,bl=function(){var _t62=function t(n,i){return _t62=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t62(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t62(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}();function xl(t,n,i){var r=i?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r);}function Ml(t,n,i,r,e,o){var s,u,a=t.getGL();i instanceof Float32Array?(s=a.FLOAT,t.getExtension("OES_texture_float"),u=null!==t.getExtension("OES_texture_float_linear")):(s=a.UNSIGNED_BYTE,u=!0);xl(a,n,o&&u);var h,f=i.byteLength/r[1],c=1;switch(f%8==0?c=8:f%4==0?c=4:f%2==0&&(c=2),e){case 1:h=a.LUMINANCE;break;case 2:h=a.LUMINANCE_ALPHA;break;case 3:h=a.RGB;break;case 4:h=a.RGBA;break;default:throw new Error("Unsupported number of bands: ".concat(e));}var l=a.getParameter(a.UNPACK_ALIGNMENT);a.pixelStorei(a.UNPACK_ALIGNMENT,c),a.texImage2D(a.TEXTURE_2D,0,h,r[0],r[1],0,h,s,i),a.pixelStorei(a.UNPACK_ALIGNMENT,l);}var _l=null;var Sl=function(t){function n(n){var i=t.call(this)||this;i.tile,i.textures=[],i.cr=i.cr.bind(i),i.Ls=va(n.grid.getTileSize(n.tile.tileCoord[0])),i.js=n.gutter||0,i.bandCount=NaN,i.us=n.helper;var r=new Xc(ac,fc);return r.fromArray([0,1,1,1,1,0,0,0]),i.us.flushBufferData(r),i.coords=r,i.setTile(n.tile),i;}return bl(n,t),n.prototype.setTile=function(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(z,this.cr),this.tile=t,this.textures.length=0,this.loaded=t.getState()===pt,this.loaded)this.Rs();else{if(t instanceof qo){var n=t.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous");}t.addEventListener(z,this.cr);}},n.prototype.Rs=function(){var t=this.us,n=t.getGL(),i=this.tile;if(i instanceof qo||i instanceof gl){var r=n.createTexture();return this.textures.push(r),this.bandCount=4,void function(t,n,i,r){xl(t,n,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i);}(n,r,i.getImage(),i.interpolate);}var e=i.getSize(),o=[e[0]+2*this.js,e[1]+2*this.js],s=i.getData(),u=s instanceof Float32Array,a=o[0]*o[1],h=u?Float32Array:Uint8Array,f=h.BYTES_PER_ELEMENT,c=s.byteLength/o[1];this.bandCount=Math.floor(c/f/o[0]);var l=Math.ceil(this.bandCount/4);if(1===l){r=n.createTexture();return this.textures.push(r),void Ml(t,r,s,o,this.bandCount,i.interpolate);}for(var v=new Array(l),p=0;p<l;++p){r=n.createTexture();this.textures.push(r);var d=p<l-1?4:this.bandCount%4;v[p]=new h(a*d);}for(var y=0,m=0,w=o[0]*this.bandCount,g=0;g<o[1];++g){for(var b=0;b<w;++b){var x=s[m+b],M=Math.floor(y/this.bandCount),_=b%this.bandCount;(S=v[p=Math.floor(_/4)])[M*(d=S.length/a)+_%4]=x,++y;}m+=c/f;}for(p=0;p<l;++p){var S;Ml(t,r=this.textures[p],S=v[p],o,d=S.length/a,i.interpolate);}},n.prototype.cr=function(){this.tile.getState()===pt&&(this.loaded=!0,this.Rs(),this.dispatchEvent(z));},n.prototype.disposeInternal=function(){var t=this.us.getGL();this.us.deleteBuffer(this.coords);for(var n=0;n<this.textures.length;++n){t.deleteTexture(this.textures[n]);}this.tile.removeEventListener(z,this.cr);},n.prototype.getPixelData=function(t,n){if(!this.loaded)return null;var i,r=this.Ls[0],e=this.Ls[1],o=this.js;if(this.tile instanceof jt){var s=this.tile.getSize(),u=s[0],a=s[1],h=u+2*o,f=a+2*o,c=o+Math.floor(u*(t/r)),l=o+Math.floor(a*(n/e)),v=this.tile.getData();if(v instanceof DataView){var p=v.byteLength/(h*f),d=p*(l*h+c),y=v.buffer.slice(d,d+p);return new DataView(y);}var m=this.bandCount*(l*h+c);return v.slice(m,m+this.bandCount);}_l||((i=document.createElement("canvas")).width=1,i.height=1,_l=i.getContext("2d")),_l.clearRect(0,0,1,1);var w,g=this.tile.getImage(),b=g.width-2*o,x=g.height-2*o,M=o+Math.floor(b*(t/r)),_=o+Math.floor(x*(n/e));try{_l.drawImage(g,M,_,1,1,0,0,1,1),w=_l.getImageData(0,0,1,1).data;}catch(t){return _l=null,null;}return w;},n;}(I),Ol=Sl,jl=function(){var _t63=function t(n,i){return _t63=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t63(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t63(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),El=function(t){function n(n){var i=t.call(this)||this;return i.ready=!0,i.Fs=i.Gs.bind(i),i.Ds=n,i.declutterExecutorGroup=null,i;}return jl(n,t),n.prototype.getFeatures=function(t){return r();},n.prototype.getData=function(t){return null;},n.prototype.prepareFrame=function(t){return r();},n.prototype.renderFrame=function(t,n){return r();},n.prototype.loadedTileCallback=function(t,n,i){t[n]||(t[n]={}),t[n][i.tileCoord.toString()]=i;},n.prototype.createLoadedTileFinder=function(t,n,i){return function(r,e){var o=this.loadedTileCallback.bind(this,i,r);return t.forEachLoadedTile(n,r,e,o);}.bind(this);},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e){},n.prototype.getDataAtPixel=function(t,n,i){return null;},n.prototype.getLayer=function(){return this.Ds;},n.prototype.handleFontsChanged=function(){},n.prototype.Gs=function(t){t.target.getState()===So&&this.renderIfReadyAndVisible();},n.prototype.loadImage=function(t){var n=t.getState();return n!=So&&n!=Oo&&t.addEventListener(z,this.Fs),n==Mo&&(t.load(),n=t.getState()),n==So;},n.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed();},n.prototype.disposeInternal=function(){delete this.Ds,t.prototype.disposeInternal.call(this);},n;}(nt),Tl=El,Al=function(){var _t64=function t(n,i){return _t64=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t64(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t64(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Pl="GENERATE_BUFFERS",Cl=function(t){function n(n,i){var r=t.call(this,n)||this,e=i||{};return r.qs=[1,0,0,1,0,0],r.Us=null,r.Bs=e.postProcesses,r.Xo=e.uniforms,r.helper,n.addChangeListener(cs,r.removeHelper.bind(r)),r.dispatchPreComposeEvent=r.dispatchPreComposeEvent.bind(r),r.dispatchPostComposeEvent=r.dispatchPostComposeEvent.bind(r),r;}return Al(n,t),n.prototype.dispatchPreComposeEvent=function(t,n){var i=this.getLayer();if(i.hasListener(ys)){var r=new Ts(ys,void 0,n,t);i.dispatchEvent(r);}},n.prototype.dispatchPostComposeEvent=function(t,n){var i=this.getLayer();if(i.hasListener(ms)){var r=new Ts(ms,void 0,n,t);i.dispatchEvent(r);}},n.prototype.reset=function(t){this.Xo=t.uniforms,this.helper&&this.helper.setUniforms(this.Xo);},n.prototype.removeHelper=function(){this.helper&&(this.helper.dispose(),delete this.helper);},n.prototype.prepareFrame=function(t){if(this.getLayer().getRenderSource()){for(var i=!0,r=-1,e=void 0,o=0,s=t.layerStatesArray.length;o<s;o++){var u=t.layerStatesArray[o].layer,a=u.getRenderer();if(a instanceof n){var h=u.getClassName();if((i||h!==e)&&(r+=1,i=!1),e=h,a===this)break;}else i=!0;}var f="map/"+t.mapId+"/group/"+r;this.helper&&this.helper.canvasCacheKeyMatches(f)||(this.removeHelper(),this.helper=new cl({postProcesses:this.Bs,uniforms:this.Xo,canvasCacheKey:f}),e&&(this.helper.getCanvas().className=e),this.afterHelperCreated());}return this.prepareFrameInternal(t);},n.prototype.afterHelperCreated=function(){},n.prototype.prepareFrameInternal=function(t){return!0;},n.prototype.disposeInternal=function(){this.removeHelper(),t.prototype.disposeInternal.call(this);},n.prototype.Xs=function(t,n,i){var r=this.getLayer();if(r.hasListener(t)){fn(this.qs,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1]);var e=new Ts(t,this.qs,i,n);r.dispatchEvent(e);}},n.prototype.preRender=function(t,n){this.Xs(ps,t,n);},n.prototype.postRender=function(t,n){this.Xs(ds,t,n);},n.prototype.getDataAtPixel=function(t,n,i){var r=on([n.pixelRatio,0,0,n.pixelRatio,0,0],t.slice()),e=this.helper.getGL();if(!e)return null;var o=this.getLayer().getExtent();if(o&&!Sn(o,on(n.pixelToCoordinateTransform,t.slice())))return null;var s=e.getContextAttributes();if(!s||!s.preserveDrawingBuffer)return new Uint8Array();var u,a=Math.round(r[0]),h=Math.round(r[1]),f=this.Us;if(!f){var c=document.createElement("canvas");c.width=1,c.height=1,f=c.getContext("2d"),this.Us=f;}f.clearRect(0,0,1,1);try{f.drawImage(e.canvas,a,h,1,1,0,0,1,1),u=f.getImageData(0,0,1,1).data;}catch(t){return u;}return 0===u[3]?null:u;},n;}(Tl),kl=[],Nl={vertexPosition:0,indexPosition:0};function Il(t,n,i,r,e){t[n+0]=i,t[n+1]=r,t[n+2]=e;}function zl(t,n){var i=n||[],r=256,e=255;return i[0]=Math.floor(t/r/r/r)/e,i[1]=Math.floor(t/r/r)%r/e,i[2]=Math.floor(t/r)%r/e,i[3]=t%r/e,i;}function Ll(t){var n=0,i=256,r=255;return n+=Math.round(t[0]*i*i*i*r),n+=Math.round(t[1]*i*i*r),n+=Math.round(t[2]*i*r),n+=Math.round(t[3]*r);}var Rl=Cl,Fl=function(){var _t65=function t(n,i){return _t65=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t65(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t65(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Gl={TILE_TEXTURE_ARRAY:"u_tileTextures",TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom"},Dl={TEXTURE_COORD:"a_textureCoord"},ql=[{name:Dl.TEXTURE_COORD,size:2,type:el.FLOAT}],Ul={};function Bl(t){return 2*(1-1/(t+1))-1;}function Xl(t,n,i){i in t||(t[i]=[]),t[i].push(n);}function Vl(t,n){var i=t.layerStatesArray[t.layerIndex];i.extent&&(n=$n(n,Gr(i.extent,t.viewState.projection)));var r=i.layer.getRenderSource();if(!r.getWrapX()){var e=r.getTileGridForProjection(t.viewState.projection).getExtent();e&&(n=$n(n,e));}return n;}function Wl(t,n){return"".concat(t.getKey(),",").concat(Kh(n));}var Yl=function(t){function n(n,i){var r=t.call(this,n,{uniforms:i.uniforms})||this;r.renderComplete=!1,r.Vs=[1,0,0,1,0,0],r.Ws=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.Ys=new of(0,0,0,0),r.Ks=Wh(0,0,0),r.Zs=[0,0],r.$s,r.Hs=i.vertexShader,r.Js=i.fragmentShader,r.Qs=new Xc(hc,fc),r.Qs.fromArray([0,1,3,1,2,3]);var e=void 0!==i.cacheSize?i.cacheSize:512;return r.tu=new Vh(e),r.nu=i.paletteTextures||[],r.Ki=null,r;}return Fl(n,t),n.prototype.reset=function(n){t.prototype.reset.call(this,{uniforms:n.uniforms}),this.Hs=n.vertexShader,this.Js=n.fragmentShader,this.nu=n.paletteTextures||[],this.helper&&(this.$s=this.helper.getProgram(this.Js,this.Hs));},n.prototype.afterHelperCreated=function(){this.$s=this.helper.getProgram(this.Js,this.Hs),this.helper.flushBufferData(this.Qs);},n.prototype.iu=function(t){var n=this.getLayer(),i=t.getState(),r=n.getUseInterimTilesOnError();return i==pt||i==yt||i==dt&&!r;},n.prototype.prepareFrameInternal=function(t){var n=this.getLayer().getRenderSource();return!!n&&!ni(Vl(t,t.extent))&&"ready"===n.getState();},n.prototype.enqueueTiles=function(t,n,i,r){var e=t.viewState,s=this.getLayer(),u=s.getRenderSource(),a=u.getTileGridForProjection(e.projection),h=u.getGutterForProjection(e.projection),f=o(u);f in t.wantedTiles||(t.wantedTiles[f]={});for(var c=t.wantedTiles[f],l=this.tu,v=Math.max(i-s.getPreload(),a.getMinZoom(),s.getMinZoom()),p=i;p>=v;--p){for(var d=a.getTileRangeForExtentAndZ(n,p,this.Ys),y=a.getResolution(p),m=d.minX;m<=d.maxX;++m){for(var w=d.minY;w<=d.maxY;++w){var g=Wh(p,m,w,this.Ks),b=Wl(u,g),x=void 0,M=void 0;if(l.containsKey(b)&&(M=(x=l.get(b)).tile),!x||x.tile.key!==u.getKey())if(M=u.getTile(p,m,w,t.pixelRatio,e.projection),x){if(this.iu(M))x.setTile(M);else{var _=M.getInterimTile();x.setTile(_);}}else x=new Ol({tile:M,grid:a,helper:this.helper,gutter:h}),l.set(b,x);Xl(r,x,p);var S=M.getKey();c[S]=!0,M.getState()===lt&&(t.tileQueue.isKeyQueued(S)||t.tileQueue.enqueue([M,f,a.getTileCoordCenter(g),y]));}}}},n.prototype.renderFrame=function(t){this.Ki=t,this.renderComplete=!0;var n=this.helper.getGL();this.preRender(n,t);var i=t.viewState,r=this.getLayer().getRenderSource(),e=r.getTileGridForProjection(i.projection),s=r.getGutterForProjection(i.projection),u=Vl(t,t.extent),a=e.getZForResolution(i.resolution,r.zDirection),h={};if(t.nextExtent){var f=e.getZForResolution(i.nextResolution,r.zDirection),c=Vl(t,t.nextExtent);this.enqueueTiles(t,c,f,h);}this.enqueueTiles(t,u,a,h);for(var l={},v=o(this),p=t.time,y=!1,m=h[a],w=0,g=m.length;w<g;++w){var b=(D=(tt=m[w]).tile).tileCoord;if(tt.loaded){if(1===(q=D.getAlpha(v,p))){D.endTransition(v);continue;}y=!0,l[U=Kh(b)]=q;}if(this.renderComplete=!1,!this.ru(e,b,a+1,h))for(var x=e.getMinZoom(),M=a-1;M>=x;--M){if(this.ru(e,b,M,h))break;}}this.helper.useProgram(this.$s),this.helper.prepareDraw(t,!y);for(var _=Object.keys(h).map(Number).sort(d),S=i.center[0],O=i.center[1],j=0,E=_.length;j<E;++j){var T=_[j],A=e.getResolution(T),P=va(e.getTileSize(T),this.Zs),C=e.getOrigin(T),k=P[0]+2*s,N=P[1]+2*s,I=k/N,z=(S-C[0])/(P[0]*A),L=(C[1]-O)/(P[1]*A),R=i.resolution/A,F=Bl(T),G=h[T];for(w=0,g=G.length;w<g;++w){if((tt=G[w]).loaded){var D,q,U=Kh(b=(D=tt.tile).tileCoord),B=b[1],X=b[2];tn(this.Vs),un(this.Vs,2/(t.size[0]*R/k),-2/(t.size[1]*R/k)),sn(this.Vs,i.rotation),un(this.Vs,1,1/I),hn(this.Vs,(P[0]*(B-z)-s)/k,(P[1]*(X-L)-s)/N),this.helper.setUniformMatrixValue(Gl.TILE_TRANSFORM,$c(this.Ws,this.Vs)),this.helper.bindBuffer(tt.coords),this.helper.bindBuffer(this.Qs),this.helper.enableAttributes(ql);for(var V=0;V<tt.textures.length;){var W="TEXTURE"+V,Y="".concat(Gl.TILE_TEXTURE_ARRAY,"[").concat(V,"]");n.activeTexture(n[W]),n.bindTexture(n.TEXTURE_2D,tt.textures[V]),n.uniform1i(this.helper.getUniformLocation(Y),V),++V;}for(var K=0;K<this.nu.length;++K){var Z=this.nu[K];n.activeTexture(n["TEXTURE"+V]);var $=Z.getTexture(n);n.bindTexture(n.TEXTURE_2D,$),n.uniform1i(this.helper.getUniformLocation(Z.name),V),++V;}(q=U in l?l[U]:1)<1&&(t.animate=!0),this.helper.setUniformFloatValue(Gl.TRANSITION_ALPHA,q),this.helper.setUniformFloatValue(Gl.DEPTH,F),this.helper.setUniformFloatValue(Gl.TEXTURE_PIXEL_WIDTH,k),this.helper.setUniformFloatValue(Gl.TEXTURE_PIXEL_HEIGHT,N),this.helper.setUniformFloatValue(Gl.TEXTURE_RESOLUTION,A),this.helper.setUniformFloatValue(Gl.TEXTURE_ORIGIN_X,C[0]+B*P[0]*A-s*A),this.helper.setUniformFloatValue(Gl.TEXTURE_ORIGIN_Y,C[1]-X*P[1]*A+s*A);var H=u;s>0&&$n(H=e.getTileCoordExtent(b),u,H),this.helper.setUniformFloatVec4(Gl.RENDER_EXTENT,H),this.helper.setUniformFloatValue(Gl.RESOLUTION,i.resolution),this.helper.setUniformFloatValue(Gl.ZOOM,i.zoom),this.helper.drawElements(0,this.Qs.getSize());}}}this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var J=this.helper.getCanvas(),Q=this.tu;Q.canExpireCache();){var tt;(tt=Q.pop()).dispose();}return t.postRenderFunctions.push(function(t,n){r.expireCache(n.viewState.projection,Ul);}),this.postRender(n,t),J;},n.prototype.getData=function(t){if(!this.helper.getGL())return null;var n=this.Ki;if(!n)return null;var i=this.getLayer(),r=on(n.pixelToCoordinateTransform,t.slice()),e=n.viewState,o=i.getExtent();if(o&&!Sn(Gr(o,e.projection),r))return null;var s,u,a,h=i.getSources(bn([r]),e.resolution);for(s=h.length-1;s>=0;--s){if("ready"===(u=h[s]).getState()){if(a=u.getTileGridForProjection(e.projection),u.getWrapX())break;var f=a.getExtent();if(!f||Sn(f,r))break;}}if(s<0)return null;for(var c=this.tu,l=a.getZForResolution(e.resolution);l>=a.getMinZoom();--l){var v=a.getTileCoordForCoordAndZ(r,l),p=Wl(u,v);if(c.containsKey(p)){var d=c.get(p);if(d.loaded){var y=a.getOrigin(l),m=va(a.getTileSize(l)),w=a.getResolution(l),g=(r[0]-y[0])/w-v[1]*m[0],b=(y[1]-r[1])/w-v[2]*m[1];return d.getPixelData(g,b);}}}return null;},n.prototype.ru=function(t,n,i,r){var e=t.getTileRangeForTileCoordAndZ(n,i,this.Ys);if(!e)return!1;for(var o=!0,s=this.tu,u=this.getLayer().getRenderSource(),a=e.minX;a<=e.maxX;++a){for(var h=e.minY;h<=e.maxY;++h){var f=Wl(u,[i,a,h]),c=!1;if(s.containsKey(f)){var l=s.get(f);l.loaded&&(Xl(r,l,i),c=!0);}c||(o=!1);}}return o;},n.prototype.removeHelper=function(){if(this.helper){var n=this.tu;n.forEach(function(t){return t.dispose();}),n.clear();}t.prototype.removeHelper.call(this);},n.prototype.disposeInternal=function(){var n=this.helper;n&&(n.getGL().deleteProgram(this.$s),delete this.$s,n.deleteBuffer(this.Qs));t.prototype.disposeInternal.call(this),delete this.Qs,delete this.tu,delete this.Ki;},n;}(Rl),Kl=Yl,Zl=1,$l=2,Hl=4,Jl=8,Ql=16,tv=31,nv=0,iv={};function rv(t){if("number"==typeof t)return Zl;if("boolean"==typeof t)return Jl;if("string"==typeof t)return Ho(t)?Hl|$l:$l;if(!Array.isArray(t))throw new Error("Unhandled value type: ".concat(JSON.stringify(t)));var n=t;if(n.every(function(t){return"number"==typeof t;}))return 3===n.length||4===n.length?Hl|Ql:Ql;if("string"!=typeof n[0])throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(n)));var i=iv[n[0]];if(void 0===i)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(n)));return i.getReturnType(n.slice(1));}function ev(t){return ci(t)%1==0;}function ov(t){var n=t.toString();return-1===n.indexOf(".")?n+".0":n;}function sv(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(t.length,"(").concat(t.map(ov).join(", "),")");}function uv(t){var n=Ko(t).slice();return n.length<4&&n.push(1),sv(n.map(function(t,n){return n<3?t/255:t;}));}function av(t,n){return void 0===t.stringLiteralsMap[n]&&(t.stringLiteralsMap[n]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[n];}function hv(t,n){return ov(av(t,n));}function fv(t,n,i){if(Array.isArray(n)&&"string"==typeof n[0]){var r=iv[n[0]];if(void 0===r)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(n)));return r.toGlsl(t,n.slice(1),i);}var e=rv(n);if((e&Zl)>0)return ov(n);if((e&Jl)>0)return n.toString();if((e&$l)>0&&(void 0===i||i==$l))return hv(t,n.toString());if((e&Hl)>0&&(void 0===i||i==Hl))return uv(n);if((e&Ql)>0)return sv(n);throw new Error("Unexpected expression ".concat(n," (expected type ").concat(i,")"));}function cv(t){if(!(rv(t)&Zl))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(t)," instead"));}function lv(t){for(var n=0;n<t.length;n++){cv(t[n]);}}function vv(t){if(!(rv(t)&$l))throw new Error("A string value was expected, got ".concat(JSON.stringify(t)," instead"));}function pv(t){if(!(rv(t)&Jl))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(t)," instead"));}function dv(t,n){if(t.length!==n)throw new Error("Exactly ".concat(n," arguments were expected, got ").concat(t.length," instead"));}function yv(t,n){if(t.length<n)throw new Error("At least ".concat(n," arguments were expected, got ").concat(t.length," instead"));}function mv(t,n){if(t.length>n)throw new Error("At most ".concat(n," arguments were expected, got ").concat(t.length," instead"));}function wv(t){if(t.length%2!=0)throw new Error("An even amount of arguments was expected, got ".concat(t," instead"));}function gv(t,n){if(!ev(n))throw new Error("Could not infer only one type from the following expression: ".concat(JSON.stringify(t)));}function bv(t){return"u_var_"+t;}iv.get={getReturnType:function getReturnType(t){return tv;},toGlsl:function toGlsl(t,n){dv(n,1),vv(n[0]);var i=n[0].toString();return-1===t.attributes.indexOf(i)&&t.attributes.push(i),(t.inFragmentShader?"v_":"a_")+i;}},iv.var={getReturnType:function getReturnType(t){return tv;},toGlsl:function toGlsl(t,n){dv(n,1),vv(n[0]);var i=n[0].toString();return-1===t.variables.indexOf(i)&&t.variables.push(i),bv(i);}};var xv="u_paletteTextures";iv.palette={getReturnType:function getReturnType(t){return Hl;},toGlsl:function toGlsl(t,n){dv(n,2),cv(n[0]);var i=fv(t,n[0]),r=n[1];if(!Array.isArray(r))throw new Error("The second argument of palette must be an array");for(var e=r.length,o=new Uint8Array(4*e),s=0;s<e;s++){var u=r[s],a=void 0;if("string"==typeof u)a=Yo(u);else{if(!Array.isArray(u))throw new Error("The second argument of palette must be an array of strings or colors");var h=u.length;if(4===h)a=u;else{if(3!==h)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(h));a=[u[0],u[1],u[2],1];}}var f=4*s;o[f]=a[0],o[f+1]=a[1],o[f+2]=a[2],o[f+3]=255*a[3];}t.paletteTextures||(t.paletteTextures=[]);var c="".concat(xv,"[").concat(t.paletteTextures.length,"]"),l=new ll(c,o);return t.paletteTextures.push(l),"texture2D(".concat(c,", vec2((").concat(i," + 0.5) / ").concat(e,".0, 0.5))");}};var Mv="getBandValue";function _v(t){return{getReturnType:function getReturnType(t){return Jl;},toGlsl:function toGlsl(n,i){dv(i,2);for(var r=tv,e=0;e<i.length;e++){r&=rv(i[e]);}if(r===nv)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(i)," instead"));return r&=~Hl,"(".concat(fv(n,i[0],r)," ").concat(t," ").concat(fv(n,i[1],r),")");}};}function Sv(t){return{getReturnType:function getReturnType(t){return Jl;},toGlsl:function toGlsl(n,i){yv(i,2);for(var r=0;r<i.length;r++){pv(i[r]);}var e="";return e=i.map(function(t){return fv(n,t);}).join(" ".concat(t," ")),e="(".concat(e,")");}};}iv.band={getReturnType:function getReturnType(t){return Zl;},toGlsl:function toGlsl(t,n){yv(n,1),mv(n,3);var i=n[0];if(!(Mv in t.functions)){for(var r="",e=t.bandCount||1,o=0;o<e;o++){var s=Math.floor(o/4),u=o%4;u===e-1&&1===u&&(u=3);var a="".concat(Gl.TILE_TEXTURE_ARRAY,"[").concat(s,"]");r+="\n          if (band == ".concat(o+1,".0) {\n            return texture2D(").concat(a,", v_textureCoord + vec2(dx, dy))[").concat(u,"];\n          }\n        ");}t.functions.getBandValue="\n        float getBandValue(float band, float xOffset, float yOffset) {\n          float dx = xOffset / ".concat(Gl.TEXTURE_PIXEL_WIDTH,";\n          float dy = yOffset / ").concat(Gl.TEXTURE_PIXEL_HEIGHT,";\n          ").concat(r,"\n        }\n      ");}var h=fv(t,i),f=fv(t,n[1]||0),c=fv(t,n[2]||0);return"".concat(Mv,"(").concat(h,", ").concat(f,", ").concat(c,")");}},iv.time={getReturnType:function getReturnType(t){return Zl;},toGlsl:function toGlsl(t,n){return dv(n,0),"u_time";}},iv.zoom={getReturnType:function getReturnType(t){return Zl;},toGlsl:function toGlsl(t,n){return dv(n,0),"u_zoom";}},iv.resolution={getReturnType:function getReturnType(t){return Zl;},toGlsl:function toGlsl(t,n){return dv(n,0),"u_resolution";}},iv["*"]={getReturnType:function getReturnType(t){return Zl;},toGlsl:function toGlsl(t,n){return dv(n,2),lv(n),"(".concat(fv(t,n[0])," * ").concat(fv(t,n[1]),")");}},iv["/"]={getReturnType:function getReturnType(t){return Zl;},toGlsl:function toGlsl(t,n){return dv(n,2),lv(n),"(".concat(fv(t,n[0])," / ").concat(fv(t,n[1]),")");}},iv["+"]={getReturnType:function getReturnType(t){return Zl;},toGlsl:function toGlsl(t,n){return dv(n,2),lv(n),"(".concat(fv(t,n[0])," + ").concat(fv(t,n[1]),")");}},iv["-"]={getReturnType:function getReturnType(t){return Zl;},toGlsl:function toGlsl(t,n){return dv(n,2),lv(n),"(".concat(fv(t,n[0])," - ").concat(fv(t,n[1]),")");}},iv.clamp={getReturnType:function getReturnType(t){return Zl;},toGlsl:function toGlsl(t,n){dv(n,3),lv(n);var i=fv(t,n[1]),r=fv(t,n[2]);return"clamp(".concat(fv(t,n[0]),", ").concat(i,", ").concat(r,")");}},iv["%"]={getReturnType:function getReturnType(t){return Zl;},toGlsl:function toGlsl(t,n){return dv(n,2),lv(n),"mod(".concat(fv(t,n[0]),", ").concat(fv(t,n[1]),")");}},iv["^"]={getReturnType:function getReturnType(t){return Zl;},toGlsl:function toGlsl(t,n){return dv(n,2),lv(n),"pow(".concat(fv(t,n[0]),", ").concat(fv(t,n[1]),")");}},iv.abs={getReturnType:function getReturnType(t){return Zl;},toGlsl:function toGlsl(t,n){return dv(n,1),lv(n),"abs(".concat(fv(t,n[0]),")");}},iv.floor={getReturnType:function getReturnType(t){return Zl;},toGlsl:function toGlsl(t,n){return dv(n,1),lv(n),"floor(".concat(fv(t,n[0]),")");}},iv.round={getReturnType:function getReturnType(t){return Zl;},toGlsl:function toGlsl(t,n){return dv(n,1),lv(n),"floor(".concat(fv(t,n[0])," + 0.5)");}},iv.ceil={getReturnType:function getReturnType(t){return Zl;},toGlsl:function toGlsl(t,n){return dv(n,1),lv(n),"ceil(".concat(fv(t,n[0]),")");}},iv.sin={getReturnType:function getReturnType(t){return Zl;},toGlsl:function toGlsl(t,n){return dv(n,1),lv(n),"sin(".concat(fv(t,n[0]),")");}},iv.cos={getReturnType:function getReturnType(t){return Zl;},toGlsl:function toGlsl(t,n){return dv(n,1),lv(n),"cos(".concat(fv(t,n[0]),")");}},iv.atan={getReturnType:function getReturnType(t){return Zl;},toGlsl:function toGlsl(t,n){return yv(n,1),mv(n,2),lv(n),2===n.length?"atan(".concat(fv(t,n[0]),", ").concat(fv(t,n[1]),")"):"atan(".concat(fv(t,n[0]),")");}},iv[">"]={getReturnType:function getReturnType(t){return Jl;},toGlsl:function toGlsl(t,n){return dv(n,2),lv(n),"(".concat(fv(t,n[0])," > ").concat(fv(t,n[1]),")");}},iv[">="]={getReturnType:function getReturnType(t){return Jl;},toGlsl:function toGlsl(t,n){return dv(n,2),lv(n),"(".concat(fv(t,n[0])," >= ").concat(fv(t,n[1]),")");}},iv["<"]={getReturnType:function getReturnType(t){return Jl;},toGlsl:function toGlsl(t,n){return dv(n,2),lv(n),"(".concat(fv(t,n[0])," < ").concat(fv(t,n[1]),")");}},iv["<="]={getReturnType:function getReturnType(t){return Jl;},toGlsl:function toGlsl(t,n){return dv(n,2),lv(n),"(".concat(fv(t,n[0])," <= ").concat(fv(t,n[1]),")");}},iv["=="]=_v("=="),iv["!="]=_v("!="),iv["!"]={getReturnType:function getReturnType(t){return Jl;},toGlsl:function toGlsl(t,n){return dv(n,1),pv(n[0]),"(!".concat(fv(t,n[0]),")");}},iv.all=Sv("&&"),iv.any=Sv("||"),iv.between={getReturnType:function getReturnType(t){return Jl;},toGlsl:function toGlsl(t,n){dv(n,3),lv(n);var i=fv(t,n[1]),r=fv(t,n[2]),e=fv(t,n[0]);return"(".concat(e," >= ").concat(i," && ").concat(e," <= ").concat(r,")");}},iv.array={getReturnType:function getReturnType(t){return Ql;},toGlsl:function toGlsl(t,n){yv(n,2),mv(n,4),lv(n);var i=n.map(function(n){return fv(t,n,Zl);});return"vec".concat(n.length,"(").concat(i.join(", "),")");}},iv.color={getReturnType:function getReturnType(t){return Hl;},toGlsl:function toGlsl(t,n){yv(n,3),mv(n,4),lv(n);var i=n;3===n.length&&i.push(1);var r=n.map(function(n,i){return fv(t,n,Zl)+(i<3?" / 255.0":"");});return"vec".concat(n.length,"(").concat(r.join(", "),")");}},iv.interpolate={getReturnType:function getReturnType(t){for(var n=Hl|Zl,i=3;i<t.length;i+=2){n&=rv(t[i]);}return n;},toGlsl:function toGlsl(t,n,i){wv(n),yv(n,6);var r,e=n[0];switch(e[0]){case"linear":r=1;break;case"exponential":r=e[1];break;default:r=null;}if(!r)throw new Error('Invalid interpolation type for "interpolate" operator, received: '.concat(JSON.stringify(e)));var o=void 0!==i?i:tv,s=iv.interpolate.getReturnType(n)&o;gv(n,s);for(var u=fv(t,n[1]),a=ov(r),h="",f=2;f<n.length-2;f+=2){var c=fv(t,n[f]),l=h||fv(t,n[f+1],s),v=fv(t,n[f+2]),p=fv(t,n[f+3],s);h="mix(".concat(l,", ").concat(p,", pow(clamp((").concat(u," - ").concat(c,") / (").concat(v," - ").concat(c,"), 0.0, 1.0), ").concat(a,"))");}return h;}},iv.match={getReturnType:function getReturnType(t){for(var n=tv,i=2;i<t.length;i+=2){n&=rv(t[i]);}return n&=rv(t[t.length-1]);},toGlsl:function toGlsl(t,n,i){wv(n),yv(n,4);var r=void 0!==i?i:tv,e=iv.match.getReturnType(n)&r;gv(n,e);for(var o=fv(t,n[0]),s=fv(t,n[n.length-1],e),u=null,a=n.length-3;a>=1;a-=2){var h=fv(t,n[a]),f=fv(t,n[a+1],e);u="(".concat(o," == ").concat(h," ? ").concat(f," : ").concat(u||s,")");}return u;}},iv.case={getReturnType:function getReturnType(t){for(var n=tv,i=1;i<t.length;i+=2){n&=rv(t[i]);}return n&=rv(t[t.length-1]);},toGlsl:function toGlsl(t,n,i){!function(t){if(t.length%2==0)throw new Error("An odd amount of arguments was expected, got ".concat(t," instead"));}(n),yv(n,3);var r=void 0!==i?i:tv,e=iv.case.getReturnType(n)&r;gv(n,e);for(var o=0;o<n.length-1;o+=2){pv(n[o]);}var s=fv(t,n[n.length-1],e),u=null;for(o=n.length-3;o>=0;o-=2){var a=fv(t,n[o]),h=fv(t,n[o+1],e);u="(".concat(a," ? ").concat(h," : ").concat(u||s,")");}return u;}};var Ov=function(){function t(){this.uniforms=[],this.attributes=[],this.varyings=[],this.sizeExpression="vec2(1.0)",this.rotationExpression="0.0",this.offsetExpression="vec2(0.0)",this.colorExpression="vec4(1.0)",this.texCoordExpression="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression="false",this.rotateWithView=!1;}return t.prototype.addUniform=function(t){return this.uniforms.push(t),this;},t.prototype.addAttribute=function(t){return this.attributes.push(t),this;},t.prototype.addVarying=function(t,n,i){return this.varyings.push({name:t,type:n,expression:i}),this;},t.prototype.setSizeExpression=function(t){return this.sizeExpression=t,this;},t.prototype.setRotationExpression=function(t){return this.rotationExpression=t,this;},t.prototype.setSymbolOffsetExpression=function(t){return this.offsetExpression=t,this;},t.prototype.setColorExpression=function(t){return this.colorExpression=t,this;},t.prototype.setTextureCoordinateExpression=function(t){return this.texCoordExpression=t,this;},t.prototype.setFragmentDiscardExpression=function(t){return this.discardExpression=t,this;},t.prototype.setSymbolRotateWithView=function(t){return this.rotateWithView=t,this;},t.prototype.getSizeExpression=function(){return this.sizeExpression;},t.prototype.getOffsetExpression=function(){return this.offsetExpression;},t.prototype.getColorExpression=function(){return this.colorExpression;},t.prototype.getTextureCoordinateExpression=function(){return this.texCoordExpression;},t.prototype.getFragmentDiscardExpression=function(){return this.discardExpression;},t.prototype.getSymbolVertexShader=function(t){var n=this.rotateWithView?"u_offsetScaleMatrix * u_offsetRotateMatrix":"u_offsetScaleMatrix",i=this.attributes,r=this.varyings;return t&&(i=i.concat("vec4 a_hitColor"),r=r.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"precision mediump float;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n".concat(this.uniforms.map(function(t){return"uniform "+t+";";}).join("\n"),"\nattribute vec2 a_position;\nattribute float a_index;\n").concat(i.map(function(t){return"attribute "+t+";";}).join("\n"),"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n").concat(r.map(function(t){return"varying "+t.type+" "+t.name+";";}).join("\n"),"\nvoid main(void) {\n  mat4 offsetMatrix = ").concat(n,";\n  vec2 halfSize = ").concat(this.sizeExpression," * 0.5;\n  vec2 offset = ").concat(this.offsetExpression,";\n  float angle = ").concat(this.rotationExpression,";\n  float offsetX;\n  float offsetY;\n  if (a_index == 0.0) {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  } else if (a_index == 1.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else if (a_index == 2.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  }\n  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  vec4 texCoord = ").concat(this.texCoordExpression,";\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\n  v_texCoord = vec2(u, v);\n  u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v = a_index == 2.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v_quadCoord = vec2(u, v);\n").concat(r.map(function(t){return"  "+t.name+" = "+t.expression+";";}).join("\n"),"\n}");},t.prototype.getSymbolFragmentShader=function(t){var n=t?"  if (gl_FragColor.a < 0.1) { discard; } gl_FragColor = v_hitColor;":"",i=this.varyings;return t&&(i=i.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"precision mediump float;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n".concat(this.uniforms.map(function(t){return"uniform "+t+";";}).join("\n"),"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n").concat(i.map(function(t){return"varying "+t.type+" "+t.name+";";}).join("\n"),"\nvoid main(void) {\n  if (").concat(this.discardExpression,") { discard; }\n  gl_FragColor = ").concat(this.colorExpression,";\n  gl_FragColor.rgb *= gl_FragColor.a;\n").concat(n,"\n}");},t;}();function jv(t){var n=t.symbol,i=void 0!==n.size?n.size:1,r=n.color||"white",e=n.textureCoord||[0,0,1,1],o=n.offset||[0,0],s=void 0!==n.opacity?n.opacity:1,u=void 0!==n.rotation?n.rotation:0,a={inFragmentShader:!1,variables:[],attributes:[],stringLiteralsMap:{},functions:{}},h=fv(a,i,Ql|Zl),f=fv(a,o,Ql),c=fv(a,e,Ql),l=fv(a,u,Zl),v={inFragmentShader:!0,variables:a.variables,attributes:[],stringLiteralsMap:a.stringLiteralsMap,functions:{}},p=fv(v,r,Hl),d=fv(v,s,Zl),y="1.0",m="vec2(".concat(fv(v,i,Ql|Zl),").x");switch(n.symbolType){case"square":case"image":break;case"circle":y="(1.0-smoothstep(1.-4./".concat(m,",1.,dot(v_quadCoord-.5,v_quadCoord-.5)*4.))");break;case"triangle":var w="(v_quadCoord*2.-1.)",g="(atan(".concat(w,".x,").concat(w,".y))");y="(1.0-smoothstep(.5-3./".concat(m,",.5,cos(floor(.5+").concat(g,"/2.094395102)*2.094395102-").concat(g,")*length(").concat(w,")))");break;default:throw new Error("Unexpected symbol type: "+n.symbolType);}var b=new Ov().setSizeExpression("vec2(".concat(h,")")).setRotationExpression(l).setSymbolOffsetExpression(f).setTextureCoordinateExpression(c).setSymbolRotateWithView(!!n.rotateWithView).setColorExpression("vec4(".concat(p,".rgb, ").concat(p,".a * ").concat(d," * ").concat(y,")"));if(t.filter){var x=fv(v,t.filter,Jl);b.setFragmentDiscardExpression("!".concat(x));}var M={};if(v.variables.forEach(function(n){var i=bv(n);b.addUniform("float ".concat(i)),M[i]=function(){if(!t.variables||void 0===t.variables[n])throw new Error("The following variable is missing from the style: ".concat(n));var i=t.variables[n];return"string"==typeof i&&(i=av(a,i)),void 0!==i?i:-9999999;};}),"image"===n.symbolType&&n.src){var _=new Image();_.crossOrigin=void 0===n.crossOrigin?"anonymous":n.crossOrigin,_.src=n.src,b.addUniform("sampler2D u_texture").setColorExpression(b.getColorExpression()+" * texture2D(u_texture, v_texCoord)"),M.u_texture=_;}return v.attributes.forEach(function(t){-1===a.attributes.indexOf(t)&&a.attributes.push(t),b.addVarying("v_".concat(t),"float","a_".concat(t));}),a.attributes.forEach(function(t){b.addAttribute("float a_".concat(t));}),{builder:b,attributes:a.attributes.map(function(t){return{name:t,callback:function callback(n,i){var r=i[t];return"string"==typeof r&&(r=av(a,r)),void 0!==r?r:-9999999;}};}),uniforms:M};}var Ev=function(){var _t66=function t(n,i){return _t66=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t66(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t66(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Tv=function(t){function n(n){var i=t.call(this,{extent:n.extent,origin:n.origin,origins:n.origins,resolutions:n.resolutions,tileSize:n.tileSize,tileSizes:n.tileSizes,sizes:n.sizes})||this;return i.eu=n.matrixIds,i;}return Ev(n,t),n.prototype.getMatrixId=function(t){return this.eu[t];},n.prototype.getMatrixIds=function(){return this.eu;},n;}(Yf),Av=Tv;function Pv(t,n,i){var r=[],e=[],o=[],s=[],u=[],a=void 0!==i?i:[],h=br(t.SupportedCRS),f=h.getMetersPerUnit(),c="ne"==h.getAxisOrientation().substr(0,2);return t.TileMatrix.sort(function(t,n){return n.ScaleDenominator-t.ScaleDenominator;}),t.TileMatrix.forEach(function(n){if(!(a.length>0)||b(a,function(i){return n.Identifier==i.TileMatrix||-1===n.Identifier.indexOf(":")&&t.Identifier+":"+n.Identifier===i.TileMatrix;})){e.push(n.Identifier);var i=28e-5*n.ScaleDenominator/f,h=n.TileWidth,l=n.TileHeight;c?o.push([n.TopLeftCorner[1],n.TopLeftCorner[0]]):o.push(n.TopLeftCorner),r.push(i),s.push(h==l?h:[h,l]),u.push([n.MatrixWidth,n.MatrixHeight]);}}),new Tv({extent:n,origins:o,resolutions:r,matrixIds:e,tileSizes:s,sizes:u});}var Cv=function(){function t(t){this.ou=t.opacity,this.su=t.rotateWithView,this.Dr=t.rotation,this.uu=t.scale,this.au=va(t.scale),this.hu=t.displacement,this.fu=t.declutterMode;}return t.prototype.clone=function(){var n=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(n)?n.slice():n,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});},t.prototype.getOpacity=function(){return this.ou;},t.prototype.getRotateWithView=function(){return this.su;},t.prototype.getRotation=function(){return this.Dr;},t.prototype.getScale=function(){return this.uu;},t.prototype.getScaleArray=function(){return this.au;},t.prototype.getDisplacement=function(){return this.hu;},t.prototype.getDeclutterMode=function(){return this.fu;},t.prototype.getAnchor=function(){return r();},t.prototype.getImage=function(t){return r();},t.prototype.getHitDetectionImage=function(){return r();},t.prototype.getPixelRatio=function(t){return 1;},t.prototype.getImageState=function(){return r();},t.prototype.getImageSize=function(){return r();},t.prototype.getOrigin=function(){return r();},t.prototype.getSize=function(){return r();},t.prototype.setDisplacement=function(t){this.hu=t;},t.prototype.setOpacity=function(t){this.ou=t;},t.prototype.setRotateWithView=function(t){this.su=t;},t.prototype.setRotation=function(t){this.Dr=t;},t.prototype.setScale=function(t){this.uu=t,this.au=va(t);},t.prototype.listenImageChange=function(t){r();},t.prototype.load=function(){r();},t.prototype.unlistenImageChange=function(t){r();},t;}(),kv=Cv,Nv=function(){var _t67=function t(n,i){return _t67=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t67(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t67(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Iv=function(t){function n(n){var i=this,r=void 0!==n.rotateWithView&&n.rotateWithView;return(i=t.call(this,{opacity:1,rotateWithView:r,rotation:void 0!==n.rotation?n.rotation:0,scale:void 0!==n.scale?n.scale:1,displacement:void 0!==n.displacement?n.displacement:[0,0],declutterMode:n.declutterMode})||this).qt=void 0,i.cu=null,i.lu=void 0!==n.fill?n.fill:null,i._o=[0,0],i.Kt=n.points,i.vu=void 0!==n.radius?n.radius:n.radius1,i.pu=n.radius2,i.Zt=void 0!==n.angle?n.angle:0,i.du=void 0!==n.stroke?n.stroke:null,i.W=null,i.yu=null,i.render(),i;}return Nv(n,t),n.prototype.clone=function(){var t=this.getScale(),i=new n({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i;},n.prototype.getAnchor=function(){var t=this.W;if(!t)return null;var n=this.getDisplacement();return[t[0]/2-n[0],t[1]/2+n[1]];},n.prototype.getAngle=function(){return this.Zt;},n.prototype.getFill=function(){return this.lu;},n.prototype.setFill=function(t){this.lu=t,this.render();},n.prototype.getHitDetectionImage=function(){return this.cu||this.mu(this.yu),this.cu;},n.prototype.getImage=function(t){var n=this.qt[t];if(!n){var i=this.yu,r=ko(i.size*t,i.size*t);this.wu(i,r,t),n=r.canvas,this.qt[t]=n;}return n;},n.prototype.getPixelRatio=function(t){return t;},n.prototype.getImageSize=function(){return this.W;},n.prototype.getImageState=function(){return So;},n.prototype.getOrigin=function(){return this._o;},n.prototype.getPoints=function(){return this.Kt;},n.prototype.getRadius=function(){return this.vu;},n.prototype.getRadius2=function(){return this.pu;},n.prototype.getSize=function(){return this.W;},n.prototype.getStroke=function(){return this.du;},n.prototype.setStroke=function(t){this.du=t,this.render();},n.prototype.listenImageChange=function(t){},n.prototype.load=function(){},n.prototype.unlistenImageChange=function(t){},n.prototype.gu=function(t,n,i){if(0===n||this.Kt===1/0||"bevel"!==t&&"miter"!==t)return n;var r=this.vu,e=void 0===this.pu?r:this.pu;if(r<e){var o=r;r=e,e=o;}var s=void 0===this.pu?this.Kt:2*this.Kt,u=2*Math.PI/s,a=e*Math.sin(u),h=r-Math.sqrt(e*e-a*a),f=Math.sqrt(a*a+h*h),c=f/a;if("miter"===t&&c<=i)return c*n;var l=n/2/c,v=n/2*(h/f),p=Math.sqrt((r+l)*(r+l)+v*v)-r;if(void 0===this.pu||"bevel"===t)return 2*p;var d=r*Math.sin(u),y=e-Math.sqrt(r*r-d*d),m=Math.sqrt(d*d+y*y)/d;if(m<=i){var w=m*n/2-e-r;return 2*Math.max(p,w);}return 2*p;},n.prototype.createRenderOptions=function(){var t,n=Us,i=0,r=null,e=0,o=0;this.du&&(null===(t=this.du.getColor())&&(t=Xs),t=vf(t),void 0===(o=this.du.getWidth())&&(o=1),r=this.du.getLineDash(),e=this.du.getLineDashOffset(),void 0===(n=this.du.getLineJoin())&&(n=Us),void 0===(i=this.du.getMiterLimit())&&(i=Bs));var s=this.gu(n,o,i),u=Math.max(this.vu,this.pu||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*u+s),lineDash:r,lineDashOffset:e,lineJoin:n,miterLimit:i};},n.prototype.render=function(){this.yu=this.createRenderOptions();var t=this.yu.size;this.qt={},this.W=[t,t];},n.prototype.wu=function(t,n,i){if(n.scale(i,i),n.translate(t.size/2,t.size/2),this.bu(n),this.lu){var r=this.lu.getColor();null===r&&(r=Gs),n.fillStyle=vf(r),n.fill();}this.du&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,n.setLineDash&&t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke());},n.prototype.mu=function(t){if(this.lu){var n=this.lu.getColor(),i=0;if("string"==typeof n&&(n=Ko(n)),null===n?i=1:Array.isArray(n)&&(i=4===n.length?n[3]:1),0===i){var r=ko(t.size,t.size);this.cu=r.canvas,this.xu(t,r);}}this.cu||(this.cu=this.getImage(1));},n.prototype.bu=function(t){var n=this.Kt,i=this.vu;if(n===1/0)t.arc(0,0,i,0,2*Math.PI);else{var r=void 0===this.pu?i:this.pu;void 0!==this.pu&&(n*=2);for(var e=this.Zt-Math.PI/2,o=2*Math.PI/n,s=0;s<n;s++){var u=e+s*o,a=s%2==0?i:r;t.lineTo(a*Math.cos(u),a*Math.sin(u));}t.closePath();}},n.prototype.xu=function(t,n){n.translate(t.size/2,t.size/2),this.bu(n),n.fillStyle=Gs,n.fill(),this.du&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke());},n;}(kv),zv=Iv,Lv=function(){var _t68=function t(n,i){return _t68=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t68(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t68(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Rv=function(t){function n(n){var i=n||{};return t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,scale:void 0!==i.scale?i.scale:1,rotation:void 0!==i.rotation?i.rotation:0,rotateWithView:void 0!==i.rotateWithView&&i.rotateWithView,displacement:void 0!==i.displacement?i.displacement:[0,0],declutterMode:i.declutterMode})||this;}return Lv(n,t),n.prototype.clone=function(){var t=this.getScale(),i=new n({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i;},n.prototype.setRadius=function(t){this.vu=t,this.render();},n;}(zv),Fv=Rv,Gv=function(){function t(t){var n=t||{};this.Mu=void 0!==n.color?n.color:null;}return t.prototype.clone=function(){var n=this.getColor();return new t({color:Array.isArray(n)?n.slice():n||void 0});},t.prototype.getColor=function(){return this.Mu;},t.prototype.setColor=function(t){this.Mu=t;},t;}(),Dv=Gv,qv="fraction",Uv="pixels",Bv="bottom-left",Xv="bottom-right",Vv="top-left",Wv="top-right",Yv=function(){var _t69=function t(n,i){return _t69=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t69(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t69(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Kv=null,Zv=function(t){function n(n,i,r,e,o,s){var u=t.call(this)||this;return u._u=null,u.zt=n||new Image(),null!==e&&(u.zt.crossOrigin=e),u.qt={},u.Mu=s,u.Lt=null,u.Su=o,u.W=r,u.Nt=i,u.Ou,u;}return Yv(n,t),n.prototype.ju=function(){if(void 0===this.Ou&&this.Su===So){Kv||(Kv=ko(1,1)),Kv.drawImage(this.zt,0,0);try{Kv.getImageData(0,0,1,1),this.Ou=!1;}catch(t){Kv=null,this.Ou=!0;}}return!0===this.Ou;},n.prototype.Eu=function(){this.dispatchEvent(z);},n.prototype.Ft=function(){this.Su=Oo,this.Gt(),this.Eu();},n.prototype.Dt=function(){this.Su=So,this.W?(this.zt.width=this.W[0],this.zt.height=this.W[1]):this.W=[this.zt.width,this.zt.height],this.Gt(),this.Eu();},n.prototype.getImage=function(t){return this.Tu(t),this.qt[t]?this.qt[t]:this.zt;},n.prototype.getPixelRatio=function(t){return this.Tu(t),this.qt[t]?t:1;},n.prototype.getImageState=function(){return this.Su;},n.prototype.getHitDetectionImage=function(){if(!this._u)if(this.ju()){var t=this.W[0],n=this.W[1],i=ko(t,n);i.fillRect(0,0,t,n),this._u=i.canvas;}else this._u=this.zt;return this._u;},n.prototype.getSize=function(){return this.W;},n.prototype.getSrc=function(){return this.Nt;},n.prototype.load=function(){if(this.Su==Mo){this.Su=_o;try{this.zt.src=this.Nt;}catch(t){this.Ft();}this.Lt=To(this.zt,this.Dt.bind(this),this.Ft.bind(this));}},n.prototype.Tu=function(t){if(this.Mu&&!this.qt[t]&&this.Su===So){var n=document.createElement("canvas");this.qt[t]=n,n.width=Math.ceil(this.zt.width*t),n.height=Math.ceil(this.zt.height*t);var i=n.getContext("2d");if(i.scale(t,t),i.drawImage(this.zt,0,0),i.globalCompositeOperation="multiply","multiply"===i.globalCompositeOperation||this.ju())i.fillStyle=Vo(this.Mu),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(this.zt,0,0);else{for(var r=i.getImageData(0,0,n.width,n.height),e=r.data,o=this.Mu[0]/255,s=this.Mu[1]/255,u=this.Mu[2]/255,a=this.Mu[3],h=0,f=e.length;h<f;h+=4){e[h]*=o,e[h+1]*=s,e[h+2]*=u,e[h+3]*=a;}i.putImageData(r,0,0);}}},n.prototype.Gt=function(){this.Lt&&(this.Lt(),this.Lt=null);},n;}(I);function $v(t,n,i,r,e,o){var s=ns.get(n,r,o);return s||(s=new Zv(t,n,i,r,e,o),ns.set(n,r,o,s)),s;}var Hv=Zv,Jv=function(){var _t70=function t(n,i){return _t70=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t70(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t70(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Qv=function(t){function n(n){var i=this,r=n||{},e=void 0!==r.opacity?r.opacity:1,s=void 0!==r.rotation?r.rotation:0,u=void 0!==r.scale?r.scale:1,a=void 0!==r.rotateWithView&&r.rotateWithView;(i=t.call(this,{opacity:e,rotation:s,scale:u,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:a,declutterMode:r.declutterMode})||this).xe=void 0!==r.anchor?r.anchor:[.5,.5],i.Au=null,i.Pu=void 0!==r.anchorOrigin?r.anchorOrigin:Vv,i.Cu=void 0!==r.anchorXUnits?r.anchorXUnits:qv,i.ku=void 0!==r.anchorYUnits?r.anchorYUnits:qv,i.Bt=void 0!==r.crossOrigin?r.crossOrigin:null;var h=void 0!==r.img?r.img:null;i.Nu=r.imgSize;var f=r.src;Et(!(void 0!==f&&h),4),Et(!h||h&&i.Nu,5),void 0!==f&&0!==f.length||!h||(f=h.src||o(h)),Et(void 0!==f&&f.length>0,6);var c=void 0!==r.src?Mo:So;return i.Mu=void 0!==r.color?Ko(r.color):null,i.Iu=$v(h,f,void 0!==i.Nu?i.Nu:null,i.Bt,c,i.Mu),i.zu=void 0!==r.offset?r.offset:[0,0],i.Lu=void 0!==r.offsetOrigin?r.offsetOrigin:Vv,i._o=null,i.W=void 0!==r.size?r.size:null,i;}return Jv(n,t),n.prototype.clone=function(){var t=this.getScale();return new n({anchor:this.xe.slice(),anchorOrigin:this.Pu,anchorXUnits:this.Cu,anchorYUnits:this.ku,color:this.Mu&&this.Mu.slice?this.Mu.slice():this.Mu||void 0,crossOrigin:this.Bt,imgSize:this.Nu,offset:this.zu.slice(),offsetOrigin:this.Lu,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.W?this.W.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});},n.prototype.getAnchor=function(){var t=this.Au;if(!t){t=this.xe;var n=this.getSize();if(this.Cu==qv||this.ku==qv){if(!n)return null;t=this.xe.slice(),this.Cu==qv&&(t[0]*=n[0]),this.ku==qv&&(t[1]*=n[1]);}if(this.Pu!=Vv){if(!n)return null;t===this.xe&&(t=this.xe.slice()),this.Pu!=Wv&&this.Pu!=Xv||(t[0]=-t[0]+n[0]),this.Pu!=Bv&&this.Pu!=Xv||(t[1]=-t[1]+n[1]);}this.Au=t;}var i=this.getDisplacement();return[t[0]-i[0],t[1]+i[1]];},n.prototype.setAnchor=function(t){this.xe=t,this.Au=null;},n.prototype.getColor=function(){return this.Mu;},n.prototype.getImage=function(t){return this.Iu.getImage(t);},n.prototype.getPixelRatio=function(t){return this.Iu.getPixelRatio(t);},n.prototype.getImageSize=function(){return this.Iu.getSize();},n.prototype.getImageState=function(){return this.Iu.getImageState();},n.prototype.getHitDetectionImage=function(){return this.Iu.getHitDetectionImage();},n.prototype.getOrigin=function(){if(this._o)return this._o;var t=this.zu;if(this.Lu!=Vv){var n=this.getSize(),i=this.Iu.getSize();if(!n||!i)return null;t=t.slice(),this.Lu!=Wv&&this.Lu!=Xv||(t[0]=i[0]-n[0]-t[0]),this.Lu!=Bv&&this.Lu!=Xv||(t[1]=i[1]-n[1]-t[1]);}return this._o=t,this._o;},n.prototype.getSrc=function(){return this.Iu.getSrc();},n.prototype.getSize=function(){return this.W?this.W:this.Iu.getSize();},n.prototype.listenImageChange=function(t){this.Iu.addEventListener(z,t);},n.prototype.load=function(){this.Iu.load();},n.prototype.unlistenImageChange=function(t){this.Iu.removeEventListener(z,t);},n;}(kv),tp=Qv,np=function(){function t(t){var n=t||{};this.Mu=void 0!==n.color?n.color:null,this.Ru=n.lineCap,this.Fu=void 0!==n.lineDash?n.lineDash:null,this.Gu=n.lineDashOffset,this.Du=n.lineJoin,this.qu=n.miterLimit,this.Uu=n.width;}return t.prototype.clone=function(){var n=this.getColor();return new t({color:Array.isArray(n)?n.slice():n||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()});},t.prototype.getColor=function(){return this.Mu;},t.prototype.getLineCap=function(){return this.Ru;},t.prototype.getLineDash=function(){return this.Fu;},t.prototype.getLineDashOffset=function(){return this.Gu;},t.prototype.getLineJoin=function(){return this.Du;},t.prototype.getMiterLimit=function(){return this.qu;},t.prototype.getWidth=function(){return this.Uu;},t.prototype.setColor=function(t){this.Mu=t;},t.prototype.setLineCap=function(t){this.Ru=t;},t.prototype.setLineDash=function(t){this.Fu=t;},t.prototype.setLineDashOffset=function(t){this.Gu=t;},t.prototype.setLineJoin=function(t){this.Du=t;},t.prototype.setMiterLimit=function(t){this.qu=t;},t.prototype.setWidth=function(t){this.Uu=t;},t;}(),ip=np,rp=function(){function t(t){var n=t||{};this.Hr=null,this.Bu=ap,void 0!==n.geometry&&this.setGeometry(n.geometry),this.lu=void 0!==n.fill?n.fill:null,this.zt=void 0!==n.image?n.image:null,this.hn=void 0!==n.renderer?n.renderer:null,this.Xu=void 0!==n.hitDetectionRenderer?n.hitDetectionRenderer:null,this.du=void 0!==n.stroke?n.stroke:null,this.eo=void 0!==n.text?n.text:null,this.Vu=n.zIndex;}return t.prototype.clone=function(){var n=this.getGeometry();return n&&"object"==_typeof(n)&&(n=n.clone()),new t({geometry:n,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()});},t.prototype.getRenderer=function(){return this.hn;},t.prototype.setRenderer=function(t){this.hn=t;},t.prototype.setHitDetectionRenderer=function(t){this.Xu=t;},t.prototype.getHitDetectionRenderer=function(){return this.Xu;},t.prototype.getGeometry=function(){return this.Hr;},t.prototype.getGeometryFunction=function(){return this.Bu;},t.prototype.getFill=function(){return this.lu;},t.prototype.setFill=function(t){this.lu=t;},t.prototype.getImage=function(){return this.zt;},t.prototype.setImage=function(t){this.zt=t;},t.prototype.getStroke=function(){return this.du;},t.prototype.setStroke=function(t){this.du=t;},t.prototype.getText=function(){return this.eo;},t.prototype.setText=function(t){this.eo=t;},t.prototype.getZIndex=function(){return this.Vu;},t.prototype.setGeometry=function(t){"function"==typeof t?this.Bu=t:"string"==typeof t?this.Bu=function(n){return n.get(t);}:t?void 0!==t&&(this.Bu=function(){return t;}):this.Bu=ap,this.Hr=t;},t.prototype.setZIndex=function(t){this.Vu=t;},t;}();function ep(t){var n;if("function"==typeof t)n=t;else{var i;if(Array.isArray(t))i=t;else Et("function"==typeof t.getZIndex,41),i=[t];n=function n(){return i;};}return n;}var op=null;function sp(t,n){if(!op){var i=new Dv({color:"rgba(255,255,255,0.4)"}),r=new ip({color:"#3399CC",width:1.25});op=[new rp({image:new Fv({fill:i,stroke:r,radius:5}),fill:i,stroke:r})];}return op;}function up(){var t={},n=[255,255,255,1],i=[0,153,255,1];return t.Polygon=[new rp({fill:new Dv({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new rp({stroke:new ip({color:n,width:5})}),new rp({stroke:new ip({color:i,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new rp({image:new Fv({radius:6,fill:new Dv({color:i}),stroke:new ip({color:n,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t;}function ap(t){return t.getGeometry();}var hp=rp,fp="point",cp="line",lp=function(){function t(t){var n=t||{};this.Wu=n.font,this.Dr=n.rotation,this.su=n.rotateWithView,this.uu=n.scale,this.au=va(void 0!==n.scale?n.scale:1),this.eo=n.text,this.Yu=n.textAlign,this.Ku=n.justify,this.Zu=n.textBaseline,this.lu=void 0!==n.fill?n.fill:new Dv({color:"#333"}),this.$u=void 0!==n.maxAngle?n.maxAngle:Math.PI/4,this.Hu=void 0!==n.placement?n.placement:fp,this.Ju=!!n.overflow,this.du=void 0!==n.stroke?n.stroke:null,this.Qu=void 0!==n.offsetX?n.offsetX:0,this.ta=void 0!==n.offsetY?n.offsetY:0,this.na=n.backgroundFill?n.backgroundFill:null,this.ia=n.backgroundStroke?n.backgroundStroke:null,this.Ai=void 0===n.padding?null:n.padding;}return t.prototype.clone=function(){var n=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(n)?n.slice():n,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0});},t.prototype.getOverflow=function(){return this.Ju;},t.prototype.getFont=function(){return this.Wu;},t.prototype.getMaxAngle=function(){return this.$u;},t.prototype.getPlacement=function(){return this.Hu;},t.prototype.getOffsetX=function(){return this.Qu;},t.prototype.getOffsetY=function(){return this.ta;},t.prototype.getFill=function(){return this.lu;},t.prototype.getRotateWithView=function(){return this.su;},t.prototype.getRotation=function(){return this.Dr;},t.prototype.getScale=function(){return this.uu;},t.prototype.getScaleArray=function(){return this.au;},t.prototype.getStroke=function(){return this.du;},t.prototype.getText=function(){return this.eo;},t.prototype.getTextAlign=function(){return this.Yu;},t.prototype.getJustify=function(){return this.Ku;},t.prototype.getTextBaseline=function(){return this.Zu;},t.prototype.getBackgroundFill=function(){return this.na;},t.prototype.getBackgroundStroke=function(){return this.ia;},t.prototype.getPadding=function(){return this.Ai;},t.prototype.setOverflow=function(t){this.Ju=t;},t.prototype.setFont=function(t){this.Wu=t;},t.prototype.setMaxAngle=function(t){this.$u=t;},t.prototype.setOffsetX=function(t){this.Qu=t;},t.prototype.setOffsetY=function(t){this.ta=t;},t.prototype.setPlacement=function(t){this.Hu=t;},t.prototype.setRotateWithView=function(t){this.su=t;},t.prototype.setFill=function(t){this.lu=t;},t.prototype.setRotation=function(t){this.Dr=t;},t.prototype.setScale=function(t){this.uu=t,this.au=va(void 0!==t?t:1);},t.prototype.setStroke=function(t){this.du=t;},t.prototype.setText=function(t){this.eo=t;},t.prototype.setTextAlign=function(t){this.Yu=t;},t.prototype.setJustify=function(t){this.Ku=t;},t.prototype.setTextBaseline=function(t){this.Zu=t;},t.prototype.setBackgroundFill=function(t){this.na=t;},t.prototype.setBackgroundStroke=function(t){this.ia=t;},t.prototype.setPadding=function(t){this.Ai=t;},t;}(),vp=lp,pp=function(){function t(t){this.ra,this.ea,this.oa,this.sa=void 0===t||t,this.ua=0;}return t.prototype.insertItem=function(t){var n={prev:void 0,next:void 0,data:t},i=this.oa;if(i){var r=i.next;n.prev=i,n.next=r,i.next=n,r&&(r.prev=n),i===this.ea&&(this.ea=n);}else this.ra=n,this.ea=n,this.sa&&(n.next=n,n.prev=n);this.oa=n,this.ua++;},t.prototype.removeItem=function(){var t=this.oa;if(t){var n=t.next,i=t.prev;n&&(n.prev=i),i&&(i.next=n),this.oa=n||i,this.ra===this.ea?(this.oa=void 0,this.ra=void 0,this.ea=void 0):this.ra===t?this.ra=this.oa:this.ea===t&&(this.ea=i?this.oa.prev:this.oa),this.ua--;}},t.prototype.firstItem=function(){if(this.oa=this.ra,this.oa)return this.oa.data;},t.prototype.lastItem=function(){if(this.oa=this.ea,this.oa)return this.oa.data;},t.prototype.nextItem=function(){if(this.oa&&this.oa.next)return this.oa=this.oa.next,this.oa.data;},t.prototype.getNextItem=function(){if(this.oa&&this.oa.next)return this.oa.next.data;},t.prototype.prevItem=function(){if(this.oa&&this.oa.prev)return this.oa=this.oa.prev,this.oa.data;},t.prototype.getPrevItem=function(){if(this.oa&&this.oa.prev)return this.oa.prev.data;},t.prototype.getCurrItem=function(){if(this.oa)return this.oa.data;},t.prototype.setFirstItem=function(){this.sa&&this.oa&&(this.ra=this.oa,this.ea=this.oa.prev);},t.prototype.concat=function(t){if(t.oa){if(this.oa){var n=this.oa.next;this.oa.next=t.ra,t.ra.prev=this.oa,n.prev=t.ea,t.ea.next=n,this.ua+=t.ua;}else this.oa=t.oa,this.ra=t.ra,this.ea=t.ea,this.ua=t.ua;t.oa=void 0,t.ra=void 0,t.ea=void 0,t.ua=0;}},t.prototype.getLength=function(){return this.ua;},t;}(),dp=i(72),yp=function(){function t(t){this.aa=new dp(t),this.ha={};}return t.prototype.insert=function(t,n){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:n};this.aa.insert(i),this.ha[o(n)]=i;},t.prototype.load=function(t,n){for(var i=new Array(n.length),r=0,e=n.length;r<e;r++){var s=t[r],u=n[r],a={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:u};i[r]=a,this.ha[o(u)]=a;}this.aa.load(i);},t.prototype.remove=function(t){var n=o(t),i=this.ha[n];return delete this.ha[n],null!==this.aa.remove(i);},t.prototype.update=function(t,n){var i=this.ha[o(n)];Nn([i.minX,i.minY,i.maxX,i.maxY],t)||(this.remove(n),this.insert(t,n));},t.prototype.getAll=function(){return this.aa.all().map(function(t){return t.value;});},t.prototype.getInExtent=function(t){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.aa.search(n).map(function(t){return t.value;});},t.prototype.forEach=function(t){return this.fa(this.getAll(),t);},t.prototype.forEachInExtent=function(t,n){return this.fa(this.getInExtent(t),n);},t.prototype.fa=function(t,n){for(var i,r=0,e=t.length;r<e;r++){if(i=n(t[r]))return i;}return i;},t.prototype.isEmpty=function(){return k(this.ha);},t.prototype.clear=function(){this.aa.clear(),this.ha={};},t.prototype.getExtent=function(t){var n=this.aa.toJSON();return An(n.minX,n.minY,n.maxX,n.maxY,t);},t.prototype.concat=function(t){for(var n in this.aa.load(t.aa.all()),t.ha){this.ha[n]=t.ha[n];}},t;}(),mp=yp,wp="tileloadstart",gp="tileloadend",bp="tileloaderror",xp=function(){var _t71=function t(n,i){return _t71=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t71(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t71(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}();function Mp(t){return t?Array.isArray(t)?function(n){return t;}:"function"==typeof t?t:function(n){return[t];}:null;}var _p=function(t){function n(n){var i=t.call(this)||this;i.projection=br(n.projection),i.ca=Mp(n.attributions),i.la=void 0===n.attributionsCollapsible||n.attributionsCollapsible,i.loading=!1,i.rn=void 0!==n.state?n.state:"ready",i.va=void 0!==n.wrapX&&n.wrapX,i.pa=!!n.interpolate,i.viewResolver=null,i.viewRejector=null;var r=i;return i.da=new Promise(function(t,n){r.viewResolver=t,r.viewRejector=n;}),i;}return xp(n,t),n.prototype.getAttributions=function(){return this.ca;},n.prototype.getAttributionsCollapsible=function(){return this.la;},n.prototype.getProjection=function(){return this.projection;},n.prototype.getResolutions=function(){return r();},n.prototype.getView=function(){return this.da;},n.prototype.getState=function(){return this.rn;},n.prototype.getWrapX=function(){return this.va;},n.prototype.getInterpolate=function(){return this.pa;},n.prototype.refresh=function(){this.changed();},n.prototype.setAttributions=function(t){this.ca=Mp(t),this.changed();},n.prototype.setState=function(t){this.rn=t,this.changed();},n;}(et),Sp=function(){var _t72=function t(n,i){return _t72=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t72(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t72(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Op=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,projection:n.projection,state:n.state,wrapX:n.wrapX,interpolate:n.interpolate})||this;i.on,i.once,i.un,i.ya=void 0!==n.opaque&&n.opaque,i.ma=void 0!==n.tilePixelRatio?n.tilePixelRatio:1,i.tileGrid=void 0!==n.tileGrid?n.tileGrid:null;return i.tileGrid&&va(i.tileGrid.getTileSize(i.tileGrid.getMinZoom()),[256,256]),i.tileCache=new nf(n.cacheSize||0),i.tmpSize=[0,0],i.ke=n.key||"",i.tileOptions={transition:n.transition,interpolate:n.interpolate},i.zDirection=n.zDirection?n.zDirection:0,i;}return Sp(n,t),n.prototype.canExpireCache=function(){return this.tileCache.canExpireCache();},n.prototype.expireCache=function(t,n){var i=this.getTileCacheForProjection(t);i&&i.expireCache(n);},n.prototype.forEachLoadedTile=function(t,n,i,r){var e=this.getTileCacheForProjection(t);if(!e)return!1;for(var o,s,u,a=!0,h=i.minX;h<=i.maxX;++h){for(var f=i.minY;f<=i.maxY;++f){s=Yh(n,h,f),u=!1,e.containsKey(s)&&(u=(o=e.get(s)).getState()===pt)&&(u=!1!==r(o)),u||(a=!1);}}return a;},n.prototype.getGutterForProjection=function(t){return 0;},n.prototype.getKey=function(){return this.ke;},n.prototype.setKey=function(t){this.ke!==t&&(this.ke=t,this.changed());},n.prototype.getOpaque=function(t){return this.ya;},n.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null;},n.prototype.getTile=function(t,n,i,e,o){return r();},n.prototype.getTileGrid=function(){return this.tileGrid;},n.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Kf(t);},n.prototype.getTileCacheForProjection=function(t){var n=this.getProjection();return Et(null===n||Tr(n,t),68),this.tileCache;},n.prototype.getTilePixelRatio=function(t){return this.ma;},n.prototype.getTilePixelSize=function(t,n,i){var r=this.getTileGridForProjection(i),e=this.getTilePixelRatio(n),o=va(r.getTileSize(t),this.tmpSize);return 1==e?o:la(o,e,this.tmpSize);},n.prototype.getTileCoordForTileUrlFunction=function(t,n){var i=void 0!==n?n:this.getProjection(),r=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=Zf(r,t,i)),Jh(t,r)?t:null;},n.prototype.clear=function(){this.tileCache.clear();},n.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this);},n.prototype.updateCacheSize=function(t,n){var i=this.getTileCacheForProjection(n);t>i.highWaterMark&&(i.highWaterMark=t);},n.prototype.useTile=function(t,n,i,r){},n;}(_p),jp=function(t){function n(n,i){var r=t.call(this,n)||this;return r.tile=i,r;}return Sp(n,t),n;}(c),Ep=Op,Tp=function(){var _t73=function t(n,i){return _t73=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t73(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t73(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Ap=function(t){function n(i){var r=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,opaque:i.opaque,projection:i.projection,state:i.state,tileGrid:i.tileGrid,tilePixelRatio:i.tilePixelRatio,wrapX:i.wrapX,transition:i.transition,interpolate:i.interpolate,key:i.key,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this;return r.wa=r.tileUrlFunction===n.prototype.tileUrlFunction,r.tileLoadFunction=i.tileLoadFunction,i.tileUrlFunction&&(r.tileUrlFunction=i.tileUrlFunction),r.urls=null,i.urls?r.setUrls(i.urls):i.url&&r.setUrl(i.url),r.ga={},r;}return Tp(n,t),n.prototype.getTileLoadFunction=function(){return this.tileLoadFunction;},n.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction;},n.prototype.getUrls=function(){return this.urls;},n.prototype.handleTileChange=function(t){var n,i=t.target,r=o(i),e=i.getState();e==vt?(this.ga[r]=!0,n=wp):r in this.ga&&(delete this.ga[r],n=e==dt?bp:e==pt?gp:void 0),null!=n&&this.dispatchEvent(new jp(n,i));},n.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed();},n.prototype.setTileUrlFunction=function(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==n?this.setKey(n):this.changed();},n.prototype.setUrl=function(t){var n=oc(t);this.urls=n,this.setUrls(n);},n.prototype.setUrls=function(t){this.urls=t;var n=t.join("\n");this.wa?this.setTileUrlFunction(ic(t,this.tileGrid),n):this.setKey(n);},n.prototype.tileUrlFunction=function(t,n,i){},n.prototype.useTile=function(t,n,i){var r=Yh(t,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r);},n;}(Ep),Pp=Ap,Cp=function(){var _t74=function t(n,i){return _t74=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t74(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t74(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),kp=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(r=n.interpolate),(i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction?n.tileLoadFunction:Np,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:n.wrapX,transition:n.transition,interpolate:r,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this).crossOrigin=void 0!==n.crossOrigin?n.crossOrigin:null,i.tileClass=void 0!==n.tileClass?n.tileClass:qo,i.tileCacheForProjection={},i.tileGridForProjection={},i.ba=n.reprojectionErrorThreshold,i.xa=!1,i;}return Cp(n,t),n.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection){if(this.tileCacheForProjection[t].canExpireCache())return!0;}return!1;},n.prototype.expireCache=function(t,n){var i=this.getTileCacheForProjection(t);for(var r in this.tileCache.expireCache(this.tileCache==i?n:{}),this.tileCacheForProjection){var e=this.tileCacheForProjection[r];e.expireCache(e==i?n:{});}},n.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Tr(this.getProjection(),t)?0:this.getGutter();},n.prototype.getGutter=function(){return 0;},n.prototype.getKey=function(){var n=t.prototype.getKey.call(this);return this.getInterpolate()||(n+=":disable-interpolation"),n;},n.prototype.getOpaque=function(n){return!(this.getProjection()&&n&&!Tr(this.getProjection(),n))&&t.prototype.getOpaque.call(this,n);},n.prototype.getTileGridForProjection=function(t){var n=this.getProjection();if(!this.tileGrid||n&&!Tr(n,t)){var i=o(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Kf(t)),this.tileGridForProjection[i];}return this.tileGrid;},n.prototype.getTileCacheForProjection=function(t){var n=this.getProjection();if(!n||Tr(n,t))return this.tileCache;var i=o(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new nf(this.tileCache.highWaterMark)),this.tileCacheForProjection[i];},n.prototype.Ma=function(t,n,i,r,e,o){var s=[t,n,i],u=this.getTileCoordForTileUrlFunction(s,e),a=u?this.tileUrlFunction(u,r,e):void 0,h=new this.tileClass(s,void 0!==a?lt:yt,void 0!==a?a:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=o,h.addEventListener(z,this.handleTileChange.bind(this)),h;},n.prototype.getTile=function(t,n,i,r,e){var o=this.getProjection();if(o&&e&&!Tr(o,e)){var s=this.getTileCacheForProjection(e),u=[t,n,i],a=void 0,h=Kh(u);s.containsKey(h)&&(a=s.get(h));var f=this.getKey();if(a&&a.key==f)return a;var c=this.getTileGridForProjection(o),l=this.getTileGridForProjection(e),v=this.getTileCoordForTileUrlFunction(u,e),p=new gl(o,c,e,l,u,v,this.getTilePixelRatio(r),this.getGutter(),function(t,n,i,r){return this.getTileInternal(t,n,i,r,o);}.bind(this),this.ba,this.xa,this.getInterpolate());return p.key=f,a?(p.interimTile=a,p.refreshInterimChain(),s.replace(h,p)):s.set(h,p),p;}return this.getTileInternal(t,n,i,r,o||e);},n.prototype.getTileInternal=function(t,n,i,r,e){var o=null,s=Yh(t,n,i),u=this.getKey();if(this.tileCache.containsKey(s)){if((o=this.tileCache.get(s)).key!=u){var a=o;o=this.Ma(t,n,i,r,e,u),a.getState()==lt?o.interimTile=a.interimTile:o.interimTile=a,o.refreshInterimChain(),this.tileCache.replace(s,o);}}else o=this.Ma(t,n,i,r,e,u),this.tileCache.set(s,o);return o;},n.prototype.setRenderReprojectionEdges=function(t){if(this.xa!=t){for(var n in this.xa=t,this.tileCacheForProjection){this.tileCacheForProjection[n].clear();}this.changed();}},n.prototype.setTileGridForProjection=function(t,n){var i=br(t);if(i){var r=o(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=n);}},n;}(Pp);function Np(t,n){t.getImage().src=n;}var Ip=kp,zp=function(){var _t75=function t(n,i){return _t75=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t75(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t75(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}();function Lp(t){var n,i,r=t[0],e=new Array(r),o=1<<r-1;for(n=0;n<r;++n){i=48,t[1]&o&&(i+=1),t[2]&o&&(i+=2),e[n]=String.fromCharCode(i),o>>=1;}return e.join("");}var Rp=function(t){function n(n){var i=this,r=void 0!==n.hidpi&&n.hidpi,e=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(e=n.interpolate),(i=t.call(this,{cacheSize:n.cacheSize,crossOrigin:"anonymous",interpolate:e,opaque:!0,projection:br("EPSG:3857"),reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:"loading",tileLoadFunction:n.tileLoadFunction,tilePixelRatio:r?2:1,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:n.zDirection})||this)._a=r,i.Sa=void 0!==n.culture?n.culture:"en-us",i.Oa=void 0!==n.maxZoom?n.maxZoom:-1,i.ja=n.key,i.Ea=n.imagerySet,gf("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+i.Ea+"?uriScheme=https&include=ImageryProviders&key="+i.ja+"&c="+i.Sa,i.handleImageryMetadataResponse.bind(i),void 0,"jsonp"),i;}return zp(n,t),n.prototype.getApiKey=function(){return this.ja;},n.prototype.getImagerySet=function(){return this.Ea;},n.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var n=t.resourceSets[0].resources[0],i=-1==this.Oa?n.zoomMax:this.Oa,r=tc(this.getProjection()),e=this._a?2:1,o=n.imageWidth==n.imageHeight?n.imageWidth/e:[n.imageWidth/e,n.imageHeight/e],s=Hf({extent:r,minZoom:n.zoomMin,maxZoom:i,tileSize:o});this.tileGrid=s;var u=this.Sa,a=this._a;if(this.tileUrlFunction=rc(n.imageUrlSubdomains.map(function(t){var i=[0,0,0],r=n.imageUrl.replace("{subdomain}",t).replace("{culture}",u);return function(t,n,e){if(t){Wh(t[0],t[1],t[2],i);var o=r;return a&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",Lp(i));}};})),n.imageryProviders){var h=Ar(br("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var i=[],r=t.viewState,e=this.getTileGrid(),o=e.getZForResolution(r.resolution,this.zDirection),s=e.getTileCoordForCoordAndZ(r.center,o)[0];return n.imageryProviders.map(function(n){for(var r=!1,e=n.coverageAreas,o=0,u=e.length;o<u;++o){var a=e[o];if(s>=a.zoomMin&&s<=a.zoomMax){var f=a.bbox;if(ti(oi([f[1],f[0],f[3],f[2]],h),t.extent)){r=!0;break;}}}r&&i.push(n.attribution);}),i.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),i;}.bind(this));}this.setState("ready");}else this.setState("error");},n;}(Ip),Fp=Rp,Gp=function(){var _t76=function t(n,i){return _t76=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t76(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t76(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Dp=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate);var o=void 0!==r.projection?r.projection:"EPSG:3857",s=void 0!==r.tileGrid?r.tileGrid:Hf({extent:tc(o),maxResolution:r.maxResolution,maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});return(i=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,opaque:r.opaque,projection:o,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:s,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this).js=void 0!==r.gutter?r.gutter:0,i;}return Gp(n,t),n.prototype.getGutter=function(){return this.js;},n;}(Ip),qp=Dp,Up=function(){var _t77=function t(n,i){return _t77=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t77(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t77(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Bp=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,maxZoom:void 0!==n.maxZoom?n.maxZoom:18,minZoom:n.minZoom,projection:n.projection,transition:n.transition,wrapX:n.wrapX,zDirection:n.zDirection})||this;return i.Ta=n.account,i.Aa=n.map||"",i.Pa=n.config||{},i.Ca={},i.ka(),i;}return Up(n,t),n.prototype.getConfig=function(){return this.Pa;},n.prototype.updateConfig=function(t){A(this.Pa,t),this.ka();},n.prototype.setConfig=function(t){this.Pa=t||{},this.ka();},n.prototype.ka=function(){var t=JSON.stringify(this.Pa);if(this.Ca[t])this.Na(this.Ca[t]);else{var n="https://"+this.Ta+".carto.com/api/v1/map";this.Aa&&(n+="/named/"+this.Aa);var i=new XMLHttpRequest();i.addEventListener("load",this.Ia.bind(this,t)),i.addEventListener("error",this.za.bind(this)),i.open("POST",n),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(this.Pa));}},n.prototype.Ia=function(t,n){var i=n.target;if(!i.status||i.status>=200&&i.status<300){var r=void 0;try{r=JSON.parse(i.responseText);}catch(t){return void this.setState("error");}this.Na(r),this.Ca[t]=r,this.setState("ready");}else this.setState("error");},n.prototype.za=function(t){this.setState("error");},n.prototype.Na=function(t){var n="https://"+t.cdn_url.https+"/"+this.Ta+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(n);},n;}(qp),Xp="addfeature",Vp="changefeature",Wp="clear",Yp="removefeature",Kp="featuresloadstart",Zp="featuresloadend",$p="featuresloaderror",Hp=function(){var _t78=function t(n,i){return _t78=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t78(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t78(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Jp=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.feature=i,e.features=r,e;}return Hp(n,t),n;}(c),Qp=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{attributions:r.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===r.wrapX||r.wrapX})||this).on,i.once,i.un,i.U=j,i.Le=r.format,i.La=void 0===r.overlaps||r.overlaps,i.Fe=r.url,void 0!==r.loader?i.U=r.loader:void 0!==i.Fe&&(Et(i.Le,7),i.U=yf(i.Fe,i.Le)),i.Ra=void 0!==r.strategy?r.strategy:mf;var e,o,s=void 0===r.useSpatialIndex||r.useSpatialIndex;return i.Fa=s?new mp():null,i.Ga=new mp(),i.Da=0,i.qa={},i.Ua={},i.Ba={},i.Xa={},i.Va=null,Array.isArray(r.features)?o=r.features:r.features&&(o=(e=r.features).getArray()),s||void 0!==e||(e=new ct(o)),void 0!==o&&i.addFeaturesInternal(o),void 0!==e&&i.Wa(e),i;}return Hp(n,t),n.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed();},n.prototype.addFeatureInternal=function(t){var n=o(t);if(this.Ya(n,t)){this.Ka(n,t);var i=t.getGeometry();if(i){var r=i.getExtent();this.Fa&&this.Fa.insert(r,t);}else this.qa[n]=t;this.dispatchEvent(new Jp(Xp,t));}else this.Va&&this.Va.remove(t);},n.prototype.Ka=function(t,n){this.Xa[t]=[Z(n,z,this.Za,this),Z(n,l,this.Za,this)];},n.prototype.Ya=function(t,n){var i=!0,r=n.getId();return void 0!==r&&(r.toString()in this.Ua?i=!1:this.Ua[r.toString()]=n),i&&(Et(!(t in this.Ba),30),this.Ba[t]=n),i;},n.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed();},n.prototype.addFeaturesInternal=function(t){for(var n=[],i=[],r=[],e=0,s=t.length;e<s;e++){var u=o(h=t[e]);this.Ya(u,h)&&i.push(h);}e=0;for(var a=i.length;e<a;e++){var h;u=o(h=i[e]);this.Ka(u,h);var f=h.getGeometry();if(f){var c=f.getExtent();n.push(c),r.push(h);}else this.qa[u]=h;}if(this.Fa&&this.Fa.load(n,r),this.hasListener(Xp)){e=0;for(var l=i.length;e<l;e++){this.dispatchEvent(new Jp(Xp,i[e]));}}},n.prototype.Wa=function(t){var n=!1;this.addEventListener(Xp,function(i){n||(n=!0,t.push(i.feature),n=!1);}),this.addEventListener(Yp,function(i){n||(n=!0,t.remove(i.feature),n=!1);}),t.addEventListener(ot,function(t){n||(n=!0,this.addFeature(t.element),n=!1);}.bind(this)),t.addEventListener(st,function(t){n||(n=!0,this.removeFeature(t.element),n=!1);}.bind(this)),this.Va=t;},n.prototype.clear=function(t){if(t){for(var n in this.Xa){this.Xa[n].forEach(H);}this.Va||(this.Xa={},this.Ua={},this.Ba={});}else if(this.Fa){var i=function(t){this.removeFeatureInternal(t);}.bind(this);for(var r in this.Fa.forEach(i),this.qa){this.removeFeatureInternal(this.qa[r]);}}this.Va&&this.Va.clear(),this.Fa&&this.Fa.clear(),this.qa={};var e=new Jp(Wp);this.dispatchEvent(e),this.changed();},n.prototype.forEachFeature=function(t){if(this.Fa)return this.Fa.forEach(t);this.Va&&this.Va.forEach(t);},n.prototype.forEachFeatureAtCoordinateDirect=function(t,n){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(i){return i.getGeometry().intersectsCoordinate(t)?n(i):void 0;});},n.prototype.forEachFeatureInExtent=function(t,n){if(this.Fa)return this.Fa.forEachInExtent(t,n);this.Va&&this.Va.forEach(n);},n.prototype.forEachFeatureIntersectingExtent=function(t,n){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){var r=n(i);if(r)return r;}});},n.prototype.getFeaturesCollection=function(){return this.Va;},n.prototype.getFeatures=function(){var t;return this.Va?t=this.Va.getArray().slice(0):this.Fa&&(t=this.Fa.getAll(),k(this.qa)||g(t,C(this.qa))),t;},n.prototype.getFeaturesAtCoordinate=function(t){var n=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){n.push(t);}),n;},n.prototype.getFeaturesInExtent=function(t,n){var i=this;if(this.Fa){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.Fa.getInExtent(t);var r=ui(t,n);return[].concat.apply([],r.map(function(t){return i.Fa.getInExtent(t);}));}return this.Va?this.Va.getArray().slice(0):[];},n.prototype.getClosestFeatureToCoordinate=function(t,n){var i=t[0],r=t[1],e=null,o=[NaN,NaN],s=1/0,u=[-1/0,-1/0,1/0,1/0],a=n||S;return this.Fa.forEachInExtent(u,function(t){if(a(t)){var n=t.getGeometry(),h=s;if((s=n.closestPointXY(i,r,o,s))<h){e=t;var f=Math.sqrt(s);u[0]=i-f,u[1]=r-f,u[2]=i+f,u[3]=r+f;}}}),e;},n.prototype.getExtent=function(t){return this.Fa.getExtent(t);},n.prototype.getFeatureById=function(t){var n=this.Ua[t.toString()];return void 0!==n?n:null;},n.prototype.getFeatureByUid=function(t){var n=this.Ba[t];return void 0!==n?n:null;},n.prototype.getFormat=function(){return this.Le;},n.prototype.getOverlaps=function(){return this.La;},n.prototype.getUrl=function(){return this.Fe;},n.prototype.Za=function(t){var n=t.target,i=o(n),r=n.getGeometry();if(r){var e=r.getExtent();i in this.qa?(delete this.qa[i],this.Fa&&this.Fa.insert(e,n)):this.Fa&&this.Fa.update(e,n);}else i in this.qa||(this.Fa&&this.Fa.remove(n),this.qa[i]=n);var s=n.getId();if(void 0!==s){var u=s.toString();this.Ua[u]!==n&&(this.$a(n),this.Ua[u]=n);}else this.$a(n),this.Ba[i]=n;this.changed(),this.dispatchEvent(new Jp(Vp,n));},n.prototype.hasFeature=function(t){var n=t.getId();return void 0!==n?n in this.Ua:o(t)in this.Ba;},n.prototype.isEmpty=function(){return this.Fa?this.Fa.isEmpty()&&k(this.qa):!this.Va||0===this.Va.getLength();},n.prototype.loadFeatures=function(t,n,i){for(var r=this.Ga,e=this.Ra(t,n,i),o=function o(t,_o2){var u=e[t];r.forEachInExtent(u,function(t){return On(t.extent,u);})||(++s.Da,s.dispatchEvent(new Jp(Kp)),s.U.call(s,u,n,i,function(t){--this.Da,this.dispatchEvent(new Jp(Zp,void 0,t));}.bind(s),function(){--this.Da,this.dispatchEvent(new Jp($p));}.bind(s)),r.insert(u,{extent:u.slice()}));},s=this,u=0,a=e.length;u<a;++u){o(u);}this.loading=!(this.U.length<4)&&this.Da>0;},n.prototype.refresh=function(){this.clear(!0),this.Ga.clear(),t.prototype.refresh.call(this);},n.prototype.removeLoadedExtent=function(t){var n,i=this.Ga;i.forEachInExtent(t,function(i){if(Nn(i.extent,t))return n=i,!0;}),n&&i.remove(n);},n.prototype.removeFeature=function(t){if(t){var n=o(t);n in this.qa?delete this.qa[n]:this.Fa&&this.Fa.remove(t),this.removeFeatureInternal(t)&&this.changed();}},n.prototype.removeFeatureInternal=function(t){var n=o(t),i=this.Xa[n];if(i){i.forEach(H),delete this.Xa[n];var r=t.getId();return void 0!==r&&delete this.Ua[r.toString()],delete this.Ba[n],this.dispatchEvent(new Jp(Yp,t)),t;}},n.prototype.$a=function(t){var n=!1;for(var i in this.Ua){if(this.Ua[i]===t){delete this.Ua[i],n=!0;break;}}return n;},n.prototype.setLoader=function(t){this.U=t;},n.prototype.setUrl=function(t){Et(this.Le,7),this.Fe=t,this.setLoader(yf(t,this.Le));},n;}(_p),td=function(){var _t79=function t(n,i){return _t79=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t79(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t79(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),nd=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,wrapX:n.wrapX})||this;return i.resolution=void 0,i.distance=void 0!==n.distance?n.distance:20,i.minDistance=n.minDistance||0,i.interpolationRatio=0,i.features=[],i.geometryFunction=n.geometryFunction||function(t){var n=t.getGeometry();return Et("Point"==n.getType(),10),n;},i.Ha=n.createCluster,i.source=null,i.Ja=i.refresh.bind(i),i.updateDistance(i.distance,i.minDistance),i.setSource(n.source||null),i;}return td(n,t),n.prototype.clear=function(n){this.features.length=0,t.prototype.clear.call(this,n);},n.prototype.getDistance=function(){return this.distance;},n.prototype.getSource=function(){return this.source;},n.prototype.loadFeatures=function(t,n,i){this.source.loadFeatures(t,n,i),n!==this.resolution&&(this.resolution=n,this.refresh());},n.prototype.setDistance=function(t){this.updateDistance(t,this.minDistance);},n.prototype.setMinDistance=function(t){this.updateDistance(this.distance,t);},n.prototype.getMinDistance=function(){return this.minDistance;},n.prototype.setSource=function(t){this.source&&this.source.removeEventListener(z,this.Ja),this.source=t,t&&t.addEventListener(z,this.Ja),this.refresh();},n.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features);},n.prototype.updateDistance=function(t,n){var i=0===t?0:Math.min(n,t)/t,r=t!==this.distance||this.interpolationRatio!==i;this.distance=t,this.minDistance=n,this.interpolationRatio=i,r&&this.refresh();},n.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var t=[1/0,1/0,-1/0,-1/0],n=this.distance*this.resolution,i=this.source.getFeatures(),r={},e=0,s=i.length;e<s;e++){var u=i[e];if(!(o(u)in r)){var a=this.geometryFunction(u);if(a){Cn(a.getCoordinates(),t),xn(t,n,t);var h=this.source.getFeaturesInExtent(t).filter(function(t){var n=o(t);return!(n in r)&&(r[n]=!0,!0);});this.features.push(this.createCluster(h,t));}}}},n.prototype.createCluster=function(t,n){for(var i=[0,0],r=t.length-1;r>=0;--r){var e=this.geometryFunction(t[r]);e?Zi(i,e.getCoordinates()):t.splice(r,1);}ir(i,1/t.length);var o=Vn(n),s=this.interpolationRatio,u=new ke([i[0]*(1-s)+o[0]*s,i[1]*(1-s)+o[1]*s]);return this.Ha?this.Ha(u,t):new Ct({geometry:u,features:t});},n;}(Qp),id=nd,rd=function(){var _t80=function t(n,i){return _t80=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t80(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t80(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),ed=function(t){function n(n){var i=this,r=void 0===n.projection?"EPSG:3857":n.projection,e=n.tileGrid;if(void 0===e&&r&&(e=Hf({extent:tc(r),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize})),(i=t.call(this,{cacheSize:.1,attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,projection:r,tileGrid:e,opaque:n.opaque,state:n.state,tilePixelRatio:n.tilePixelRatio,wrapX:n.wrapX,transition:n.transition,interpolate:n.interpolate})||this).js=void 0!==n.gutter?n.gutter:0,i.jo=n.tileSize?va(n.tileSize):null,!i.jo&&n.tilePixelRatio&&e){var o=va(e.getTileSize(0));i.jo=[o[0]*n.tilePixelRatio,o[1]*n.tilePixelRatio];}return i.Oo=null,i.ga={},i.U=n.loader,i.cr=i.cr.bind(i),i.bandCount=void 0===n.bandCount?4:n.bandCount,i;}return rd(n,t),n.prototype.setTileSizes=function(t){this.Oo=t;},n.prototype.getTileSize=function(t){if(this.Oo)return this.Oo[t];if(this.jo)return this.jo;var n=this.getTileGrid();return n?va(n.getTileSize(t)):[256,256];},n.prototype.getGutterForProjection=function(t){return this.js;},n.prototype.setLoader=function(t){this.U=t;},n.prototype.getTile=function(t,n,i,r,e){var o=this.getTileSize(t),s=Yh(t,n,i);if(this.tileCache.containsKey(s))return this.tileCache.get(s);var u=this.U;var a=A({tileCoord:[t,n,i],loader:function loader(){return T(function(){return u(t,n,i);});},size:o},this.tileOptions),h=new jt(a);return h.key=this.getKey(),h.addEventListener(z,this.cr),this.tileCache.set(s,h),h;},n.prototype.cr=function(t){var n,i=t.target,r=o(i),e=i.getState();e==vt?(this.ga[r]=!0,n=wp):r in this.ga&&(delete this.ga[r],n=e==dt?bp:e==pt?gp:void 0),n&&this.dispatchEvent(new jp(n,i));},n;}(Ep),od=ed;var sd=new Map();function ud(t,n){Array.isArray(t)||(t=[t]),t.forEach(function(t){return sd.set(t,n);});}function ad(_x2){return _ad.apply(this,arguments);}function _ad(){_ad=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee41(t){var n;return _regeneratorRuntime().wrap(function _callee41$(_context41){while(1){switch(_context41.prev=_context41.next){case 0:n=sd.get(t.Compression);if(n){_context41.next=3;break;}throw new Error("Unknown compression method identifier: ".concat(t.Compression));case 3:_context41.next=5;return n();case 5:_context41.t0=_context41.sent;_context41.t1=t;return _context41.abrupt("return",new _context41.t0(_context41.t1));case 8:case"end":return _context41.stop();}}},_callee41);}));return _ad.apply(this,arguments);}ud([void 0,1],function(){return i.e(226).then(i.bind(i,966)).then(function(t){return t.default;});}),ud(5,function(){return i.e(611).then(i.bind(i,611)).then(function(t){return t.default;});}),ud(6,function(){throw new Error("old style JPEG compression is not supported.");}),ud(7,function(){return i.e(382).then(i.bind(i,382)).then(function(t){return t.default;});}),ud([8,32946],function(){return Promise.all([i.e(247),i.e(356)]).then(i.bind(i,356)).then(function(t){return t.default;});}),ud(32773,function(){return i.e(395).then(i.bind(i,395)).then(function(t){return t.default;});}),ud(34887,function(){return Promise.all([i.e(247),i.e(54)]).then(i.bind(i,54)).then(function(t){return t.default;});}),ud(50001,function(){return i.e(629).then(i.bind(i,629)).then(function(t){return t.default;});});var hd="undefined"!=typeof navigator&&navigator.hardwareConcurrency||2;var fd=/*#__PURE__*/function(){function fd(){var _this5=this;_classCallCheck(this,fd);var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hd,n=arguments.length>1?arguments[1]:void 0;this.workers=null,this._awaitingDecoder=null,this.size=t,this.messageId=0,t&&(this._awaitingDecoder=n?Promise.resolve(n):new Promise(function(t){i.e(231).then(i.bind(i,231)).then(function(n){t(n.create);});}),this._awaitingDecoder.then(function(n){_this5._awaitingDecoder=null,_this5.workers=[];for(var _i9=0;_i9<t;_i9++){_this5.workers.push({worker:n(),idle:!0});}}));}_createClass(fd,[{key:"decode",value:function(){var _decode=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(t,n){var _this6=this;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=this._awaitingDecoder;if(!_context2.t0){_context2.next=4;break;}_context2.next=4;return this._awaitingDecoder;case 4:return _context2.abrupt("return",0===this.size?ad(t).then(function(i){return i.decode(t,n);}):new Promise(function(i){var r=_this6.workers.find(function(t){return t.idle;})||_this6.workers[Math.floor(Math.random()*_this6.size)];r.idle=!1;var e=_this6.messageId++,o=function o(t){t.data.id===e&&(r.idle=!0,i(t.data.decoded),r.worker.removeEventListener("message",o));};r.worker.addEventListener("message",o),r.worker.postMessage({fileDirectory:t,buffer:n,id:e},[n]);}));case 5:case"end":return _context2.stop();}}},_callee2,this);}));function decode(_x3,_x4){return _decode.apply(this,arguments);}return decode;}()},{key:"destroy",value:function destroy(){this.workers&&(this.workers.forEach(function(t){t.worker.terminate();}),this.workers=null);}}]);return fd;}();function cd(t){return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),e=1;e<i;e++){r[e-1]=arguments[e];}return vd(t,n,r);};}function ld(t,n){return cd(md(t,n).get);}var vd=Reflect.apply,pd=Reflect.construct,dd=Reflect.defineProperty,yd=Reflect.get,md=Reflect.getOwnPropertyDescriptor,wd=Reflect.getPrototypeOf,gd=Reflect.has,bd=Reflect.ownKeys,xd=Reflect.set,Md=Reflect.setPrototypeOf,_ref=(Proxy,Number),_d=_ref.MAX_SAFE_INTEGER,Sd=_ref.isFinite,Od=_ref.isNaN,jd=Symbol.iterator,Ed=Symbol.species,Td=Symbol.toStringTag,Ad=Symbol.for,Pd=Object,Cd=Pd.create,kd=Pd.defineProperty,Nd=Pd.freeze,Id=Pd.is,zd=Pd.prototype,Ld=(zd.__lookupGetter__&&cd(zd.__lookupGetter__),Pd.hasOwn||cd(zd.hasOwnProperty)),Rd=Array,Fd=(Rd.isArray,Rd.prototype),Gd=(cd(Fd.join),cd(Fd.push),cd(Fd.toLocaleString),Fd[jd]),Dd=cd(Gd),qd=(Math.trunc,ArrayBuffer),Ud=(qd.isView,qd.prototype),Bd=(cd(Ud.slice),ld(Ud,"byteLength"),"undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:null),Xd=(Bd&&ld(Bd.prototype,"byteLength"),wd(Uint8Array)),Vd=(Xd.from,Xd.prototype),Wd=(Vd[jd],cd(Vd.keys),cd(Vd.values),cd(Vd.entries),cd(Vd.set),cd(Vd.reverse),cd(Vd.fill),cd(Vd.copyWithin),cd(Vd.sort),cd(Vd.slice),cd(Vd.subarray),ld(Vd,"buffer"),ld(Vd,"byteOffset"),ld(Vd,"length"),ld(Vd,Td),Uint16Array,Uint32Array),Yd=Float32Array,Kd=wd([][jd]()),Zd=cd(Kd.next),$d=cd(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:case"end":return _context3.stop();}}},_callee3);})().next),Hd=wd(Kd),Jd=DataView.prototype,Qd=cd(Jd.getUint16),ty=(cd(Jd.setUint16),TypeError),ny=(RangeError,WeakSet.prototype),iy=(cd(ny.add),cd(ny.has),WeakMap),ry=iy.prototype,ey=cd(ry.get),oy=(cd(ry.has),cd(ry.set)),sy=new iy(),uy=Cd(null,_defineProperty({next:{value:function value(){var t=ey(sy,this);return Zd(t);}}},jd,{value:function value(){return this;}}));function ay(t){if(t[jd]===Gd)return t;var n=Cd(uy);return oy(sy,n,Dd(t)),n;}var hy=new iy(),fy=Cd(Hd,{next:{value:function value(){var t=ey(hy,this);return $d(t);},writable:!0,configurable:!0}});var _iterator=_createForOfIteratorHelper(bd(Kd)),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _t233=_step.value;"next"!==_t233&&kd(fy,_t233,md(Kd,_t233));}}catch(err){_iterator.e(err);}finally{_iterator.f();}var cy=new qd(4),ly=new Yd(cy),vy=new Wd(cy),py=new Wd(512),dy=new Wd(512);for(var _t81=0;_t81<256;++_t81){var _n4=_t81-127;_n4<-27?(py[_t81]=0,py[256|_t81]=32768,dy[_t81]=24,dy[256|_t81]=24):_n4<-14?(py[_t81]=1024>>-_n4-14,py[256|_t81]=1024>>-_n4-14|32768,dy[_t81]=-_n4-1,dy[256|_t81]=-_n4-1):_n4<=15?(py[_t81]=_n4+15<<10,py[256|_t81]=_n4+15<<10|32768,dy[_t81]=13,dy[256|_t81]=13):_n4<128?(py[_t81]=31744,py[256|_t81]=64512,dy[_t81]=24,dy[256|_t81]=24):(py[_t81]=31744,py[256|_t81]=64512,dy[_t81]=13,dy[256|_t81]=13);}var yy=new Wd(2048),my=new Wd(64),wy=new Wd(64);for(var _t82=1;_t82<1024;++_t82){var _n5=_t82<<13,_i10=0;for(;0==(8388608&_n5);){_n5<<=1,_i10-=8388608;}_n5&=-8388609,_i10+=947912704,yy[_t82]=_n5|_i10;}for(var _t83=1024;_t83<2048;++_t83){yy[_t83]=939524096+(_t83-1024<<13);}for(var _t84=1;_t84<31;++_t84){my[_t84]=_t84<<23;}my[31]=1199570944,my[32]=2147483648;for(var _t85=33;_t85<63;++_t85){my[_t85]=2147483648+(_t85-32<<23);}my[63]=3347054592;for(var _t86=1;_t86<64;++_t86){32!==_t86&&(wy[_t86]=1024);}function gy(t){var n=t>>10;return vy[0]=yy[wy[n]+(1023&t)]+my[n],ly[0];}function by(t,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),e=2;e<i;e++){r[e-2]=arguments[e];}return gy(Qd.apply(void 0,[t,n].concat(_toConsumableArray(ay(r)))));}var xy=i(802),My=i(51),_y=i(150);function Sy(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new(Object.getPrototypeOf(t).constructor)(n*i*r);}function Oy(t,n,i,r,e){var o=n/r,s=i/e;return t.map(function(t){var u=Sy(t,r,e);for(var _a2=0;_a2<e;++_a2){var _e4=Math.min(Math.round(s*_a2),i-1);for(var _i11=0;_i11<r;++_i11){var _s4=Math.min(Math.round(o*_i11),n-1),_h2=t[_e4*n+_s4];u[_a2*r+_i11]=_h2;}}return u;});}function jy(t,n,i){return(1-i)*t+i*n;}function Ey(t,n,i,r,e){var o=n/r,s=i/e;return t.map(function(t){var u=Sy(t,r,e);for(var _a3=0;_a3<e;++_a3){var _e5=s*_a3,_h3=Math.floor(_e5),_f2=Math.min(Math.ceil(_e5),i-1);for(var _i12=0;_i12<r;++_i12){var _s5=o*_i12,_c2=_s5%1,_l2=Math.floor(_s5),_v2=Math.min(Math.ceil(_s5),n-1),_p2=t[_h3*n+_l2],_d2=t[_h3*n+_v2],_y2=t[_f2*n+_l2],_m2=t[_f2*n+_v2],_w2=jy(jy(_p2,_d2,_c2),jy(_y2,_m2,_c2),_e5%1);u[_a3*r+_i12]=_w2;}}return u;});}function Ty(t,n,i,r,e,o){var s=n/r,u=i/e,a=Sy(t,r,e,o);for(var _h4=0;_h4<e;++_h4){var _e6=Math.min(Math.round(u*_h4),i-1);for(var _i13=0;_i13<r;++_i13){var _u2=Math.min(Math.round(s*_i13),n-1);for(var _s6=0;_s6<o;++_s6){var _f3=t[_e6*n*o+_u2*o+_s6];a[_h4*r*o+_i13*o+_s6]=_f3;}}}return a;}function Ay(t,n,i,r,e,o){var s=n/r,u=i/e,a=Sy(t,r,e,o);for(var _h5=0;_h5<e;++_h5){var _e7=u*_h5,_f4=Math.floor(_e7),_c3=Math.min(Math.ceil(_e7),i-1);for(var _i14=0;_i14<r;++_i14){var _u3=s*_i14,_l3=_u3%1,_v3=Math.floor(_u3),_p3=Math.min(Math.ceil(_u3),n-1);for(var _s7=0;_s7<o;++_s7){var _u4=t[_f4*n*o+_v3*o+_s7],_d3=t[_f4*n*o+_p3*o+_s7],_y3=t[_c3*n*o+_v3*o+_s7],_m3=t[_c3*n*o+_p3*o+_s7],_w3=jy(jy(_u4,_d3,_l3),jy(_y3,_m3,_l3),_e7%1);a[_h5*r*o+_i14*o+_s7]=_w3;}}}return a;}function Py(t,n,i){var r=0;for(var _e8=n;_e8<i;++_e8){r+=t[_e8];}return r;}function Cy(t,n,i){switch(t){case 1:if(n<=8)return new Uint8Array(i);if(n<=16)return new Uint16Array(i);if(n<=32)return new Uint32Array(i);break;case 2:if(8===n)return new Int8Array(i);if(16===n)return new Int16Array(i);if(32===n)return new Int32Array(i);break;case 3:switch(n){case 16:case 32:return new Float32Array(i);case 64:return new Float64Array(i);}}throw Error("Unsupported data format/bitsPerSample");}var ky=/*#__PURE__*/function(){function ky(t,n,i,r,e,o){_classCallCheck(this,ky);this.fileDirectory=t,this.geoKeys=n,this.dataView=i,this.littleEndian=r,this.tiles=e?{}:null,this.isTiled=!t.StripOffsets;var s=t.PlanarConfiguration;if(this.planarConfiguration=void 0===s?1:s,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=o;}_createClass(ky,[{key:"getFileDirectory",value:function getFileDirectory(){return this.fileDirectory;}},{key:"getGeoKeys",value:function getGeoKeys(){return this.geoKeys;}},{key:"getWidth",value:function getWidth(){return this.fileDirectory.ImageWidth;}},{key:"getHeight",value:function getHeight(){return this.fileDirectory.ImageLength;}},{key:"getSamplesPerPixel",value:function getSamplesPerPixel(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1;}},{key:"getTileWidth",value:function getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth();}},{key:"getTileHeight",value:function getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight();}},{key:"getBlockWidth",value:function getBlockWidth(){return this.getTileWidth();}},{key:"getBlockHeight",value:function getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight();}},{key:"getBytesPerPixel",value:function getBytesPerPixel(){var t=0;for(var _n6=0;_n6<this.fileDirectory.BitsPerSample.length;++_n6){t+=this.getSampleByteSize(_n6);}return t;}},{key:"getSampleByteSize",value:function getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError("Sample index ".concat(t," is out of range."));return Math.ceil(this.fileDirectory.BitsPerSample[t]/8);}},{key:"getReaderForSample",value:function getReaderForSample(t){var n=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,i=this.fileDirectory.BitsPerSample[t];switch(n){case 1:if(i<=8)return DataView.prototype.getUint8;if(i<=16)return DataView.prototype.getUint16;if(i<=32)return DataView.prototype.getUint32;break;case 2:if(i<=8)return DataView.prototype.getInt8;if(i<=16)return DataView.prototype.getInt16;if(i<=32)return DataView.prototype.getInt32;break;case 3:switch(i){case 16:return function(t,n){return by(this,t,n);};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64;}}throw Error("Unsupported data format/bitsPerSample");}},{key:"getSampleFormat",value:function getSampleFormat(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1;}},{key:"getBitsPerSample",value:function getBitsPerSample(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fileDirectory.BitsPerSample[t];}},{key:"getArrayForSample",value:function getArrayForSample(t,n){return Cy(this.getSampleFormat(t),this.getBitsPerSample(t),n);}},{key:"getTileOrStrip",value:function(){var _getTileOrStrip=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(t,n,i,r,e){var _this7=this;var o,s,u,a,h,f,c,l;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:o=Math.ceil(this.getWidth()/this.getTileWidth()),s=Math.ceil(this.getHeight()/this.getTileHeight());a=this.tiles;1===this.planarConfiguration?u=n*o+t:2===this.planarConfiguration&&(u=i*o*s+n*o+t),this.isTiled?(h=this.fileDirectory.TileOffsets[u],f=this.fileDirectory.TileByteCounts[u]):(h=this.fileDirectory.StripOffsets[u],f=this.fileDirectory.StripByteCounts[u]);_context5.next=5;return this.source.fetch([{offset:h,length:f}],e);case 5:c=_context5.sent[0];null!==a&&a[u]?l=a[u]:(l=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var t,i,e;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return r.decode(_this7.fileDirectory,c);case 2:t=_context4.sent;i=_this7.getSampleFormat(),e=_this7.getBitsPerSample();return _context4.abrupt("return",(function(t,n){return(1!==t&&2!==t||!(n<=32)||n%8!=0)&&(3!==t||16!==n&&32!==n&&64!==n);}(i,e)&&(t=function(t,n,i,r,e,o,s){var u=new DataView(t),a=2===i?1:r,h=Cy(n,e,2===i?s*o:s*o*r),f=parseInt("1".repeat(e),2);if(1===n){var _t87;_t87=1===i?r*e:e;var _n7=o*_t87;0!=(7&_n7)&&(_n7=_n7+7&-8);for(var _t88=0;_t88<s;++_t88){var _i15=_t88*_n7;for(var _n8=0;_n8<o;++_n8){var _r6=_i15+_n8*a*e;for(var _i16=0;_i16<a;++_i16){var _s8=_r6+_i16*e,_c4=(_t88*o+_n8)*a+_i16,_l4=Math.floor(_s8/8),_v4=_s8%8;if(_v4+e<=8)h[_c4]=u.getUint8(_l4)>>8-e-_v4&f;else if(_v4+e<=16)h[_c4]=u.getUint16(_l4)>>16-e-_v4&f;else if(_v4+e<=24){var _t89=u.getUint16(_l4)<<8|u.getUint8(_l4+2);h[_c4]=_t89>>24-e-_v4&f;}else h[_c4]=u.getUint32(_l4)>>32-e-_v4&f;}}}}return h.buffer;}(t,i,_this7.planarConfiguration,_this7.getSamplesPerPixel(),e,_this7.getTileWidth(),_this7.getBlockHeight(n))),t));case 5:case"end":return _context4.stop();}}},_callee4);}))(),null!==a&&(a[u]=l));_context5.t0=t;_context5.t1=n;_context5.t2=i;_context5.next=12;return l;case 12:_context5.t3=_context5.sent;return _context5.abrupt("return",{x:_context5.t0,y:_context5.t1,sample:_context5.t2,data:_context5.t3});case 14:case"end":return _context5.stop();}}},_callee5,this);}));function getTileOrStrip(_x5,_x6,_x7,_x8,_x9){return _getTileOrStrip.apply(this,arguments);}return getTileOrStrip;}()},{key:"_readRaster",value:function(){var _readRaster2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(t,n,i,r,e,o,s,u,a){var _this8=this;var h,f,c,l,v,p,d,y,m,w,g,b,_t90,x,M,_o3,_s9,_loop,_u5,_e10;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:h=this.getTileWidth(),f=this.getTileHeight(),c=this.getWidth(),l=this.getHeight(),v=Math.max(Math.floor(t[0]/h),0),p=Math.min(Math.ceil(t[2]/h),Math.ceil(c/h)),d=Math.max(Math.floor(t[1]/f),0),y=Math.min(Math.ceil(t[3]/f),Math.ceil(l/f)),m=t[2]-t[0];w=this.getBytesPerPixel();g=[],b=[];for(_t90=0;_t90<n.length;++_t90){1===this.planarConfiguration?g.push(Py(this.fileDirectory.BitsPerSample,0,n[_t90])/8):g.push(0),b.push(this.getReaderForSample(n[_t90]));}x=[],M=this.littleEndian;for(_o3=d;_o3<y;++_o3){for(_s9=v;_s9<p;++_s9){_loop=function _loop(_u5){var v=_u5,p=n[_u5];2===_this8.planarConfiguration&&(w=_this8.getSampleByteSize(_u5));var d=_this8.getTileOrStrip(_s9,_o3,p,e,a);x.push(d),d.then(function(e){var o=e.data,s=new DataView(o),u=_this8.getBlockHeight(e.y),a=e.y*f,p=e.x*h,d=a+u,y=(e.x+1)*h,x=b[v],_=Math.min(u,u-(d-t[3]),l-a),S=Math.min(h,h-(y-t[2]),c-p);for(var _e9=Math.max(0,t[1]-a);_e9<_;++_e9){for(var _o4=Math.max(0,t[0]-p);_o4<S;++_o4){var _u6=(_e9*h+_o4)*w,_f5=x.call(s,_u6+g[v],M);var _c5=void 0;r?(_c5=(_e9+a-t[1])*m*n.length+(_o4+p-t[0])*n.length+v,i[_c5]=_f5):(_c5=(_e9+a-t[1])*m+_o4+p-t[0],i[v][_c5]=_f5);}}});};for(_u5=0;_u5<n.length;++_u5){_loop(_u5);}}}_context6.next=8;return Promise.all(x);case 8:if(!(o&&t[2]-t[0]!==o||s&&t[3]-t[1]!==s)){_context6.next=10;break;}return _context6.abrupt("return",(_e10=r?function(t,n,i,r,e,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"nearest";switch(s.toLowerCase()){case"nearest":return Ty(t,n,i,r,e,o);case"bilinear":case"linear":return Ay(t,n,i,r,e,o);default:throw new Error("Unsupported resampling method: '".concat(s,"'"));}}(i,t[2]-t[0],t[3]-t[1],o,s,n.length,u):function(t,n,i,r,e){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"nearest";switch(o.toLowerCase()){case"nearest":return Oy(t,n,i,r,e);case"bilinear":case"linear":return Ey(t,n,i,r,e);default:throw new Error("Unsupported resampling method: '".concat(o,"'"));}}(i,t[2]-t[0],t[3]-t[1],o,s,u),_e10.width=o,_e10.height=s,_e10));case 10:return _context6.abrupt("return",(i.width=o||t[2]-t[0],i.height=s||t[3]-t[1],i));case 11:case"end":return _context6.stop();}}},_callee6,this);}));function _readRaster(_x10,_x11,_x12,_x13,_x14,_x15,_x16,_x17,_x18){return _readRaster2.apply(this,arguments);}return _readRaster;}()},{key:"readRasters",value:function(){var _readRasters=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(){var _ref3,t,_ref3$samples,n,i,_ref3$pool,r,e,o,s,u,a,h,f,c,_t91,_t92,l,_t93,_i17,v,_args7=arguments;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_ref3=_args7.length>0&&void 0!==_args7[0]?_args7[0]:{},t=_ref3.window,_ref3$samples=_ref3.samples,n=_ref3$samples===void 0?[]:_ref3$samples,i=_ref3.interleave,_ref3$pool=_ref3.pool,r=_ref3$pool===void 0?null:_ref3$pool,e=_ref3.width,o=_ref3.height,s=_ref3.resampleMethod,u=_ref3.fillValue,a=_ref3.signal;h=t||[0,0,this.getWidth(),this.getHeight()];if(!(h[0]>h[2]||h[1]>h[3])){_context7.next=4;break;}throw new Error("Invalid subsets");case 4:f=(h[2]-h[0])*(h[3]-h[1]),c=this.getSamplesPerPixel();if(!(n&&n.length)){_context7.next=15;break;}_t91=0;case 7:if(!(_t91<n.length)){_context7.next=13;break;}if(!(n[_t91]>=c)){_context7.next=10;break;}return _context7.abrupt("return",Promise.reject(new RangeError("Invalid sample index '".concat(n[_t91],"'."))));case 10:++_t91;_context7.next=7;break;case 13:_context7.next=16;break;case 15:for(_t92=0;_t92<c;++_t92){n.push(_t92);}case 16:if(i){l=Cy(this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,Math.max.apply(null,this.fileDirectory.BitsPerSample),f*n.length),u&&l.fill(u);}else{l=[];for(_t93=0;_t93<n.length;++_t93){_i17=this.getArrayForSample(n[_t93],f);Array.isArray(u)&&_t93<u.length?_i17.fill(u[_t93]):u&&!Array.isArray(u)&&_i17.fill(u),l.push(_i17);}}_context7.t0=r;if(_context7.t0){_context7.next=22;break;}_context7.next=21;return ad(this.fileDirectory);case 21:_context7.t0=_context7.sent;case 22:v=_context7.t0;_context7.next=25;return this._readRaster(h,n,l,i,v,e,o,s,a);case 25:return _context7.abrupt("return",_context7.sent);case 26:case"end":return _context7.stop();}}},_callee7,this);}));function readRasters(){return _readRasters.apply(this,arguments);}return readRasters;}()},{key:"readRGB",value:function(){var _readRGB=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(){var _ref4,t,_ref4$interleave,n,_ref4$pool,i,r,e,o,_ref4$enableAlpha,s,u,a,h,_a4,_t94,f,c,l,v,p,d,_t95,_n12,_i24,_r10,_e14,_args8=arguments;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_ref4=_args8.length>0&&void 0!==_args8[0]?_args8[0]:{},t=_ref4.window,_ref4$interleave=_ref4.interleave,n=_ref4$interleave===void 0?!0:_ref4$interleave,_ref4$pool=_ref4.pool,i=_ref4$pool===void 0?null:_ref4$pool,r=_ref4.width,e=_ref4.height,o=_ref4.resampleMethod,_ref4$enableAlpha=_ref4.enableAlpha,s=_ref4$enableAlpha===void 0?!1:_ref4$enableAlpha,u=_ref4.signal;a=t||[0,0,this.getWidth(),this.getHeight()];if(!(a[0]>a[2]||a[1]>a[3])){_context8.next=4;break;}throw new Error("Invalid subsets");case 4:h=this.fileDirectory.PhotometricInterpretation;if(!(h===_y.Ie.RGB)){_context8.next=9;break;}_a4=[0,1,2];if(this.fileDirectory.ExtraSamples!==_y.pd.Unspecified&&s){_a4=[];for(_t94=0;_t94<this.fileDirectory.BitsPerSample.length;_t94+=1){_a4.push(_t94);}}return _context8.abrupt("return",this.readRasters({window:t,interleave:n,samples:_a4,pool:i,width:r,height:e,resampleMethod:o,signal:u}));case 9:_context8.t0=h;_context8.next=_context8.t0===_y.Ie.WhiteIsZero?12:_context8.t0===_y.Ie.BlackIsZero?12:_context8.t0===_y.Ie.Palette?12:_context8.t0===_y.Ie.CMYK?14:_context8.t0===_y.Ie.YCbCr?16:_context8.t0===_y.Ie.CIELab?16:18;break;case 12:f=[0];return _context8.abrupt("break",19);case 14:f=[0,1,2,3];return _context8.abrupt("break",19);case 16:f=[0,1,2];return _context8.abrupt("break",19);case 18:throw new Error("Invalid or unsupported photometric interpretation.");case 19:c={window:a,interleave:!0,samples:f,pool:i,width:r,height:e,resampleMethod:o,signal:u};l=this.fileDirectory;_context8.next=23;return this.readRasters(c);case 23:v=_context8.sent;p=Math.pow(2,this.fileDirectory.BitsPerSample[0]);_context8.t1=h;_context8.next=_context8.t1===_y.Ie.WhiteIsZero?28:_context8.t1===_y.Ie.BlackIsZero?30:_context8.t1===_y.Ie.Palette?32:_context8.t1===_y.Ie.CMYK?34:_context8.t1===_y.Ie.YCbCr?36:_context8.t1===_y.Ie.CIELab?38:40;break;case 28:d=function(t,n){var i=t.width,r=t.height,e=new Uint8Array(i*r*3);var o;for(var _i18=0,_r7=0;_i18<t.length;++_i18,_r7+=3){o=256-t[_i18]/n*256,e[_r7]=o,e[_r7+1]=o,e[_r7+2]=o;}return e;}(v,p);return _context8.abrupt("break",41);case 30:d=function(t,n){var i=t.width,r=t.height,e=new Uint8Array(i*r*3);var o;for(var _i19=0,_r8=0;_i19<t.length;++_i19,_r8+=3){o=t[_i19]/n*256,e[_r8]=o,e[_r8+1]=o,e[_r8+2]=o;}return e;}(v,p);return _context8.abrupt("break",41);case 32:d=function(t,n){var i=t.width,r=t.height,e=new Uint8Array(i*r*3),o=n.length/3,s=n.length/3*2;for(var _i20=0,_r9=0;_i20<t.length;++_i20,_r9+=3){var _u7=t[_i20];e[_r9]=n[_u7]/65536*256,e[_r9+1]=n[_u7+o]/65536*256,e[_r9+2]=n[_u7+s]/65536*256;}return e;}(v,l.ColorMap);return _context8.abrupt("break",41);case 34:d=function(t){var n=t.width,i=t.height,r=new Uint8Array(n*i*3);for(var _n9=0,_i21=0;_n9<t.length;_n9+=4,_i21+=3){var _e11=t[_n9],_o5=t[_n9+1],_s10=t[_n9+2],_u8=t[_n9+3];r[_i21]=(255-_e11)/256*255*((255-_u8)/256),r[_i21+1]=(255-_o5)/256*255*((255-_u8)/256),r[_i21+2]=(255-_s10)/256*255*((255-_u8)/256);}return r;}(v);return _context8.abrupt("break",41);case 36:d=function(t){var n=t.width,i=t.height,r=new Uint8ClampedArray(n*i*3);for(var _n10=0,_i22=0;_n10<t.length;_n10+=3,_i22+=3){var _e12=t[_n10],_o6=t[_n10+1],_s11=t[_n10+2];r[_i22]=_e12+1.402*(_s11-128),r[_i22+1]=_e12-.34414*(_o6-128)-.71414*(_s11-128),r[_i22+2]=_e12+1.772*(_o6-128);}return r;}(v);return _context8.abrupt("break",41);case 38:d=function(t){var n=t.width,i=t.height,r=new Uint8Array(n*i*3);for(var _n11=0,_i23=0;_n11<t.length;_n11+=3,_i23+=3){var _e13=void 0,_o7=void 0,_s12=void 0,_u9=(t[_n11+0]+16)/116,_a5=(t[_n11+1]<<24>>24)/500+_u9,_h6=_u9-(t[_n11+2]<<24>>24)/200;_a5=.95047*(_a5*_a5*_a5>.008856?_a5*_a5*_a5:(_a5-16/116)/7.787),_u9=1*(_u9*_u9*_u9>.008856?_u9*_u9*_u9:(_u9-16/116)/7.787),_h6=1.08883*(_h6*_h6*_h6>.008856?_h6*_h6*_h6:(_h6-16/116)/7.787),_e13=3.2406*_a5+-1.5372*_u9+-.4986*_h6,_o7=-.9689*_a5+1.8758*_u9+.0415*_h6,_s12=.0557*_a5+-.204*_u9+1.057*_h6,_e13=_e13>.0031308?1.055*Math.pow(_e13,1/2.4)-.055:12.92*_e13,_o7=_o7>.0031308?1.055*Math.pow(_o7,1/2.4)-.055:12.92*_o7,_s12=_s12>.0031308?1.055*Math.pow(_s12,1/2.4)-.055:12.92*_s12,r[_i23]=255*Math.max(0,Math.min(1,_e13)),r[_i23+1]=255*Math.max(0,Math.min(1,_o7)),r[_i23+2]=255*Math.max(0,Math.min(1,_s12));}return r;}(v);return _context8.abrupt("break",41);case 40:throw new Error("Unsupported photometric interpretation.");case 41:if(!n){_t95=new Uint8Array(d.length/3),_n12=new Uint8Array(d.length/3),_i24=new Uint8Array(d.length/3);for(_r10=0,_e14=0;_r10<d.length;_r10+=3,++_e14){_t95[_e14]=d[_r10],_n12[_e14]=d[_r10+1],_i24[_e14]=d[_r10+2];}d=[_t95,_n12,_i24];}return _context8.abrupt("return",(d.width=v.width,d.height=v.height,d));case 43:case"end":return _context8.stop();}}},_callee8,this);}));function readRGB(){return _readRGB.apply(this,arguments);}return readRGB;}()},{key:"getTiePoints",value:function getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];var t=[];for(var _n13=0;_n13<this.fileDirectory.ModelTiepoint.length;_n13+=6){t.push({i:this.fileDirectory.ModelTiepoint[_n13],j:this.fileDirectory.ModelTiepoint[_n13+1],k:this.fileDirectory.ModelTiepoint[_n13+2],x:this.fileDirectory.ModelTiepoint[_n13+3],y:this.fileDirectory.ModelTiepoint[_n13+4],z:this.fileDirectory.ModelTiepoint[_n13+5]});}return t;}},{key:"getGDALMetadata",value:function getGDALMetadata(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var n={};if(!this.fileDirectory.GDAL_METADATA)return null;var i=this.fileDirectory.GDAL_METADATA;var r=My(i,"Item");r=null===t?r.filter(function(t){return void 0===xy(t,"sample");}):r.filter(function(n){return Number(xy(n,"sample"))===t;});for(var _t96=0;_t96<r.length;++_t96){var _i25=r[_t96];n[xy(_i25,"name")]=_i25.inner;}return n;}},{key:"getGDALNoData",value:function getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;var t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1));}},{key:"getOrigin",value:function getOrigin(){var t=this.fileDirectory.ModelTiepoint,n=this.fileDirectory.ModelTransformation;if(t&&6===t.length)return[t[3],t[4],t[5]];if(n)return[n[3],n[7],n[11]];throw new Error("The image does not have an affine transformation.");}},{key:"getResolution",value:function getResolution(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var n=this.fileDirectory.ModelPixelScale,i=this.fileDirectory.ModelTransformation;if(n)return[n[0],-n[1],n[2]];if(i)return[i[0],i[5],i[10]];if(t){var _t$getResolution=t.getResolution(),_t$getResolution2=_slicedToArray(_t$getResolution,3),_n14=_t$getResolution2[0],_i26=_t$getResolution2[1],_r11=_t$getResolution2[2];return[_n14*t.getWidth()/this.getWidth(),_i26*t.getHeight()/this.getHeight(),_r11*t.getWidth()/this.getWidth()];}throw new Error("The image does not have an affine transformation.");}},{key:"pixelIsArea",value:function pixelIsArea(){return 1===this.geoKeys.GTRasterTypeGeoKey;}},{key:"getBoundingBox",value:function getBoundingBox(){var t=this.getOrigin(),n=this.getResolution(),i=t[0],r=t[1],e=i+n[0]*this.getWidth(),o=r+n[1]*this.getHeight();return[Math.min(i,e),Math.min(r,o),Math.max(i,e),Math.max(r,o)];}}]);return ky;}();var Ny=/*#__PURE__*/function(){function Ny(t){_classCallCheck(this,Ny);this._dataView=new DataView(t);}_createClass(Ny,[{key:"buffer",get:function get(){return this._dataView.buffer;}},{key:"getUint64",value:function getUint64(t,n){var i=this.getUint32(t,n),r=this.getUint32(t+4,n);var e;if(n){if(e=i+Math.pow(2,32)*r,!Number.isSafeInteger(e))throw new Error("".concat(e," exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues"));return e;}if(e=Math.pow(2,32)*i+r,!Number.isSafeInteger(e))throw new Error("".concat(e," exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues"));return e;}},{key:"getInt64",value:function getInt64(t,n){var i=0;var r=(128&this._dataView.getUint8(t+(n?7:0)))>0;var e=!0;for(var _o8=0;_o8<8;_o8++){var s=this._dataView.getUint8(t+(n?_o8:7-_o8));r&&(e?0!==s&&(s=255&~(s-1),e=!1):s=255&~s),i+=s*Math.pow(256,_o8);}return r&&(i=-i),i;}},{key:"getUint8",value:function getUint8(t,n){return this._dataView.getUint8(t,n);}},{key:"getInt8",value:function getInt8(t,n){return this._dataView.getInt8(t,n);}},{key:"getUint16",value:function getUint16(t,n){return this._dataView.getUint16(t,n);}},{key:"getInt16",value:function getInt16(t,n){return this._dataView.getInt16(t,n);}},{key:"getUint32",value:function getUint32(t,n){return this._dataView.getUint32(t,n);}},{key:"getInt32",value:function getInt32(t,n){return this._dataView.getInt32(t,n);}},{key:"getFloat16",value:function getFloat16(t,n){return by(this._dataView,t,n);}},{key:"getFloat32",value:function getFloat32(t,n){return this._dataView.getFloat32(t,n);}},{key:"getFloat64",value:function getFloat64(t,n){return this._dataView.getFloat64(t,n);}}]);return Ny;}();var Iy=/*#__PURE__*/function(){function Iy(t,n,i,r){_classCallCheck(this,Iy);this._dataView=new DataView(t),this._sliceOffset=n,this._littleEndian=i,this._bigTiff=r;}_createClass(Iy,[{key:"sliceOffset",get:function get(){return this._sliceOffset;}},{key:"sliceTop",get:function get(){return this._sliceOffset+this.buffer.byteLength;}},{key:"littleEndian",get:function get(){return this._littleEndian;}},{key:"bigTiff",get:function get(){return this._bigTiff;}},{key:"buffer",get:function get(){return this._dataView.buffer;}},{key:"covers",value:function covers(t,n){return this.sliceOffset<=t&&this.sliceTop>=t+n;}},{key:"readUint8",value:function readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian);}},{key:"readInt8",value:function readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian);}},{key:"readUint16",value:function readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian);}},{key:"readInt16",value:function readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian);}},{key:"readUint32",value:function readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian);}},{key:"readInt32",value:function readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian);}},{key:"readFloat32",value:function readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian);}},{key:"readFloat64",value:function readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian);}},{key:"readUint64",value:function readUint64(t){var n=this.readUint32(t),i=this.readUint32(t+4);var r;if(this._littleEndian){if(r=n+Math.pow(2,32)*i,!Number.isSafeInteger(r))throw new Error("".concat(r," exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues"));return r;}if(r=Math.pow(2,32)*n+i,!Number.isSafeInteger(r))throw new Error("".concat(r," exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues"));return r;}},{key:"readInt64",value:function readInt64(t){var n=0;var i=(128&this._dataView.getUint8(t+(this._littleEndian?7:0)))>0;var r=!0;for(var _e15=0;_e15<8;_e15++){var _o9=this._dataView.getUint8(t+(this._littleEndian?_e15:7-_e15));i&&(r?0!==_o9&&(_o9=255&~(_o9-1),r=!1):_o9=255&~_o9),n+=_o9*Math.pow(256,_e15);}return i&&(n=-n),n;}},{key:"readOffset",value:function readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t);}}]);return Iy;}();var zy="\r\n\r\n";function Ly(t){if(void 0!==Object.fromEntries)return Object.fromEntries(t);var n={};var _iterator2=_createForOfIteratorHelper(t),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=_slicedToArray(_step2.value,2),_i27=_step2$value[0],_r12=_step2$value[1];n[_i27.toLowerCase()]=_r12;}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return n;}function Ry(t){var n=t.split("\r\n").map(function(t){var n=t.split(":").map(function(t){return t.trim();});return n[0]=n[0].toLowerCase(),n;});return Ly(n);}function Fy(t){var _t$match,_t$match2;var n,i,r;return t&&((_t$match=t.match(/bytes (\d+)-(\d+)\/(\d+)/),_t$match2=_slicedToArray(_t$match,4),n=_t$match2[1],i=_t$match2[2],r=_t$match2[3]),n=parseInt(n,10),i=parseInt(i,10),r=parseInt(r,10)),{start:n,end:i,total:r};}var Gy=/*#__PURE__*/function(){function Gy(){_classCallCheck(this,Gy);}_createClass(Gy,[{key:"fetch",value:function(){var _fetch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(t){var _this9=this;var n,_args9=arguments;return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:n=_args9.length>1&&void 0!==_args9[1]?_args9[1]:void 0;return _context9.abrupt("return",Promise.all(t.map(function(t){return _this9.fetchSlice(t,n);})));case 2:case"end":return _context9.stop();}}},_callee9);}));function fetch(_x19){return _fetch.apply(this,arguments);}return fetch;}()},{key:"fetchSlice",value:function(){var _fetchSlice=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(t){return _regeneratorRuntime().wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:throw new Error("fetching of slice ".concat(t," not possible, not implemented"));case 1:case"end":return _context10.stop();}}},_callee10);}));function fetchSlice(_x20){return _fetchSlice.apply(this,arguments);}return fetchSlice;}()},{key:"fileSize",get:function get(){return null;}},{key:"close",value:function(){var _close=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11(){return _regeneratorRuntime().wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:case"end":return _context11.stop();}}},_callee11);}));function close(){return _close.apply(this,arguments);}return close;}()}]);return Gy;}();var Dy=i(875);function qy(t,n){var i=Array.isArray(t)?t:Array.from(t),r=Array.isArray(n)?n:Array.from(n);return i.map(function(t,n){return[t,r[n]];});}var Uy=/*#__PURE__*/function(_Error){_inherits(Uy,_Error);var _super=_createSuper(Uy);function Uy(t){var _this10;_classCallCheck(this,Uy);_this10=_super.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(_assertThisInitialized(_this10),Uy),_this10.name="AbortError";return _this10;}return _createClass(Uy);}(/*#__PURE__*/_wrapNativeSuper(Error));var By=/*#__PURE__*/function(_Error2){_inherits(By,_Error2);var _super2=_createSuper(By);function By(t,n){var _this11;_classCallCheck(this,By);_this11=_super2.call(this,n),_this11.errors=t,_this11.message=n,_this11.name="AggregateError";return _this11;}return _createClass(By);}(/*#__PURE__*/_wrapNativeSuper(Error));var Xy=By;var Vy=/*#__PURE__*/function(){function Vy(t,n){_classCallCheck(this,Vy);var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.offset=t,this.length=n,this.data=i;}_createClass(Vy,[{key:"top",get:function get(){return this.offset+this.length;}}]);return Vy;}();var Wy=/*#__PURE__*/_createClass(function Wy(t,n,i){_classCallCheck(this,Wy);this.offset=t,this.length=n,this.blockIds=i;});var Yy=/*#__PURE__*/function(_Gy){_inherits(Yy,_Gy);var _super3=_createSuper(Yy);function Yy(t){var _this12;_classCallCheck(this,Yy);var _ref5=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref5$blockSize=_ref5.blockSize,n=_ref5$blockSize===void 0?65536:_ref5$blockSize,_ref5$cacheSize=_ref5.cacheSize,i=_ref5$cacheSize===void 0?100:_ref5$cacheSize;_this12=_super3.call(this),_this12.source=t,_this12.blockSize=n,_this12.blockCache=new Dy({max:i}),_this12.blockRequests=new Map(),_this12.blockIdsToFetch=new Set();return _this12;}_createClass(Yy,[{key:"fileSize",get:function get(){return this.source.fileSize;}},{key:"fetch",value:function(){var _fetch2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee13(t,n){var i,r,e,_iterator3,_step3,_step3$value,_n16,_o11,_t99,_s13,_o12,_t100,_iterator4,_step4,_t101,_n17,_e17,o,_t97,_iterator5,_step5,_step5$value,_i28,_e16,_r13,_o10,_iterator6,_step6,_n15,_t98,s,u,_iterator7,_step7,_step7$value,_t102,_n18;return _regeneratorRuntime().wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:i=new Map(),r=new Map(),e=new Set();_iterator3=_createForOfIteratorHelper(t);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){_step3$value=_step3.value,_n16=_step3$value.offset,_o11=_step3$value.length;_t99=_n16+_o11;_s13=this.fileSize;null!==_s13&&(_t99=Math.min(_t99,_s13));for(_o12=Math.floor(_n16/this.blockSize)*this.blockSize;_o12<_t99;_o12+=this.blockSize){_t100=Math.floor(_o12/this.blockSize);this.blockCache.has(_t100)?i.set(_t100,this.blockCache.get(_t100)):this.blockRequests.has(_t100)?r.set(_t100,this.blockRequests.get(_t100)):(this.blockIdsToFetch.has(_t100)||this.blockIdsToFetch.add(_t100),e.add(_t100));}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_context13.next=5;return function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee12(t){return _regeneratorRuntime().wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:return _context12.abrupt("return",new Promise(function(n){return setTimeout(n,t);}));case 1:case"end":return _context12.stop();}}},_callee12);}));return function(_x23){return _ref6.apply(this,arguments);};}()();case 5:this.fetchBlocks(n);_iterator4=_createForOfIteratorHelper(e);_context13.prev=7;_iterator4.s();case 9:if((_step4=_iterator4.n()).done){_context13.next=21;break;}_t101=_step4.value;_n17=this.blockRequests.get(_t101),_e17=this.blockCache.get(_t101);if(!_n17){_context13.next=16;break;}r.set(_t101,_n17);_context13.next=19;break;case 16:if(_e17){_context13.next=18;break;}throw new Error("Block ".concat(_t101," is not in the block requests"));case 18:i.set(_t101,_e17);case 19:_context13.next=9;break;case 21:_context13.next=26;break;case 23:_context13.prev=23;_context13.t0=_context13["catch"](7);_iterator4.e(_context13.t0);case 26:_context13.prev=26;_iterator4.f();return _context13.finish(26);case 29:_context13.next=31;return Promise.allSettled(Array.from(r.values()));case 31:o=_context13.sent;if(!o.some(function(t){return"rejected"===t.status;})){_context13.next=60;break;}_t97=new Set();_iterator5=_createForOfIteratorHelper(qy(r.keys(),o));try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){_step5$value=_slicedToArray(_step5.value,2),_i28=_step5$value[0],_e16=_step5$value[1];_r13=_e16.rejected,_o10=_e16.reason;_r13&&"AbortError"===_o10.name&&_o10.signal!==n&&(this.blockIdsToFetch.add(_i28),_t97.add(_i28));}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}if(!(this.blockIdsToFetch.length>0)){_context13.next=60;break;}this.fetchBlocks(n);_iterator6=_createForOfIteratorHelper(_t97);_context13.prev=39;_iterator6.s();case 41:if((_step6=_iterator6.n()).done){_context13.next=49;break;}_n15=_step6.value;_t98=this.blockRequests.get(_n15);if(_t98){_context13.next=46;break;}throw new Error("Block ".concat(_n15," is not in the block requests"));case 46:r.set(_n15,_t98);case 47:_context13.next=41;break;case 49:_context13.next=54;break;case 51:_context13.prev=51;_context13.t1=_context13["catch"](39);_iterator6.e(_context13.t1);case 54:_context13.prev=54;_iterator6.f();return _context13.finish(54);case 57:_context13.next=59;return Promise.allSettled(Array.from(r.values()));case 59:o=_context13.sent;case 60:if(!o.some(function(t){return"rejected"===t.status;})){_context13.next=64;break;}if(!(n&&n.aborted)){_context13.next=63;break;}throw new Uy("Request was aborted");case 63:throw new Xy(o.filter(function(t){return"rejected"===t.status;}).map(function(t){return t.reason;}),"Request failed");case 64:s=o.map(function(t){return t.value;}),u=new Map(qy(Array.from(r.keys()),s));_iterator7=_createForOfIteratorHelper(i);try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){_step7$value=_slicedToArray(_step7.value,2),_t102=_step7$value[0],_n18=_step7$value[1];u.set(_t102,_n18);}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}return _context13.abrupt("return",this.readSliceData(t,u));case 68:case"end":return _context13.stop();}}},_callee13,this,[[7,23,26,29],[39,51,54,57]]);}));function fetch(_x21,_x22){return _fetch2.apply(this,arguments);}return fetch;}()},{key:"fetchBlocks",value:function fetchBlocks(t){var _this13=this;if(this.blockIdsToFetch.size>0){(function(){var n=_this13.groupBlocks(_this13.blockIdsToFetch),i=_this13.source.fetch(n,t);var _loop2=function _loop2(_r14){var e=n[_r14];var _iterator8=_createForOfIteratorHelper(e.blockIds),_step8;try{var _loop3=function _loop3(){var n=_step8.value;var e=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee14(){var _t103,_e18,_o13,s,u,_a6;return _regeneratorRuntime().wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.prev=0;_context14.next=3;return i;case 3:_context14.t0=_r14;_t103=_context14.sent[_context14.t0];_e18=n*_this13.blockSize;_o13=_e18-_t103.offset;s=Math.min(_o13+_this13.blockSize,_t103.data.byteLength);u=_t103.data.slice(_o13,s);_a6=new Vy(_e18,u.byteLength,u);return _context14.abrupt("return",(_this13.blockCache.set(n,_a6),_a6));case 13:_context14.prev=13;_context14.t1=_context14["catch"](0);throw"AbortError"===_context14.t1.name&&(_context14.t1.signal=t),_context14.t1;case 16:_context14.prev=16;_this13.blockRequests.delete(n);return _context14.finish(16);case 19:case"end":return _context14.stop();}}},_callee14,null,[[0,13,16,19]]);}))();_this13.blockRequests.set(n,e);};for(_iterator8.s();!(_step8=_iterator8.n()).done;){_loop3();}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}};for(var _r14=0;_r14<n.length;++_r14){_loop2(_r14);}_this13.blockIdsToFetch.clear();})();}}},{key:"groupBlocks",value:function groupBlocks(t){var n=Array.from(t).sort(function(t,n){return t-n;});if(0===n.length)return[];var i=[],r=null;var e=[];var _iterator9=_createForOfIteratorHelper(n),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _t104=_step9.value;null===r||r+1===_t104?(i.push(_t104),r=_t104):(e.push(new Wy(i[0]*this.blockSize,i.length*this.blockSize,i)),i=[_t104],r=_t104);}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}return e.push(new Wy(i[0]*this.blockSize,i.length*this.blockSize,i)),e;}},{key:"readSliceData",value:function readSliceData(t,n){var _this14=this;return t.map(function(t){var i=t.offset+t.length,r=Math.floor(t.offset/_this14.blockSize),e=Math.floor((t.offset+t.length)/_this14.blockSize),o=new ArrayBuffer(t.length),s=new Uint8Array(o);for(var _o14=r;_o14<=e;++_o14){var _r15=n.get(_o14),_e19=_r15.offset-t.offset,u=_r15.top-i;var _a7=void 0,_h7=0,_f6=0;_e19<0?_h7=-_e19:_e19>0&&(_f6=_e19),_a7=u<0?_r15.length-_h7:i-_r15.offset-_h7;var _c6=new Uint8Array(_r15.data,_h7,_a7);s.set(_c6,_f6);}return o;});}}]);return Yy;}(Gy);var Ky=/*#__PURE__*/function(){function Ky(){_classCallCheck(this,Ky);}_createClass(Ky,[{key:"ok",get:function get(){return this.status>=200&&this.status<=299;}},{key:"status",get:function get(){throw new Error("not implemented");}},{key:"getHeader",value:function getHeader(t){throw new Error("not implemented");}},{key:"getData",value:function(){var _getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee15(){return _regeneratorRuntime().wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:throw new Error("not implemented");case 1:case"end":return _context15.stop();}}},_callee15);}));function getData(){return _getData.apply(this,arguments);}return getData;}()}]);return Ky;}();var Zy=/*#__PURE__*/function(){function Zy(t){_classCallCheck(this,Zy);this.url=t;}_createClass(Zy,[{key:"request",value:function(){var _request=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee16(){var _ref8,t,n,i,_args16=arguments;return _regeneratorRuntime().wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_ref8=_args16.length>0&&void 0!==_args16[0]?_args16[0]:{},t=_ref8.headers,n=_ref8.credentials,i=_ref8.signal;throw new Error("request is not implemented");case 2:case"end":return _context16.stop();}}},_callee16);}));function request(){return _request.apply(this,arguments);}return request;}()}]);return Zy;}();var $y=/*#__PURE__*/function(_Ky){_inherits($y,_Ky);var _super4=_createSuper($y);function $y(t){var _this15;_classCallCheck(this,$y);_this15=_super4.call(this),_this15.response=t;return _this15;}_createClass($y,[{key:"status",get:function get(){return this.response.status;}},{key:"getHeader",value:function getHeader(t){return this.response.headers.get(t);}},{key:"getData",value:function(){var _getData2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee17(){return _regeneratorRuntime().wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:if(!this.response.arrayBuffer){_context17.next=6;break;}_context17.next=3;return this.response.arrayBuffer();case 3:_context17.t0=_context17.sent;_context17.next=9;break;case 6:_context17.next=8;return this.response.buffer();case 8:_context17.t0=_context17.sent.buffer;case 9:return _context17.abrupt("return",_context17.t0);case 10:case"end":return _context17.stop();}}},_callee17,this);}));function getData(){return _getData2.apply(this,arguments);}return getData;}()}]);return $y;}(Ky);var Hy=/*#__PURE__*/function(_Zy){_inherits(Hy,_Zy);var _super5=_createSuper(Hy);function Hy(t,n){var _this16;_classCallCheck(this,Hy);_this16=_super5.call(this,t),_this16.credentials=n;return _this16;}_createClass(Hy,[{key:"request",value:function(){var _request2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee18(){var _ref9,t,n,i,r,_args18=arguments;return _regeneratorRuntime().wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:_ref9=_args18.length>0&&void 0!==_args18[0]?_args18[0]:{},t=_ref9.headers,n=_ref9.credentials,i=_ref9.signal;_context18.next=3;return fetch(this.url,{headers:t,credentials:n,signal:i});case 3:r=_context18.sent;return _context18.abrupt("return",new $y(r));case 5:case"end":return _context18.stop();}}},_callee18,this);}));function request(){return _request2.apply(this,arguments);}return request;}()}]);return Hy;}(Zy);var Jy=/*#__PURE__*/function(_Ky2){_inherits(Jy,_Ky2);var _super6=_createSuper(Jy);function Jy(t,n){var _this17;_classCallCheck(this,Jy);_this17=_super6.call(this),_this17.xhr=t,_this17.data=n;return _this17;}_createClass(Jy,[{key:"status",get:function get(){return this.xhr.status;}},{key:"getHeader",value:function getHeader(t){return this.xhr.getResponseHeader(t);}},{key:"getData",value:function(){var _getData3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee19(){return _regeneratorRuntime().wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:return _context19.abrupt("return",this.data);case 1:case"end":return _context19.stop();}}},_callee19,this);}));function getData(){return _getData3.apply(this,arguments);}return getData;}()}]);return Jy;}(Ky);var Qy=/*#__PURE__*/function(_Zy2){_inherits(Qy,_Zy2);var _super7=_createSuper(Qy);function Qy(){_classCallCheck(this,Qy);return _super7.apply(this,arguments);}_createClass(Qy,[{key:"constructRequest",value:function constructRequest(t,n){var _this18=this;return new Promise(function(i,r){var e=new XMLHttpRequest();e.open("GET",_this18.url),e.responseType="arraybuffer";for(var _i29=0,_Object$entries=Object.entries(t);_i29<_Object$entries.length;_i29++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i29],2),_n19=_Object$entries$_i[0],_i30=_Object$entries$_i[1];e.setRequestHeader(_n19,_i30);}e.onload=function(){var t=e.response;i(new Jy(e,t));},e.onerror=r,e.onabort=function(){return r(new Uy("Request aborted"));},e.send(),n&&(n.aborted&&e.abort(),n.addEventListener("abort",function(){return e.abort();}));});}},{key:"request",value:function(){var _request3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee20(){var _ref10,t,n,_args20=arguments;return _regeneratorRuntime().wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:_ref10=_args20.length>0&&void 0!==_args20[0]?_args20[0]:{},t=_ref10.headers,n=_ref10.signal;_context20.next=3;return this.constructRequest(t,n);case 3:return _context20.abrupt("return",_context20.sent);case 4:case"end":return _context20.stop();}}},_callee20,this);}));function request(){return _request3.apply(this,arguments);}return request;}()}]);return Qy;}(Zy);var tm=i(752),nm=i(640),im=i(630);var rm=/*#__PURE__*/function(_Ky3){_inherits(rm,_Ky3);var _super8=_createSuper(rm);function rm(t,n){var _this19;_classCallCheck(this,rm);_this19=_super8.call(this),_this19.response=t,_this19.dataPromise=n;return _this19;}_createClass(rm,[{key:"status",get:function get(){return this.response.statusCode;}},{key:"getHeader",value:function getHeader(t){return this.response.headers[t];}},{key:"getData",value:function(){var _getData4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee21(){return _regeneratorRuntime().wrap(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:_context21.next=2;return this.dataPromise;case 2:return _context21.abrupt("return",_context21.sent);case 3:case"end":return _context21.stop();}}},_callee21,this);}));function getData(){return _getData4.apply(this,arguments);}return getData;}()}]);return rm;}(Ky);var em=/*#__PURE__*/function(_Zy3){_inherits(em,_Zy3);var _super9=_createSuper(em);function em(t){var _this20;_classCallCheck(this,em);_this20=_super9.call(this,t),_this20.parsedUrl=im.parse(_this20.url),_this20.httpApi="http:"===_this20.parsedUrl.protocol?tm:nm;return _this20;}_createClass(em,[{key:"constructRequest",value:function constructRequest(t,n){var _this21=this;return new Promise(function(i,r){var e=_this21.httpApi.get(_objectSpread(_objectSpread({},_this21.parsedUrl),{},{headers:t}),function(t){var n=new Promise(function(n){var i=[];t.on("data",function(t){i.push(t);}),t.on("end",function(){var t=Buffer.concat(i).buffer;n(t);}),t.on("error",r);});i(new rm(t,n));});e.on("error",r),n&&(n.aborted&&e.destroy(new Uy("Request aborted")),n.addEventListener("abort",function(){return e.destroy(new Uy("Request aborted"));}));});}},{key:"request",value:function(){var _request4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee22(){var _ref11,t,n,_args22=arguments;return _regeneratorRuntime().wrap(function _callee22$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:_ref11=_args22.length>0&&void 0!==_args22[0]?_args22[0]:{},t=_ref11.headers,n=_ref11.signal;_context22.next=3;return this.constructRequest(t,n);case 3:return _context22.abrupt("return",_context22.sent);case 4:case"end":return _context22.stop();}}},_callee22,this);}));function request(){return _request4.apply(this,arguments);}return request;}()}]);return em;}(Zy);var om=/*#__PURE__*/function(_Gy2){_inherits(om,_Gy2);var _super10=_createSuper(om);function om(t,n,i,r){var _this22;_classCallCheck(this,om);_this22=_super10.call(this),_this22.client=t,_this22.headers=n,_this22.maxRanges=i,_this22.allowFullFile=r,_this22._fileSize=null;return _this22;}_createClass(om,[{key:"fetch",value:function(){var _fetch3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee23(t,n){var _this23=this;return _regeneratorRuntime().wrap(function _callee23$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:return _context23.abrupt("return",this.maxRanges>=t.length?this.fetchSlices(t,n):(this.maxRanges>0&&t.length,Promise.all(t.map(function(t){return _this23.fetchSlice(t,n);}))));case 1:case"end":return _context23.stop();}}},_callee23,this);}));function fetch(_x24,_x25){return _fetch3.apply(this,arguments);}return fetch;}()},{key:"fetchSlices",value:function(){var _fetchSlices=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee24(t,n){var _this24=this;var i,_ref12,_r16,_e20,_t105,_o15,_Fy2,s,u,_a8,_h8,_i31,_t106;return _regeneratorRuntime().wrap(function _callee24$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:_context24.next=2;return this.client.request({headers:_objectSpread(_objectSpread({},this.headers),{},{Range:"bytes=".concat(t.map(function(t){var n=t.offset,i=t.length;return"".concat(n,"-").concat(n+i);}).join(","))}),signal:n});case 2:i=_context24.sent;if(!i.ok){_context24.next=35;break;}if(!(206===i.status)){_context24.next=29;break;}_ref12=function(t){var _t$split$map=t.split(";").map(function(t){return t.trim();}),_t$split$map2=_toArray(_t$split$map),n=_t$split$map2[0],i=_t$split$map2.slice(1);return{type:n,params:Ly(i.map(function(t){return t.split("=");}))};}(i.getHeader("content-type")),_r16=_ref12.type,_e20=_ref12.params;if(!("multipart/byteranges"===_r16)){_context24.next=14;break;}_context24.t0=function(t,n){var i=null;var r=new TextDecoder("ascii"),e=[],o="--".concat(n),s="".concat(o,"--");for(var _n20=0;_n20<10;++_n20){r.decode(new Uint8Array(t,_n20,o.length))===o&&(i=_n20);}if(null===i)throw new Error("Could not find initial boundary");for(;i<t.byteLength;){var _n21=r.decode(new Uint8Array(t,i,Math.min(o.length+1024,t.byteLength-i)));if(0===_n21.length||_n21.startsWith(s))break;if(!_n21.startsWith(o))throw new Error("Part does not start with boundary");var _u10=_n21.substr(o.length+2);if(0===_u10.length)break;var _a9=_u10.indexOf(zy),_h9=Ry(_u10.substr(0,_a9)),_Fy=Fy(_h9["content-range"]),_f7=_Fy.start,_c7=_Fy.end,_l5=_Fy.total,_v5=i+o.length+_a9+zy.length,_p4=parseInt(_c7,10)+1-parseInt(_f7,10);e.push({headers:_h9,data:t.slice(_v5,_v5+_p4),offset:_f7,length:_p4,fileSize:_l5}),i=_v5+_p4+4;}return e;};_context24.next=10;return i.getData();case 10:_context24.t1=_context24.sent;_context24.t2=_e20.boundary;_t105=(0,_context24.t0)(_context24.t1,_context24.t2);return _context24.abrupt("return",(this._fileSize=_t105[0].fileSize||null,_t105));case 14:_context24.next=16;return i.getData();case 16:_o15=_context24.sent;_Fy2=Fy(i.getHeader("content-range"));s=_Fy2.start;u=_Fy2.end;_a8=_Fy2.total;this._fileSize=_a8||null;_h8=[{data:_o15,offset:s,length:u-s}];if(!(t.length>1)){_context24.next=28;break;}_context24.next=26;return Promise.all(t.slice(1).map(function(t){return _this24.fetchSlice(t,n);}));case 26:_i31=_context24.sent;return _context24.abrupt("return",_h8.concat(_i31));case 28:return _context24.abrupt("return",_h8);case 29:if(this.allowFullFile){_context24.next=31;break;}throw new Error("Server responded with full file");case 31:_context24.next=33;return i.getData();case 33:_t106=_context24.sent;return _context24.abrupt("return",(this._fileSize=_t106.byteLength,[{data:_t106,offset:0,length:_t106.byteLength}]));case 35:throw new Error("Error fetching data.");case 36:case"end":return _context24.stop();}}},_callee24,this);}));function fetchSlices(_x26,_x27){return _fetchSlices.apply(this,arguments);}return fetchSlices;}()},{key:"fetchSlice",value:function(){var _fetchSlice2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee25(t,n){var i,r,e,_t107,_Fy3,_n22,_t108;return _regeneratorRuntime().wrap(function _callee25$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:i=t.offset;r=t.length;_context25.next=4;return this.client.request({headers:_objectSpread(_objectSpread({},this.headers),{},{Range:"bytes=".concat(i,"-").concat(i+r)}),signal:n});case 4:e=_context25.sent;if(!e.ok){_context25.next=19;break;}if(!(206===e.status)){_context25.next=13;break;}_context25.next=9;return e.getData();case 9:_t107=_context25.sent;_Fy3=Fy(e.getHeader("content-range"));_n22=_Fy3.total;return _context25.abrupt("return",(this._fileSize=_n22||null,{data:_t107,offset:i,length:r}));case 13:if(this.allowFullFile){_context25.next=15;break;}throw new Error("Server responded with full file");case 15:_context25.next=17;return e.getData();case 17:_t108=_context25.sent;return _context25.abrupt("return",(this._fileSize=_t108.byteLength,{data:_t108,offset:0,length:_t108.byteLength}));case 19:throw new Error("Error fetching data.");case 20:case"end":return _context25.stop();}}},_callee25,this);}));function fetchSlice(_x28,_x29){return _fetchSlice2.apply(this,arguments);}return fetchSlice;}()},{key:"fileSize",get:function get(){return this._fileSize;}}]);return om;}(Gy);function sm(t,n){var i=n.blockSize,r=n.cacheSize;return null===i?t:new Yy(t,i,r);}function um(t){var _ref13=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref13$headers=_ref13.headers,n=_ref13$headers===void 0?{}:_ref13$headers,i=_ref13.credentials,_ref13$maxRanges=_ref13.maxRanges,r=_ref13$maxRanges===void 0?0:_ref13$maxRanges,_ref13$allowFullFile=_ref13.allowFullFile,e=_ref13$allowFullFile===void 0?!1:_ref13$allowFullFile,o=_objectWithoutProperties(_ref13,_excluded);var s=new Hy(t,i),u=new om(s,n,r,e);return sm(u,o);}function am(t){var _ref14=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref14$headers=_ref14.headers,n=_ref14$headers===void 0?{}:_ref14$headers,_ref14$maxRanges=_ref14.maxRanges,i=_ref14$maxRanges===void 0?0:_ref14$maxRanges,_ref14$allowFullFile=_ref14.allowFullFile,r=_ref14$allowFullFile===void 0?!1:_ref14$allowFullFile,e=_objectWithoutProperties(_ref14,_excluded2);var o=new Qy(t),s=new om(o,n,i,r);return sm(s,e);}function hm(t){var _ref15=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref15$headers=_ref15.headers,n=_ref15$headers===void 0?{}:_ref15$headers,_ref15$maxRanges=_ref15.maxRanges,i=_ref15$maxRanges===void 0?0:_ref15$maxRanges,_ref15$allowFullFile=_ref15.allowFullFile,r=_ref15$allowFullFile===void 0?!1:_ref15$allowFullFile,e=_objectWithoutProperties(_ref15,_excluded3);var o=new em(t),s=new om(o,n,i,r);return sm(s,e);}function fm(t){var _ref16=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref16$forceXHR=_ref16.forceXHR,n=_ref16$forceXHR===void 0?!1:_ref16$forceXHR,i=_objectWithoutProperties(_ref16,_excluded4);return"function"!=typeof fetch||n?"undefined"!=typeof XMLHttpRequest?am(t,i):hm(t,i):um(t,i);}var cm=/*#__PURE__*/function(_Gy3){_inherits(cm,_Gy3);var _super11=_createSuper(cm);function cm(t){var _this25;_classCallCheck(this,cm);_this25=_super11.call(this),_this25.file=t;return _this25;}_createClass(cm,[{key:"fetchSlice",value:function(){var _fetchSlice3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee26(t,n){var _this26=this;return _regeneratorRuntime().wrap(function _callee26$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:return _context26.abrupt("return",new Promise(function(i,r){var e=_this26.file.slice(t.offset,t.offset+t.length),o=new FileReader();o.onload=function(t){return i(t.target.result);},o.onerror=r,o.onabort=r,o.readAsArrayBuffer(e),n&&n.addEventListener("abort",function(){return o.abort();});}));case 1:case"end":return _context26.stop();}}},_callee26);}));function fetchSlice(_x30,_x31){return _fetchSlice3.apply(this,arguments);}return fetchSlice;}()}]);return cm;}(Gy);function lm(t){switch(t){case _y.sf.BYTE:case _y.sf.ASCII:case _y.sf.SBYTE:case _y.sf.UNDEFINED:return 1;case _y.sf.SHORT:case _y.sf.SSHORT:return 2;case _y.sf.LONG:case _y.sf.SLONG:case _y.sf.FLOAT:case _y.sf.IFD:return 4;case _y.sf.RATIONAL:case _y.sf.SRATIONAL:case _y.sf.DOUBLE:case _y.sf.LONG8:case _y.sf.SLONG8:case _y.sf.IFD8:return 8;default:throw new RangeError("Invalid field type: ".concat(t));}}function vm(t,n,i,r){var e=null,o=null;var s=lm(n);switch(n){case _y.sf.BYTE:case _y.sf.ASCII:case _y.sf.UNDEFINED:e=new Uint8Array(i),o=t.readUint8;break;case _y.sf.SBYTE:e=new Int8Array(i),o=t.readInt8;break;case _y.sf.SHORT:e=new Uint16Array(i),o=t.readUint16;break;case _y.sf.SSHORT:e=new Int16Array(i),o=t.readInt16;break;case _y.sf.LONG:case _y.sf.IFD:e=new Uint32Array(i),o=t.readUint32;break;case _y.sf.SLONG:e=new Int32Array(i),o=t.readInt32;break;case _y.sf.LONG8:case _y.sf.IFD8:e=new Array(i),o=t.readUint64;break;case _y.sf.SLONG8:e=new Array(i),o=t.readInt64;break;case _y.sf.RATIONAL:e=new Uint32Array(2*i),o=t.readUint32;break;case _y.sf.SRATIONAL:e=new Int32Array(2*i),o=t.readInt32;break;case _y.sf.FLOAT:e=new Float32Array(i),o=t.readFloat32;break;case _y.sf.DOUBLE:e=new Float64Array(i),o=t.readFloat64;break;default:throw new RangeError("Invalid field type: ".concat(n));}if(n!==_y.sf.RATIONAL&&n!==_y.sf.SRATIONAL)for(var _n23=0;_n23<i;++_n23){e[_n23]=o.call(t,r+_n23*s);}else for(var _n24=0;_n24<i;_n24+=2){e[_n24]=o.call(t,r+_n24*s),e[_n24+1]=o.call(t,r+(_n24*s+4));}return n===_y.sf.ASCII?new TextDecoder("utf-8").decode(e):e;}var pm=/*#__PURE__*/_createClass(function pm(t,n,i){_classCallCheck(this,pm);this.fileDirectory=t,this.geoKeyDirectory=n,this.nextIFDByteOffset=i;});var dm=/*#__PURE__*/function(_Error3){_inherits(dm,_Error3);var _super12=_createSuper(dm);function dm(t){var _this27;_classCallCheck(this,dm);_this27=_super12.call(this,"No image at index ".concat(t)),_this27.index=t;return _this27;}return _createClass(dm);}(/*#__PURE__*/_wrapNativeSuper(Error));var ym=/*#__PURE__*/function(){function ym(){_classCallCheck(this,ym);}_createClass(ym,[{key:"readRasters",value:function(){var _readRasters2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee27(){var t,n,i,r,e,o,s,u,a,h,f,_u$getOrigin,_u$getOrigin2,_t110,_i32,_u$getResolution,_u$getResolution2,_r17,_e21,_t109,_t111,_n25,_i33,_i33$fileDirectory,_r18,_e22,_n26,_i34,_r19,_s14,c,_u$getOrigin3,_u$getOrigin4,_t112,_n27,_a$getResolution,_a$getResolution2,_i35,_r20,_args27=arguments;return _regeneratorRuntime().wrap(function _callee27$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:t=_args27.length>0&&void 0!==_args27[0]?_args27[0]:{};n=t.window,i=t.width,r=t.height;e=t.resX,o=t.resY,s=t.bbox;_context27.next=5;return this.getImage();case 5:u=_context27.sent;a=u;_context27.next=9;return this.getImageCount();case 9:h=_context27.sent;f=u.getBoundingBox();if(!(n&&s)){_context27.next=13;break;}throw new Error('Both "bbox" and "window" passed.');case 13:if(!(i||r)){_context27.next=24;break;}if(n){_u$getOrigin=u.getOrigin(),_u$getOrigin2=_slicedToArray(_u$getOrigin,2),_t110=_u$getOrigin2[0],_i32=_u$getOrigin2[1],_u$getResolution=u.getResolution(),_u$getResolution2=_slicedToArray(_u$getResolution,2),_r17=_u$getResolution2[0],_e21=_u$getResolution2[1];s=[_t110+n[0]*_r17,_i32+n[1]*_e21,_t110+n[2]*_r17,_i32+n[3]*_e21];}_t109=s||f;if(!i){_context27.next=20;break;}if(!e){_context27.next=19;break;}throw new Error("Both width and resX passed");case 19:e=(_t109[2]-_t109[0])/i;case 20:if(!r){_context27.next=24;break;}if(!o){_context27.next=23;break;}throw new Error("Both width and resY passed");case 23:o=(_t109[3]-_t109[1])/r;case 24:if(!(e||o)){_context27.next=47;break;}_t111=[];_n25=0;case 27:if(!(_n25<h)){_context27.next=38;break;}_context27.next=30;return this.getImage(_n25);case 30:_i33=_context27.sent;_i33$fileDirectory=_i33.fileDirectory;_r18=_i33$fileDirectory.SubfileType;_e22=_i33$fileDirectory.NewSubfileType;(0===_n25||2===_r18||1&_e22)&&_t111.push(_i33);case 35:++_n25;_context27.next=27;break;case 38:_t111.sort(function(t,n){return t.getWidth()-n.getWidth();});_n26=0;case 40:if(!(_n26<_t111.length)){_context27.next=47;break;}_i34=_t111[_n26],_r19=(f[2]-f[0])/_i34.getWidth(),_s14=(f[3]-f[1])/_i34.getHeight();if(!(a=_i34,e&&e>_r19||o&&o>_s14)){_context27.next=44;break;}return _context27.abrupt("break",47);case 44:++_n26;_context27.next=40;break;case 47:c=n;if(s){_u$getOrigin3=u.getOrigin(),_u$getOrigin4=_slicedToArray(_u$getOrigin3,2),_t112=_u$getOrigin4[0],_n27=_u$getOrigin4[1],_a$getResolution=a.getResolution(u),_a$getResolution2=_slicedToArray(_a$getResolution,2),_i35=_a$getResolution2[0],_r20=_a$getResolution2[1];c=[Math.round((s[0]-_t112)/_i35),Math.round((s[1]-_n27)/_r20),Math.round((s[2]-_t112)/_i35),Math.round((s[3]-_n27)/_r20)],c=[Math.min(c[0],c[2]),Math.min(c[1],c[3]),Math.max(c[0],c[2]),Math.max(c[1],c[3])];}return _context27.abrupt("return",a.readRasters(_objectSpread(_objectSpread({},t),{},{window:c})));case 50:case"end":return _context27.stop();}}},_callee27,this);}));function readRasters(){return _readRasters2.apply(this,arguments);}return readRasters;}()}]);return ym;}();var mm=/*#__PURE__*/function(_ym){_inherits(mm,_ym);var _super13=_createSuper(mm);function mm(t,n,i,r){var _this28;_classCallCheck(this,mm);var e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};_this28=_super13.call(this),_this28.source=t,_this28.littleEndian=n,_this28.bigTiff=i,_this28.firstIFDOffset=r,_this28.cache=e.cache||!1,_this28.ifdRequests=[],_this28.ghostValues=null;return _this28;}_createClass(mm,[{key:"getSlice",value:function(){var _getSlice=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee28(t,n){var i;return _regeneratorRuntime().wrap(function _callee28$(_context28){while(1){switch(_context28.prev=_context28.next){case 0:i=this.bigTiff?4048:1024;_context28.t0=Iy;_context28.next=4;return this.source.fetch([{offset:t,length:void 0!==n?n:i}]);case 4:_context28.t1=_context28.sent[0];_context28.t2=t;_context28.t3=this.littleEndian;_context28.t4=this.bigTiff;return _context28.abrupt("return",new _context28.t0(_context28.t1,_context28.t2,_context28.t3,_context28.t4));case 9:case"end":return _context28.stop();}}},_callee28,this);}));function getSlice(_x32,_x33){return _getSlice.apply(this,arguments);}return getSlice;}()},{key:"parseFileDirectoryAt",value:function(){var _parseFileDirectoryAt=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee29(t){var n,i,r,e,o,s,u,_t113,_t114,_n28,_i36,_e23,_o16,_a10,_h10,_t115,_o17,a,h;return _regeneratorRuntime().wrap(function _callee29$(_context29){while(1){switch(_context29.prev=_context29.next){case 0:n=this.bigTiff?20:12,i=this.bigTiff?8:2;_context29.next=3;return this.getSlice(t);case 3:r=_context29.sent;e=this.bigTiff?r.readUint64(t):r.readUint16(t),o=e*n+(this.bigTiff?16:6);_context29.t0=r.covers(t,o);if(_context29.t0){_context29.next=10;break;}_context29.next=9;return this.getSlice(t,o);case 9:r=_context29.sent;case 10:s={};u=t+(this.bigTiff?8:2);_t113=0;case 13:if(!(_t113<e)){_context29.next=38;break;}_t114=r.readUint16(u),_n28=r.readUint16(u+2),_i36=this.bigTiff?r.readUint64(u+4):r.readUint32(u+4);_e23=void 0,_o16=void 0;_a10=lm(_n28),_h10=u+(this.bigTiff?12:8);if(!(_a10*_i36<=(this.bigTiff?8:4))){_context29.next=21;break;}_e23=vm(r,_n28,_i36,_h10);_context29.next=34;break;case 21:_t115=r.readOffset(_h10),_o17=lm(_n28)*_i36;if(!r.covers(_t115,_o17)){_context29.next=26;break;}_e23=vm(r,_n28,_i36,_t115);_context29.next=34;break;case 26:_context29.t1=vm;_context29.next=29;return this.getSlice(_t115,_o17);case 29:_context29.t2=_context29.sent;_context29.t3=_n28;_context29.t4=_i36;_context29.t5=_t115;_e23=(0,_context29.t1)(_context29.t2,_context29.t3,_context29.t4,_context29.t5);case 34:_o16=1===_i36&&-1===_y.It.indexOf(_t114)&&_n28!==_y.sf.RATIONAL&&_n28!==_y.sf.SRATIONAL?_e23[0]:_e23,s[_y.L[_t114]]=_o16;case 35:u+=n,++_t113;_context29.next=13;break;case 38:a=function(t){var n=t.GeoKeyDirectory;if(!n)return null;var i={};for(var _r21=4;_r21<=4*n[3];_r21+=4){var _e24=_y.P1[n[_r21]],_o18=n[_r21+1]?_y.L[n[_r21+1]]:null,_s15=n[_r21+2],_u11=n[_r21+3];var _a11=null;if(_o18){if(_a11=t[_o18],null==_a11)throw new Error("Could not get value of geoKey '".concat(_e24,"'."));"string"==typeof _a11?_a11=_a11.substring(_u11,_u11+_s15-1):_a11.subarray&&(_a11=_a11.subarray(_u11,_u11+_s15),1===_s15&&(_a11=_a11[0]));}else _a11=_u11;i[_e24]=_a11;}return i;}(s),h=r.readOffset(t+i+n*e);return _context29.abrupt("return",new pm(s,a,h));case 40:case"end":return _context29.stop();}}},_callee29,this);}));function parseFileDirectoryAt(_x34){return _parseFileDirectoryAt.apply(this,arguments);}return parseFileDirectoryAt;}()},{key:"requestIFD",value:function(){var _requestIFD=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee31(t){var _this29=this;return _regeneratorRuntime().wrap(function _callee31$(_context31){while(1){switch(_context31.prev=_context31.next){case 0:if(!this.ifdRequests[t]){_context31.next=2;break;}return _context31.abrupt("return",this.ifdRequests[t]);case 2:if(!(0===t)){_context31.next=4;break;}return _context31.abrupt("return",(this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t]));case 4:if(this.ifdRequests[t-1]){_context31.next=14;break;}_context31.prev=5;this.ifdRequests[t-1]=this.requestIFD(t-1);_context31.next=14;break;case 9:_context31.prev=9;_context31.t0=_context31["catch"](5);if(!(_context31.t0 instanceof dm)){_context31.next=13;break;}throw new dm(t);case 13:throw _context31.t0;case 14:return _context31.abrupt("return",(this.ifdRequests[t]=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee30(){var n;return _regeneratorRuntime().wrap(function _callee30$(_context30){while(1){switch(_context30.prev=_context30.next){case 0:_context30.next=2;return _this29.ifdRequests[t-1];case 2:n=_context30.sent;if(!(0===n.nextIFDByteOffset)){_context30.next=5;break;}throw new dm(t);case 5:return _context30.abrupt("return",_this29.parseFileDirectoryAt(n.nextIFDByteOffset));case 6:case"end":return _context30.stop();}}},_callee30);}))(),this.ifdRequests[t]));case 15:case"end":return _context31.stop();}}},_callee31,this,[[5,9]]);}));function requestIFD(_x35){return _requestIFD.apply(this,arguments);}return requestIFD;}()},{key:"getImage",value:function(){var _getImage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee32(){var t,n,_args32=arguments;return _regeneratorRuntime().wrap(function _callee32$(_context32){while(1){switch(_context32.prev=_context32.next){case 0:t=_args32.length>0&&void 0!==_args32[0]?_args32[0]:0;_context32.next=3;return this.requestIFD(t);case 3:n=_context32.sent;return _context32.abrupt("return",new ky(n.fileDirectory,n.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source));case 5:case"end":return _context32.stop();}}},_callee32,this);}));function getImage(){return _getImage.apply(this,arguments);}return getImage;}()},{key:"getImageCount",value:function(){var _getImageCount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee33(){var t,n;return _regeneratorRuntime().wrap(function _callee33$(_context33){while(1){switch(_context33.prev=_context33.next){case 0:t=0,n=!0;case 1:if(!n){_context33.next=15;break;}_context33.prev=2;_context33.next=5;return this.requestIFD(t);case 5:++t;_context33.next=13;break;case 8:_context33.prev=8;_context33.t0=_context33["catch"](2);if(_context33.t0 instanceof dm){_context33.next=12;break;}throw _context33.t0;case 12:n=!1;case 13:_context33.next=1;break;case 15:return _context33.abrupt("return",t);case 16:case"end":return _context33.stop();}}},_callee33,this,[[2,8]]);}));function getImageCount(){return _getImageCount.apply(this,arguments);}return getImageCount;}()},{key:"getGhostValues",value:function(){var _getGhostValues=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee34(){var _this30=this;var t,n,i,r,_n29,_e25,_o19;return _regeneratorRuntime().wrap(function _callee34$(_context34){while(1){switch(_context34.prev=_context34.next){case 0:t=this.bigTiff?16:8;if(!this.ghostValues){_context34.next=3;break;}return _context34.abrupt("return",this.ghostValues);case 3:n="GDAL_STRUCTURAL_METADATA_SIZE=",i=n.length+100;_context34.next=6;return this.getSlice(t,i);case 6:r=_context34.sent;if(!(n===vm(r,_y.sf.ASCII,n.length,t))){_context34.next=16;break;}_n29=vm(r,_y.sf.ASCII,i,t).split("\n")[0],_e25=Number(_n29.split("=")[1].split(" ")[0])+_n29.length;_context34.t0=_e25>i;if(!_context34.t0){_context34.next=14;break;}_context34.next=13;return this.getSlice(t,_e25);case 13:r=_context34.sent;case 14:_o19=vm(r,_y.sf.ASCII,_e25,t);this.ghostValues={},_o19.split("\n").filter(function(t){return t.length>0;}).map(function(t){return t.split("=");}).forEach(function(t){var _t116=_slicedToArray(t,2),n=_t116[0],i=_t116[1];_this30.ghostValues[n]=i;});case 16:return _context34.abrupt("return",this.ghostValues);case 17:case"end":return _context34.stop();}}},_callee34,this);}));function getGhostValues(){return _getGhostValues.apply(this,arguments);}return getGhostValues;}()},{key:"close",value:function close(){return"function"==typeof this.source.close&&this.source.close();}}],[{key:"fromSource",value:function(){var _fromSource=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee35(t,n,i){var r,e,o,s,u,a,h;return _regeneratorRuntime().wrap(function _callee35$(_context35){while(1){switch(_context35.prev=_context35.next){case 0:_context35.next=2;return t.fetch([{offset:0,length:1024}],i);case 2:r=_context35.sent[0];e=new Ny(r);o=e.getUint16(0,0);if(!(18761===o)){_context35.next=9;break;}s=!0;_context35.next=12;break;case 9:if(!(19789!==o)){_context35.next=11;break;}throw new TypeError("Invalid byte order value.");case 11:s=!1;case 12:u=e.getUint16(2,s);if(!(42===u)){_context35.next=17;break;}a=!1;_context35.next=22;break;case 17:if(!(43!==u)){_context35.next=19;break;}throw new TypeError("Invalid magic number.");case 19:a=!0;if(!(8!==e.getUint16(4,s))){_context35.next=22;break;}throw new Error("Unsupported offset byte-size.");case 22:h=a?e.getUint64(8,s):e.getUint32(4,s);return _context35.abrupt("return",new mm(t,s,a,h,n));case 24:case"end":return _context35.stop();}}},_callee35);}));function fromSource(_x36,_x37,_x38){return _fromSource.apply(this,arguments);}return fromSource;}()}]);return mm;}(ym);var wm=/*#__PURE__*/function(_ym2){_inherits(wm,_ym2);var _super14=_createSuper(wm);function wm(t,n){var _this31;_classCallCheck(this,wm);_this31=_super14.call(this),_this31.mainFile=t,_this31.overviewFiles=n,_this31.imageFiles=[t].concat(n),_this31.fileDirectoriesPerFile=null,_this31.fileDirectoriesPerFileParsing=null,_this31.imageCount=null;return _this31;}_createClass(wm,[{key:"parseFileDirectoriesPerFile",value:function(){var _parseFileDirectoriesPerFile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee36(){var t;return _regeneratorRuntime().wrap(function _callee36$(_context36){while(1){switch(_context36.prev=_context36.next){case 0:t=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(function(t){return t.parseFileDirectoryAt(t.firstIFDOffset);}));_context36.next=3;return Promise.all(t);case 3:this.fileDirectoriesPerFile=_context36.sent;return _context36.abrupt("return",this.fileDirectoriesPerFile);case 5:case"end":return _context36.stop();}}},_callee36,this);}));function parseFileDirectoriesPerFile(){return _parseFileDirectoriesPerFile.apply(this,arguments);}return parseFileDirectoriesPerFile;}()},{key:"getImage",value:function(){var _getImage2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee37(){var t,n,i,_r22,_e26,_o20,_t117,_args37=arguments;return _regeneratorRuntime().wrap(function _callee37$(_context37){while(1){switch(_context37.prev=_context37.next){case 0:t=_args37.length>0&&void 0!==_args37[0]?_args37[0]:0;_context37.next=3;return this.getImageCount();case 3:_context37.next=5;return this.parseFileDirectoriesPerFile();case 5:n=0,i=0;_r22=0;case 7:if(!(_r22<this.imageFiles.length)){_context37.next=24;break;}_e26=this.imageFiles[_r22];_o20=0;case 10:if(!(_o20<this.imageCounts[_r22])){_context37.next=20;break;}if(!(t===n)){_context37.next=16;break;}_context37.next=14;return _e26.requestIFD(i);case 14:_t117=_context37.sent;return _context37.abrupt("return",new ky(_t117.fileDirectory,_t117.geoKeyDirectory,_e26.dataView,_e26.littleEndian,_e26.cache,_e26.source));case 16:n++,i++;case 17:_o20++;_context37.next=10;break;case 20:i=0;case 21:_r22++;_context37.next=7;break;case 24:throw new RangeError("Invalid image index");case 25:case"end":return _context37.stop();}}},_callee37,this);}));function getImage(){return _getImage2.apply(this,arguments);}return getImage;}()},{key:"getImageCount",value:function(){var _getImageCount2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee38(){var t;return _regeneratorRuntime().wrap(function _callee38$(_context38){while(1){switch(_context38.prev=_context38.next){case 0:if(!(null!==this.imageCount)){_context38.next=2;break;}return _context38.abrupt("return",this.imageCount);case 2:t=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(function(t){return t.getImageCount();}));_context38.next=5;return Promise.all(t);case 5:this.imageCounts=_context38.sent;this.imageCount=this.imageCounts.reduce(function(t,n){return t+n;},0);return _context38.abrupt("return",this.imageCount);case 8:case"end":return _context38.stop();}}},_callee38,this);}));function getImageCount(){return _getImageCount2.apply(this,arguments);}return getImageCount;}()}]);return wm;}(ym);function gm(_x39,_x40){return _gm.apply(this,arguments);}function _gm(){_gm=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee42(t,n){return _regeneratorRuntime().wrap(function _callee42$(_context42){while(1){switch(_context42.prev=_context42.next){case 0:return _context42.abrupt("return",mm.fromSource(new cm(t),n));case 1:case"end":return _context42.stop();}}},_callee42);}));return _gm.apply(this,arguments);}var bm,xm=function(){var _t118=function t(n,i){return _t118=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t118(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t118(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Mm="STATISTICS_MAXIMUM",_m="STATISTICS_MINIMUM";function Sm(t){try{return t.getBoundingBox();}catch(i){var n=t.fileDirectory;return[0,0,n.ImageWidth,n.ImageLength];}}function Om(t){try{return t.getOrigin().slice(0,2);}catch(n){return[0,t.fileDirectory.ImageLength];}}function jm(t,n){try{return t.getResolution(n);}catch(i){return[n.fileDirectory.ImageWidth/t.fileDirectory.ImageWidth,n.fileDirectory.ImageHeight/t.fileDirectory.ImageHeight];}}function Em(t){var n=t.geoKeys;if(!n)return null;if(n.ProjectedCSTypeGeoKey){if(!(r=br(i="EPSG:"+n.ProjectedCSTypeGeoKey)))(e=Ft(n.ProjLinearUnitsGeoKey))&&(r=new ai({code:i,units:e}));return r;}if(n.GeographicTypeGeoKey){var i,r,e;if(!(r=br(i="EPSG:"+n.GeographicTypeGeoKey)))(e=Ft(n.GeogAngularUnitsGeoKey))&&(r=new ai({code:i,units:e}));return r;}return null;}function Tm(t){return t.getImageCount().then(function(n){for(var i=new Array(n),r=0;r<n;++r){i[r]=t.getImage(r);}return Promise.all(i);});}function Am(t,n){var i;return i=t.blob?gm(t.blob):t.overviews?function(){var _ref18=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee39(t){var n,i,r,e,o,_args39=arguments;return _regeneratorRuntime().wrap(function _callee39$(_context39){while(1){switch(_context39.prev=_context39.next){case 0:n=_args39.length>1&&void 0!==_args39[1]?_args39[1]:[],i=_args39.length>2&&void 0!==_args39[2]?_args39[2]:{},r=_args39.length>3?_args39[3]:void 0;_context39.next=3;return mm.fromSource(fm(t,i),r);case 3:e=_context39.sent;_context39.next=6;return Promise.all(n.map(function(t){return mm.fromSource(fm(t,i));}));case 6:o=_context39.sent;return _context39.abrupt("return",new wm(e,o));case 8:case"end":return _context39.stop();}}},_callee39);}));return function(_x41){return _ref18.apply(this,arguments);};}()(t.url,t.overviews,n):function(){var _ref19=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee40(t){var n,i,_args40=arguments;return _regeneratorRuntime().wrap(function _callee40$(_context40){while(1){switch(_context40.prev=_context40.next){case 0:n=_args40.length>1&&void 0!==_args40[1]?_args40[1]:{},i=_args40.length>2?_args40[2]:void 0;return _context40.abrupt("return",mm.fromSource(fm(t,n),i));case 2:case"end":return _context40.stop();}}},_callee40);}));return function(_x42){return _ref19.apply(this,arguments);};}()(t.url,n),i.then(Tm);}function Pm(t,n,i,r,e){if(Array.isArray(t)){var o=t.length;if(!Array.isArray(n)||o!=n.length){var s=new Error(r);throw e(s),s;}for(var u=0;u<o;++u){Pm(t[u],n[u],i,r,e);}}else if(Math.abs(t-n)>i*t)throw new Error(r);}function Cm(t){return t instanceof Int8Array?-128:t instanceof Int16Array?-32768:t instanceof Int32Array?-2147483648:t instanceof Float32Array?12e-39:0;}function km(t){return t instanceof Int8Array?127:t instanceof Uint8Array||t instanceof Uint8ClampedArray?255:t instanceof Int16Array?32767:t instanceof Uint16Array?65535:t instanceof Int32Array?2147483647:t instanceof Uint32Array?4294967295:t instanceof Float32Array?34e37:255;}var Nm=function(t){function n(n){var i=t.call(this,{state:"loading",tileGrid:null,projection:null,opaque:n.opaque,transition:n.transition,interpolate:!1!==n.interpolate,wrapX:n.wrapX})||this;i.Qa=n.sources;var r=i.Qa.length;i.th=n.sourceOptions,i.nh=new Array(r),i.ih=new Array(r),i.rh,i.eh,i.oh,i.sh=!1!==n.normalize,i.uh=!1,i.V=null,i.ah=n.convertToRGB?"readRGB":"readRasters",i.setKey(i.Qa.map(function(t){return t.url;}).join(","));for(var e=i,o=new Array(r),s=0;s<r;++s){o[s]=Am(i.Qa[s],i.th);}return Promise.all(o).then(function(t){e.hh(t);}).catch(function(t){console.error(t),e.V=t,e.setState("error");}),i;}return xm(n,t),n.prototype.getError=function(){return this.V;},n.prototype.hh=function(t){for(var n,i,r,e,o,s=new Array(t.length),u=new Array(t.length),a=new Array(t.length),h=0,f=t.length,c=function c(f){var c=t[f],v=c.length,p=void 0,d=void 0,y=new Array(v),m=new Array(v),w=new Array(v);u[f]=new Array(v),a[f]=new Array(v);for(var g=0;g<v;++g){var b=c[g],x=b.getGDALNoData();a[f][g]=b.getGDALMetadata(0),u[f][g]=x;var M=l.Qa[f].bands;s[f]=M?M.length:b.getSamplesPerPixel();var _=v-(g+1);p||(p=Sm(b)),d||(d=Om(b));var S=jm(b,c[0]);w[_]=S[0];var O=[b.getTileWidth(),b.getTileHeight()];y[_]=O;var j=S[0]/Math.abs(S[1]);m[_]=[O[0],O[1]/j];}if(n?$n(n,p,n):n=p,i){var E="Origin mismatch for source ".concat(f,", got [").concat(d,"] but expected [").concat(i,"]");Pm(i,d,0,E,l.viewRejector);}else i=d;if(o){o.length-h>w.length&&(h=o.length-w.length);var T=o[o.length-1]/w[w.length-1];l.ih[f]=T;var A=w.map(function(t){return t*T;});E="Resolution mismatch for source ".concat(f,", got [").concat(A,"] but expected [").concat(o,"]");Pm(o.slice(h,o.length),A,.02,E,l.viewRejector);}else o=w,l.ih[f]=1;r?Pm(r.slice(h,r.length),m,.01,"Tile size mismatch for source ".concat(f),l.viewRejector):r=m,e?Pm(e.slice(h,e.length),y,0,"Tile size mismatch for source ".concat(f),l.viewRejector):e=y,l.nh[f]=c.reverse();},l=this,v=0;v<f;++v){c(v);}for(var p=0,d=this.nh.length;p<d;++p){for(var y=this.nh[p];y.length<o.length;){y.unshift(void 0);}}if(!this.getProjection()){var m=t[0];for(p=m.length-1;p>=0;--p){var w=Em(m[p]);if(w){this.projection=w;break;}}}this.rh=s,this.eh=u,this.oh=a;t:for(v=0;v<f;++v){if(void 0!==this.Qa[v].nodata){this.uh=!0;break;}var g=u[v],b=this.Qa[v].bands;if(b){for(p=0;p<b.length;++p){if(null!==g[b[p]-1]){this.uh=!0;break t;}}}else for(var x=0;x<g.length;++x){if(null!==g[x]){this.uh=!0;break t;}}}var M=this.uh?1:0;this.bandCount=s.reduce(function(t,n){return t+=n;},0)+M;var _=new Yf({extent:n,minZoom:h,origin:i,resolutions:o,tileSizes:r});this.tileGrid=_,this.setTileSizes(e),this.setLoader(this.fh.bind(this)),this.setState("ready"),this.viewResolver({projection:this.projection,resolutions:o,center:Lr(Vn(n),this.projection),extent:Fr(n,this.projection),zoom:0});},n.prototype.fh=function(t,n,i){for(var r=this.getTileSize(t),e=this.nh.length,o=new Array(e),s=this.uh,u=this.bandCount,a=this.rh,h=this.eh,f=this.Qa,c=function c(e){var s=f[e],u=l.ih[e],a=[Math.round(n*(r[0]*u)),Math.round(i*(r[1]*u)),Math.round((n+1)*(r[0]*u)),Math.round((i+1)*(r[1]*u))],c=l.nh[e][t],v=void 0;s.bands&&(v=s.bands.map(function(t){return t-1;}));var p=void 0;p=("nodata"in s)&&null!==s.nodata?s.nodata:v?v.map(function(t){return h[e][t];}):h[e],o[e]=c[l.ah]({window:a,width:r[0],height:r[1],samples:v,fillValue:p,pool:(bm||(bm=new fd()),bm),interleave:!1});},l=this,v=0;v<e;++v){c(v);}var p=r[0]*r[1],d=p*u,y=this.sh,m=this.oh;return Promise.all(o).then(function(t){var n;n=y?new Uint8Array(d):new Float32Array(d);for(var i=0,r=0;r<p;++r){for(var o=s,u=0;u<e;++u){var c=f[u],l=c.min,v=c.max,w=void 0,g=void 0;if(y){var b=m[u][0];void 0===l&&(l=b&&_m in b?parseFloat(b.STATISTICS_MINIMUM):Cm(t[u][0])),void 0===v&&(v=b&&Mm in b?parseFloat(b.STATISTICS_MAXIMUM):km(t[u][0])),g=-l*(w=255/(v-l));}for(var x=0;x<a[u];++x){var M=t[u][x][r],_=void 0;if(_=y?hi(w*M+g,0,255):M,s){var S=c.nodata;if(void 0===S){var O=void 0;O=c.bands?c.bands[x]-1:x,S=h[u][O];}var j=isNaN(S);(!j&&M!==S||j&&!isNaN(M))&&(o=!1,n[i]=_);}else n[i]=_;i++;}}s&&(o||(n[i]=255),i++);}return n;}).catch(function(t){throw console.error(t),t;});},n;}(od);Nm.prototype.getView;var Im=Nm,zm=function(){var _t119=function t(n,i){return _t119=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t119(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t119(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Lm="default",Rm="truncated",Fm=function(t){function n(n,i,r,e,o,s,u){var a=t.call(this,i,r,e,o,s,u)||this;return a.lh=null,a.jo=n,a;}return zm(n,t),n.prototype.getImage=function(){if(this.lh)return this.lh;var n=t.prototype.getImage.call(this);if(this.state==pt){var i=this.jo;if(n.width==i[0]&&n.height==i[1])return this.lh=n,n;var r=ko(i[0],i[1]);return r.drawImage(n,0,0),this.lh=r.canvas,r.canvas;}return n;},n;}(qo),Gm=function(t){function n(n){var i=this,r=n,e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate);var o=r.size,s=void 0!==r.tierSizeCalculation?r.tierSizeCalculation:Lm,u=r.tilePixelRatio||1,a=o[0],h=o[1],f=[],c=r.tileSize||Bu,l=c*u;switch(s){case Lm:for(;a>l||h>l;){f.push([Math.ceil(a/l),Math.ceil(h/l)]),l+=l;}break;case Rm:for(var v=a,p=h;v>l||p>l;){f.push([Math.ceil(v/l),Math.ceil(p/l)]),v>>=1,p>>=1;}break;default:Et(!1,53);}f.push([1,1]),f.reverse();for(var d=[u],y=[0],m=1,w=f.length;m<w;m++){d.push(u<<m),y.push(f[m-1][0]*f[m-1][1]+y[m-1]);}d.reverse();var g=new Yf({tileSize:c,extent:r.extent||[0,-h,a,0],resolutions:d}),b=r.url;b&&-1==b.indexOf("{TileGroup}")&&-1==b.indexOf("{tileIndex}")&&(b+="{TileGroup}/{z}-{x}-{y}.jpg");var x=oc(b),M=c*u;var _=rc(x.map(function(t){return function(n,i,r){if(n){var e=n[0],o=n[1],s=n[2],u=o+s*f[e][0],a={z:e,x:o,y:s,tileIndex:u,TileGroup:"TileGroup"+((u+y[e])/M|0)};return t.replace(/\{(\w+?)\}/g,function(t,n){return a[n];});}};})),S=Fm.bind(null,va(c*u));(i=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,projection:r.projection,tilePixelRatio:u,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:S,tileGrid:g,tileUrlFunction:_,transition:r.transition})||this).zDirection=r.zDirection;var O=_(g.getTileCoordForCoordAndResolution(Vn(g.getExtent()),d[d.length-1]),1,null),j=new Image();return j.addEventListener("error",function(){M=c,this.changed();}.bind(i)),j.src=O,i;}return zm(n,t),n;}(Ip),Dm=Gm,qm=function qm(t,n,i){if(i||2===arguments.length)for(var r,e=0,o=n.length;e<o;e++){!r&&e in n||(r||(r=Array.prototype.slice.call(n,0,e)),r[e]=n[e]);}return t.concat(r||Array.prototype.slice.call(n));},Um="version1",Bm="version2",Xm="version3",Vm={};Vm[Um]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},Vm[Bm]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},Vm[Xm]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},Vm.none={none:{supports:[],formats:[],qualities:[]}};var Wm=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,Ym=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,Km=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;var Zm={};Zm[Um]=function(t){var n=t.getComplianceLevelSupportedFeatures();return void 0===n&&(n=Vm[Um].level0),{url:void 0===t.imageInfo["@id"]?void 0:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:n.supports,formats:qm(qm([],n.formats,!0),[void 0===t.imageInfo.formats?[]:t.imageInfo.formats],!1),qualities:qm(qm([],n.qualities,!0),[void 0===t.imageInfo.qualities?[]:t.imageInfo.qualities],!1),resolutions:t.imageInfo.scale_factors,tileSize:void 0!==t.imageInfo.tile_width?void 0!==t.imageInfo.tile_height?[t.imageInfo.tile_width,t.imageInfo.tile_height]:[t.imageInfo.tile_width,t.imageInfo.tile_width]:null!=t.imageInfo.tile_height?[t.imageInfo.tile_height,t.imageInfo.tile_height]:void 0};},Zm[Bm]=function(t){var n=t.getComplianceLevelSupportedFeatures(),i=Array.isArray(t.imageInfo.profile)&&t.imageInfo.profile.length>1,r=i&&t.imageInfo.profile[1].supports?t.imageInfo.profile[1].supports:[],e=i&&t.imageInfo.profile[1].formats?t.imageInfo.profile[1].formats:[],o=i&&t.imageInfo.profile[1].qualities?t.imageInfo.profile[1].qualities:[];return{url:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map(function(t){return[t.width,t.height];}),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map(function(t){return t.width;})[0],t.imageInfo.tiles.map(function(t){return void 0===t.height?t.width:t.height;})[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map(function(t){return t.scaleFactors;})[0],supports:qm(qm([],n.supports,!0),r,!0),formats:qm(qm([],n.formats,!0),e,!0),qualities:qm(qm([],n.qualities,!0),o,!0)};},Zm[Xm]=function(t){var n=t.getComplianceLevelSupportedFeatures(),i=void 0===t.imageInfo.extraFormats?n.formats:qm(qm([],n.formats,!0),t.imageInfo.extraFormats,!0),r=void 0!==t.imageInfo.preferredFormats&&Array.isArray(t.imageInfo.preferredFormats)&&t.imageInfo.preferredFormats.length>0?t.imageInfo.preferredFormats.filter(function(t){return y(["jpg","png","gif"],t);}).reduce(function(t,n){return void 0===t&&y(i,n)?n:t;},void 0):void 0;return{url:t.imageInfo.id,sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map(function(t){return[t.width,t.height];}),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map(function(t){return t.width;})[0],t.imageInfo.tiles.map(function(t){return t.height;})[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map(function(t){return t.scaleFactors;})[0],supports:void 0===t.imageInfo.extraFeatures?n.supports:qm(qm([],n.supports,!0),t.imageInfo.extraFeatures,!0),formats:i,qualities:void 0===t.imageInfo.extraQualities?n.qualities:qm(qm([],n.qualities,!0),t.imageInfo.extraQualities,!0),preferredFormat:r};};var $m=function(){function t(t){this.setImageInfo(t);}return t.prototype.setImageInfo=function(t){this.imageInfo="string"==typeof t?JSON.parse(t):t;},t.prototype.getImageApiVersion=function(){if(void 0!==this.imageInfo){var t=this.imageInfo["@context"]||"ol-no-context";"string"==typeof t&&(t=[t]);for(var n=0;n<t.length;n++){switch(t[n]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return Um;case"http://iiif.io/api/image/2/context.json":return Bm;case"http://iiif.io/api/image/3/context.json":return Xm;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(Um)&&this.imageInfo.identifier)return Um;}}Et(!1,61);}},t.prototype.getComplianceLevelEntryFromProfile=function(t){if(void 0!==this.imageInfo&&void 0!==this.imageInfo.profile)switch(void 0===t&&(t=this.getImageApiVersion()),t){case Um:if(Wm.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Xm:if(Km.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Bm:if("string"==typeof this.imageInfo.profile&&Ym.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&"string"==typeof this.imageInfo.profile[0]&&Ym.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0];}},t.prototype.getComplianceLevelFromProfile=function(t){var n=this.getComplianceLevelEntryFromProfile(t);if(void 0!==n){var i=n.match(/level[0-2](?:\.json)?$/g);return Array.isArray(i)?i[0].replace(".json",""):void 0;}},t.prototype.getComplianceLevelSupportedFeatures=function(){if(void 0!==this.imageInfo){var t=this.getImageApiVersion(),n=this.getComplianceLevelFromProfile(t);return void 0===n?Vm.none.none:Vm[t][n];}},t.prototype.getTileSourceOptions=function(t){var n=t||{},i=this.getImageApiVersion();if(void 0!==i){var r=void 0===i?void 0:Zm[i](this);if(void 0!==r)return{url:r.url,version:i,size:[this.imageInfo.width,this.imageInfo.height],sizes:r.sizes,format:void 0!==n.format&&y(r.formats,n.format)?n.format:void 0!==r.preferredFormat?r.preferredFormat:"jpg",supports:r.supports,quality:n.quality&&y(r.qualities,n.quality)?n.quality:y(r.qualities,"native")?"native":"default",resolutions:Array.isArray(r.resolutions)?r.resolutions.sort(function(t,n){return n-t;}):void 0,tileSize:r.tileSize};}},t;}(),Hm=$m,Jm=function(){var _t120=function t(n,i){return _t120=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t120(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t120(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}();function Qm(t){return t.toLocaleString("en",{maximumFractionDigits:10});}var tw=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate);var o=r.url||"";o+=o.lastIndexOf("/")===o.length-1||""===o?"":"/";var s=r.version||Bm,u=r.sizes||[],a=r.size;Et(null!=a&&Array.isArray(a)&&2==a.length&&!isNaN(a[0])&&a[0]>0&&!isNaN(a[1])&&a[1]>0,60);var h,f,c,l=a[0],v=a[1],p=r.tileSize,d=r.tilePixelRatio||1,m=r.format||"jpg",w=r.quality||(r.version==Um?"native":"default"),g=r.resolutions||[],b=r.supports||[],x=r.extent||[0,-v,l,0],M=null!=u&&Array.isArray(u)&&u.length>0,_=void 0!==p&&("number"==typeof p&&Number.isInteger(p)&&p>0||Array.isArray(p)&&p.length>0),S=null!=b&&Array.isArray(b)&&(y(b,"regionByPx")||y(b,"regionByPct"))&&(y(b,"sizeByWh")||y(b,"sizeByH")||y(b,"sizeByW")||y(b,"sizeByPct"));if(g.sort(function(t,n){return n-t;}),_||S){if(null!=p&&("number"==typeof p&&Number.isInteger(p)&&p>0?(h=p,f=p):Array.isArray(p)&&p.length>0&&((1==p.length||null==p[1]&&Number.isInteger(p[0]))&&(h=p[0],f=p[0]),2==p.length&&(Number.isInteger(p[0])&&Number.isInteger(p[1])?(h=p[0],f=p[1]):null==p[0]&&Number.isInteger(p[1])&&(h=p[1],f=p[1])))),void 0!==h&&void 0!==f||(h=Bu,f=Bu),0==g.length)for(var O=c=Math.max(Math.ceil(Math.log(l/h)/Math.LN2),Math.ceil(Math.log(v/f)/Math.LN2));O>=0;O--){g.push(Math.pow(2,O));}else{var j=Math.max.apply(Math,g);c=Math.round(Math.log(j)/Math.LN2);}}else if(h=l,f=v,g=[],M){u.sort(function(t,n){return t[0]-n[0];}),c=-1;var E=[];for(O=0;O<u.length;O++){var T=l/u[O][0];g.length>0&&g[g.length-1]==T?E.push(O):(g.push(T),c++);}if(E.length>0)for(O=0;O<E.length;O++){u.splice(E[O]-O,1);}}else g.push(1),u.push([l,v]),c=0;var A=new Yf({tileSize:[h,f],extent:x,origin:Hn(x),resolutions:g}),P=Fm.bind(null,va(p||256).map(function(t){return t*d;}));return i=t.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,state:r.state,tileClass:P,tileGrid:A,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:function tileUrlFunction(t,n,i){var r,e,a=t[0];if(!(a>c)){var p=t[1],d=t[2],x=g[a];if(!(void 0===p||void 0===d||void 0===x||p<0||Math.ceil(l/x/h)<=p||d<0||Math.ceil(v/x/f)<=d)){if(S||_){var O=p*h*x,j=d*f*x,E=h*x,T=f*x,A=h,P=f;if(O+E>l&&(E=l-O),j+T>v&&(T=v-j),O+h*x>l&&(A=Math.floor((l-O+x-1)/x)),j+f*x>v&&(P=Math.floor((v-j+x-1)/x)),0==O&&E==l&&0==j&&T==v)r="full";else if(!S||y(b,"regionByPx"))r=O+","+j+","+E+","+T;else if(y(b,"regionByPct")){r="pct:"+Qm(O/l*100)+","+Qm(j/v*100)+","+Qm(E/l*100)+","+Qm(T/v*100);}s!=Xm||S&&!y(b,"sizeByWh")?!S||y(b,"sizeByW")?e=A+",":y(b,"sizeByH")?e=","+P:y(b,"sizeByWh")?e=A+","+P:y(b,"sizeByPct")&&(e="pct:"+Qm(100/x)):e=A+","+P;}else if(r="full",M){var C=u[a][0],k=u[a][1];e=s==Xm?C==l&&k==v?"max":C+","+k:C==l?"full":C+",";}else e=s==Xm?"max":"full";return o+r+"/"+e+"/0/"+w+"."+m;}}},transition:r.transition})||this,i.zDirection=r.zDirection,i;}return Jm(n,t),n;}(Ip),nw=tw,iw=function(){var _t121=function t(n,i){return _t121=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t121(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t121(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),rw=function(t){function n(n,i,r,e,o,s,u){var a=this,h=n.getExtent(),f=i.getExtent(),c=f?$n(r,f):r,l=Uf(n,i,Vn(c),e),v=new yl(n,i,c,h,.5*l,e),p=s(v.calculateSourceExtent(),l,o),d=p?Mo:jo,y=p?p.getPixelRatio():1;return(a=t.call(this,r,e,y,d)||this).vs=i,a.ds=h,a.Ns=v,a.wi=e,a.ph=r,a.dh=p,a.yh=y,a.pa=u,a.qt=null,a.mh=null,a;}return iw(n,t),n.prototype.disposeInternal=function(){this.state==_o&&this.wh(),t.prototype.disposeInternal.call(this);},n.prototype.getImage=function(){return this.qt;},n.prototype.getProjection=function(){return this.vs;},n.prototype.Is=function(){var t=this.dh.getState();if(t==So){var n=Qn(this.ph)/this.wi,i=Zn(this.ph)/this.wi;this.qt=Xf(n,i,this.yh,this.dh.getResolution(),this.ds,this.wi,this.ph,this.Ns,[{extent:this.dh.getExtent(),image:this.dh.getImage()}],0,void 0,this.pa);}this.state=t,this.changed();},n.prototype.load=function(){if(this.state==Mo){this.state=_o,this.changed();var t=this.dh.getState();t==So||t==Oo?this.Is():(this.mh=Z(this.dh,z,function(t){var n=this.dh.getState();n!=So&&n!=Oo||(this.wh(),this.Is());},this),this.dh.load());}},n.prototype.wh=function(){H(this.mh),this.mh=null;},n;}(xo),ew=rw,ow=function(){var _t122=function t(n,i){return _t122=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t122(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t122(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),sw="imageloadstart",uw="imageloadend",aw="imageloaderror",hw=function(t){function n(n,i){var r=t.call(this,n)||this;return r.image=i,r;}return ow(n,t),n;}(c),fw=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(r=n.interpolate),(i=t.call(this,{attributions:n.attributions,projection:n.projection,state:n.state,interpolate:r})||this).on,i.once,i.un,i.Ti=void 0!==n.resolutions?n.resolutions:null,i.gh=null,i.bh=0,i;}return ow(n,t),n.prototype.getResolutions=function(){return this.Ti;},n.prototype.findNearestResolution=function(t){if(this.Ti){var n=m(this.Ti,t,0);t=this.Ti[n];}return t;},n.prototype.getImage=function(t,n,i,r){var e=this.getProjection();if(e&&r&&!Tr(e,r)){if(this.gh){if(this.bh==this.getRevision()&&Tr(this.gh.getProjection(),r)&&this.gh.getResolution()==n&&Nn(this.gh.getExtent(),t))return this.gh;this.gh.dispose(),this.gh=null;}return this.gh=new ew(e,r,t,n,i,function(t,n,i){return this.getImageInternal(t,n,i,e);}.bind(this),this.getInterpolate()),this.bh=this.getRevision(),this.gh;}return e&&(r=e),this.getImageInternal(t,n,i,r);},n.prototype.getImageInternal=function(t,n,i,e){return r();},n.prototype.handleImageChange=function(t){var n,i=t.target;switch(i.getState()){case _o:this.loading=!0,n=sw;break;case So:this.loading=!1,n=uw;break;case Oo:this.loading=!1,n=aw;break;default:return;}this.hasListener(n)&&this.dispatchEvent(new hw(n,i));},n;}(_p);function cw(t,n){t.getImage().src=n;}var lw=fw,vw=function(){var _t123=function t(n,i){return _t123=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t123(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t123(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),pw=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(e=r.interpolate),(i=t.call(this,{attributions:r.attributions,interpolate:e,projection:r.projection,resolutions:r.resolutions})||this).Bt=void 0!==r.crossOrigin?r.crossOrigin:null,i._a=void 0===r.hidpi||r.hidpi,i.Fe=r.url,i.Rt=void 0!==r.imageLoadFunction?r.imageLoadFunction:cw,i.xh=r.params||{},i.zt=null,i.Mh=[0,0],i._h=0,i.Sh=void 0!==r.ratio?r.ratio:1.5,i;}return vw(n,t),n.prototype.getParams=function(){return this.xh;},n.prototype.getImageInternal=function(t,n,i,r){if(void 0===this.Fe)return null;n=this.findNearestResolution(n),i=this._a?i:1;var e=this.zt;if(e&&this._h==this.getRevision()&&e.getResolution()==n&&e.getPixelRatio()==i&&On(e.getExtent(),t))return e;var o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};A(o,this.xh);var s=((t=t.slice())[0]+t[2])/2,u=(t[1]+t[3])/2;if(1!=this.Sh){var a=this.Sh*Qn(t)/2,h=this.Sh*Zn(t)/2;t[0]=s-a,t[1]=u-h,t[2]=s+a,t[3]=u+h;}var f=n/i,c=Math.ceil(Qn(t)/f),l=Math.ceil(Zn(t)/f);t[0]=s-f*c/2,t[2]=s+f*c/2,t[1]=u-f*l/2,t[3]=u+f*l/2,this.Mh[0]=c,this.Mh[1]=l;var v=this.Oh(t,this.Mh,i,r,o);return this.zt=new Ao(t,n,i,v,this.Bt,this.Rt),this._h=this.getRevision(),this.zt.addEventListener(z,this.handleImageChange.bind(this)),this.zt;},n.prototype.getImageLoadFunction=function(){return this.Rt;},n.prototype.Oh=function(t,n,i,r,e){var o=r.getCode().split(/:(?=\d+$)/).pop();e.SIZE=n[0]+","+n[1],e.BBOX=t.join(","),e.BBOXSR=o,e.IMAGESR=o,e.DPI=Math.round(90*i);var s=this.Fe,u=s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return u==s&&Et(!1,50),sc(u,e);},n.prototype.getUrl=function(){return this.Fe;},n.prototype.setImageLoadFunction=function(t){this.zt=null,this.Rt=t,this.changed();},n.prototype.setUrl=function(t){t!=this.Fe&&(this.Fe=t,this.zt=null,this.changed());},n.prototype.updateParams=function(t){A(this.xh,t),this.zt=null,this.changed();},n;}(lw),dw=pw,yw=function(){var _t124=function t(n,i){return _t124=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t124(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t124(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),mw=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(e=r.interpolate),(i=t.call(this,{attributions:r.attributions,interpolate:e,projection:r.projection,resolutions:r.resolutions,state:r.state})||this).jh=r.canvasFunction,i.qt=null,i._h=0,i.Sh=void 0!==r.ratio?r.ratio:1.5,i;}return yw(n,t),n.prototype.getImageInternal=function(t,n,i,r){n=this.findNearestResolution(n);var e=this.qt;if(e&&this._h==this.getRevision()&&e.getResolution()==n&&e.getPixelRatio()==i&&On(e.getExtent(),t))return e;ri(t=t.slice(),this.Sh);var o=[Qn(t)/n*i,Zn(t)/n*i],s=this.jh.call(this,t,n,i,o,r);return s&&(e=new Co(t,n,i,s)),this.qt=e,this._h=this.getRevision(),e;},n;}(lw),ww=mw,gw=function(){var _t125=function t(n,i){return _t125=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t125(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t125(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),bw=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(r=n.interpolate),(i=t.call(this,{interpolate:r,projection:n.projection,resolutions:n.resolutions})||this).Bt=void 0!==n.crossOrigin?n.crossOrigin:null,i.Eh=void 0!==n.displayDpi?n.displayDpi:96,i.xh=n.params||{},i.Fe=n.url,i.Rt=void 0!==n.imageLoadFunction?n.imageLoadFunction:cw,i._a=void 0===n.hidpi||n.hidpi,i.dt=void 0!==n.metersPerUnit?n.metersPerUnit:1,i.Sh=void 0!==n.ratio?n.ratio:1,i.Th=void 0!==n.useOverlay&&n.useOverlay,i.zt=null,i._h=0,i;}return gw(n,t),n.prototype.getParams=function(){return this.xh;},n.prototype.getImageInternal=function(t,n,i,r){n=this.findNearestResolution(n),i=this._a?i:1;var e=this.zt;if(e&&this._h==this.getRevision()&&e.getResolution()==n&&e.getPixelRatio()==i&&On(e.getExtent(),t))return e;1!=this.Sh&&ri(t=t.slice(),this.Sh);var o=[Qn(t)/n*i,Zn(t)/n*i];if(void 0!==this.Fe){var s=this.getUrl(this.Fe,this.xh,t,o,r);(e=new Ao(t,n,i,s,this.Bt,this.Rt)).addEventListener(z,this.handleImageChange.bind(this));}else e=null;return this.zt=e,this._h=this.getRevision(),e;},n.prototype.getImageLoadFunction=function(){return this.Rt;},n.prototype.updateParams=function(t){A(this.xh,t),this.changed();},n.prototype.getUrl=function(t,n,i,r,e){var o=function(t,n,i,r){var e=Qn(t),o=Zn(t),s=n[0],u=n[1],a=.0254/r;return u*e>s*o?e*i/(s*a):o*i/(u*a);}(i,r,this.dt,this.Eh),s=Vn(i),u={OPERATION:this.Th?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.Eh,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:o,SETVIEWCENTERX:s[0],SETVIEWCENTERY:s[1]};return A(u,n),sc(t,u);},n.prototype.setImageLoadFunction=function(t){this.zt=null,this.Rt=t,this.changed();},n;}(lw);var xw=bw,Mw=function(){var _t126=function t(n,i){return _t126=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t126(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t126(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),_w=function(t){function n(n){var i=this,r=void 0!==n.crossOrigin?n.crossOrigin:null,e=void 0!==n.imageLoadFunction?n.imageLoadFunction:cw,o=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(o=n.interpolate),(i=t.call(this,{attributions:n.attributions,interpolate:o,projection:br(n.projection)})||this).Fe=n.url,i.Ah=n.imageExtent,i.zt=new Ao(i.Ah,void 0,1,i.Fe,r,e),i.Mh=n.imageSize?n.imageSize:null,i.zt.addEventListener(z,i.handleImageChange.bind(i)),i;}return Mw(n,t),n.prototype.getImageExtent=function(){return this.Ah;},n.prototype.getImageInternal=function(t,n,i,r){return ti(t,this.zt.getExtent())?this.zt:null;},n.prototype.getUrl=function(){return this.Fe;},n.prototype.handleImageChange=function(n){if(this.zt.getState()==So){var i=this.zt.getExtent(),r=this.zt.getImage(),e=void 0,o=void 0;this.Mh?(e=this.Mh[0],o=this.Mh[1]):(e=r.width,o=r.height);var s=Qn(i),u=Zn(i),a=s/e,h=u/o,f=e,c=o;if(a>h?f=Math.round(s/h):c=Math.round(u/a),f!==e||c!==o){var l=ko(f,c);this.getInterpolate()||A(l,Rf);var v=l.canvas;l.drawImage(r,0,0,e,o,0,0,v.width,v.height),this.zt.setImage(v);}}t.prototype.handleImageChange.call(this,n);},n;}(lw),Sw=_w,Ow="1.3.0",jw=function(){var _t127=function t(n,i){return _t127=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t127(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t127(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Ew=[101,101],Tw=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(e=r.interpolate),(i=t.call(this,{attributions:r.attributions,interpolate:e,projection:r.projection,resolutions:r.resolutions})||this).Bt=void 0!==r.crossOrigin?r.crossOrigin:null,i.Fe=r.url,i.Rt=void 0!==r.imageLoadFunction?r.imageLoadFunction:cw,i.xh=r.params||{},i.Ph=!0,i.Ch(),i.kh=r.serverType,i._a=void 0===r.hidpi||r.hidpi,i.zt=null,i.Mh=[0,0],i._h=0,i.Sh=void 0!==r.ratio?r.ratio:1.5,i;}return jw(n,t),n.prototype.getFeatureInfoUrl=function(t,n,i,r){if(void 0!==this.Fe){var e=br(i),o=this.getProjection();o&&o!==e&&(n=Uf(o,e,t,n),t=Cr(t,e,o));var s=Yn(t,n,0,Ew),u={SERVICE:"WMS",VERSION:Ow,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.xh.LAYERS};A(u,this.xh,r);var a=xi((t[0]-s[0])/n,4),h=xi((s[3]-t[1])/n,4);return u[this.Ph?"I":"X"]=a,u[this.Ph?"J":"Y"]=h,this.Oh(s,Ew,1,o||e,u);}},n.prototype.getLegendUrl=function(t,n){if(void 0!==this.Fe){var i={SERVICE:"WMS",VERSION:Ow,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===n||void 0===n.LAYER){var r=this.xh.LAYERS;if(!(!Array.isArray(r)||1===r.length))return;i.LAYER=r;}if(void 0!==t){var e=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*e/28e-5;}return A(i,n),sc(this.Fe,i);}},n.prototype.getParams=function(){return this.xh;},n.prototype.getImageInternal=function(t,n,i,r){if(void 0===this.Fe)return null;n=this.findNearestResolution(n),1==i||this._a&&void 0!==this.kh||(i=1);var e=n/i,o=Vn(t),s=Yn(o,e,0,[Mi(Qn(t)/e,4),Mi(Zn(t)/e,4)]),u=Yn(o,e,0,[Mi(this.Sh*Qn(t)/e,4),Mi(this.Sh*Zn(t)/e,4)]),a=this.zt;if(a&&this._h==this.getRevision()&&a.getResolution()==n&&a.getPixelRatio()==i&&On(a.getExtent(),s))return a;var h={SERVICE:"WMS",VERSION:Ow,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};A(h,this.xh),this.Mh[0]=bi(Qn(u)/e,4),this.Mh[1]=bi(Zn(u)/e,4);var f=this.Oh(u,this.Mh,i,r,h);return this.zt=new Ao(u,n,i,f,this.Bt,this.Rt),this._h=this.getRevision(),this.zt.addEventListener(z,this.handleImageChange.bind(this)),this.zt;},n.prototype.getImageLoadFunction=function(){return this.Rt;},n.prototype.Oh=function(t,n,i,r,e){if(Et(void 0!==this.Fe,9),e[this.Ph?"CRS":"SRS"]=r.getCode(),"STYLES"in this.xh||(e.STYLES=""),1!=i)switch(this.kh){case"geoserver":var o=90*i+.5|0;"FORMAT_OPTIONS"in e?e.FORMAT_OPTIONS+=";dpi:"+o:e.FORMAT_OPTIONS="dpi:"+o;break;case"mapserver":e.MAP_RESOLUTION=90*i;break;case"carmentaserver":case"qgis":e.DPI=90*i;break;default:Et(!1,8);}e.WIDTH=n[0],e.HEIGHT=n[1];var s,u=r.getAxisOrientation();return s=this.Ph&&"ne"==u.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,e.BBOX=s.join(","),sc(this.Fe,e);},n.prototype.getUrl=function(){return this.Fe;},n.prototype.setImageLoadFunction=function(t){this.zt=null,this.Rt=t,this.changed();},n.prototype.setUrl=function(t){t!=this.Fe&&(this.Fe=t,this.zt=null,this.changed());},n.prototype.updateParams=function(t){A(this.xh,t),this.Ch(),this.zt=null,this.changed();},n.prototype.Ch=function(){var t=this.xh.VERSION||Ow;this.Ph=Ki(t,"1.3")>=0;},n;}(lw),Aw=Tw,Pw={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},Cw={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function kw(t,n){for(var i,r,e=0;e<t.length;++e){var o=t[e];if("item"===o.rel){if(o.type===n){i=o.href;break;}Pw[o.type]?r=o.href:r||0!==o.type.indexOf("image/")||(r=o.href);}}if(!i){if(!r)throw new Error('Could not find "item" link');i=r;}return i;}function Nw(t,n,i){for(var r,e,o={},s=0;s<t.length;++s){var u=t[s];if(o[u.type]=u.href,"item"===u.rel){if(u.type===n){r=u.href;break;}Cw[u.type]&&(e=u.href);}}if(!r&&i)for(s=0;s<i.length;++s){var a=i[s];if(o[a]){r=o[a];break;}}if(!r){if(!e)throw new Error('Could not find "item" link');r=e;}return r;}function Iw(t,n,i,r){var e=t.projection;if(!e&&!(e=br(n.crs)))throw new Error("Unsupported CRS: ".concat(n.crs));for(var o="en"!==e.getAxisOrientation().substr(0,2),s=n.tileMatrices,u={},a=0;a<s.length;++a){var h=s[a];u[h.id]=h;}var f={},c=[];if(r)for(a=0;a<r.length;++a){var l=(g=r[a]).tileMatrix;c.push(l),f[l]=g;}else for(a=0;a<s.length;++a){l=s[a].id;c.push(l);}var v=c.length,p=new Array(v),d=new Array(v),y=new Array(v),m=new Array(v),w=[-1/0,-1/0,1/0,1/0];for(a=0;a<v;++a){l=c[a];var g,b=(h=u[l]).pointOfOrigin;if(p[a]=o?[b[1],b[0]]:b,d[a]=h.cellSize,y[a]=[h.matrixWidth,h.matrixHeight],m[a]=[h.tileWidth,h.tileHeight],g=f[l]){var x=h.cellSize*h.tileWidth,M=p[a][0]+g.minTileCol*x,_=p[a][0]+(g.maxTileCol+1)*x,S=h.cellSize*h.tileHeight,O=void 0,j=void 0;"bottomLeft"===h.cornerOfOrigin?(O=p[a][1]+g.minTileRow*S,j=p[a][1]+(g.maxTileRow+1)*S):(O=p[a][1]-(g.maxTileRow+1)*S,j=p[a][1]-g.minTileRow*S),$n(w,[M,O,_,j],w);}}var E=new Yf({origins:p,resolutions:d,sizes:y,tileSizes:m,extent:r?w:void 0}),T=t.context,P=t.url;return{grid:E,urlTemplate:i,urlFunction:function urlFunction(t,n,e){if(t){var o=c[t[0]],s=u[o],a="bottomLeft"===s.cornerOfOrigin,h={tileMatrix:o,tileCol:t[1],tileRow:a?-t[2]-1:t[2]};if(r){var l=f[s.id];if(h.tileCol<l.minTileCol||h.tileCol>l.maxTileCol||h.tileRow<l.minTileRow||h.tileRow>l.maxTileRow)return;}A(h,T);var v=i.replace(/\{(\w+?)\}/g,function(t,n){return h[n];});return Sf(P,v);}}};}function zw(t){return _f(t.url).then(function(n){return function(t,n){var i,r=n.tileMatrixSetLimits;if("map"===n.dataType)i=kw(n.links,t.mediaType);else{if("vector"!==n.dataType)throw new Error('Expected tileset data type to be "map" or "vector"');i=Nw(n.links,t.mediaType,t.supportedMediaTypes);}if(n.tileMatrixSet)return Iw(t,n.tileMatrixSet,i,r);var e=n.links.find(function(t){return"http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme"===t.rel;});if(!e)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet");var o=e.href;return _f(Sf(t.url,o)).then(function(n){return Iw(t,n,i,r);});}(t,n);});}var Lw=function(){var _t128=function t(n,i){return _t128=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t128(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t128(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Rw=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(r=n.interpolate),i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:r,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:"loading",tileLoadFunction:n.tileLoadFunction,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})||this,zw({url:n.url,projection:i.getProjection(),mediaType:n.mediaType,context:n.context||null}).then(i.Nh.bind(i)).catch(i.Ih.bind(i)),i;}return Lw(n,t),n.prototype.Nh=function(t){this.tileGrid=t.grid,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState("ready");},n.prototype.Ih=function(t){console.error(t),this.setState("error");},n;}(Ip),Fw=Rw,Gw=function(){var _t129=function t(n,i){return _t129=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t129(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t129(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Dw=function(t){function n(n){var i=this,r=n.projection||"EPSG:3857",e=n.extent||tc(r),o=n.tileGrid||Hf({extent:e,maxResolution:n.maxResolution,maxZoom:void 0!==n.maxZoom?n.maxZoom:22,minZoom:n.minZoom,tileSize:n.tileSize||512});return(i=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,interpolate:!0,opaque:!1,projection:r,state:n.state,tileGrid:o,tileLoadFunction:n.tileLoadFunction?n.tileLoadFunction:Uw,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:void 0===n.zDirection?1:n.zDirection})||this).Le=n.format?n.format:null,i.sourceTileCache=new nf(i.tileCache.highWaterMark),i.La=null==n.overlaps||n.overlaps,i.tileClass=n.tileClass?n.tileClass:lf,i.zh={},i;}return Gw(n,t),n.prototype.getFeaturesInExtent=function(t){var n=[],i=this.tileCache;if(0===i.getCount())return n;var r=$h(i.peekFirstKey())[0],e=this.tileGrid;return i.forEach(function(i){if(i.tileCoord[0]===r&&i.getState()===pt)for(var o=i.getSourceTiles(),s=0,u=o.length;s<u;++s){var a=o[s],h=a.tileCoord;if(ti(t,e.getTileCoordExtent(h))){var f=a.getFeatures();if(f)for(var c=0,l=f.length;c<l;++c){var v=f[c],p=v.getGeometry();ti(t,p.getExtent())&&n.push(v);}}}}),n;},n.prototype.getOverlaps=function(){return this.La;},n.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear();},n.prototype.expireCache=function(n,i){var r=this.getTileCacheForProjection(n),e=Object.keys(i).reduce(function(t,n){var i=Zh(n),e=r.peek(i);if(e)for(var o=e.sourceTiles,s=0,u=o.length;s<u;++s){t[o[s].getKey()]=!0;}return t;},{});t.prototype.expireCache.call(this,n,i),this.sourceTileCache.expireCache(e);},n.prototype.getSourceTiles=function(t,n,i){var r=this;if(i.getState()===lt){i.setState(vt);var e=i.wrappedTileCoord,o=this.getTileGridForProjection(n),s=o.getTileCoordExtent(e),u=e[0],a=o.getResolution(u);xn(s,-a,s);var h=this.tileGrid,f=h.getExtent();f&&$n(s,f,s);var c=h.getZForResolution(a,this.zDirection);h.forEachTileCoord(s,c,function(e){var o=r.tileUrlFunction(e,t,n),s=r.sourceTileCache.containsKey(o)?r.sourceTileCache.get(o):new r.tileClass(e,o?lt:yt,o,r.Le,r.tileLoadFunction);i.sourceTiles.push(s);var u=s.getState();if(u<pt){var a=function a(t){r.handleTileChange(t);var n=s.getState();if(n===pt||n===dt){var e=s.getKey();e in i.errorTileKeys?s.getState()===pt&&delete i.errorTileKeys[e]:i.loadingSourceTiles--,n===dt?i.errorTileKeys[e]=!0:s.removeEventListener(z,a),0===i.loadingSourceTiles&&i.setState(k(i.errorTileKeys)?pt:dt);}};s.addEventListener(z,a),i.loadingSourceTiles++;}u===lt&&(s.extent=h.getTileCoordExtent(e),s.projection=n,s.resolution=h.getResolution(e[0]),r.sourceTileCache.set(o,s),s.load());}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(function(t){return t.getState()===dt;})?dt:pt);}return i.sourceTiles;},n.prototype.getTile=function(t,n,i,r,e){var o,s=Yh(t,n,i),u=this.getKey();if(this.tileCache.containsKey(s)&&(o=this.tileCache.get(s)).key===u)return o;var a=[t,n,i],h=this.getTileCoordForTileUrlFunction(a,e),f=this.getTileGrid().getExtent(),c=this.getTileGridForProjection(e);if(h&&f){var l=c.getTileCoordExtent(h);xn(l,-c.getResolution(t),l),ti(f,l)||(h=null);}var v=!0;if(null!==h){var p=this.tileGrid,d=c.getResolution(t),y=p.getZForResolution(d,1),m=c.getTileCoordExtent(h);xn(m,-d,m),p.forEachTileCoord(m,y,function(t){v=v&&!this.tileUrlFunction(t,r,e);}.bind(this));}var w=new hf(a,v?yt:lt,h,this.getSourceTiles.bind(this,r,e));return w.key=u,o?(w.interimTile=o,w.refreshInterimChain(),this.tileCache.replace(s,w)):this.tileCache.set(s,w),w;},n.prototype.getTileGridForProjection=function(t){var n=t.getCode(),i=this.zh[n];if(!i){for(var r=this.tileGrid,e=r.getResolutions().slice(),o=e.map(function(t,n){return r.getOrigin(n);}),s=e.map(function(t,n){return r.getTileSize(n);}),u=e.length;u<43;++u){e.push(e[u-1]/2),o.push(o[u-1]),s.push(s[u-1]);}i=new Yf({extent:r.getExtent(),origins:o,resolutions:e,tileSizes:s}),this.zh[n]=i;}return i;},n.prototype.getTilePixelRatio=function(t){return t;},n.prototype.getTilePixelSize=function(t,n,i){var r=va(this.getTileGridForProjection(i).getTileSize(t),this.tmpSize);return[Math.round(r[0]*n),Math.round(r[1]*n)];},n.prototype.updateCacheSize=function(n,i){t.prototype.updateCacheSize.call(this,2*n,i),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(i).highWaterMark;},n;}(Pp),qw=Dw;function Uw(t,n){t.setLoader(function(i,r,e){df(n,t.getFormat(),i,r,e,t.onLoad.bind(t),t.onError.bind(t));});}var Bw=function(){var _t130=function t(n,i){return _t130=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t130(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t130(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Xw=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,format:n.format,overlaps:n.overlaps,projection:n.projection,tileClass:n.tileClass,transition:n.transition,wrapX:n.wrapX,zDirection:n.zDirection,state:"loading"})||this;return zw({url:n.url,projection:i.getProjection(),mediaType:n.mediaType,supportedMediaTypes:n.format.supportedMediaTypes,context:n.context||null}).then(i.Nh.bind(i)).catch(i.Ih.bind(i)),i;}return Bw(n,t),n.prototype.Nh=function(t){this.tileGrid=t.grid,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState("ready");},n.prototype.Ih=function(t){console.error(t),this.setState("error");},n;}(qw),Vw=Xw,Ww=function(){var _t131=function t(n,i){return _t131=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t131(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t131(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Yw='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',Kw=function(t){function n(n){var i,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate),i=void 0!==r.attributions?r.attributions:[Yw];var o=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",s=void 0!==r.url?r.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:i,attributionsCollapsible:!1,cacheSize:r.cacheSize,crossOrigin:o,interpolate:e,maxZoom:void 0!==r.maxZoom?r.maxZoom:19,opaque:void 0===r.opaque||r.opaque,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileLoadFunction:r.tileLoadFunction,transition:r.transition,url:s,wrapX:r.wrapX,zDirection:r.zDirection})||this;}return Ww(n,t),n;}(qp),Zw=Kw,$w=function(){var _t132=function t(n,i){return _t132=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t132(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t132(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Hw=function(t){function n(n){var i=n||{};return t.call(this,i)||this;}return $w(n,t),n;}(Ms),Jw=function(){var _t133=function t(n,i){return _t133=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t133(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t133(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Qw=[],tg=null;var ng,ig=function(t){function n(n){var i=t.call(this,n)||this;return i.container=null,i.renderedResolution,i.tempTransform=[1,0,0,1,0,0],i.pixelTransform=[1,0,0,1,0,0],i.inversePixelTransform=[1,0,0,1,0,0],i.context=null,i.containerReused=!1,i.Us=null,i.frameState=null,i;}return Jw(n,t),n.prototype.getImageData=function(t,n,i){var r,e;tg||((r=document.createElement("canvas")).width=1,r.height=1,tg=r.getContext("2d")),tg.clearRect(0,0,1,1);try{tg.drawImage(t,n,i,1,1,0,0,1,1),e=tg.getImageData(0,0,1,1).data;}catch(t){return tg=null,null;}return e;},n.prototype.getBackground=function(t){var n=this.getLayer().getBackground();return"function"==typeof n&&(n=n(t.viewState.resolution)),n||void 0;},n.prototype.useContainer=function(t,n,i){var r,e,o=this.getLayer().getClassName();t&&t.className===o&&(!i||t&&t.style.backgroundColor&&x(Ko(t.style.backgroundColor),Ko(i)))&&(u=t.firstElementChild)instanceof HTMLCanvasElement&&(e=u.getContext("2d"));if(e&&e.canvas.style.transform===n?(this.container=t,this.context=e,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(r=document.createElement("div")).className=o;var s=r.style;s.position="absolute",s.width="100%",s.height="100%";var u=(e=ko()).canvas;r.appendChild(u),(s=u.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=r,this.context=e;}this.containerReused||!i||this.container.style.backgroundColor||(this.container.style.backgroundColor=i);},n.prototype.clipUnrotated=function(t,n,i){var r=Hn(i),e=Jn(i),o=Xn(i),s=Bn(i);on(n.coordinateToPixelTransform,r),on(n.coordinateToPixelTransform,e),on(n.coordinateToPixelTransform,o),on(n.coordinateToPixelTransform,s);var u=this.inversePixelTransform;on(u,r),on(u,e),on(u,o),on(u,s),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(e[0]),Math.round(e[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip();},n.prototype.Xs=function(t,n,i){var r=this.getLayer();if(r.hasListener(t)){var e=new Ts(t,this.inversePixelTransform,i,n);r.dispatchEvent(e);}},n.prototype.preRender=function(t,n){this.frameState=n,this.Xs(ps,t,n);},n.prototype.postRender=function(t,n){this.Xs(ds,t,n);},n.prototype.getRenderTransform=function(t,n,i,r,e,o,s){var u=e/2,a=o/2,h=r/n,f=-h,c=-t[0]+s,l=-t[1];return fn(this.tempTransform,u,a,h,f,-i,c,l);},n.prototype.getDataAtPixel=function(t,n,i){var r=on(this.inversePixelTransform,t.slice()),e=this.context,o=this.getLayer().getExtent();if(o&&!Sn(o,on(n.pixelToCoordinateTransform,t.slice())))return null;var s,u=Math.round(r[0]),a=Math.round(r[1]),h=this.Us;if(!h){var f=document.createElement("canvas");f.width=1,f.height=1,h=f.getContext("2d"),this.Us=h;}h.clearRect(0,0,1,1);try{h.drawImage(e.canvas,u,a,1,1,0,0,1,1),s=h.getImageData(0,0,1,1).data;}catch(t){return"SecurityError"===t.name?(this.Us=null,new Uint8Array()):s;}return 0===s[3]?null:s;},n.prototype.disposeInternal=function(){delete this.frameState,t.prototype.disposeInternal.call(this);},n;}(Tl),rg=ig,eg=function(){var _t134=function t(n,i){return _t134=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t134(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t134(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),og=function(t){function n(n){var i=t.call(this,n)||this;return i.zt=null,i;}return eg(n,t),n.prototype.getImage=function(){return this.zt?this.zt.getImage():null;},n.prototype.prepareFrame=function(t){var n=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,r=t.viewState,e=r.resolution,o=this.getLayer().getSource(),s=t.viewHints,u=t.extent;if(void 0!==n.extent&&(u=$n(u,Gr(n.extent,r.projection))),!s[Du]&&!s[qu]&&!ni(u))if(o){var a=r.projection,h=o.getImage(u,e,i,a);h&&(this.loadImage(h)?this.zt=h:h.getState()===jo&&(this.zt=null));}else this.zt=null;return!!this.zt;},n.prototype.getData=function(t){var n=this.frameState;if(!n)return null;var i=this.getLayer(),r=on(n.pixelToCoordinateTransform,t.slice()),e=i.getExtent();if(e&&!Sn(e,r))return null;var o=this.zt.getExtent(),s=this.zt.getImage(),u=Qn(o),a=Math.floor(s.width*((r[0]-o[0])/u));if(a<0||a>=s.width)return null;var h=Zn(o),f=Math.floor(s.height*((o[3]-r[1])/h));return f<0||f>=s.height?null:this.getImageData(s,a,f);},n.prototype.renderFrame=function(t,n){var i=this.zt,r=i.getExtent(),e=i.getResolution(),o=i.getPixelRatio(),s=t.layerStatesArray[t.layerIndex],u=t.pixelRatio,a=t.viewState,h=a.center,f=u*e/(a.resolution*o),c=t.extent,l=a.resolution,v=a.rotation,p=Math.round(Qn(c)/l*u),d=Math.round(Zn(c)/l*u);fn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/u,1/u,v,-p/2,-d/2),cn(this.inversePixelTransform,this.pixelTransform);var y=vn(this.pixelTransform);this.useContainer(n,y,this.getBackground(t));var m=this.context,w=m.canvas;w.width!=p||w.height!=d?(w.width=p,w.height=d):this.containerReused||m.clearRect(0,0,p,d);var g=!1,b=!0;if(s.extent){var x=Gr(s.extent,a.projection);(g=(b=ti(x,t.extent))&&!On(x,t.extent))&&this.clipUnrotated(m,t,x);}var M=i.getImage(),_=fn(this.tempTransform,p/2,d/2,f,f,0,o*(r[0]-h[0])/e,o*(h[1]-r[3])/e);this.renderedResolution=e*u/o;var S=M.width*_[0],O=M.height*_[3];if(this.getLayer().getSource().getInterpolate()||A(m,Rf),this.preRender(m,t),b&&S>=.5&&O>=.5){var j=_[4],E=_[5],T=s.opacity,P=void 0;1!==T&&(P=m.globalAlpha,m.globalAlpha=T),m.drawImage(M,0,0,+M.width,+M.height,j,E,S,O),1!==T&&(m.globalAlpha=P);}return this.postRender(m,t),g&&m.restore(),A(m,Ff),y!==w.style.transform&&(w.style.transform=y),this.container;},n;}(rg),sg=og,ug=function(){var _t135=function t(n,i){return _t135=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t135(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t135(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),ag=function(t){function n(n){return t.call(this,n)||this;}return ug(n,t),n.prototype.createRenderer=function(){return new sg(this);},n.prototype.getData=function(n){return t.prototype.getData.call(this,n);},n;}(Hw),hg="preload",fg="useInterimTilesOnError",cg=function(){var _t136=function t(n,i){return _t136=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t136(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t136(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),lg=function(t){function n(n){var i=this,r=n||{},e=A({},r);return delete e.preload,delete e.useInterimTilesOnError,(i=t.call(this,e)||this).on,i.once,i.un,i.setPreload(void 0!==r.preload?r.preload:0),i.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),i;}return cg(n,t),n.prototype.getPreload=function(){return this.get(hg);},n.prototype.setPreload=function(t){this.set(hg,t);},n.prototype.getUseInterimTilesOnError=function(){return this.get(fg);},n.prototype.setUseInterimTilesOnError=function(t){this.set(fg,t);},n.prototype.getData=function(n){return t.prototype.getData.call(this,n);},n;}(Ms),vg=function(){var _t137=function t(n,i){return _t137=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t137(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t137(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),pg=function(t){function n(n){var i=t.call(this,n)||this;return i.extentChanged=!0,i.Lh=null,i.renderedPixelRatio,i.renderedProjection=null,i.renderedRevision,i.renderedTiles=[],i.Rh=!1,i.tmpExtent=[1/0,1/0,-1/0,-1/0],i.Fh=new of(0,0,0,0),i;}return vg(n,t),n.prototype.isDrawableTile=function(t){var n=this.getLayer(),i=t.getState(),r=n.getUseInterimTilesOnError();return i==pt||i==yt||i==dt&&!r;},n.prototype.getTile=function(t,n,i,r){var e=r.pixelRatio,o=r.viewState.projection,s=this.getLayer(),u=s.getSource().getTile(t,n,i,e,o);return u.getState()==dt&&(s.getUseInterimTilesOnError()?s.getPreload()>0&&(this.Rh=!0):u.setState(pt)),this.isDrawableTile(u)||(u=u.getInterimTile()),u;},n.prototype.getData=function(t){var n=this.frameState;if(!n)return null;var i=this.getLayer(),r=on(n.pixelToCoordinateTransform,t.slice()),e=i.getExtent();if(e&&!Sn(e,r))return null;for(var o=n.pixelRatio,s=n.viewState.projection,u=n.viewState,a=i.getRenderSource(),h=a.getTileGridForProjection(u.projection),f=a.getTilePixelRatio(n.pixelRatio),c=h.getZForResolution(u.resolution);c>=h.getMinZoom();--c){var l=h.getTileCoordForCoordAndZ(r,c),v=a.getTile(c,l[1],l[2],o,s);if(!(v instanceof qo||v instanceof gl))return null;if(v.getState()===pt){var p=h.getOrigin(c),d=va(h.getTileSize(c)),y=h.getResolution(c),m=Math.floor(f*((r[0]-p[0])/y-l[1]*d[0])),w=Math.floor(f*((p[1]-r[1])/y-l[2]*d[1])),g=Math.round(f*a.getGutterForProjection(u.projection));return this.getImageData(v.getImage(),m+g,w+g);}}return null;},n.prototype.loadedTileCallback=function(n,i,r){return!!this.isDrawableTile(r)&&t.prototype.loadedTileCallback.call(this,n,i,r);},n.prototype.prepareFrame=function(t){return!!this.getLayer().getSource();},n.prototype.renderFrame=function(t,n){var i=t.layerStatesArray[t.layerIndex],r=t.viewState,e=r.projection,s=r.resolution,u=r.center,a=r.rotation,h=t.pixelRatio,f=this.getLayer(),c=f.getSource(),l=c.getRevision(),v=c.getTileGridForProjection(e),p=v.getZForResolution(s,c.zDirection),y=v.getResolution(p),m=t.extent,w=t.viewState.resolution,g=c.getTilePixelRatio(h),b=Math.round(Qn(m)/w*h),x=Math.round(Zn(m)/w*h),M=i.extent&&Gr(i.extent,e);M&&(m=$n(m,Gr(i.extent,e)));var _=y*b/2/g,S=y*x/2/g,O=[u[0]-_,u[1]-S,u[0]+_,u[1]+S],j=v.getTileRangeForExtentAndZ(m,p),E={};E[p]={};var T=this.createLoadedTileFinder(c,e,E),P=this.tmpExtent,C=this.Fh;this.Rh=!1;for(var k=a?Kn(r.center,w,a,t.size):void 0,N=j.minX;N<=j.maxX;++N){for(var I=j.minY;I<=j.maxY;++I){if(!a||v.tileCoordIntersectsViewport([p,N,I],k)){var z=this.getTile(p,N,I,t);if(this.isDrawableTile(z)){var L=o(this);if(z.getState()==pt)E[p][z.tileCoord.toString()]=z,(ot=z.inTransition(L))&&1!==i.opacity&&(z.endTransition(L),ot=!1),this.Rh||!ot&&-1!==this.renderedTiles.indexOf(z)||(this.Rh=!0);if(1===z.getAlpha(L,t.time))continue;}var R=v.getTileCoordChildTileRange(z.tileCoord,C,P),F=!1;R&&(F=T(p+1,R)),F||v.forEachTileCoordParentTileRange(z.tileCoord,T,C,P);}}}var G=y/s*h/g;fn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/h,1/h,a,-b/2,-x/2);var D=vn(this.pixelTransform);this.useContainer(n,D,this.getBackground(t));var q=this.context,U=q.canvas;cn(this.inversePixelTransform,this.pixelTransform),fn(this.tempTransform,b/2,x/2,G,G,0,-b/2,-x/2),U.width!=b||U.height!=x?(U.width=b,U.height=x):this.containerReused||q.clearRect(0,0,b,x),M&&this.clipUnrotated(q,t,M),c.getInterpolate()||A(q,Rf),this.preRender(q,t),this.renderedTiles.length=0;var B,X,V,W=Object.keys(E).map(Number);W.sort(d),1!==i.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(B=[],X=[]):W=W.reverse();for(var Y=W.length-1;Y>=0;--Y){var K=W[Y],Z=c.getTilePixelSize(K,h,e),$=v.getResolution(K)/y,H=Z[0]*$*G,J=Z[1]*$*G,Q=v.getTileCoordForCoordAndZ(Hn(O),K),tt=v.getTileCoordExtent(Q),nt=on(this.tempTransform,[g*(tt[0]-O[0])/y,g*(O[3]-tt[3])/y]),it=g*c.getGutterForProjection(e),rt=E[K];for(var et in rt){var ot,st=(z=rt[et]).tileCoord,ut=Q[1]-st[1],at=Math.round(nt[0]-(ut-1)*H),ht=Q[2]-st[2],ft=Math.round(nt[1]-(ht-1)*J),ct=at-(N=Math.round(nt[0]-ut*H)),lt=ft-(I=Math.round(nt[1]-ht*J)),vt=p===K,dt=!1;if(!(ot=vt&&1!==z.getAlpha(o(this),t.time)))if(B){V=[N,I,N+ct,I,N+ct,I+lt,N,I+lt];for(var yt=0,mt=B.length;yt<mt;++yt){if(p!==K&&K<X[yt]){var wt=B[yt];ti([N,I,N+ct,I+lt],[wt[0],wt[3],wt[4],wt[7]])&&(dt||(q.save(),dt=!0),q.beginPath(),q.moveTo(V[0],V[1]),q.lineTo(V[2],V[3]),q.lineTo(V[4],V[5]),q.lineTo(V[6],V[7]),q.moveTo(wt[6],wt[7]),q.lineTo(wt[4],wt[5]),q.lineTo(wt[2],wt[3]),q.lineTo(wt[0],wt[1]),q.clip());}}B.push(V),X.push(K);}else q.clearRect(N,I,ct,lt);this.drawTileImage(z,t,N,I,ct,lt,it,vt),B&&!ot?(dt&&q.restore(),this.renderedTiles.unshift(z)):this.renderedTiles.push(z),this.updateUsedTiles(t.usedTiles,c,z);}}return this.renderedRevision=l,this.renderedResolution=y,this.extentChanged=!this.Lh||!Nn(this.Lh,O),this.Lh=O,this.renderedPixelRatio=h,this.renderedProjection=e,this.manageTilePyramid(t,c,v,h,e,m,p,f.getPreload()),this.scheduleExpireCache(t,c),this.postRender(q,t),i.extent&&q.restore(),A(q,Ff),D!==U.style.transform&&(U.style.transform=D),this.container;},n.prototype.drawTileImage=function(t,n,i,r,e,s,u,a){var h=this.getTileImage(t);if(h){var f=o(this),c=n.layerStatesArray[n.layerIndex],l=c.opacity*(a?t.getAlpha(f,n.time):1),v=l!==this.context.globalAlpha;v&&(this.context.save(),this.context.globalAlpha=l),this.context.drawImage(h,u,u,h.width-2*u,h.height-2*u,i,r,e,s),v&&this.context.restore(),l!==c.opacity?n.animate=!0:a&&t.endTransition(f);}},n.prototype.getImage=function(){var t=this.context;return t?t.canvas:null;},n.prototype.getTileImage=function(t){return t.getImage();},n.prototype.scheduleExpireCache=function(t,n){if(n.canExpireCache()){var i=function(t,n,i){var r=o(t);r in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[r]);}.bind(null,n);t.postRenderFunctions.push(i);}},n.prototype.updateUsedTiles=function(t,n,i){var r=o(n);r in t||(t[r]={}),t[r][i.getKey()]=!0;},n.prototype.manageTilePyramid=function(t,n,i,r,e,s,u,a,h){var f=o(n);f in t.wantedTiles||(t.wantedTiles[f]={});var c,l,v,p,d,y,m=t.wantedTiles[f],w=t.tileQueue,g=i.getMinZoom(),b=t.viewState.rotation,x=b?Kn(t.viewState.center,t.viewState.resolution,b,t.size):void 0,M=0;for(y=g;y<=u;++y){for(l=i.getTileRangeForExtentAndZ(s,y,l),v=i.getResolution(y),p=l.minX;p<=l.maxX;++p){for(d=l.minY;d<=l.maxY;++d){b&&!i.tileCoordIntersectsViewport([y,p,d],x)||(u-y<=a?(++M,(c=n.getTile(y,p,d,r,e)).getState()==lt&&(m[c.getKey()]=!0,w.isKeyQueued(c.getKey())||w.enqueue([c,f,i.getTileCoordCenter(c.tileCoord),v])),void 0!==h&&h(c)):n.useTile(y,p,d,e));}}}n.updateCacheSize(M,e);},n;}(rg),dg=pg,yg=function(){var _t138=function t(n,i){return _t138=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t138(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t138(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),mg=function(t){function n(n){return t.call(this,n)||this;}return yg(n,t),n.prototype.createRenderer=function(){return new dg(this);},n;}(lg),wg=function(){var _t139=function t(n,i){return _t139=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t139(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t139(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),gg=!0;try{new ImageData(10,10);}catch(t){gg=!1;}function bg(t,n,i){if(gg)return new ImageData(t,n,i);ng||(ng=document.createElement("canvas").getContext("2d"));var r=ng.createImageData(n,i);return r.data.set(t),r;}function xg(t){var n=!0;try{new ImageData(10,10);}catch(t){n=!1;}function i(t,i,r){return n?new ImageData(t,i,r):{data:t,width:i,height:r};}return function(n){var r=n.buffers,e=n.meta,o=n.imageOps,s=n.width,u=n.height,a=r.length,h=r[0].byteLength;if(o){for(var f=new Array(a),c=0;c<a;++c){f[c]=i(new Uint8ClampedArray(r[c]),s,u);}return t(f,e).data.buffer;}var l=new Uint8ClampedArray(h),v=new Array(a),p=new Array(a);for(c=0;c<a;++c){v[c]=new Uint8ClampedArray(r[c]),p[c]=[0,0,0,0];}for(var d=0;d<h;d+=4){for(var y=0;y<a;++y){var m=v[y];p[y][0]=m[d],p[y][1]=m[d+1],p[y][2]=m[d+2],p[y][3]=m[d+3];}var w=t(p,e);l[d]=w[0],l[d+1]=w[1],l[d+2]=w[2],l[d+3]=w[3];}return l.buffer;};}function Mg(t,n){var i=Object.keys(t.lib||{}).map(function(n){return"var "+n+" = "+t.lib[n].toString()+";";}).concat(["var __minion__ = ("+xg.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker("undefined"==typeof Blob?"data:text/javascript;base64,"+Buffer.from(i.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})));return r.addEventListener("message",n),r;}var _g=function(t){function n(n){var i,r=t.call(this)||this;r._imageOps=!!n.imageOps,i=0===n.threads?0:r._imageOps?1:n.threads||1;var e=new Array(i);if(i)for(var o=0;o<i;++o){e[o]=Mg(n,r._onWorkerMessage.bind(r,o));}else e[0]=function(t,n){var i=xg(t.operation),r=!1;return{postMessage:function postMessage(t){setTimeout(function(){r||n({data:{buffer:i(t),meta:t.meta}});},0);},terminate:function terminate(){r=!0;}};}(n,r._onWorkerMessage.bind(r,0));return r._workers=e,r._queue=[],r._maxQueueLength=n.queue||1/0,r._running=0,r._dataLookup={},r._job=null,r;}return wg(n,t),n.prototype.process=function(t,n,i){this._enqueue({inputs:t,meta:n,callback:i}),this._dispatch();},n.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;){this._queue.shift().callback(null,null);}},n.prototype._dispatch=function(){if(!this._running&&0!==this._queue.length){var t=this._queue.shift();this._job=t;var n=t.inputs[0].width,i=t.inputs[0].height,r=t.inputs.map(function(t){return t.data.buffer;}),e=this._workers.length;if(this._running=e,1!==e)for(var o=t.inputs[0].data.length,s=4*Math.ceil(o/4/e),u=0;u<e;++u){for(var a=u*s,h=[],f=0,c=r.length;f<c;++f){h.push(r[f].slice(a,a+s));}this._workers[u].postMessage({buffers:h,meta:t.meta,imageOps:this._imageOps,width:n,height:i},h);}else this._workers[0].postMessage({buffers:r,meta:t.meta,imageOps:this._imageOps,width:n,height:i},r);}},n.prototype._onWorkerMessage=function(t,n){this.disposed||(this._dataLookup[t]=n.data,--this._running,0===this._running&&this._resolveJob());},n.prototype._resolveJob=function(){var t,n,i=this._job,r=this._workers.length;if(1===r)t=new Uint8ClampedArray(this._dataLookup[0].buffer),n=this._dataLookup[0].meta;else{var e=i.inputs[0].data.length;t=new Uint8ClampedArray(e),n=new Array(r);for(var o=4*Math.ceil(e/4/r),s=0;s<r;++s){var u=this._dataLookup[s].buffer,a=s*o;t.set(new Uint8ClampedArray(u),a),n[s]=this._dataLookup[s].meta;}}this._job=null,this._dataLookup={},i.callback(null,bg(t,i.inputs[0].width,i.inputs[0].height),n),this._dispatch();},n.prototype.disposeInternal=function(){for(var t=0;t<this._workers.length;++t){this._workers[t].terminate();}this._workers.length=0;},n;}(v),Sg="beforeoperations",Og="afteroperations",jg="pixel",Eg="image",Tg=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.extent=i.extent,e.resolution=i.viewState.resolution/i.pixelRatio,e.data=r,e;}return wg(n,t),n;}(c),Ag=function(t){function n(n){var i=t.call(this,{projection:null})||this;i.on,i.once,i.un,i.Gh=null,i.Dh=void 0!==n.operationType?n.operationType:jg,i.qh=void 0!==n.threads?n.threads:1,i.Uh=function(t){for(var n=t.length,i=new Array(n),r=0;r<n;++r){i[r]=kg(t[r]);}return i;}(n.sources);for(var r,e=i.changed.bind(i),s=0,u=i.Uh.length;s<u;++s){i.Uh[s].addEventListener(z,e);}return i.hr=new Fu(function(){return 1;},i.changed.bind(i)),i.Bh,i.Xh=null,i._h,i.Ki={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(r=i.Uh,r.map(function(t){return t.getLayerState();})),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:i.hr,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:o(i),renderTargets:{}},i.setAttributions(function(t){for(var i=[],r=0,e=n.sources.length;r<e;++r){var o=n.sources[r],s=(o instanceof _p?o:o.getSource()).getAttributions();if("function"==typeof s){var u=s(t);i.push.apply(i,u);}}return 0!==i.length?i:null;}),void 0!==n.operation&&i.setOperation(n.operation,n.lib),i;}return wg(n,t),n.prototype.setOperation=function(t,n){this.Gh&&this.Gh.dispose(),this.Gh=new _g({operation:t,imageOps:this.Dh===Eg,queue:1,lib:n,threads:this.qh}),this.changed();},n.prototype.Vh=function(t,n,i){var r=A({},this.Ki);r.viewState=A({},r.viewState);var e=Vn(t);r.extent=t.slice(),r.size[0]=Math.round(Qn(t)/n),r.size[1]=Math.round(Zn(t)/n),r.time=Date.now();var o=r.viewState;return o.center=e,o.projection=i,o.resolution=n,r;},n.prototype.Wh=function(){for(var t=!0,n=0,i=this.Uh.length;n<i;++n){if("ready"!==this.Uh[n].getSource().getState()){t=!1;break;}}return t;},n.prototype.getImage=function(t,n,i,r){if(!this.Wh())return null;var e=this.Vh(t,n,r);if(this.Bh=e,this.Xh){var o=this.Xh.getResolution(),s=this.Xh.getExtent();n===o&&Nn(t,s)||(this.Xh=null);}return this.Xh&&this.getRevision()===this._h||this.Yh(),e.tileQueue.loadMoreTiles(16,16),e.animate&&requestAnimationFrame(this.changed.bind(this)),this.Xh;},n.prototype.Yh=function(){for(var t=this.Bh,n=this.Uh.length,i=new Array(n),r=0;r<n;++r){t.layerIndex=r;var e=Cg(this.Uh[r],t);if(!e)return;i[r]=e;}var o={};this.dispatchEvent(new Tg(Sg,t,o)),this.Gh.process(i,o,this.Kh.bind(this,t));},n.prototype.Kh=function(t,n,i,r){if(!n&&i){var e=t.extent,o=t.viewState.resolution;if(o===this.Bh.viewState.resolution&&Nn(e,this.Bh.extent)){var s;if(this.Xh)s=this.Xh.getImage().getContext("2d");else s=ko(Math.round(Qn(e)/o),Math.round(Zn(e)/o)),this.Xh=new Co(e,o,1,s.canvas);s.putImageData(i,0,0),this.changed(),this._h=this.getRevision(),this.dispatchEvent(new Tg(Og,t,r)),t.animate&&requestAnimationFrame(this.changed.bind(this));}}},n.prototype.disposeInternal=function(){this.Gh&&this.Gh.dispose(),t.prototype.disposeInternal.call(this);},n;}(lw);Ag.prototype.dispose;var Pg=null;function Cg(t,n){var i=t.getRenderer();if(!i)throw new Error("Unsupported layer type: "+t);if(!i.prepareFrame(n))return null;var r=n.size[0],e=n.size[1];if(0===r||0===e)return null;var o,s=i.renderFrame(n,null);if(s instanceof HTMLCanvasElement)o=s;else{if(s&&(o=s.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===r&&o.height===e)return o.getContext("2d").getImageData(0,0,r,e);}if(Pg){var u=Pg.canvas;u.width!==r||u.height!==e?Pg=ko(r,e):Pg.clearRect(0,0,r,e);}else Pg=ko(r,e);return Pg.drawImage(o,0,0,r,e),Pg.getImageData(0,0,r,e);}function kg(t){var n;return t instanceof _p?t instanceof Ep?n=new mg({source:t}):t instanceof lw&&(n=new ag({source:t})):n=t,n;}var Ng=Ag,Ig=function(){var _t140=function t(n,i){return _t140=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t140(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t140(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),zg=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',Yw],Lg={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},Rg={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}},Fg=function(t){function n(n){var i=void 0===n.imageSmoothing||n.imageSmoothing;void 0!==n.interpolate&&(i=n.interpolate);var r=n.layer.indexOf("-"),e=-1==r?n.layer:n.layer.slice(0,r),o=Rg[e],s=Lg[n.layer],u=void 0!==n.url?n.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+n.layer+"/{z}/{x}/{y}."+s.extension;return t.call(this,{attributions:zg,cacheSize:n.cacheSize,crossOrigin:"anonymous",interpolate:i,maxZoom:null!=n.maxZoom?n.maxZoom:o.maxZoom,minZoom:null!=n.minZoom?n.minZoom:o.minZoom,opaque:s.opaque,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,transition:n.transition,url:u,wrapX:n.wrapX,zDirection:n.zDirection})||this;}return Ig(n,t),n;}(qp),Gg=Fg,Dg=function(){var _t141=function t(n,i){return _t141=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t141(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t141(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),qg=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(e=r.interpolate),(i=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,zDirection:r.zDirection})||this).xh=r.params||{},i._a=void 0===r.hidpi||r.hidpi,i.Ao=[1/0,1/0,-1/0,-1/0],i.setKey(i.Zh()),i;}return Dg(n,t),n.prototype.Zh=function(){var t=0,n=[];for(var i in this.xh){n[t++]=i+"-"+this.xh[i];}return n.join("/");},n.prototype.getParams=function(){return this.xh;},n.prototype.Oh=function(t,n,i,r,e,o){var s=this.urls;if(s){var u,a=e.getCode().split(/:(?=\d+$)/).pop();if(o.SIZE=n[0]+","+n[1],o.BBOX=i.join(","),o.BBOXSR=a,o.IMAGESR=a,o.DPI=Math.round(o.DPI?o.DPI*r:90*r),1==s.length)u=s[0];else u=s[mi(Hh(t),s.length)];return sc(u.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),o);}},n.prototype.getTilePixelRatio=function(t){return this._a?t:1;},n.prototype.updateParams=function(t){A(this.xh,t),this.setKey(this.Zh());},n.prototype.tileUrlFunction=function(t,n,i){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),!(r.getResolutions().length<=t[0])){1==n||this._a||(n=1);var e=r.getTileCoordExtent(t,this.Ao),o=va(r.getTileSize(t[0]),this.tmpSize);1!=n&&(o=la(o,n,this.tmpSize));var s={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return A(s,this.xh),this.Oh(t,o,e,n,i,s);}},n;}(Ip),Ug=qg,Bg=function(){var _t142=function t(n,i){return _t142=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t142(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t142(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Xg=function(t){function n(n){var i=this,r=n||{};return i=t.call(this,{opaque:!1,projection:r.projection,tileGrid:r.tileGrid,wrapX:void 0===r.wrapX||r.wrapX,zDirection:r.zDirection,url:r.template||"z:{z} x:{x} y:{y}",tileLoadFunction:function tileLoadFunction(t,n){var r=t.getTileCoord()[0],e=va(i.tileGrid.getTileSize(r)),o=ko(e[0],e[1]);o.strokeStyle="grey",o.strokeRect(.5,.5,e[0]+.5,e[1]+.5),o.fillStyle="grey",o.strokeStyle="white",o.textAlign="center",o.textBaseline="middle",o.font="24px sans-serif",o.lineWidth=4,o.strokeText(n,e[0]/2,e[1]/2,e[0]),o.fillText(n,e[0]/2,e[1]/2,e[0]),t.setImage(o.canvas);}})||this,i;}return Bg(n,t),n;}(qp),Vg=Xg,Wg=function(){var _t143=function t(n,i){return _t143=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t143(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t143(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Yg=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;if(void 0!==n.interpolate&&(r=n.interpolate),(i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:r,projection:br("EPSG:3857"),reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:"loading",tileLoadFunction:n.tileLoadFunction,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).$h=null,i.jo=n.tileSize,n.url){if(n.jsonp)gf(n.url,i.handleTileJSONResponse.bind(i),i.handleTileJSONError.bind(i));else{var e=new XMLHttpRequest();e.addEventListener("load",i.Hh.bind(i)),e.addEventListener("error",i.Jh.bind(i)),e.open("GET",n.url),e.send();}}else n.tileJSON?i.handleTileJSONResponse(n.tileJSON):Et(!1,51);return i;}return Wg(n,t),n.prototype.Hh=function(t){var n=t.target;if(!n.status||n.status>=200&&n.status<300){var i=void 0;try{i=JSON.parse(n.responseText);}catch(t){return void this.handleTileJSONError();}this.handleTileJSONResponse(i);}else this.handleTileJSONError();},n.prototype.Jh=function(t){this.handleTileJSONError();},n.prototype.getTileJSON=function(){return this.$h;},n.prototype.handleTileJSONResponse=function(t){var n,i=br("EPSG:4326"),r=this.getProjection();if(void 0!==t.bounds){var e=Ar(i,r);n=oi(t.bounds,e);}var o=tc(r),s=t.minzoom||0,u=Hf({extent:o,maxZoom:t.maxzoom||22,minZoom:s,tileSize:this.jo});if(this.tileGrid=u,this.tileUrlFunction=ic(t.tiles,u),void 0!==t.attribution&&!this.getAttributions()){var a=void 0!==n?n:o;this.setAttributions(function(n){return ti(a,n.extent)?[t.attribution]:null;});}this.$h=t,this.setState("ready");},n.prototype.handleTileJSONError=function(){this.setState("error");},n;}(Ip),Kg=Yg,Zg=function(){var _t144=function t(n,i){return _t144=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t144(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t144(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),$g=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate);var o=r.params||{},s=!("TRANSPARENT"in o)||o.TRANSPARENT;return(i=t.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,opaque:!s,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:r.tileClass,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,zDirection:r.zDirection})||this).js=void 0!==r.gutter?r.gutter:0,i.xh=o,i.Ph=!0,i.kh=r.serverType,i._a=void 0===r.hidpi||r.hidpi,i.Ao=[1/0,1/0,-1/0,-1/0],i.Ch(),i.setKey(i.Zh()),i;}return Zg(n,t),n.prototype.getFeatureInfoUrl=function(t,n,i,r){var e=br(i),o=this.getProjection(),s=this.getTileGrid();s||(s=this.getTileGridForProjection(e));var u=s.getZForResolution(n,this.zDirection),a=s.getTileCoordForCoordAndZ(t,u);if(!(s.getResolutions().length<=a[0])){var h=s.getResolution(a[0]),f=s.getTileCoordExtent(a,this.Ao),c=va(s.getTileSize(a[0]),this.tmpSize),l=this.js;0!==l&&(c=fa(c,l,this.tmpSize),f=xn(f,h*l,f)),o&&o!==e&&(h=Uf(o,e,t,h),f=kr(f,e,o),t=Cr(t,e,o));var v={SERVICE:"WMS",VERSION:Ow,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.xh.LAYERS};A(v,this.xh,r);var p=Math.floor((t[0]-f[0])/h),d=Math.floor((f[3]-t[1])/h);return v[this.Ph?"I":"X"]=p,v[this.Ph?"J":"Y"]=d,this.Oh(a,c,f,1,o||e,v);}},n.prototype.getLegendUrl=function(t,n){if(void 0!==this.urls[0]){var i={SERVICE:"WMS",VERSION:Ow,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===n||void 0===n.LAYER){var r=this.xh.LAYERS;if(!(!Array.isArray(r)||1===r.length))return;i.LAYER=r;}if(void 0!==t){var e=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*e/28e-5;}return A(i,n),sc(this.urls[0],i);}},n.prototype.getGutter=function(){return this.js;},n.prototype.getParams=function(){return this.xh;},n.prototype.Oh=function(t,n,i,r,e,o){var s=this.urls;if(s){if(o.WIDTH=n[0],o.HEIGHT=n[1],o[this.Ph?"CRS":"SRS"]=e.getCode(),"STYLES"in this.xh||(o.STYLES=""),1!=r)switch(this.kh){case"geoserver":var u=90*r+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+u:o.FORMAT_OPTIONS="dpi:"+u;break;case"mapserver":o.MAP_RESOLUTION=90*r;break;case"carmentaserver":case"qgis":o.DPI=90*r;break;default:Et(!1,52);}var a,h=e.getAxisOrientation(),f=i;if(this.Ph&&"ne"==h.substr(0,2)){var c=void 0;c=i[0],f[0]=i[1],f[1]=c,c=i[2],f[2]=i[3],f[3]=c;}if(o.BBOX=f.join(","),1==s.length)a=s[0];else a=s[mi(Hh(t),s.length)];return sc(a,o);}},n.prototype.getTilePixelRatio=function(t){return this._a&&void 0!==this.kh?t:1;},n.prototype.Zh=function(){var t=0,n=[];for(var i in this.xh){n[t++]=i+"-"+this.xh[i];}return n.join("/");},n.prototype.updateParams=function(t){A(this.xh,t),this.Ch(),this.setKey(this.Zh());},n.prototype.Ch=function(){var t=this.xh.VERSION||Ow;this.Ph=Ki(t,"1.3")>=0;},n.prototype.tileUrlFunction=function(t,n,i){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),!(r.getResolutions().length<=t[0])){1==n||this._a&&void 0!==this.kh||(n=1);var e=r.getResolution(t[0]),o=r.getTileCoordExtent(t,this.Ao),s=va(r.getTileSize(t[0]),this.tmpSize),u=this.js;0!==u&&(s=fa(s,u,this.tmpSize),o=xn(o,e*u,o)),1!=n&&(s=la(s,n,this.tmpSize));var a={SERVICE:"WMS",VERSION:Ow,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return A(a,this.xh),this.Oh(t,s,o,n,i,a);}},n;}(Ip),Hg=$g,Jg=function(){var _t145=function t(n,i){return _t145=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t145(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t145(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Qg=function(t){function n(n,i,r,e,o,s){var u=t.call(this,n,i)||this;return u.Nt=r,u.st=e,u.Qh=o,u.tf=null,u.nf=null,u.B=null,u.if=s,u;}return Jg(n,t),n.prototype.getImage=function(){return null;},n.prototype.getData=function(t){if(!this.tf||!this.nf)return null;var n=(t[0]-this.st[0])/(this.st[2]-this.st[0]),i=(t[1]-this.st[1])/(this.st[3]-this.st[1]),r=this.tf[Math.floor((1-i)*this.tf.length)];if("string"!=typeof r)return null;var e=r.charCodeAt(Math.floor(n*r.length));e>=93&&e--,e>=35&&e--;var o=null;if((e-=32)in this.nf){var s=this.nf[e];o=this.B&&s in this.B?this.B[s]:s;}return o;},n.prototype.forDataAtCoordinate=function(t,n,i){this.state==yt&&!0===i?(this.state=lt,$(this,z,function(i){n(this.getData(t));},this),this.rf()):!0===i?setTimeout(function(){n(this.getData(t));}.bind(this),0):n(this.getData(t));},n.prototype.getKey=function(){return this.Nt;},n.prototype.Ih=function(){this.state=dt,this.changed();},n.prototype.Ut=function(t){this.tf=t.grid,this.nf=t.keys,this.B=t.data,this.state=pt,this.changed();},n.prototype.rf=function(){if(this.state==lt)if(this.state=vt,this.if)gf(this.Nt,this.Ut.bind(this),this.Ih.bind(this));else{var t=new XMLHttpRequest();t.addEventListener("load",this.Hh.bind(this)),t.addEventListener("error",this.Jh.bind(this)),t.open("GET",this.Nt),t.send();}},n.prototype.Hh=function(t){var n=t.target;if(!n.status||n.status>=200&&n.status<300){var i=void 0;try{i=JSON.parse(n.responseText);}catch(t){return void this.Ih();}this.Ut(i);}else this.Ih();},n.prototype.Jh=function(t){this.Ih();},n.prototype.load=function(){this.Qh?this.rf():this.setState(yt);},n;}(_t),tb=function(t){function n(n){var i=t.call(this,{projection:br("EPSG:3857"),state:"loading",zDirection:n.zDirection})||this;if(i.Qh=void 0===n.preemptive||n.preemptive,i.ef=ec,i.uf=void 0,i.if=n.jsonp||!1,n.url){if(i.if)gf(n.url,i.handleTileJSONResponse.bind(i),i.handleTileJSONError.bind(i));else{var r=new XMLHttpRequest();r.addEventListener("load",i.Hh.bind(i)),r.addEventListener("error",i.Jh.bind(i)),r.open("GET",n.url),r.send();}}else n.tileJSON?i.handleTileJSONResponse(n.tileJSON):Et(!1,51);return i;}return Jg(n,t),n.prototype.Hh=function(t){var n=t.target;if(!n.status||n.status>=200&&n.status<300){var i=void 0;try{i=JSON.parse(n.responseText);}catch(t){return void this.handleTileJSONError();}this.handleTileJSONResponse(i);}else this.handleTileJSONError();},n.prototype.Jh=function(t){this.handleTileJSONError();},n.prototype.getTemplate=function(){return this.uf;},n.prototype.forDataAtCoordinateAndResolution=function(t,n,i,r){if(this.tileGrid){var e=this.tileGrid.getZForResolution(n,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,e);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,i,r);}else!0===r?setTimeout(function(){i(null);},0):i(null);},n.prototype.handleTileJSONError=function(){this.setState("error");},n.prototype.handleTileJSONResponse=function(t){var n,i=br("EPSG:4326"),r=this.getProjection();if(void 0!==t.bounds){var e=Ar(i,r);n=oi(t.bounds,e);}var o=tc(r),s=t.minzoom||0,u=Hf({extent:o,maxZoom:t.maxzoom||22,minZoom:s});this.tileGrid=u,this.uf=t.template;var a=t.grids;if(a){if(this.ef=ic(a,u),void 0!==t.attribution){var h=void 0!==n?n:o;this.setAttributions(function(n){return ti(h,n.extent)?[t.attribution]:null;});}this.setState("ready");}else this.setState("error");},n.prototype.getTile=function(t,n,i,r,e){var o=Yh(t,n,i);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var s=[t,n,i],u=this.getTileCoordForTileUrlFunction(s,e),a=this.ef(u,r,e),h=new Qg(s,void 0!==a?lt:yt,void 0!==a?a:"",this.tileGrid.getTileCoordExtent(s),this.Qh,this.if);return this.tileCache.set(o,h),h;},n.prototype.useTile=function(t,n,i){var r=Yh(t,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r);},n;}(Ep),nb=tb,ib=function(){var _t146=function t(n,i){return _t146=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t146(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t146(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),rb=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;void 0!==n.interpolate&&(r=n.interpolate);var e=void 0!==n.requestEncoding?n.requestEncoding:"KVP",o=n.tileGrid,s=n.urls;return void 0===s&&void 0!==n.url&&(s=oc(n.url)),(i=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:r,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:n.tileClass,tileGrid:o,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,urls:s,wrapX:void 0!==n.wrapX&&n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).af=void 0!==n.version?n.version:"1.0.0",i.Le=void 0!==n.format?n.format:"image/jpeg",i.hf=void 0!==n.dimensions?n.dimensions:{},i.Ds=n.layer,i.ff=n.matrixSet,i.H=n.style,i.cf=e,i.setKey(i.lf()),s&&s.length>0&&(i.tileUrlFunction=rc(s.map(i.createFromWMTSTemplate.bind(i)))),i;}return ib(n,t),n.prototype.setUrls=function(t){this.urls=t;var n=t.join("\n");this.setTileUrlFunction(rc(t.map(this.createFromWMTSTemplate.bind(this))),n);},n.prototype.getDimensions=function(){return this.hf;},n.prototype.getFormat=function(){return this.Le;},n.prototype.getLayer=function(){return this.Ds;},n.prototype.getMatrixSet=function(){return this.ff;},n.prototype.getRequestEncoding=function(){return this.cf;},n.prototype.getStyle=function(){return this.H;},n.prototype.getVersion=function(){return this.af;},n.prototype.lf=function(){var t=0,n=[];for(var i in this.hf){n[t++]=i+"-"+this.hf[i];}return n.join("/");},n.prototype.updateDimensions=function(t){A(this.hf,t),this.setKey(this.lf());},n.prototype.createFromWMTSTemplate=function(t){var n=this.cf,i={layer:this.Ds,style:this.H,tilematrixset:this.ff};"KVP"==n&&A(i,{Service:"WMTS",Request:"GetTile",Version:this.af,Format:this.Le}),t="KVP"==n?sc(t,i):t.replace(/\{(\w+?)\}/g,function(t,n){return n.toLowerCase()in i?i[n.toLowerCase()]:t;});var r=this.tileGrid,e=this.hf;return function(i,o,s){if(i){var u={TileMatrix:r.getMatrixId(i[0]),TileCol:i[1],TileRow:i[2]};A(u,e);var a=t;return a="KVP"==n?sc(a,u):a.replace(/\{(\w+?)\}/g,function(t,n){return u[n];});}};},n;}(Ip),eb=rb;var ob=function(){var _t147=function t(n,i){return _t147=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t147(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t147(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),sb="renderOrder",ub=function(t){function n(n){var i=this,r=n||{},e=A({},r);return delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,(i=t.call(this,e)||this).vf=void 0!==r.declutter&&r.declutter,i.pf=void 0!==r.renderBuffer?r.renderBuffer:100,i.H=null,i.tt=void 0,i.setStyle(r.style),i.df=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,i.yf=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting,i;}return ob(n,t),n.prototype.getDeclutter=function(){return this.vf;},n.prototype.getFeatures=function(n){return t.prototype.getFeatures.call(this,n);},n.prototype.getRenderBuffer=function(){return this.pf;},n.prototype.getRenderOrder=function(){return this.get(sb);},n.prototype.getStyle=function(){return this.H;},n.prototype.getStyleFunction=function(){return this.tt;},n.prototype.getUpdateWhileAnimating=function(){return this.df;},n.prototype.getUpdateWhileInteracting=function(){return this.yf;},n.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new dp(9)),this.getRenderer().renderDeclutter(t);},n.prototype.setRenderOrder=function(t){this.set(sb,t);},n.prototype.setStyle=function(t){this.H=void 0!==t?t:sp,this.tt=null===t?void 0:ep(this.H),this.changed();},n;}(Ms);var ab=function(){var _t148=function t(n,i){return _t148=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t148(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t148(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),hb=function(t){function n(n,i){var r=this,e=i.uniforms||{},s=[1,0,0,1,0,0];e[Jc]=s,(r=t.call(this,n,{uniforms:e,postProcesses:i.postProcesses})||this).ready=!1,r.mf=-1,r.wf=new Xc(ac,cc),r.gf=new Xc(ac,cc),r.bf=new Xc(hc,cc),r.Hs=i.vertexShader,r.Js=i.fragmentShader,r.$s,r.xf=!(!i.hitFragmentShader||!i.hitVertexShader),r.Mf=i.hitVertexShader,r._f=i.hitFragmentShader,r.Sf;var u=i.attributes?i.attributes.map(function(t){return{name:"a_"+t.name,size:1,type:el.FLOAT};}):[];r.attributes=[{name:"a_position",size:2,type:el.FLOAT},{name:"a_index",size:1,type:el.FLOAT}].concat(u),r.hitDetectionAttributes=[{name:"a_position",size:2,type:el.FLOAT},{name:"a_index",size:1,type:el.FLOAT},{name:"a_hitColor",size:4,type:el.FLOAT},{name:"a_featureUid",size:1,type:el.FLOAT}].concat(u),r.customAttributes=i.attributes?i.attributes:[],r.Zi=[1/0,1/0,-1/0,-1/0],r.Of=s,r.jf=[1,0,0,1,0,0],r.Ef=[1,0,0,1,0,0],r.Tf=new Float32Array(0),r.Af=new Float32Array(0),r.Pf,r.Cf=0,r.kf=function(){var t='const e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");const t=Object(e);for(let e=1,n=arguments.length;e<n;++e){const n=arguments[e];if(null!=n)for(const e in n)n.hasOwnProperty(e)&&(t[e]=n[e])}return t},n="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"";n.indexOf("firefox");-1!==n.indexOf("safari")&&-1==n.indexOf("chrom")&&(n.indexOf("version/15.4")>=0||n.match(/cpu (os|iphone os) 15_4 like mac os x/)),-1!==n.indexOf("webkit")&&n.indexOf("edge"),n.indexOf("macintosh"),"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&(self,WorkerGlobalScope),function(){let e=!1;try{const n=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,n),window.removeEventListener("_",null,n)}catch(e){}}(),new Array(6);const t="GENERATE_BUFFERS",o=[],r={vertexPosition:0,indexPosition:0};function i(e,n,t,o,r){e[n+0]=t,e[n+1]=o,e[n+2]=r}function s(e,n,t,s,f,c){const l=3+f,a=e[n+0],u=e[n+1],d=o;d.length=f;for(let t=0;t<d.length;t++)d[t]=e[n+2+t];let g=c?c.vertexPosition:0,x=c?c.indexPosition:0;const h=g/l;return i(t,g,a,u,0),d.length&&t.set(d,g+3),g+=l,i(t,g,a,u,1),d.length&&t.set(d,g+3),g+=l,i(t,g,a,u,2),d.length&&t.set(d,g+3),g+=l,i(t,g,a,u,3),d.length&&t.set(d,g+3),g+=l,s[x++]=h,s[x++]=h+1,s[x++]=h+3,s[x++]=h+1,s[x++]=h+2,s[x++]=h+3,r.vertexPosition=g,r.indexPosition=x,r}const f=self;f.onmessage=n=>{const o=n.data;if(o.type===t){const n=3,t=2,r=o.customAttributesCount,i=t+r,c=new Float32Array(o.renderInstructions),l=c.length/i,a=4*l*(r+n),u=new Uint32Array(6*l),d=new Float32Array(a);let g;for(let e=0;e<c.length;e+=i)g=s(c,e,d,u,r,g);const x=e({vertexBuffer:d.buffer,indexBuffer:u.buffer,renderInstructions:c.buffer},o);f.postMessage(x,[d.buffer,u.buffer,c.buffer])}};';return new Worker("undefined"==typeof Blob?"data:application/javascript;base64,"+Buffer.from(t,"binary").toString("base64"):URL.createObjectURL(new Blob([t],{type:"application/javascript"})));}(),r.kf.addEventListener("message",function(t){var n=t.data;if(n.type===Pl){var i=n.projectionTransform;n.hitDetection?(this.gf.fromArrayBuffer(n.vertexBuffer),this.helper.flushBufferData(this.gf)):(this.wf.fromArrayBuffer(n.vertexBuffer),this.helper.flushBufferData(this.wf)),this.bf.fromArrayBuffer(n.indexBuffer),this.helper.flushBufferData(this.bf),this.jf=i,cn(this.Ef,this.jf),n.hitDetection?this.Af=new Float32Array(t.data.renderInstructions):(this.Tf=new Float32Array(t.data.renderInstructions),n.generateBuffersRun===this.Cf&&(this.ready=!0)),this.getLayer().changed();}}.bind(r)),r.Nf={},r.If=0;var a=r.getLayer().getSource();return r.zf=[Z(a,Xp,r.Lf,r),Z(a,Vp,r.Rf,r),Z(a,Yp,r.Ff,r),Z(a,Wp,r.Gf,r)],a.forEachFeature(function(t){this.Nf[o(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.If++;}.bind(r)),r;}return ab(n,t),n.prototype.afterHelperCreated=function(){this.$s=this.helper.getProgram(this.Js,this.Hs),this.xf&&(this.Sf=this.helper.getProgram(this._f,this.Mf),this.Pf=new pl(this.helper));},n.prototype.Lf=function(t){var n=t.feature;this.Nf[o(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()},this.If++;},n.prototype.Rf=function(t){var n=t.feature;this.Nf[o(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()};},n.prototype.Ff=function(t){var n=t.feature;delete this.Nf[o(n)],this.If--;},n.prototype.Gf=function(){this.Nf={},this.If=0;},n.prototype.renderFrame=function(t){var n=this.helper.getGL();this.preRender(n,t);var i=t.viewState.projection,r=this.getLayer().getSource().getWrapX()&&i.canWrapX(),e=i.getExtent(),o=t.extent,s=r?Qn(e):null,u=r?Math.ceil((o[2]-e[2])/s)+1:1,a=r?Math.floor((o[0]-e[0])/s):0,h=a,f=this.bf.getSize();do{this.helper.makeProjectionTransform(t,this.Of),hn(this.Of,h*s,0),nn(this.Of,this.Ef),this.helper.applyUniforms(t),this.helper.drawElements(0,f);}while(++h<u);this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);var c=this.helper.getCanvas();return this.xf&&(this.renderHitDetection(t,a,u,s),this.Pf.clearCachedData()),this.postRender(n,t),c;},n.prototype.prepareFrameInternal=function(t){var n=this.getLayer(),i=n.getSource(),r=t.viewState,e=!t.viewHints[Du]&&!t.viewHints[qu],o=!Nn(this.Zi,t.extent),s=this.mf<i.getRevision();if(s&&(this.mf=i.getRevision()),e&&(o||s)){var u=r.projection,a=r.resolution,h=n instanceof ub?n.getRenderBuffer():0,f=xn(t.extent,h*a);i.loadFeatures(f,a,u),this.Df(t),this.Zi=t.extent.slice();}return this.helper.useProgram(this.$s),this.helper.prepareDraw(t),this.helper.bindBuffer(this.wf),this.helper.bindBuffer(this.bf),this.helper.enableAttributes(this.attributes),!0;},n.prototype.Df=function(t){var n=[1,0,0,1,0,0];this.helper.makeProjectionTransform(t,n);var i,r,e=(2+this.customAttributes.length)*this.If;if(this.Tf&&this.Tf.length===e||(this.Tf=new Float32Array(e)),this.xf){var o=(7+this.customAttributes.length)*this.If;this.Af&&this.Af.length===o||(this.Af=new Float32Array(o));}var s,u=[],a=[],h=0,f=0;for(var c in this.Nf){if((r=(i=this.Nf[c]).geometry)&&"Point"===r.getType()){u[0]=r.getFlatCoordinates()[0],u[1]=r.getFlatCoordinates()[1],on(n,u),s=zl(f+6,a),this.Tf[h++]=u[0],this.Tf[h++]=u[1],this.xf&&(this.Af[f++]=u[0],this.Af[f++]=u[1],this.Af[f++]=s[0],this.Af[f++]=s[1],this.Af[f++]=s[2],this.Af[f++]=s[3],this.Af[f++]=Number(c));for(var l=void 0,v=0;v<this.customAttributes.length;v++){l=this.customAttributes[v].callback(i.feature,i.properties),this.Tf[h++]=l,this.xf&&(this.Af[f++]=l);}}}var p={type:Pl,renderInstructions:this.Tf.buffer,customAttributesCount:this.customAttributes.length};if(p.projectionTransform=n,p.generateBuffersRun=++this.Cf,this.ready=!1,this.kf.postMessage(p,[this.Tf.buffer]),this.Tf=null,this.xf){var d={type:Pl,renderInstructions:this.Af.buffer,customAttributesCount:5+this.customAttributes.length};d.projectionTransform=n,d.hitDetection=!0,this.kf.postMessage(d,[this.Af.buffer]),this.Af=null;}},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e){if(Et(this.xf,66),this.Af){var o=on(n.coordinateToPixelTransform,t.slice()),s=this.Pf.readPixel(o[0]/2,o[1]/2),u=Ll([s[0]/255,s[1]/255,s[2]/255,s[3]/255]),a=this.Af[u],h=Math.floor(a).toString(),f=this.getLayer().getSource().getFeatureByUid(h);return f?r(f,this.getLayer(),null):void 0;}},n.prototype.renderHitDetection=function(t,n,i,r){if(this.gf.getSize()){var e=n;this.Pf.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.useProgram(this.Sf),this.helper.prepareDrawToRenderTarget(t,this.Pf,!0),this.helper.bindBuffer(this.gf),this.helper.bindBuffer(this.bf),this.helper.enableAttributes(this.hitDetectionAttributes);do{this.helper.makeProjectionTransform(t,this.Of),hn(this.Of,e*r,0),nn(this.Of,this.Ef),this.helper.applyUniforms(t);var o=this.bf.getSize();this.helper.drawElements(0,o);}while(++e<i);}},n.prototype.disposeInternal=function(){this.kf.terminate(),this.Ds=null,this.zf.forEach(function(t){H(t);}),this.zf=null,t.prototype.disposeInternal.call(this);},n;}(Rl),fb={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},cb=[fb.FILL],lb=[fb.STROKE],vb=[fb.BEGIN_PATH],pb=[fb.CLOSE_PATH],db=fb,yb=function(){var _t149=function t(n,i){return _t149=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t149(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t149(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),mb=function(t){function n(n,i,r,e){var o=t.call(this)||this;return o.tolerance=n,o.maxExtent=i,o.pixelRatio=e,o.maxLineWidth=0,o.resolution=r,o.qf=null,o.Uf=null,o.Bf=null,o.instructions=[],o.coordinates=[],o.Xf=[],o.hitDetectionInstructions=[],o.state={},o;}return yb(n,t),n.prototype.applyPixelRatio=function(t){var n=this.pixelRatio;return 1==n?t:t.map(function(t){return t*n;});},n.prototype.appendFlatPointCoordinates=function(t,n){for(var i=this.getBufferedMaxExtent(),r=this.Xf,e=this.coordinates,o=e.length,s=0,u=t.length;s<u;s+=n){r[0]=t[s],r[1]=t[s+1],Sn(i,r)&&(e[o++]=r[0],e[o++]=r[1]);}return o;},n.prototype.appendFlatLineCoordinates=function(t,n,i,r,e,o){var s=this.coordinates,u=s.length,a=this.getBufferedMaxExtent();o&&(n+=r);var h,f,c,l=t[n],v=t[n+1],p=this.Xf,d=!0;for(h=n+r;h<i;h+=r){p[0]=t[h],p[1]=t[h+1],(c=En(a,p))!==f?(d&&(s[u++]=l,s[u++]=v,d=!1),s[u++]=p[0],s[u++]=p[1]):c===dn?(s[u++]=p[0],s[u++]=p[1],d=!1):d=!0,l=p[0],v=p[1],f=c;}return(e&&d||h===n+r)&&(s[u++]=l,s[u++]=v),u;},n.prototype.Vf=function(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){var u=i[o],a=this.appendFlatLineCoordinates(t,n,u,r,!1,!1);e.push(a),n=u;}return n;},n.prototype.drawCustom=function(t,n,i,r){this.beginGeometry(t,n);var e,o,s,u,a,h=t.getType(),f=t.getStride(),c=this.coordinates.length;switch(h){case"MultiPolygon":e=t.getOrientedFlatCoordinates(),u=[];var l=t.getEndss();a=0;for(var v=0,p=l.length;v<p;++v){var d=[];a=this.Vf(e,a,l[v],f,d),u.push(d);}this.instructions.push([db.CUSTOM,c,u,t,i,_e]),this.hitDetectionInstructions.push([db.CUSTOM,c,u,t,r||i,_e]);break;case"Polygon":case"MultiLineString":s=[],e="Polygon"==h?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.Vf(e,0,t.getEnds(),f,s),this.instructions.push([db.CUSTOM,c,s,t,i,Me]),this.hitDetectionInstructions.push([db.CUSTOM,c,s,t,r||i,Me]);break;case"LineString":case"Circle":e=t.getFlatCoordinates(),o=this.appendFlatLineCoordinates(e,0,e.length,f,!1,!1),this.instructions.push([db.CUSTOM,c,o,t,i,xe]),this.hitDetectionInstructions.push([db.CUSTOM,c,o,t,r||i,xe]);break;case"MultiPoint":e=t.getFlatCoordinates(),(o=this.appendFlatPointCoordinates(e,f))>c&&(this.instructions.push([db.CUSTOM,c,o,t,i,xe]),this.hitDetectionInstructions.push([db.CUSTOM,c,o,t,r||i,xe]));break;case"Point":e=t.getFlatCoordinates(),this.coordinates.push(e[0],e[1]),o=this.coordinates.length,this.instructions.push([db.CUSTOM,c,o,t,i]),this.hitDetectionInstructions.push([db.CUSTOM,c,o,t,r||i]);}this.endGeometry(n);},n.prototype.beginGeometry=function(t,n){this.qf=[db.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.qf),this.Uf=[db.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.Uf);},n.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates};},n.prototype.reverseHitDetectionInstructions=function(){var t,n=this.hitDetectionInstructions;n.reverse();var i,r,e=n.length,o=-1;for(t=0;t<e;++t){(r=(i=n[t])[0])==db.END_GEOMETRY?o=t:r==db.BEGIN_GEOMETRY&&(i[2]=t,w(this.hitDetectionInstructions,o,t),o=-1);}},n.prototype.setFillStrokeStyle=function(t,n){var i=this.state;if(t){var r=t.getColor();i.fillStyle=vf(r||Gs);}else i.fillStyle=void 0;if(n){var e=n.getColor();i.strokeStyle=vf(e||Xs);var o=n.getLineCap();i.lineCap=void 0!==o?o:Ds;var s=n.getLineDash();i.lineDash=s?s.slice():qs;var u=n.getLineDashOffset();i.lineDashOffset=u||0;var a=n.getLineJoin();i.lineJoin=void 0!==a?a:Us;var h=n.getWidth();i.lineWidth=void 0!==h?h:1;var f=n.getMiterLimit();i.miterLimit=void 0!==f?f:Bs,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.Bf=null);}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0;},n.prototype.createFill=function(t){var n=t.fillStyle,i=[db.SET_FILL_STYLE,n];return"string"!=typeof n&&i.push(!0),i;},n.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t));},n.prototype.createStroke=function(t){return[db.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio];},n.prototype.updateFillStyle=function(t,n){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(n.call(this,t)),t.currentFillStyle=i);},n.prototype.updateStrokeStyle=function(t,n){var i=t.strokeStyle,r=t.lineCap,e=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,u=t.lineWidth,a=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||e!=t.currentLineDash&&!x(t.currentLineDash,e)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=u||t.currentMiterLimit!=a)&&(void 0!==i&&n.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=e,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=u,t.currentMiterLimit=a);},n.prototype.endGeometry=function(t){this.qf[2]=this.instructions.length,this.qf=null,this.Uf[2]=this.hitDetectionInstructions.length,this.Uf=null;var n=[db.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n);},n.prototype.getBufferedMaxExtent=function(){if(!this.Bf&&(this.Bf=Mn(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;xn(this.Bf,t,this.Bf);}return this.Bf;},n;}(Of),wb=mb,gb=function(){var _t150=function t(n,i){return _t150=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t150(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t150(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),bb=function(t){function n(n,i,r,e){var o=t.call(this,n,i,r,e)||this;return o._u=null,o.zt=null,o.Wf=void 0,o.Yf=void 0,o.Kf=void 0,o.Zf=void 0,o.ou=void 0,o.$f=void 0,o.Hf=void 0,o.su=void 0,o.Dr=void 0,o.uu=void 0,o.Uu=void 0,o.fu=void 0,o.Jf=void 0,o;}return gb(n,t),n.prototype.drawPoint=function(t,n){if(this.zt){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),r=t.getStride(),e=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([db.DRAW_IMAGE,e,o,this.zt,this.Yf*this.Wf,this.Kf*this.Wf,Math.ceil(this.Zf*this.Wf),this.ou,this.$f*this.Wf,this.Hf*this.Wf,this.su,this.Dr,[this.uu[0]*this.pixelRatio/this.Wf,this.uu[1]*this.pixelRatio/this.Wf],Math.ceil(this.Uu*this.Wf),this.fu,this.Jf]),this.hitDetectionInstructions.push([db.DRAW_IMAGE,e,o,this._u,this.Yf,this.Kf,this.Zf,this.ou,this.$f,this.Hf,this.su,this.Dr,this.uu,this.Uu,this.fu,this.Jf]),this.endGeometry(n);}},n.prototype.drawMultiPoint=function(t,n){if(this.zt){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),r=t.getStride(),e=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([db.DRAW_IMAGE,e,o,this.zt,this.Yf*this.Wf,this.Kf*this.Wf,Math.ceil(this.Zf*this.Wf),this.ou,this.$f*this.Wf,this.Hf*this.Wf,this.su,this.Dr,[this.uu[0]*this.pixelRatio/this.Wf,this.uu[1]*this.pixelRatio/this.Wf],Math.ceil(this.Uu*this.Wf),this.fu,this.Jf]),this.hitDetectionInstructions.push([db.DRAW_IMAGE,e,o,this._u,this.Yf,this.Kf,this.Zf,this.ou,this.$f,this.Hf,this.su,this.Dr,this.uu,this.Uu,this.fu,this.Jf]),this.endGeometry(n);}},n.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.Yf=void 0,this.Kf=void 0,this._u=null,this.zt=null,this.Wf=void 0,this.Zf=void 0,this.uu=void 0,this.ou=void 0,this.$f=void 0,this.Hf=void 0,this.su=void 0,this.Dr=void 0,this.Uu=void 0,t.prototype.finish.call(this);},n.prototype.setImageStyle=function(t,n){var i=t.getAnchor(),r=t.getSize(),e=t.getOrigin();this.Wf=t.getPixelRatio(this.pixelRatio),this.Yf=i[0],this.Kf=i[1],this._u=t.getHitDetectionImage(),this.zt=t.getImage(this.pixelRatio),this.Zf=r[1],this.ou=t.getOpacity(),this.$f=e[0],this.Hf=e[1],this.su=t.getRotateWithView(),this.Dr=t.getRotation(),this.uu=t.getScaleArray(),this.Uu=r[0],this.fu=t.getDeclutterMode(),this.Jf=n;},n;}(wb),xb=function(){var _t151=function t(n,i){return _t151=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t151(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t151(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Mb=function(t){function n(n,i,r,e){return t.call(this,n,i,r,e)||this;}return xb(n,t),n.prototype.Qf=function(t,n,i,r){var e=this.coordinates.length,o=this.appendFlatLineCoordinates(t,n,i,r,!1,!1),s=[db.MOVE_TO_LINE_TO,e,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i;},n.prototype.drawLineString=function(t,n){var i=this.state,r=i.strokeStyle,e=i.lineWidth;if(void 0!==r&&void 0!==e){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([db.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,qs,0],vb);var o=t.getFlatCoordinates(),s=t.getStride();this.Qf(o,0,o.length,s),this.hitDetectionInstructions.push(lb),this.endGeometry(n);}},n.prototype.drawMultiLineString=function(t,n){var i=this.state,r=i.strokeStyle,e=i.lineWidth;if(void 0!==r&&void 0!==e){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([db.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],vb);for(var o=t.getEnds(),s=t.getFlatCoordinates(),u=t.getStride(),a=0,h=0,f=o.length;h<f;++h){a=this.Qf(s,a,o[h],u);}this.hitDetectionInstructions.push(lb),this.endGeometry(n);}},n.prototype.finish=function(){var n=this.state;return null!=n.lastStroke&&n.lastStroke!=this.coordinates.length&&this.instructions.push(lb),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this);},n.prototype.applyStroke=function(n){null!=n.lastStroke&&n.lastStroke!=this.coordinates.length&&(this.instructions.push(lb),n.lastStroke=this.coordinates.length),n.lastStroke=0,t.prototype.applyStroke.call(this,n),this.instructions.push(vb);},n;}(wb),_b=Mb,Sb=function(){var _t152=function t(n,i){return _t152=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t152(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t152(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Ob=function(t){function n(n,i,r,e){return t.call(this,n,i,r,e)||this;}return Sb(n,t),n.prototype.tc=function(t,n,i,r){var e=this.state,o=void 0!==e.fillStyle,s=void 0!==e.strokeStyle,u=i.length;this.instructions.push(vb),this.hitDetectionInstructions.push(vb);for(var a=0;a<u;++a){var h=i[a],f=this.coordinates.length,c=this.appendFlatLineCoordinates(t,n,h,r,!0,!s),l=[db.MOVE_TO_LINE_TO,f,c];this.instructions.push(l),this.hitDetectionInstructions.push(l),s&&(this.instructions.push(pb),this.hitDetectionInstructions.push(pb)),n=h;}return o&&(this.instructions.push(cb),this.hitDetectionInstructions.push(cb)),s&&(this.instructions.push(lb),this.hitDetectionInstructions.push(lb)),n;},n.prototype.drawCircle=function(t,n){var i=this.state,r=i.fillStyle,e=i.strokeStyle;if(void 0!==r||void 0!==e){this.ic(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([db.SET_FILL_STYLE,Gs]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([db.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getFlatCoordinates(),s=t.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,s,!1,!1);var a=[db.CIRCLE,u];this.instructions.push(vb,a),this.hitDetectionInstructions.push(vb,a),void 0!==i.fillStyle&&(this.instructions.push(cb),this.hitDetectionInstructions.push(cb)),void 0!==i.strokeStyle&&(this.instructions.push(lb),this.hitDetectionInstructions.push(lb)),this.endGeometry(n);}},n.prototype.drawPolygon=function(t,n){var i=this.state,r=i.fillStyle,e=i.strokeStyle;if(void 0!==r||void 0!==e){this.ic(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([db.SET_FILL_STYLE,Gs]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([db.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getEnds(),s=t.getOrientedFlatCoordinates(),u=t.getStride();this.tc(s,0,o,u),this.endGeometry(n);}},n.prototype.drawMultiPolygon=function(t,n){var i=this.state,r=i.fillStyle,e=i.strokeStyle;if(void 0!==r||void 0!==e){this.ic(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([db.SET_FILL_STYLE,Gs]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([db.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var o=t.getEndss(),s=t.getOrientedFlatCoordinates(),u=t.getStride(),a=0,h=0,f=o.length;h<f;++h){a=this.tc(s,a,o[h],u);}this.endGeometry(n);}},n.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var n=this.tolerance;if(0!==n)for(var i=this.coordinates,r=0,e=i.length;r<e;++r){i[r]=me(i[r],n);}return t.prototype.finish.call(this);},n.prototype.ic=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke);},n;}(wb),jb=Ob;function Eb(t,n,i,r,e){var o,s,u,a,h,f,c,l,v,p=i,d=i,y=0,m=0,w=i;for(o=i;o<r;o+=e){var g=n[o],b=n[o+1];void 0!==a&&(l=g-a,v=b-h,u=Math.sqrt(l*l+v*v),void 0!==f&&(m+=s,Math.acos((f*l+c*v)/(s*u))>t&&(m>y&&(y=m,p=w,d=o),m=0,w=o-e)),s=u,f=l,c=v),a=g,h=b;}return(m+=u)>y?[w,o]:[p,d];}var Tb=function(){var _t153=function t(n,i){return _t153=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t153(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t153(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Ab={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Pb=function(t){function n(n,i,r,e){var o=t.call(this,n,i,r,e)||this;return o.rc=null,o.eo="",o.oo=0,o.so=0,o.uo=void 0,o.ao=0,o.fo=null,o.fillStates={},o.co=null,o.strokeStates={},o.lo={},o.textStates={},o.ec="",o.oc="",o.sc="",o.Jf=void 0,o;}return Tb(n,t),n.prototype.finish=function(){var n=t.prototype.finish.call(this);return n.textStates=this.textStates,n.fillStates=this.fillStates,n.strokeStates=this.strokeStates,n;},n.prototype.drawText=function(t,n){var i=this.fo,r=this.co,e=this.lo;if(""!==this.eo&&e&&(i||r)){var o=this.coordinates,s=o.length,u=t.getType(),a=null,h=t.getStride();if(e.placement!==cp||"LineString"!=u&&"MultiLineString"!=u&&"Polygon"!=u&&"MultiPolygon"!=u){var f=e.overflow?null:[];switch(u){case"Point":case"MultiPoint":a=t.getFlatCoordinates();break;case"LineString":a=t.getFlatMidpoint();break;case"Circle":a=t.getCenter();break;case"MultiLineString":a=t.getFlatMidpoints(),h=2;break;case"Polygon":a=t.getFlatInteriorPoint(),e.overflow||f.push(a[2]/this.resolution),h=3;break;case"MultiPolygon":var c=t.getFlatInteriorPoints();a=[];for(M=0,_=c.length;M<_;M+=3){e.overflow||f.push(c[M+2]/this.resolution),a.push(c[M],c[M+1]);}if(0===a.length)return;h=2;}if((P=this.appendFlatPointCoordinates(a,h))===s)return;if(f&&(P-s)/2!=a.length/h){var l=s/2;f=f.filter(function(t,n){var i=o[2*(l+n)]===a[n*h]&&o[2*(l+n)+1]===a[n*h+1];return i||--l,i;});}this.uc(),(e.backgroundFill||e.backgroundStroke)&&(this.setFillStrokeStyle(e.backgroundFill,e.backgroundStroke),e.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),e.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);var v=e.padding;if(v!=Ys&&(e.scale[0]<0||e.scale[1]<0)){var p=e.padding[0],d=e.padding[1],y=e.padding[2],m=e.padding[3];e.scale[0]<0&&(d=-d,m=-m),e.scale[1]<0&&(p=-p,y=-y),v=[p,d,y,m];}var w=this.pixelRatio;this.instructions.push([db.DRAW_IMAGE,s,P,null,NaN,NaN,NaN,1,0,0,this.uo,this.ao,[1,1],NaN,void 0,this.Jf,v==Ys?Ys:v.map(function(t){return t*w;}),!!e.backgroundFill,!!e.backgroundStroke,this.eo,this.ec,this.sc,this.oc,this.oo,this.so,f]);var g=1/w;this.hitDetectionInstructions.push([db.DRAW_IMAGE,s,P,null,NaN,NaN,NaN,1,0,0,this.uo,this.ao,[g,g],NaN,void 0,this.Jf,v,!!e.backgroundFill,!!e.backgroundStroke,this.eo,this.ec,this.sc,this.oc,this.oo,this.so,f]),this.endGeometry(n);}else{if(!ti(this.getBufferedMaxExtent(),t.getExtent()))return;var b=void 0;if(a=t.getFlatCoordinates(),"LineString"==u)b=[a.length];else if("MultiLineString"==u)b=t.getEnds();else if("Polygon"==u)b=t.getEnds().slice(0,1);else if("MultiPolygon"==u){var x=t.getEndss();b=[];for(var M=0,_=x.length;M<_;++M){b.push(x[M][0]);}}this.beginGeometry(t,n);for(var S=e.textAlign,O=0,j=void 0,E=0,T=b.length;E<T;++E){if(null==S){var A=Eb(e.maxAngle,a,O,b[E],h);O=A[0],j=A[1];}else j=b[E];for(var M=O;M<j;M+=h){o.push(a[M],a[M+1]);}var P=o.length;O=b[E],this.ac(s,P),s=P;}this.endGeometry(n);}}},n.prototype.uc=function(){var t=this.co,n=this.lo,i=this.fo,r=this.sc;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var e=this.ec;e in this.textStates||(this.textStates[e]={font:n.font,textAlign:n.textAlign||Vs,justify:n.justify,textBaseline:n.textBaseline||Ws,scale:n.scale});var o=this.oc;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}));},n.prototype.ac=function(t,n){var i=this.co,r=this.lo,e=this.sc,o=this.ec,s=this.oc;this.uc();var u=this.pixelRatio,a=Ab[r.textBaseline],h=this.so*u,f=this.eo,c=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([db.DRAW_CHARS,t,n,a,r.overflow,s,r.maxAngle,u,h,e,c*u,f,o,1]),this.hitDetectionInstructions.push([db.DRAW_CHARS,t,n,a,r.overflow,s,r.maxAngle,1,h,e,c,f,o,1/u]);},n.prototype.setTextStyle=function(t,n){var i,r,e;if(t){var s=t.getFill();s?((r=this.fo)||(r={},this.fo=r),r.fillStyle=vf(s.getColor()||Gs)):(r=null,this.fo=r);var u=t.getStroke();if(u){(e=this.co)||(e={},this.co=e);var a=u.getLineDash(),h=u.getLineDashOffset(),f=u.getWidth(),c=u.getMiterLimit();e.lineCap=u.getLineCap()||Ds,e.lineDash=a?a.slice():qs,e.lineDashOffset=void 0===h?0:h,e.lineJoin=u.getLineJoin()||Us,e.lineWidth=void 0===f?1:f,e.miterLimit=void 0===c?Bs:c,e.strokeStyle=vf(u.getColor()||Xs);}else e=null,this.co=e;i=this.lo;var l=t.getFont()||Fs;tu(l);var v=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||Ws,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Ys,i.scale=void 0===v?[1,1]:v;var p=t.getOffsetX(),d=t.getOffsetY(),y=t.getRotateWithView(),m=t.getRotation();this.eo=t.getText()||"",this.oo=void 0===p?0:p,this.so=void 0===d?0:d,this.uo=void 0!==y&&y,this.ao=void 0===m?0:m,this.sc=e?("string"==typeof e.strokeStyle?e.strokeStyle:o(e.strokeStyle))+e.lineCap+e.lineDashOffset+"|"+e.lineWidth+e.lineJoin+e.miterLimit+"["+e.lineDash.join()+"]":"",this.ec=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.oc=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+o(r.fillStyle):"";}else this.eo="";this.Jf=n;},n;}(wb),Cb=Pb,kb={Circle:jb,Default:wb,Image:bb,LineString:_b,Polygon:jb,Text:Cb},Nb=function(){function t(t,n,i,r){this.hc=t,this.fc=n,this.kt=r,this.cc=i,this.lc={};}return t.prototype.finish=function(){var t={};for(var n in this.lc){t[n]=t[n]||{};var i=this.lc[n];for(var r in i){var e=i[r].finish();t[n][r]=e;}}return t;},t.prototype.getBuilder=function(t,n){var i=void 0!==t?t.toString():"0",r=this.lc[i];void 0===r&&(r={},this.lc[i]=r);var e=r[n];void 0===e&&(e=new(0,kb[n])(this.hc,this.fc,this.cc,this.kt),r[n]=e);return e;},t;}();function Ib(t,n,i,r,e,o,s,u,a,h,f,c){var l=t[n],v=t[n+1],p=0,d=0,y=0,m=0;function w(){p=l,d=v,l=t[n+=r],v=t[n+1],m+=y,y=Math.sqrt((l-p)*(l-p)+(v-d)*(v-d));}do{w();}while(n<i-r&&m+y<o);for(var g=0===y?0:(o-m)/y,b=wi(p,l,g),x=wi(d,v,g),M=n-r,_=m,S=o+u*a(h,e,f);n<i-r&&m+y<S;){w();}var O,j=wi(p,l,g=0===y?0:(S-m)/y),E=wi(d,v,g);if(c){var T=[b,x,j,E];Vr(T,0,4,2,c,T,T),O=T[0]>T[2];}else O=b>j;var A,P=Math.PI,C=[],k=M+r===n;if(y=0,m=_,l=t[n=M],v=t[n+1],k){w(),A=Math.atan2(v-d,l-p),O&&(A+=A>0?-P:P);var N=(j+b)/2,I=(E+x)/2;return C[0]=[N,I,(S-o)/2,A,e],C;}for(var z=0,L=(e=e.replace(/\n/g," ")).length;z<L;){w();var R=Math.atan2(v-d,l-p);if(O&&(R+=R>0?-P:P),void 0!==A){var F=R-A;if(F+=F>P?-2*P:F<-P?2*P:0,Math.abs(F)>s)return null;}A=R;for(var G=z,D=0;z<L;++z){var q=u*a(h,e[O?L-z-1:z],f);if(n+r<i&&m+y<o+D+q/2)break;D+=q;}if(z!==G){var U=O?e.substring(L-G,L-z):e.substring(G,z);N=wi(p,l,g=0===y?0:(o+D/2-m)/y),I=wi(d,v,g);C.push([N,I,D/2,R,U]),o+=D;}}return C;}function zb(t,n,i,r){for(var e=t[n],o=t[n+1],s=0,u=n+r;u<i;u+=r){var a=t[u],h=t[u+1];s+=Math.sqrt((a-e)*(a-e)+(h-o)*(h-o)),e=a,o=h;}return s;}var Lb=[1/0,1/0,-1/0,-1/0],Rb=[],Fb=[],Gb=[],Db=[];function qb(t){return t[3].declutterBox;}var Ub=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Bb(t,n){return"start"!==n&&"end"!==n||Ub.test(t)||(n="start"===n?"left":"right"),Ab[n];}function Xb(t,n,i){return i>0&&t.push("\n",""),t.push(n,""),t;}var Vb=function(){function t(t,n,i,r){this.overlaps=i,this.pixelRatio=n,this.resolution=t,this.vc,this.instructions=r.instructions,this.coordinates=r.coordinates,this.dc={},this.yc=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.vo=null,this.Ge=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.mc={},this.rc={};}return t.prototype.createLabel=function(t,n,i,r){var e=t+n+i+r;if(this.rc[e])return this.rc[e];var o=r?this.strokeStates[r]:null,s=i?this.fillStates[i]:null,u=this.textStates[n],a=this.pixelRatio,h=[u.scale[0]*a,u.scale[1]*a],f=Array.isArray(t),c=u.justify?Ab[u.justify]:Bb(Array.isArray(t)?t[0]:t,u.textAlign||Vs),l=r&&o.lineWidth?o.lineWidth:0,v=f?t:t.split("\n").reduce(Xb,[]),p=ou(u,v),d=p.width,y=p.height,m=p.widths,w=p.heights,g=p.lineWidths,b=d+l,x=[],M=(b+2)*h[0],_=(y+l)*h[1],S={width:M<0?Math.floor(M):Math.ceil(M),height:_<0?Math.floor(_):Math.ceil(_),contextInstructions:x};(1==h[0]&&1==h[1]||x.push("scale",h),r)&&(x.push("strokeStyle",o.strokeStyle),x.push("lineWidth",l),x.push("lineCap",o.lineCap),x.push("lineJoin",o.lineJoin),x.push("miterLimit",o.miterLimit),(Zt?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(x.push("setLineDash",[o.lineDash]),x.push("lineDashOffset",o.lineDashOffset)));i&&x.push("fillStyle",s.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center");for(var O,j=.5-c,E=c*b+j*l,T=[],A=[],P=0,C=0,k=0,N=0,I=0,z=v.length;I<z;I+=2){var L=v[I];if("\n"!==L){var R=v[I+1]||u.font;R!==O&&(r&&T.push("font",R),i&&A.push("font",R),O=R),P=Math.max(P,w[k]);var F=[L,E+j*m[k]+c*(m[k]-g[N]),.5*(l+P)+C];E+=m[k],r&&T.push("strokeText",F),i&&A.push("fillText",F),++k;}else C+=P,P=0,E=c*b+j*l,++N;}return Array.prototype.push.apply(x,T),Array.prototype.push.apply(x,A),this.rc[e]=S,S;},t.prototype.wc=function(t,n,i,r,e,o,s){t.beginPath(),t.moveTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,e),t.lineTo.apply(t,n),o&&(this.vc=o[2],this.lu(t)),s&&(this.gc(t,s),t.stroke());},t.prototype.bc=function(t,n,i,r,e,o,s,u,a,h,f,c,l,v,p,d){var y,m=i-(s*=c[0]),w=r-(u*=c[1]),g=e+a>t?t-a:e,b=o+h>n?n-h:o,x=v[3]+g*c[0]+v[1],M=v[0]+b*c[1]+v[2],_=m-v[3],S=w-v[0];return(p||0!==f)&&(Rb[0]=_,Db[0]=_,Rb[1]=S,Fb[1]=S,Fb[0]=_+x,Gb[0]=Fb[0],Gb[1]=S+M,Db[1]=Gb[1]),0!==f?(on(y=fn([1,0,0,1,0,0],i,r,1,1,f,-i,-r),Rb),on(y,Fb),on(y,Gb),on(y,Db),An(Math.min(Rb[0],Fb[0],Gb[0],Db[0]),Math.min(Rb[1],Fb[1],Gb[1],Db[1]),Math.max(Rb[0],Fb[0],Gb[0],Db[0]),Math.max(Rb[1],Fb[1],Gb[1],Db[1]),Lb)):An(Math.min(_,_+x),Math.min(S,S+M),Math.max(_,_+x),Math.max(S,S+M),Lb),l&&(m=Math.round(m),w=Math.round(w)),{drawImageX:m,drawImageY:w,drawImageW:g,drawImageH:b,originX:a,originY:h,declutterBox:{minX:Lb[0],minY:Lb[1],maxX:Lb[2],maxY:Lb[3],value:d},canvasTransform:y,scale:c};},t.prototype.xc=function(t,n,i,r,e,o,s){var u=!(!o&&!s),a=r.declutterBox,h=t.canvas,f=s?s[2]*r.scale[0]/2:0;return a.minX-f<=h.width/n&&a.maxX+f>=0&&a.minY-f<=h.height/n&&a.maxY+f>=0&&(u&&this.wc(t,Rb,Fb,Gb,Db,o,s),su(t,r.canvasTransform,e,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0;},t.prototype.lu=function(t){if(this.vc){var n=on(this.yc,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(n[0]%i,n[1]%i),t.rotate(this.Ge);}t.fill(),this.vc&&t.restore();},t.prototype.gc=function(t,n){t.strokeStyle=n[1],t.lineWidth=n[2],t.lineCap=n[3],t.lineJoin=n[4],t.miterLimit=n[5],t.setLineDash&&(t.lineDashOffset=n[7],t.setLineDash(n[6]));},t.prototype.Mc=function(t,n,i,r){var e=this.textStates[n],o=this.createLabel(t,n,r,i),s=this.strokeStates[i],u=this.pixelRatio,a=Bb(Array.isArray(t)?t[0]:t,e.textAlign||Vs),h=Ab[e.textBaseline||Ws],f=s&&s.lineWidth?s.lineWidth:0;return{label:o,anchorX:a*(o.width/u-2*e.scale[0])+2*(.5-a)*f,anchorY:h*o.height/u+2*(.5-h)*f};},t.prototype._c=function(t,n,i,r,e,o,s,u){var a;this.vo&&x(i,this.yc)?a=this.vo:(this.vo||(this.vo=[]),a=Xr(this.coordinates,0,this.coordinates.length,2,i,this.vo),en(this.yc,i));for(var h,f,c,l,v,p,d,y,m,w,g,b,M,_,S,O,j=0,E=r.length,T=0,A=0,P=0,C=null,k=null,N=this.dc,I=this.Ge,z=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,L={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:I},R=this.instructions!=r||this.overlaps?0:200;j<E;){var F=r[j];switch(F[0]){case db.BEGIN_GEOMETRY:M=F[1],O=F[3],M.getGeometry()?void 0===s||ti(s,O.getExtent())?++j:j=F[2]+1:j=F[2];break;case db.BEGIN_PATH:A>R&&(this.lu(t),A=0),P>R&&(t.stroke(),P=0),A||P||(t.beginPath(),l=NaN,v=NaN),++j;break;case db.CIRCLE:var G=a[T=F[1]],D=a[T+1],q=a[T+2]-G,U=a[T+3]-D,B=Math.sqrt(q*q+U*U);t.moveTo(G+B,D),t.arc(G,D,B,0,2*Math.PI,!0),++j;break;case db.CLOSE_PATH:t.closePath(),++j;break;case db.CUSTOM:T=F[1],h=F[2];var X=F[3],V=F[4],W=6==F.length?F[5]:void 0;L.geometry=X,L.feature=M,j in N||(N[j]=[]);var Y=N[j];W?W(a,T,h,2,Y):(Y[0]=a[T],Y[1]=a[T+1],Y.length=2),V(Y,L),++j;break;case db.DRAW_IMAGE:T=F[1],h=F[2],y=F[3],f=F[4],c=F[5];var K=F[6],Z=F[7],$=F[8],H=F[9],J=F[10],Q=F[11],tt=F[12],nt=F[13],it=F[14],rt=F[15];if(!y&&F.length>=20){m=F[19],w=F[20],g=F[21],b=F[22];var et=this.Mc(m,w,g,b);y=et.label,F[3]=y;var ot=F[23];f=(et.anchorX-ot)*this.pixelRatio,F[4]=f;var st=F[24];c=(et.anchorY-st)*this.pixelRatio,F[5]=c,K=y.height,F[6]=K,nt=y.width,F[13]=nt;}var ut=void 0;F.length>25&&(ut=F[25]);var at=void 0,ht=void 0,ft=void 0;F.length>17?(at=F[16],ht=F[17],ft=F[18]):(at=Ys,ht=!1,ft=!1),J&&z?Q+=I:J||z||(Q-=I);for(var ct=0;T<h;T+=2){if(!(ut&&ut[ct++]<nt/this.pixelRatio)){var lt=[t,n,y,Gt=this.bc(y.width,y.height,a[T],a[T+1],nt,K,f,c,$,H,Q,tt,e,at,ht||ft,M),Z,ht?C:null,ft?k:null];if(u){if("none"===it)continue;if("obstacle"===it){u.insert(Gt.declutterBox);continue;}var vt=void 0,pt=void 0;if(rt){var dt=h-T;if(!rt[dt]){rt[dt]=lt;continue;}if(vt=rt[dt],delete rt[dt],pt=qb(vt),u.collides(pt))continue;}if(u.collides(Gt.declutterBox))continue;vt&&(u.insert(pt),this.xc.apply(this,vt)),u.insert(Gt.declutterBox);}this.xc.apply(this,lt);}}++j;break;case db.DRAW_CHARS:var yt=F[1],mt=F[2],wt=F[3],gt=F[4];b=F[5];var bt=F[6],xt=F[7],Mt=F[8];g=F[9];var _t=F[10];m=F[11],w=F[12];var St=[F[13],F[13]],Ot=this.textStates[w],jt=Ot.font,Et=[Ot.scale[0]*xt,Ot.scale[1]*xt],Tt=void 0;jt in this.mc?Tt=this.mc[jt]:(Tt={},this.mc[jt]=Tt);var At=zb(a,yt,mt,2),Pt=Math.abs(Et[0])*eu(jt,m,Tt);if(gt||Pt<=At){var Ct=this.textStates[w].textAlign,kt=Ib(a,yt,mt,2,m,(At-Pt)*Ab[Ct],bt,Math.abs(Et[0]),eu,jt,Tt,z?0:this.Ge);t:if(kt){var Nt=[],It=void 0,zt=void 0,Lt=void 0,Rt=void 0,Ft=void 0;if(g)for(It=0,zt=kt.length;It<zt;++It){Lt=(Ft=kt[It])[4],Rt=this.createLabel(Lt,w,"",g),f=Ft[2]+(Et[0]<0?-_t:_t),c=wt*Rt.height+2*(.5-wt)*_t*Et[1]/Et[0]-Mt;var Gt=this.bc(Rt.width,Rt.height,Ft[0],Ft[1],Rt.width,Rt.height,f,c,0,0,Ft[3],St,!1,Ys,!1,M);if(u&&u.collides(Gt.declutterBox))break t;Nt.push([t,n,Rt,Gt,1,null,null]);}if(b)for(It=0,zt=kt.length;It<zt;++It){Lt=(Ft=kt[It])[4],Rt=this.createLabel(Lt,w,b,""),f=Ft[2],c=wt*Rt.height-Mt;Gt=this.bc(Rt.width,Rt.height,Ft[0],Ft[1],Rt.width,Rt.height,f,c,0,0,Ft[3],St,!1,Ys,!1,M);if(u&&u.collides(Gt.declutterBox))break t;Nt.push([t,n,Rt,Gt,1,null,null]);}u&&u.load(Nt.map(qb));for(var Dt=0,qt=Nt.length;Dt<qt;++Dt){this.xc.apply(this,Nt[Dt]);}}}++j;break;case db.END_GEOMETRY:if(void 0!==o){var Ut=o(M=F[1],O);if(Ut)return Ut;}++j;break;case db.FILL:R?A++:this.lu(t),++j;break;case db.MOVE_TO_LINE_TO:for(T=F[1],h=F[2],_=a[T],d=(S=a[T+1])+.5|0,(p=_+.5|0)===l&&d===v||(t.moveTo(_,S),l=p,v=d),T+=2;T<h;T+=2){p=(_=a[T])+.5|0,d=(S=a[T+1])+.5|0,T!=h-2&&p===l&&d===v||(t.lineTo(_,S),l=p,v=d);}++j;break;case db.SET_FILL_STYLE:C=F,this.vc=F[2],A&&(this.lu(t),A=0,P&&(t.stroke(),P=0)),t.fillStyle=F[1],++j;break;case db.SET_STROKE_STYLE:k=F,P&&(t.stroke(),P=0),this.gc(t,F),++j;break;case db.STROKE:R?P++:t.stroke(),++j;break;default:++j;}}A&&this.lu(t),P&&t.stroke();},t.prototype.execute=function(t,n,i,r,e,o){this.Ge=r,this._c(t,n,i,this.instructions,e,void 0,void 0,o);},t.prototype.executeHitDetection=function(t,n,i,r,e){return this.Ge=i,this._c(t,1,n,this.hitDetectionInstructions,!0,r,e);},t;}(),Wb=Vb,Yb=["Polygon","Circle","LineString","Image","Text","Default"],Kb=function(){function t(t,n,i,r,e,o){this.fc=t,this.La=r,this.kt=i,this.cc=n,this.pf=o,this.Sc={},this.Oc=null,this.jc=[1,0,0,1,0,0],this.Ec(e);}return t.prototype.clip=function(t,n){var i=this.getClipCoords(n);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip();},t.prototype.Ec=function(t){for(var n in t){var i=this.Sc[n];void 0===i&&(i={},this.Sc[n]=i);var r=t[n];for(var e in r){var o=r[e];i[e]=new Wb(this.cc,this.kt,this.La,o);}}},t.prototype.hasExecutors=function(t){for(var n in this.Sc){for(var i=this.Sc[n],r=0,e=t.length;r<e;++r){if(t[r]in i)return!0;}}return!1;},t.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e,o){var s=2*(r=Math.round(r))+1,u=fn(this.jc,r+.5,r+.5,1/n,-1/n,-i,-t[0],-t[1]),a=!this.Oc;a&&(this.Oc=ko(s,s));var h,f=this.Oc;f.canvas.width!==s||f.canvas.height!==s?(f.canvas.width=s,f.canvas.height=s):a||f.clearRect(0,0,s,s),void 0!==this.pf&&(Ln(h=[1/0,1/0,-1/0,-1/0],t),xn(h,n*(this.pf+r),h));var c,l=$b(r);function v(t,n){for(var i=f.getImageData(0,0,s,s).data,u=0,a=l.length;u<a;u++){if(i[l[u]]>0){if(!o||"Image"!==c&&"Text"!==c||-1!==o.indexOf(t)){var h=(l[u]-3)/4,v=r-h%s,p=r-(h/s|0),d=e(t,n,v*v+p*p);if(d)return d;}f.clearRect(0,0,s,s);break;}}}var p,y,m,w,g,b=Object.keys(this.Sc).map(Number);for(b.sort(d),p=b.length-1;p>=0;--p){var x=b[p].toString();for(m=this.Sc[x],y=Yb.length-1;y>=0;--y){if(void 0!==(w=m[c=Yb[y]])&&(g=w.executeHitDetection(f,u,i,v,h)))return g;}}},t.prototype.getClipCoords=function(t){var n=this.fc;if(!n)return null;var i=n[0],r=n[1],e=n[2],o=n[3],s=[i,r,i,o,e,o,e,r];return Xr(s,0,8,2,t,s),s;},t.prototype.isEmpty=function(){return k(this.Sc);},t.prototype.execute=function(t,n,i,r,e,o,s){var u=Object.keys(this.Sc).map(Number);u.sort(d),this.fc&&(t.save(),this.clip(t,i));var a,h,f,c,l,v,p=o||Yb;for(s&&u.reverse(),a=0,h=u.length;a<h;++a){var y=u[a].toString();for(l=this.Sc[y],f=0,c=p.length;f<c;++f){void 0!==(v=l[p[f]])&&v.execute(t,n,i,r,e,s);}}this.fc&&t.restore();},t;}(),Zb={};function $b(t){if(void 0!==Zb[t])return Zb[t];for(var n=2*t+1,i=t*t,r=new Array(i+1),e=0;e<=t;++e){for(var o=0;o<=t;++o){var s=e*e+o*o;if(s>i)break;var u=r[s];u||(u=[],r[s]=u),u.push(4*((t+e)*n+(t+o))+3),e>0&&u.push(4*((t-e)*n+(t+o))+3),o>0&&(u.push(4*((t+e)*n+(t-o))+3),e>0&&u.push(4*((t-e)*n+(t-o))+3));}}for(var a=[],h=(e=0,r.length);e<h;++e){r[e]&&a.push.apply(a,r[e]);}return Zb[t]=a,a;}var Hb=Kb,Jb=.5;function Qb(t,n,i,r,e,o,s){var u=ko(t[0]*Jb,t[1]*Jb);u.imageSmoothingEnabled=!1;for(var a=u.canvas,h=new Tf(u,Jb,e,null,s),f=i.length,c=Math.floor(16777215/f),l={},v=1;v<=f;++v){var p=i[v-1],y=p.getStyleFunction()||r;if(r){var m=y(p,o);if(m){Array.isArray(m)||(m=[m]);for(var w="#"+("000000"+(v*c).toString(16)).slice(-6),g=0,b=m.length;g<b;++g){var x=m[g],M=x.getGeometryFunction()(p);if(M&&ti(e,M.getExtent())){var _=x.clone(),S=_.getFill();S&&S.setColor(w);var O=_.getStroke();O&&(O.setColor(w),O.setLineDash(null)),_.setText(void 0);var j=x.getImage();if(j&&0!==j.getOpacity()){var E=j.getImageSize();if(!E)continue;var T=ko(E[0],E[1],void 0,{alpha:!1}),A=T.canvas;T.fillStyle=w,T.fillRect(0,0,A.width,A.height),_.setImage(new tp({img:A,imgSize:E,anchor:j.getAnchor(),anchorXUnits:Uv,anchorYUnits:Uv,offset:j.getOrigin(),opacity:1,size:j.getSize(),scale:j.getScale(),rotation:j.getRotation(),rotateWithView:j.getRotateWithView()}));}var P=_.getZIndex()||0;(N=l[P])||(N={},l[P]=N,N.Polygon=[],N.Circle=[],N.LineString=[],N.Point=[]),N[M.getType().replace("Multi","")].push(M,_);}}}}}for(var C=Object.keys(l).map(Number).sort(d),k=(v=0,C.length);v<k;++v){var N=l[C[v]];for(var I in N){var z=N[I];for(g=0,b=z.length;g<b;g+=2){h.setStyle(z[g+1]);for(var L=0,R=n.length;L<R;++L){h.setTransform(n[L]),h.drawGeometry(z[g]);}}}}return u.getImageData(0,0,a.width,a.height);}function tx(t,n,i){var r=[];if(i){var e=Math.floor(Math.round(t[0])*Jb),o=Math.floor(Math.round(t[1])*Jb),s=4*(hi(e,0,i.width-1)+hi(o,0,i.height-1)*i.width),u=i.data[s],a=i.data[s+1],h=i.data[s+2]+256*(a+256*u),f=Math.floor(16777215/n.length);h&&h%f==0&&r.push(n[h/f-1]);}return r;}var nx=function(){var _t154=function t(n,i){return _t154=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t154(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t154(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),ix=function(t){function n(n){var i=t.call(this,n)||this;return i.Tc=i.Ac.bind(i),i.Pc,i.Cc=null,i.kc=null,i._h=-1,i.Nc=NaN,i.Lh=[1/0,1/0,-1/0,-1/0],i.Ic=[1/0,1/0,-1/0,-1/0],i.zc,i.Lc=null,i.Rc=null,i.Fc=null,i.Gc=null,i.replayGroupChanged=!0,i.declutterExecutorGroup=null,i.clipping=!0,i.Dc=null,i.ou=1,i;}return nx(n,t),n.prototype.renderWorlds=function(t,n,i){var r=n.extent,e=n.viewState,o=e.center,s=e.resolution,u=e.projection,a=e.rotation,h=u.getExtent(),f=this.getLayer().getSource(),c=n.pixelRatio,l=n.viewHints,v=!(l[Du]||l[qu]),p=this.Dc,d=Math.round(n.size[0]*c),y=Math.round(n.size[1]*c),m=f.getWrapX()&&u.canWrapX(),w=m?Qn(h):null,g=m?Math.ceil((r[2]-h[2])/w)+1:1,b=m?Math.floor((r[0]-h[0])/w):0;do{var x=this.getRenderTransform(o,s,a,c,d,y,b*w);t.execute(p,1,x,a,v,void 0,i);}while(++b<g);},n.prototype.qc=function(){if(1!==this.ou){var t=ko(this.context.canvas.width,this.context.canvas.height,Qw);this.Dc=t;}else this.Dc=this.context;},n.prototype.Uc=function(){if(1!==this.ou){var t=this.context.globalAlpha;this.context.globalAlpha=this.ou,this.context.drawImage(this.Dc.canvas,0,0),this.context.globalAlpha=t,No(this.Dc),Qw.push(this.Dc.canvas),this.Dc=null;}},n.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&(this.qc(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.Uc());},n.prototype.renderFrame=function(t,n){var i=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];an(this.pixelTransform,1/i,1/i),cn(this.inversePixelTransform,this.pixelTransform);var e=vn(this.pixelTransform);this.useContainer(n,e,this.getBackground(t));var o=this.context,s=o.canvas,u=this.Gc,a=this.declutterExecutorGroup;if((!u||u.isEmpty())&&(!a||a.isEmpty()))return null;var h=Math.round(t.size[0]*i),f=Math.round(t.size[1]*i);s.width!=h||s.height!=f?(s.width=h,s.height=f,s.style.transform!==e&&(s.style.transform=e)):this.containerReused||o.clearRect(0,0,h,f),this.preRender(o,t);var c=t.viewState,l=c.projection;this.ou=r.opacity,this.qc();var v=!1,p=!0;if(r.extent&&this.clipping){var d=Gr(r.extent,l);(v=(p=ti(d,t.extent))&&!On(d,t.extent))&&this.clipUnrotated(this.Dc,t,d);}return p&&this.renderWorlds(u,t),v&&this.Dc.restore(),this.Uc(),this.postRender(o,t),this.zc!==c.rotation&&(this.zc=c.rotation,this.Cc=null),this.container;},n.prototype.getFeatures=function(t){return new Promise(function(n){if(!this.Cc&&!this.Pc){var i=[this.context.canvas.width,this.context.canvas.height];on(this.pixelTransform,i);var r=this.Lc,e=this.Nc,o=this.zc,s=this.Rc,u=this.Ic,a=this.getLayer(),h=[],f=i[0]*Jb,c=i[1]*Jb;h.push(this.getRenderTransform(r,e,o,Jb,f,c,0).slice());var l=a.getSource(),v=s.getExtent();if(l.getWrapX()&&s.canWrapX()&&!On(v,u)){for(var p=u[0],d=Qn(v),y=0,m=void 0;p<v[0];){m=d*--y,h.push(this.getRenderTransform(r,e,o,Jb,f,c,m).slice()),p+=d;}for(y=0,p=u[2];p>v[2];){m=d*++y,h.push(this.getRenderTransform(r,e,o,Jb,f,c,m).slice()),p-=d;}}this.Cc=Qb(i,h,this.kc,a.getStyleFunction(),u,e,o);}n(tx(t,this.kc,this.Cc));}.bind(this));},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e){var s=this;if(this.Gc){var u,a=n.viewState.resolution,h=n.viewState.rotation,f=this.getLayer(),c={},l=function l(t,n,i){var s=o(t),u=c[s];if(u){if(!0!==u&&i<u.distanceSq){if(0===i)return c[s]=!0,e.splice(e.lastIndexOf(u),1),r(t,f,n);u.geometry=n,u.distanceSq=i;}}else{if(0===i)return c[s]=!0,r(t,f,n);e.push(c[s]={feature:t,layer:f,geometry:n,distanceSq:i,callback:r});}},v=[this.Gc];return this.declutterExecutorGroup&&v.push(this.declutterExecutorGroup),v.some(function(r){return u=r.forEachFeatureAtCoordinate(t,a,h,i,l,r===s.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map(function(t){return t.value;}):null);}),u;}},n.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.Gc&&t.changed();},n.prototype.Ac=function(t){this.renderIfReadyAndVisible();},n.prototype.prepareFrame=function(t){var n=this.getLayer(),i=n.getSource();if(!i)return!1;var r=t.viewHints[Du],e=t.viewHints[qu],o=n.getUpdateWhileAnimating(),s=n.getUpdateWhileInteracting();if(this.ready&&!o&&r||!s&&e)return this.Pc=!0,!0;this.Pc=!1;var u=t.extent,a=t.viewState,h=a.projection,f=a.resolution,c=t.pixelRatio,l=n.getRevision(),v=n.getRenderBuffer(),p=n.getRenderOrder();void 0===p&&(p=Pf);var d=a.center.slice(),y=xn(u,v*f),m=y.slice(),w=[y.slice()],g=h.getExtent();if(i.getWrapX()&&h.canWrapX()&&!On(g,t.extent)){var b=Qn(g),M=Math.max(Qn(y)/2,b);y[0]=g[0]-M,y[2]=g[2]+M,ur(d,h);var _=si(w[0],h);_[0]<g[0]&&_[2]<g[2]?w.push([_[0]+b,_[1],_[2]+b,_[3]]):_[0]>g[0]&&_[2]>g[2]&&w.push([_[0]-b,_[1],_[2]-b,_[3]]);}if(this.ready&&this.Nc==f&&this._h==l&&this.Fc==p&&On(this.Ic,y))return x(this.Lh,m)||(this.Cc=null,this.Lh=m),this.Lc=d,this.replayGroupChanged=!1,!0;this.Gc=null;var S,O=new Nb(kf(f,c),y,f,c);this.getLayer().getDeclutter()&&(S=new Nb(kf(f,c),y,f,c));var j,E=zr();if(E){for(var T=0,A=w.length;T<A;++T){var P=Fr(w[T],h);i.loadFeatures(P,Dr(f,h),E);}j=Ar(E,h);}else for(T=0,A=w.length;T<A;++T){i.loadFeatures(w[T],f,h);}var C=Cf(f,c),k=!0,N=function(t){var i,r=t.getStyleFunction()||n.getStyleFunction();if(r&&(i=r(t,f)),i){var e=this.renderFeature(t,C,i,O,j,S);k=k&&!e;}}.bind(this),I=Fr(y,h),z=i.getFeaturesInExtent(I);p&&z.sort(p);for(T=0,A=z.length;T<A;++T){N(z[T]);}this.kc=z,this.ready=k;var L=O.finish(),R=new Hb(y,f,c,i.getOverlaps(),L,n.getRenderBuffer());return S&&(this.declutterExecutorGroup=new Hb(y,f,c,i.getOverlaps(),S.finish(),n.getRenderBuffer())),this.Nc=f,this._h=l,this.Fc=p,this.Lh=m,this.Ic=y,this.Lc=d,this.Rc=h,this.Gc=R,this.Cc=null,this.replayGroupChanged=!0,!0;},n.prototype.renderFeature=function(t,n,i,r,e,o){if(!i)return!1;var s=!1;if(Array.isArray(i))for(var u=0,a=i.length;u<a;++u){s=Nf(r,t,i[u],n,this.Tc,e,o)||s;}else s=Nf(r,t,i,n,this.Tc,e,o);return s;},n;}(rg),rx=ix,ex=function(){var _t155=function t(n,i){return _t155=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t155(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t155(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),ox=function(t){function n(n){var i=t.call(this,n)||this;return i.Bc=new rx(n),i.Xc=n.getImageRatio(),i.Vc=[1,0,0,1,0,0],i.Wc=null,i;}return ex(n,t),n.prototype.disposeInternal=function(){this.Bc.dispose(),t.prototype.disposeInternal.call(this);},n.prototype.getFeatures=function(t){if(!this.Bc)return new Promise(function(t){return t([]);});var n=on(this.Vc,on(this.Wc,t.slice()));return this.Bc.getFeatures(n);},n.prototype.handleFontsChanged=function(){this.Bc.handleFontsChanged();},n.prototype.prepareFrame=function(t){var n=t.pixelRatio,i=t.viewState,r=i.resolution,e=t.viewHints,o=this.Bc,s=t.extent;1!==this.Xc&&ri(s=s.slice(0),this.Xc);var u=Qn(s)/r,a=Zn(s)/r;if(!e[Du]&&!e[qu]&&!ni(s)){o.useContainer(null,null);var h=o.context,f=t.layerStatesArray[t.layerIndex];h.globalAlpha=f.opacity;var c=A({},f,{opacity:1}),l=A({},t,{declutterTree:new dp(9),extent:s,size:[u,a],viewState:A({},t.viewState,{rotation:0}),layerStatesArray:[c],layerIndex:0}),v=!0,p=new Co(s,r,n,h.canvas,function(t){o.prepareFrame(l)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(l,null)&&(o.renderDeclutter(l),v=!1),t());});p.addEventListener(z,function(){if(p.getState()===So){this.zt=v?null:p;var t=p.getResolution(),r=p.getPixelRatio(),e=t*n/r;this.renderedResolution=e,this.Vc=fn(this.Vc,u/2,a/2,1/e,-1/e,0,-i.center[0],-i.center[1]);}}.bind(this)),p.load();}return this.zt&&(this.Wc=t.pixelToCoordinateTransform.slice()),!!this.zt;},n.prototype.preRender=function(){},n.prototype.postRender=function(){},n.prototype.renderDeclutter=function(){},n.prototype.forEachFeatureAtCoordinate=function(n,i,r,e,o){return this.Bc?this.Bc.forEachFeatureAtCoordinate(n,i,r,e,o):t.prototype.forEachFeatureAtCoordinate.call(this,n,i,r,e,o);},n;}(sg),sx=ox,ux="image",ax="hybrid",hx="vector",fx=function(){var _t156=function t(n,i){return _t156=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t156(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t156(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),cx={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},lx={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},vx=function(t){function n(n){var i=t.call(this,n)||this;return i.Tc=i.Ac.bind(i),i.Yc,i.Wc=null,i.zc,i.Kc=[1,0,0,1,0,0],i;}return fx(n,t),n.prototype.prepareTile=function(t,n,i){var r,e=t.getState();return e!==pt&&e!==dt||(this.Zc(t,n,i),this.$c(t)&&(r=!0)),r;},n.prototype.getTile=function(n,i,r,e){var o=e.pixelRatio,s=e.viewState,u=s.resolution,a=s.projection,h=this.getLayer(),f=h.getSource().getTile(n,i,r,o,a),c=e.viewHints,l=!(c[Du]||c[qu]);return!l&&f.wantedResolution||(f.wantedResolution=u),this.prepareTile(f,o,a)&&(l||Date.now()-e.time<8)&&h.getRenderMode()!==hx&&this.Hc(f,e),t.prototype.getTile.call(this,n,i,r,e);},n.prototype.isDrawableTile=function(n){var i=this.getLayer();return t.prototype.isDrawableTile.call(this,n)&&(i.getRenderMode()===hx?o(i)in n.executorGroups:n.hasContext(i));},n.prototype.getTileImage=function(t){return t.getImage(this.getLayer());},n.prototype.prepareFrame=function(n){var i=this.getLayer().getRevision();return this.Yc!==i&&(this.Yc=i,this.renderedTiles.length=0),t.prototype.prepareFrame.call(this,n);},n.prototype.Zc=function(t,n,i){var r=this.getLayer(),e=r.getRevision(),s=r.getRenderOrder()||null,u=t.wantedResolution,a=t.getReplayState(r);if(a.dirty||a.renderedResolution!==u||a.renderedRevision!=e||a.renderedRenderOrder!=s){var h=r.getSource(),f=r.getDeclutter(),c=h.getTileGrid(),l=h.getTileGridForProjection(i).getTileCoordExtent(t.wrappedTileCoord),v=h.getSourceTiles(n,i,t),p=o(r);delete t.hitDetectionImageData[p],t.executorGroups[p]=[],f&&(t.declutterExecutorGroups[p]=[]),a.dirty=!1;for(var d=function d(i,e){var o=v[i];if(o.getState()!=pt)return"continue";var d=o.tileCoord,m=c.getTileCoordExtent(d),w=$n(l,m),g=xn(w,r.getRenderBuffer()*u,y.tmpExtent),b=Nn(m,w)?null:g,x=new Nb(0,g,u,n),M=f?new Nb(0,w,u,n):void 0,_=Cf(u,n),S=function S(t){var n,i=t.getStyleFunction()||r.getStyleFunction();if(i&&(n=i(t,u)),n){var e=this.renderFeature(t,_,n,x,M);a.dirty=a.dirty||e;}},O=o.getFeatures();s&&s!==a.renderedRenderOrder&&O.sort(s);for(var j=0,E=O.length;j<E;++j){var T=O[j];b&&!ti(b,T.getGeometry().getExtent())||S.call(y,T);}var A=x.finish(),P=r.getRenderMode()!==hx&&f&&1===v.length?null:w,C=new Hb(P,u,n,h.getOverlaps(),A,r.getRenderBuffer());if(t.executorGroups[p].push(C),M){var k=new Hb(null,u,n,h.getOverlaps(),M.finish(),r.getRenderBuffer());t.declutterExecutorGroups[p].push(k);}},y=this,m=0,w=v.length;m<w;++m){d(m);}a.renderedRevision=e,a.renderedRenderOrder=s,a.renderedResolution=u;}},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e){var s=n.viewState.resolution,u=n.viewState.rotation;i=null==i?0:i;var a=this.getLayer(),h=a.getSource().getTileGridForProjection(n.viewState.projection),f=bn([t]);xn(f,s*i,f);for(var c,l={},v=function v(t,n,i){var s=t.getId();void 0===s&&(s=o(t));var u=l[s];if(u){if(!0!==u&&i<u.distanceSq){if(0===i)return l[s]=!0,e.splice(e.lastIndexOf(u),1),r(t,a,n);u.geometry=n,u.distanceSq=i;}}else{if(0===i)return l[s]=!0,r(t,a,n);e.push(l[s]={feature:t,layer:a,geometry:n,distanceSq:i,callback:r});}},p=this.renderedTiles,d=function d(r,e){var l=p[r];if(!ti(h.getTileCoordExtent(l.wrappedTileCoord),f))return"continue";var d=o(a),y=[l.executorGroups[d]],m=l.declutterExecutorGroups[d];m&&y.push(m),y.some(function(r){for(var e=r===m?n.declutterTree.all().map(function(t){return t.value;}):null,o=0,a=r.length;o<a;++o){var h=r[o];if(c=h.forEachFeatureAtCoordinate(t,s,u,i,v,e))return!0;}});},y=0,m=p.length;!c&&y<m;++y){d(y);}return c;},n.prototype.getFeatures=function(t){return new Promise(function(n,i){for(var r,e=this.getLayer(),s=o(e),u=e.getSource(),a=this.renderedProjection,h=a.getExtent(),f=this.renderedResolution,c=u.getTileGridForProjection(a),l=on(this.Wc,t.slice()),v=c.getTileCoordForCoordAndResolution(l,f),p=0,d=this.renderedTiles.length;p<d;++p){if(v.toString()===this.renderedTiles[p].tileCoord.toString()){if((r=this.renderedTiles[p]).getState()===pt){var y=c.getTileCoordExtent(r.tileCoord);u.getWrapX()&&a.canWrapX()&&!On(h,y)&&ur(l,a);break;}r=void 0;}}if(!r||r.loadingSourceTiles>0)n([]);else{var m=Hn(c.getTileCoordExtent(r.wrappedTileCoord)),w=[(l[0]-m[0])/f,(m[1]-l[1])/f],g=r.getSourceTiles().reduce(function(t,n){return t.concat(n.getFeatures());},[]),b=r.hitDetectionImageData[s];if(!b&&!this.Pc){var x=va(c.getTileSize(c.getZForResolution(f,u.zDirection))),M=this.zc;b=Qb(x,[this.getRenderTransform(c.getTileCoordCenter(r.wrappedTileCoord),f,0,Jb,x[0]*Jb,x[1]*Jb,0)],g,e.getStyleFunction(),c.getTileCoordExtent(r.wrappedTileCoord),r.getReplayState(e).renderedResolution,M),r.hitDetectionImageData[s]=b;}n(tx(w,g,b));}}.bind(this));},n.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&void 0!==this.Yc&&t.changed();},n.prototype.Ac=function(t){this.renderIfReadyAndVisible();},n.prototype.renderDeclutter=function(t){var n=this.context,i=n.globalAlpha;n.globalAlpha=this.getLayer().getOpacity();for(var r=t.viewHints,e=!(r[Du]||r[qu]),s=this.renderedTiles,u=0,a=s.length;u<a;++u){var h=s[u],f=h.declutterExecutorGroups[o(this.getLayer())];if(f)for(var c=f.length-1;c>=0;--c){f[c].execute(this.context,1,this.getTileRenderTransform(h,t),t.viewState.rotation,e,void 0,t.declutterTree);}}n.globalAlpha=i;},n.prototype.getTileRenderTransform=function(t,n){var i=n.pixelRatio,r=n.viewState,e=r.center,o=r.resolution,s=r.rotation,u=n.size,a=Math.round(u[0]*i),h=Math.round(u[1]*i),f=this.getLayer().getSource().getTileGridForProjection(n.viewState.projection),c=t.tileCoord,l=f.getTileCoordExtent(t.wrappedTileCoord),v=f.getTileCoordExtent(c,this.tmpExtent)[0]-l[0];return nn(un(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(e,o,s,i,a,h,v));},n.prototype.renderFrame=function(n,i){var r=n.viewHints,e=!(r[Du]||r[qu]);t.prototype.renderFrame.call(this,n,i),this.Wc=n.pixelToCoordinateTransform.slice(),this.zc=n.viewState.rotation;var s=this.getLayer(),u=s.getRenderMode(),a=this.context,h=a.globalAlpha;a.globalAlpha=s.getOpacity();for(var f=lx[u],c=n.viewState,l=c.rotation,v=s.getSource(),p=v.getTileGridForProjection(c.projection).getZForResolution(c.resolution,v.zDirection),d=this.renderedTiles,y=[],m=[],w=!0,g=d.length-1;g>=0;--g){var b=d[g];w=w&&!b.getReplayState(s).dirty;var x=b.executorGroups[o(s)].filter(function(t){return t.hasExecutors(f);});if(0!==x.length){var M=this.getTileRenderTransform(b,n),_=b.tileCoord[0],S=!1,O=x[0].getClipCoords(M);if(O){for(var j=0,E=y.length;j<E;++j){if(p!==_&&_<m[j]){var T=y[j];ti([O[0],O[3],O[4],O[7]],[T[0],T[3],T[4],T[7]])&&(S||(a.save(),S=!0),a.beginPath(),a.moveTo(O[0],O[1]),a.lineTo(O[2],O[3]),a.lineTo(O[4],O[5]),a.lineTo(O[6],O[7]),a.moveTo(T[6],T[7]),a.lineTo(T[4],T[5]),a.lineTo(T[2],T[3]),a.lineTo(T[0],T[1]),a.clip());}}y.push(O),m.push(_);}for(var A=0,P=x.length;A<P;++A){x[A].execute(a,1,M,l,e,f);}S&&a.restore();}}return a.globalAlpha=h,this.ready=w,this.container;},n.prototype.renderFeature=function(t,n,i,r,e){if(!i)return!1;var o=!1;if(Array.isArray(i))for(var s=0,u=i.length;s<u;++s){o=Nf(r,t,i[s],n,this.Tc,void 0,e)||o;}else o=Nf(r,t,i,n,this.Tc,void 0,e);return o;},n.prototype.$c=function(t){var n=this.getLayer();if(n.getRenderMode()===hx)return!1;var i=t.getReplayState(n),r=n.getRevision(),e=t.wantedResolution;return i.renderedTileResolution!==e||i.renderedTileRevision!==r;},n.prototype.Hc=function(t,n){var i=this.getLayer(),r=t.getReplayState(i),e=i.getRevision(),s=t.executorGroups[o(i)];r.renderedTileRevision=e;var u=t.wrappedTileCoord,a=u[0],h=i.getSource(),f=n.pixelRatio,c=n.viewState.projection,l=h.getTileGridForProjection(c),v=l.getResolution(t.tileCoord[0]),p=n.pixelRatio/t.wantedResolution*v,d=l.getResolution(a),y=t.getContext(i);f=Math.round(Math.max(f,p/f));var m=h.getTilePixelSize(a,f,c);y.canvas.width=m[0],y.canvas.height=m[1];var w=f/p;if(1!==w){var g=tn(this.Kc);un(g,w,w),y.setTransform.apply(y,g);}var b=l.getTileCoordExtent(u,this.tmpExtent),x=p/d,M=tn(this.Kc);un(M,x,-x),hn(M,-b[0],-b[3]);for(var _=0,S=s.length;_<S;++_){s[_].execute(y,w,M,0,!0,cx[i.getRenderMode()]);}r.renderedTileResolution=t.wantedResolution;},n;}(dg),px=vx,dx=function(){var _t157=function t(n,i){return _t157=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t157(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t157(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),yx=function(t){function n(n,i){var r=t.call(this)||this;return i&&!Array.isArray(n[0])?r.setFlatCoordinates(i,n):r.setCoordinates(n,i),r;}return dx(n,t),n.prototype.appendPoint=function(t){this.flatCoordinates?g(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed();},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t;},n.prototype.closestPointXY=function(t,n,i,r){if(r<_n(this.getExtent(),t,n))return r;for(var e=this.flatCoordinates,o=this.stride,s=0,u=e.length;s<u;s+=o){var a=vi(t,n,e[s],e[s+1]);if(a<r){r=a;for(var h=0;h<o;++h){i[h]=e[s+h];}i.length=o;}}return r;},n.prototype.getCoordinates=function(){return xe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride);},n.prototype.getPoint=function(t){var n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||n<=t?null:new ke(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout);},n.prototype.getPoints=function(){for(var t=this.flatCoordinates,n=this.layout,i=this.stride,r=[],e=0,o=t.length;e<o;e+=i){var s=new ke(t.slice(e,e+i),n);r.push(s);}return r;},n.prototype.getType=function(){return"MultiPoint";},n.prototype.intersectsExtent=function(t){for(var n=this.flatCoordinates,i=this.stride,r=0,e=n.length;r<e;r+=i){if(jn(t,n[r],n[r+1]))return!0;}return!1;},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ce(this.flatCoordinates,0,t,this.stride),this.changed();},n;}(ie),mx=yx;function wx(t,n,i,r,e,o,s){var u,a,h=(i-n)/r;if(1===h)u=n;else if(2===h)u=n,a=e;else if(0!==h){for(var f=t[n],c=t[n+1],l=0,v=[0],d=n+r;d<i;d+=r){var y=t[d],m=t[d+1];l+=Math.sqrt((y-f)*(y-f)+(m-c)*(m-c)),v.push(l),f=y,c=m;}var w=e*l,g=p(v,w);g<0?(a=(w-v[-g-2])/(v[-g-1]-v[-g-2]),u=n+(-g-2)*r):u=n+g*r;}var b=s>1?s:2,x=o||new Array(b);for(d=0;d<b;++d){x[d]=void 0===u?NaN:void 0===a?t[u+d]:wi(t[u+d],t[u+r+d],a);}return x;}function gx(t,n,i,r,e,o){if(i==n)return null;var s;if(e<t[n+r-1])return o?((s=t.slice(n,n+r))[r-1]=e,s):null;if(t[i-1]<e)return o?((s=t.slice(i-r,i))[r-1]=e,s):null;if(e==t[n+r-1])return t.slice(n,n+r);for(var u=n/r,a=i/r;u<a;){var h=u+a>>1;e<t[(h+1)*r-1]?a=h:u=h+1;}var f=t[u*r-1];if(e==f)return t.slice((u-1)*r,(u-1)*r+r);var c=(e-f)/(t[(u+1)*r-1]-f);s=[];for(var l=0;l<r-1;++l){s.push(wi(t[(u-1)*r+l],t[u*r+l],c));}return s.push(e),s;}function bx(t,n,i,r,e,o,s){if(s)return gx(t,n,i[i.length-1],r,e,o);var u;if(e<t[r-1])return o?((u=t.slice(0,r))[r-1]=e,u):null;if(t[t.length-1]<e)return o?((u=t.slice(t.length-r))[r-1]=e,u):null;for(var a=0,h=i.length;a<h;++a){var f=i[a];if(n!=f){if(e<t[n+r-1])return null;if(e<=t[f-1])return gx(t,n,f,r,e,!1);n=f;}}return null;}var xx=function(){var _t158=function t(n,i){return _t158=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t158(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t158(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Mx=function(t){function n(n,i){var r=t.call(this)||this;return r.Jc=null,r.Qc=-1,r.wt=-1,r.gt=-1,void 0===i||Array.isArray(n[0])?r.setCoordinates(n,i):r.setFlatCoordinates(i,n),r;}return xx(n,t),n.prototype.appendCoordinate=function(t){this.flatCoordinates?g(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed();},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t;},n.prototype.closestPointXY=function(t,n,i,r){return r<_n(this.getExtent(),t,n)?r:(this.gt!=this.getRevision()&&(this.wt=Math.sqrt(ee(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.gt=this.getRevision()),ue(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.wt,!1,t,n,i,r));},n.prototype.forEachSegment=function(t){return Ge(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t);},n.prototype.getCoordinateAtM=function(t,n){if(this.layout!=It&&this.layout!=zt)return null;var i=void 0!==n&&n;return gx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i);},n.prototype.getCoordinates=function(){return xe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride);},n.prototype.getCoordinateAt=function(t,n){return wx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride);},n.prototype.getLength=function(){return zb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride);},n.prototype.getFlatMidpoint=function(){return this.Qc!=this.getRevision()&&(this.Jc=this.getCoordinateAt(.5,this.Jc),this.Qc=this.getRevision()),this.Jc;},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=pe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new n(i,kt);},n.prototype.getType=function(){return"LineString";},n.prototype.intersectsExtent=function(t){return De(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t);},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ce(this.flatCoordinates,0,t,this.stride),this.changed();},n;}(ie),_x=Mx,Sx=function(){var _t159=function t(n,i){return _t159=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t159(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t159(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Ox=function(t){function n(n,i,r){var e=t.call(this)||this;if(e.bt=[],e.wt=-1,e.gt=-1,Array.isArray(n[0]))e.setCoordinates(n,i);else if(void 0!==i&&r)e.setFlatCoordinates(i,n),e.bt=r;else{for(var o=e.getLayout(),s=n,u=[],a=[],h=0,f=s.length;h<f;++h){var c=s[h];0===h&&(o=c.getLayout()),g(u,c.getFlatCoordinates()),a.push(u.length);}e.setFlatCoordinates(o,u),e.bt=a;}return e;}return Sx(n,t),n.prototype.appendLineString=function(t){this.flatCoordinates?g(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.bt.push(this.flatCoordinates.length),this.changed();},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout,this.bt.slice());return t.applyProperties(this),t;},n.prototype.closestPointXY=function(t,n,i,r){return r<_n(this.getExtent(),t,n)?r:(this.gt!=this.getRevision()&&(this.wt=Math.sqrt(oe(this.flatCoordinates,0,this.bt,this.stride,0)),this.gt=this.getRevision()),ae(this.flatCoordinates,0,this.bt,this.stride,this.wt,!1,t,n,i,r));},n.prototype.getCoordinateAtM=function(t,n,i){if(this.layout!=It&&this.layout!=zt||0===this.flatCoordinates.length)return null;var r=void 0!==n&&n,e=void 0!==i&&i;return bx(this.flatCoordinates,0,this.bt,this.stride,t,r,e);},n.prototype.getCoordinates=function(){return Me(this.flatCoordinates,0,this.bt,this.stride);},n.prototype.getEnds=function(){return this.bt;},n.prototype.getLineString=function(t){return t<0||this.bt.length<=t?null:new _x(this.flatCoordinates.slice(0===t?0:this.bt[t-1],this.bt[t]),this.layout);},n.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,n=this.bt,i=this.layout,r=[],e=0,o=0,s=n.length;o<s;++o){var u=n[o],a=new _x(t.slice(e,u),i);r.push(a),e=u;}return r;},n.prototype.getFlatMidpoints=function(){for(var t=[],n=this.flatCoordinates,i=0,r=this.bt,e=this.stride,o=0,s=r.length;o<s;++o){var u=r[o];g(t,wx(n,i,u,e,.5)),i=u;}return t;},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=de(this.flatCoordinates,0,this.bt,this.stride,t,i,0,r),new n(i,kt,r);},n.prototype.getType=function(){return"MultiLineString";},n.prototype.intersectsExtent=function(t){return qe(this.flatCoordinates,0,this.bt,this.stride,t);},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=le(this.flatCoordinates,0,t,this.stride,this.bt);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed();},n;}(ie),jx=Ox;function Ex(t,n,i,r){for(var e=[],o=[1/0,1/0,-1/0,-1/0],s=0,u=i.length;s<u;++s){var a=i[s];o=kn(t,n,a[0],r),e.push((o[0]+o[2])/2,(o[1]+o[3])/2),n=a[a.length-1];}return e;}var Tx=function(){var _t160=function t(n,i){return _t160=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t160(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t160(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Ax=function(t){function n(n,i,r){var e=t.call(this)||this;if(e.tl=[],e.nl=-1,e.il=null,e.wt=-1,e.gt=-1,e._t=-1,e.St=null,!r&&!Array.isArray(n[0])){for(var o=e.getLayout(),s=n,u=[],a=[],h=0,f=s.length;h<f;++h){var c=s[h];0===h&&(o=c.getLayout());for(var l=u.length,v=c.getEnds(),p=0,d=v.length;p<d;++p){v[p]+=l;}g(u,c.getFlatCoordinates()),a.push(v);}i=o,n=u,r=a;}return void 0!==i&&r?(e.setFlatCoordinates(i,n),e.tl=r):e.setCoordinates(n,i),e;}return Tx(n,t),n.prototype.appendPolygon=function(t){var n;if(this.flatCoordinates){var i=this.flatCoordinates.length;g(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,e=(n=t.getEnds().slice()).length;r<e;++r){n[r]+=i;}}else this.flatCoordinates=t.getFlatCoordinates().slice(),n=t.getEnds().slice(),this.tl.push();this.tl.push(n),this.changed();},n.prototype.clone=function(){for(var t=this.tl.length,i=new Array(t),r=0;r<t;++r){i[r]=this.tl[r].slice();}var e=new n(this.flatCoordinates.slice(),this.layout,i);return e.applyProperties(this),e;},n.prototype.closestPointXY=function(t,n,i,r){return r<_n(this.getExtent(),t,n)?r:(this.gt!=this.getRevision()&&(this.wt=Math.sqrt(se(this.flatCoordinates,0,this.tl,this.stride,0)),this.gt=this.getRevision()),he(this.getOrientedFlatCoordinates(),0,this.tl,this.stride,this.wt,!0,t,n,i,r));},n.prototype.containsXY=function(t,n){return Le(this.getOrientedFlatCoordinates(),0,this.tl,this.stride,t,n);},n.prototype.getArea=function(){return je(this.getOrientedFlatCoordinates(),0,this.tl,this.stride);},n.prototype.getCoordinates=function(t){var n;return void 0!==t?$e(n=this.getOrientedFlatCoordinates().slice(),0,this.tl,this.stride,t):n=this.flatCoordinates,_e(n,0,this.tl,this.stride);},n.prototype.getEndss=function(){return this.tl;},n.prototype.getFlatInteriorPoints=function(){if(this.nl!=this.getRevision()){var t=Ex(this.flatCoordinates,0,this.tl,this.stride);this.il=Fe(this.getOrientedFlatCoordinates(),0,this.tl,this.stride,t),this.nl=this.getRevision();}return this.il;},n.prototype.getInteriorPoints=function(){return new mx(this.getFlatInteriorPoints().slice(),It);},n.prototype.getOrientedFlatCoordinates=function(){if(this._t!=this.getRevision()){var t=this.flatCoordinates;Ke(t,0,this.tl,this.stride)?this.St=t:(this.St=t.slice(),this.St.length=$e(this.St,0,this.tl,this.stride)),this._t=this.getRevision();}return this.St;},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=be(this.flatCoordinates,0,this.tl,this.stride,Math.sqrt(t),i,0,r),new n(i,kt,r);},n.prototype.getPolygon=function(t){if(t<0||this.tl.length<=t)return null;var n;if(0===t)n=0;else{var i=this.tl[t-1];n=i[i.length-1];}var r=this.tl[t].slice(),e=r[r.length-1];if(0!==n)for(var o=0,s=r.length;o<s;++o){r[o]-=n;}return new to(this.flatCoordinates.slice(n,e),this.layout,r);},n.prototype.getPolygons=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.tl,r=[],e=0,o=0,s=i.length;o<s;++o){var u=i[o].slice(),a=u[u.length-1];if(0!==e)for(var h=0,f=u.length;h<f;++h){u[h]-=e;}var c=new to(n.slice(e,a),t,u);r.push(c),e=a;}return r;},n.prototype.getType=function(){return"MultiPolygon";},n.prototype.intersectsExtent=function(t){return Xe(this.getOrientedFlatCoordinates(),0,this.tl,this.stride,t);},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=ve(this.flatCoordinates,0,t,this.stride,this.tl);if(0===i.length)this.flatCoordinates.length=0;else{var r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1];}this.changed();},n;}(ie),Px=Ax,Cx=[1,0,0,1,0,0],kx=function(){function t(t,n,i,r,e){this.styleFunction,this.st,this.K=e,this.rl=t,this.el=n,this.il=null,this.sl=null,this.bt=i,this.ul=r;}return t.prototype.get=function(t){return this.ul[t];},t.prototype.getExtent=function(){return this.st||(this.st="Point"===this.rl?Cn(this.el):kn(this.el,0,this.el.length,2)),this.st;},t.prototype.getFlatInteriorPoint=function(){if(!this.il){var t=Vn(this.getExtent());this.il=Re(this.el,0,this.bt,2,t,0);}return this.il;},t.prototype.getFlatInteriorPoints=function(){if(!this.il){var t=Ex(this.el,0,this.bt,2);this.il=Fe(this.el,0,this.bt,2,t);}return this.il;},t.prototype.getFlatMidpoint=function(){return this.sl||(this.sl=wx(this.el,0,this.el.length,2,.5)),this.sl;},t.prototype.getFlatMidpoints=function(){if(!this.sl){this.sl=[];for(var t=this.el,n=0,i=this.bt,r=0,e=i.length;r<e;++r){var o=i[r],s=wx(t,n,o,2,.5);g(this.sl,s),n=o;}}return this.sl;},t.prototype.getId=function(){return this.K;},t.prototype.getOrientedFlatCoordinates=function(){return this.el;},t.prototype.getGeometry=function(){return this;},t.prototype.getSimplifiedGeometry=function(t){return this;},t.prototype.simplifyTransformed=function(t,n){return this;},t.prototype.getProperties=function(){return this.ul;},t.prototype.getStride=function(){return 2;},t.prototype.getStyleFunction=function(){return this.styleFunction;},t.prototype.getType=function(){return this.rl;},t.prototype.transform=function(t){var n=(t=br(t)).getExtent(),i=t.getWorldExtent();if(n&&i){var r=Zn(i)/Zn(n);fn(Cx,i[0],i[3],r,-r,0,0,0),Xr(this.el,0,this.el.length,2,Cx,this.el);}},t.prototype.getEnds=function(){return this.bt;},t;}();function Nx(t){var n=t.getType();switch(n){case"Point":return new ke(t.getFlatCoordinates());case"MultiPoint":return new mx(t.getFlatCoordinates(),kt);case"LineString":return new _x(t.getFlatCoordinates(),kt);case"MultiLineString":return new jx(t.getFlatCoordinates(),kt,t.getEnds());case"Polygon":var i=t.getFlatCoordinates(),r=t.getEnds(),e=He(i,r);return e.length>1?new Px(i,kt,e):new to(i,kt,r);default:throw new Error("Invalid geometry type:"+n);}}kx.prototype.getEndss=kx.prototype.getEnds,kx.prototype.getFlatCoordinates=kx.prototype.getOrientedFlatCoordinates;var Ix=kx;var zx=function(){var _t161=function t(n,i){return _t161=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t161(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t161(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Lx=function(t){function n(n){return t.call(this,n)||this;}return zx(n,t),n.prototype.createRenderer=function(){return new rx(this);},n;}(ub);function Rx(t,n,i){for(var r,e,o,s,u,a,h=[],f=t(0),c=t(1),l=n(f),v=n(c),p=[c,f],d=[v,l],y=[1,0],m={},w=1e5;--w>0&&y.length>0;){o=y.pop(),f=p.pop(),l=d.pop(),(a=o.toString())in m||(h.push(l[0],l[1]),m[a]=!0),s=y.pop(),c=p.pop(),v=d.pop(),li((e=n(r=t(u=(o+s)/2)))[0],e[1],l[0],l[1],v[0],v[1])<i?(h.push(v[0],v[1]),m[a=s.toString()]=!0):(y.push(s,u,u,o),d.push(v,e,e,l),p.push(c,r,r,f));}return h;}function Fx(t,n,i,r,e){return Rx(function(r){return[t,n+(i-n)*r];},Pr(br("EPSG:4326"),r),e);}function Gx(t,n,i,r,e){return Rx(function(r){return[n+(i-n)*r,t];},Pr(br("EPSG:4326"),r),e);}var Dx=function(){var _t162=function t(n,i){return _t162=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t162(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t162(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),qx=new ip({color:"rgba(0,0,0,0.2)"}),Ux=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],Bx=function(t){function n(n){var i=this,r=n||{},e=A({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},r);return delete e.maxLines,delete e.strokeStyle,delete e.targetSize,delete e.showLabels,delete e.lonLabelFormatter,delete e.latLabelFormatter,delete e.lonLabelPosition,delete e.latLabelPosition,delete e.lonLabelStyle,delete e.latLabelStyle,delete e.intervals,(i=t.call(this,e)||this).di=null,i.al=1/0,i.hl=1/0,i.fl=-1/0,i.cl=-1/0,i.ll=1/0,i.vl=1/0,i.pl=-1/0,i.dl=-1/0,i.yl=void 0!==r.targetSize?r.targetSize:100,i.ml=void 0!==r.maxLines?r.maxLines:100,i.wl=[],i.gl=[],i.bl=void 0!==r.strokeStyle?r.strokeStyle:qx,i.xl=void 0,i.Ml=void 0,i._l=null,i.Sl=null,i.Ol=null,i.jl=null,i.El=null,i.Tl=null,i.Al=null,r.showLabels&&(i.Pl=null==r.lonLabelFormatter?Ji.bind(i,"EW"):r.lonLabelFormatter,i.Cl=null==r.latLabelFormatter?Ji.bind(i,"NS"):r.latLabelFormatter,i.kl=null==r.lonLabelPosition?0:r.lonLabelPosition,i.Nl=null==r.latLabelPosition?1:r.latLabelPosition,i.Il=new hp({text:void 0!==r.lonLabelStyle?r.lonLabelStyle.clone():new vp({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Dv({color:"rgba(0,0,0,1)"}),stroke:new ip({color:"rgba(255,255,255,1)",width:3})})}),i.zl=function(t){var n=t.get("graticule_label");return this.Il.getText().setText(n),this.Il;}.bind(i),i.Ll=new hp({text:void 0!==r.latLabelStyle?r.latLabelStyle.clone():new vp({font:"12px Calibri,sans-serif",textAlign:"right",fill:new Dv({color:"rgba(0,0,0,1)"}),stroke:new ip({color:"rgba(255,255,255,1)",width:3})})}),i.Rl=function(t){var n=t.get("graticule_label");return this.Ll.getText().setText(n),this.Ll;}.bind(i),i.Tl=[],i.Al=[],i.addEventListener(ds,i.Fl.bind(i))),i.Gl=void 0!==r.intervals?r.intervals:Ux,i.setSource(new Qp({loader:i.loaderFunction.bind(i),strategy:i.strategyFunction.bind(i),features:new ct(),overlaps:!1,useSpatialIndex:!1,wrapX:r.wrapX})),i.Dl=[],i.ql=new hp({stroke:i.bl}),i.Ul=null,i.Lh=null,i.Nc=null,i.setRenderOrder(null),i;}return Dx(n,t),n.prototype.strategyFunction=function(t,n){var i=t.slice();return this.di&&this.getSource().getWrapX()&&si(i,this.di),this.Ul&&(In(this.Ul,i,n)?i=this.Ul.slice():this.getSource().removeLoadedExtent(this.Ul)),[i];},n.prototype.loaderFunction=function(t,n,i){this.Ul=t;var r=this.getSource(),e=$n(this.getExtent()||[-1/0,-1/0,1/0,1/0],t);if(!(this.Lh&&Nn(this.Lh,e)&&this.Nc===n||(this.Lh=e,this.Nc=n,ni(e)))){var o=Vn(e),s=n*n/4;(!this.di||!Tr(this.di,i))&&this.Bl(i),this.Xl(e,o,n,s);var u,a=this.wl.length+this.gl.length;for(this.Tl&&(a+=this.wl.length),this.Al&&(a+=this.gl.length);a>this.Dl.length;){u=new Ct(),this.Dl.push(u);}var h=r.getFeaturesCollection();h.clear();var f,c,l=0;for(f=0,c=this.wl.length;f<c;++f){(u=this.Dl[l++]).setGeometry(this.wl[f]),u.setStyle(this.ql),h.push(u);}for(f=0,c=this.gl.length;f<c;++f){(u=this.Dl[l++]).setGeometry(this.gl[f]),u.setStyle(this.ql),h.push(u);}}},n.prototype.Vl=function(t,n,i,r,e,o){var s=this.Wl(t,n,i,r,o);if(ti(s.getExtent(),e)){if(this.Tl){var u=this.Pl(t);o in this.Tl?this.Tl[o].text=u:this.Tl[o]={geom:new ke([]),text:u};}this.wl[o++]=s;}return o;},n.prototype.Yl=function(t,n,i,r,e,o){var s=this.Kl(t,n,i,r,o);if(ti(s.getExtent(),e)){if(this.Al){var u=this.Cl(t);o in this.Al?this.Al[o].text=u:this.Al[o]={geom:new ke([]),text:u};}this.gl[o++]=s;}return o;},n.prototype.Fl=function(t){var n=t.frameState.viewState.rotation,i=t.frameState.viewState.resolution,r=t.frameState.size,e=t.frameState.extent,o=Vn(e),s=e;if(n){var u=r[0]*i,a=r[1]*i;s=[o[0]-u/2,o[1]-a/2,o[0]+u/2,o[1]+a/2];}var h=0,f=0,c=this.Nl<.5,l=this.di.getExtent(),v=Qn(l);this.getSource().getWrapX()&&this.di.canWrapX()&&!On(l,e)&&(h=Math.floor((e[0]-l[0])/v),f=Math.ceil((e[2]-l[2])/v),c=c!==Math.abs(n)>Math.PI/2);for(var p=zf(t),d=h;d<=f;++d){var y=this.wl.length+this.gl.length,m=void 0,w=void 0,g=void 0,b=void 0;if(this.Tl)for(w=0,g=this.Tl.length;w<g;++w){var x=this.wl[w];if(n||0!==d)(M=x.clone()).translate(d*v,0),M.rotate(-n,o),(b=this.Zl(M,s,w)).rotate(n,o);else b=this.Zl(x,e,w);(m=this.Dl[y++]).setGeometry(b),m.set("graticule_label",this.Tl[w].text),p.drawFeature(m,this.zl(m));}if(this.Al&&(d===h&&c||d===f&&!c))for(w=0,g=this.gl.length;w<g;++w){var M;x=this.gl[w];if(n||0!==d)(M=x.clone()).translate(d*v,0),M.rotate(-n,o),(b=this.$l(M,s,w)).rotate(n,o);else b=this.$l(x,e,w);(m=this.Dl[y++]).setGeometry(b),m.set("graticule_label",this.Al[w].text),p.drawFeature(m,this.Rl(m));}}},n.prototype.Xl=function(t,n,i,r){var e=this.Hl(i);if(-1==e)return this.wl.length=0,this.gl.length=0,this.Tl&&(this.Tl.length=0),void(this.Al&&(this.Al.length=0));var o=!1,s=this.di.getExtent(),u=Qn(s);this.getSource().getWrapX()&&this.di.canWrapX()&&!On(s,t)&&(Qn(t)>=u?(t[0]=s[0],t[2]=s[2]):o=!0);var a=[hi(n[0],this.pl,this.ll),hi(n[1],this.dl,this.vl)],h=this.Ml(a);isNaN(h[1])&&(h[1]=Math.abs(this.al)>=Math.abs(this.fl)?this.al:this.fl);var f,c,l,v,p=hi(h[0],this.cl,this.hl),d=hi(h[1],this.fl,this.al),y=this.ml,m=t;o||(m=[hi(t[0],this.pl,this.ll),hi(t[1],this.dl,this.vl),hi(t[2],this.pl,this.ll),hi(t[3],this.dl,this.vl)]);var w=oi(m,this.Ml,void 0,8),g=w[3],b=w[2],x=w[1],M=w[0];if(o||(Sn(m,this.Sl)&&(M=this.cl,x=this.fl),Sn(m,this.Ol)&&(b=this.hl,x=this.fl),Sn(m,this.jl)&&(M=this.cl,g=this.al),Sn(m,this.El)&&(b=this.hl,g=this.al),g=hi(g,d,this.al),b=hi(b,p,this.hl),x=hi(x,this.fl,d),M=hi(M,this.cl,p)),v=hi(p=Math.floor(p/e)*e,this.cl,this.hl),c=this.Vl(v,x,g,r,t,0),f=0,o)for(;(v-=e)>=M&&f++<y;){c=this.Vl(v,x,g,r,t,c);}else for(;v!=this.cl&&f++<y;){v=Math.max(v-e,this.cl),c=this.Vl(v,x,g,r,t,c);}if(v=hi(p,this.cl,this.hl),f=0,o)for(;(v+=e)<=b&&f++<y;){c=this.Vl(v,x,g,r,t,c);}else for(;v!=this.hl&&f++<y;){v=Math.min(v+e,this.hl),c=this.Vl(v,x,g,r,t,c);}for(this.wl.length=c,this.Tl&&(this.Tl.length=c),l=hi(d=Math.floor(d/e)*e,this.fl,this.al),c=this.Yl(l,M,b,r,t,0),f=0;l!=this.fl&&f++<y;){l=Math.max(l-e,this.fl),c=this.Yl(l,M,b,r,t,c);}for(l=hi(d,this.fl,this.al),f=0;l!=this.al&&f++<y;){l=Math.min(l+e,this.al),c=this.Yl(l,M,b,r,t,c);}this.gl.length=c,this.Al&&(this.Al.length=c);},n.prototype.Hl=function(t){for(var n=this._l[0],i=this._l[1],r=-1,e=Math.pow(this.yl*t,2),o=[],s=[],u=0,a=this.Gl.length;u<a;++u){var h=hi(this.Gl[u]/2,0,90),f=hi(i,-90+h,90-h);if(o[0]=n-h,o[1]=f-h,s[0]=n+h,s[1]=f+h,this.xl(o,o),this.xl(s,s),Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2)<=e)break;r=this.Gl[u];}return r;},n.prototype.Wl=function(t,n,i,r,e){var o=Fx(t,n,i,this.di,r),s=this.wl[e];return s?(s.setFlatCoordinates(kt,o),s.changed()):(s=new _x(o,kt),this.wl[e]=s),s;},n.prototype.Zl=function(t,n,i){var r=t.getFlatCoordinates(),e=1,o=r.length-1;r[e]>r[o]&&(e=o,o=1);var s=Math.max(n[1],r[e]),u=Math.min(n[3],r[o]),a=hi(n[1]+Math.abs(n[1]-n[3])*this.kl,s,u),h=[r[e-1]+(r[o-1]-r[e-1])*(a-r[e])/(r[o]-r[e]),a],f=this.Tl[i].geom;return f.setCoordinates(h),f;},n.prototype.getMeridians=function(){return this.wl;},n.prototype.Kl=function(t,n,i,r,e){var o=Gx(t,n,i,this.di,r),s=this.gl[e];return s?(s.setFlatCoordinates(kt,o),s.changed()):s=new _x(o,kt),s;},n.prototype.$l=function(t,n,i){var r=t.getFlatCoordinates(),e=0,o=r.length-2;r[e]>r[o]&&(e=o,o=0);var s=Math.max(n[0],r[e]),u=Math.min(n[2],r[o]),a=hi(n[0]+Math.abs(n[0]-n[2])*this.Nl,s,u),h=[a,r[e+1]+(r[o+1]-r[e+1])*(a-r[e])/(r[o]-r[e])],f=this.Al[i].geom;return f.setCoordinates(h),f;},n.prototype.getParallels=function(){return this.gl;},n.prototype.Bl=function(t){var n=br("EPSG:4326"),i=t.getWorldExtent();this.al=i[3],this.hl=i[2],this.fl=i[1],this.cl=i[0];var r=Pr(t,n);if(this.cl<this.hl)this.Ml=r;else{var e=this.cl+this.hl/2;this.hl+=360,this.Ml=function(t,n,i){for(var o=i||2,s=r(t,n,o),u=0,a=s.length;u<a;u+=o){s[u]<e&&(s[u]+=360);}return s;};}this.xl=Pr(n,t);var o=oi([this.cl,this.fl,this.hl,this.al],this.xl,void 0,8);this.pl=o[0],this.ll=o[2],this.dl=o[1],this.vl=o[3],this.Sl=this.xl([this.cl,this.fl]),this.Ol=this.xl([this.hl,this.fl]),this.jl=this.xl([this.cl,this.al]),this.El=this.xl([this.hl,this.al]),this._l=this.Ml(Vn(t.getExtent())),isNaN(this._l[1])&&(this._l[1]=Math.abs(this.al)>=Math.abs(this.fl)?this.al:this.fl),this.di=t;},n;}(Lx),Xx=Bx,Vx=function(){var _t163=function t(n,i){return _t163=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t163(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t163(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Wx="blur",Yx="gradient",Kx="radius",Zx=["#00f","#0ff","#0f0","#ff0","#f00"],$x=function(t){function n(n){var i=this,r=n||{},e=A({},r);delete e.gradient,delete e.radius,delete e.blur,delete e.weight,(i=t.call(this,e)||this).Jl=null,i.addChangeListener(Yx,i.Ql),i.setGradient(r.gradient?r.gradient:Zx),i.setBlur(void 0!==r.blur?r.blur:15),i.setRadius(void 0!==r.radius?r.radius:8);var o=r.weight?r.weight:"weight";return i.tv="string"==typeof o?function(t){return t.get(o);}:o,i.setRenderOrder(null),i;}return Vx(n,t),n.prototype.getBlur=function(){return this.get(Wx);},n.prototype.getGradient=function(){return this.get(Yx);},n.prototype.getRadius=function(){return this.get(Kx);},n.prototype.Ql=function(){this.Jl=function(t){for(var n=1,i=256,r=ko(n,i),e=r.createLinearGradient(0,0,n,i),o=1/(t.length-1),s=0,u=t.length;s<u;++s){e.addColorStop(s*o,t[s]);}return r.fillStyle=e,r.fillRect(0,0,n,i),r.canvas;}(this.getGradient());},n.prototype.setBlur=function(t){this.set(Wx,t);},n.prototype.setGradient=function(t){this.set(Yx,t);},n.prototype.setRadius=function(t){this.set(Kx,t);},n.prototype.createRenderer=function(){return new hb(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(t){var n=this.tv(t);return void 0!==n?hi(n,0,1):1;}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get(Kx)+this.get(Wx));}.bind(this),u_blurSlope:function(){return this.get(Kx)/Math.max(1,this.get(Wx));}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.Jl;}.bind(this),u_opacity:function(){return this.getOpacity();}.bind(this)}}]});},n.prototype.renderDeclutter=function(){},n;}(ub);var Hx=$x,Jx=function(){function t(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null;}return t.prototype.getReadOptions=function(t,n){var i;if(n){var r=n.dataProjection?br(n.dataProjection):this.readProjection(t);n.extent&&r&&r.getUnits()===qt.TILE_PIXELS&&(r=br(r)).setWorldExtent(n.extent),i={dataProjection:r,featureProjection:n.featureProjection};}return this.adaptOptions(i);},t.prototype.adaptOptions=function(t){return A({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t);},t.prototype.getType=function(){return r();},t.prototype.readFeature=function(t,n){return r();},t.prototype.readFeatures=function(t,n){return r();},t.prototype.readGeometry=function(t,n){return r();},t.prototype.readProjection=function(t){return r();},t.prototype.writeFeature=function(t,n){return r();},t.prototype.writeFeatures=function(t,n){return r();},t.prototype.writeGeometry=function(t,n){return r();},t;}();function Qx(t,n,i){var r,e=i?br(i.featureProjection):null,o=i?br(i.dataProjection):null;if(r=e&&o&&!Tr(e,o)?(n?t.clone():t).transform(n?e:o,n?o:e):t,n&&i&&void 0!==i.decimals){var s=Math.pow(10,i.decimals);r===t&&(r=t.clone()),r.applyTransform(function(t){for(var n=0,i=t.length;n<i;++n){t[n]=Math.round(t[n]*s)/s;}return t;});}return r;}function tM(t,n){var i=n?br(n.featureProjection):null,r=n?br(n.dataProjection):null;return i&&r&&!Tr(i,r)?kr(t,r,i):t;}var nM=i(98),iM=function(){var _t164=function t(n,i){return _t164=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t164(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t164(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}();function rM(t,n,i){if(3===t){var r={keys:[],values:[],features:[]},e=i.readVarint()+i.pos;i.readFields(eM,r,e),r.length=r.features.length,r.length&&(n[r.name]=r);}}function eM(t,n,i){if(15===t)n.version=i.readVarint();else if(1===t)n.name=i.readString();else if(5===t)n.extent=i.readVarint();else if(2===t)n.features.push(i.pos);else if(3===t)n.keys.push(i.readString());else if(4===t){for(var r=null,e=i.readVarint()+i.pos;i.pos<e;){r=1===(t=i.readVarint()>>3)?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null;}n.values.push(r);}}function oM(t,n,i){if(1==t)n.id=i.readVarint();else if(2==t)for(var r=i.readVarint()+i.pos;i.pos<r;){var e=n.layer.keys[i.readVarint()],o=n.layer.values[i.readVarint()];n.properties[e]=o;}else 3==t?n.type=i.readVarint():4==t&&(n.geometry=i.pos);}function sM(t,n,i){t.pos=n.features[i];var r=t.readVarint()+t.pos,e={layer:n,type:0,properties:{}};return t.readFields(oM,e,r),e;}var uM=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=new ai({code:"",units:qt.TILE_PIXELS}),i.nv=r.featureClass?r.featureClass:Ix,i.$=r.geometryName,i.iv=r.layerName?r.layerName:"layer",i.Uh=r.layers?r.layers:null,i.rv=r.idProperty,i.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"],i;}return iM(n,t),n.prototype.ev=function(t,n,i,r){t.pos=n.geometry;for(var e=t.readVarint()+t.pos,o=1,s=0,u=0,a=0,h=0,f=0;t.pos<e;){if(!s){var c=t.readVarint();o=7&c,s=c>>3;}s--,1===o||2===o?(u+=t.readSVarint(),a+=t.readSVarint(),1===o&&h>f&&(r.push(h),f=h),i.push(u,a),h+=2):7===o?h>f&&(i.push(i[f],i[f+1]),h+=2):Et(!1,59);}h>f&&(r.push(h),f=h);},n.prototype.ov=function(t,n,i){var r,e=n.type;if(0===e)return null;var o,s=n.properties;this.rv?(o=s[this.rv],delete s[this.rv]):o=n.id,s[this.iv]=n.layer.name;var u=[],a=[];this.ev(t,n,u,a);var h=function(t,n){var i;1===t?i=1===n?"Point":"MultiPoint":2===t?i=1===n?"LineString":"MultiLineString":3===t&&(i="Polygon");return i;}(e,a.length);if(this.nv===Ix)(r=new this.nv(h,u,a,s,o)).transform(i.dataProjection);else{var f=void 0;if("Polygon"==h){var c=He(u,a);f=c.length>1?new Px(u,kt,c):new to(u,kt,a);}else f="Point"===h?new ke(u,kt):"LineString"===h?new _x(u,kt):"MultiPoint"===h?new mx(u,kt):"MultiLineString"===h?new jx(u,kt,a):null;r=new(0,this.nv)(),this.$&&r.setGeometryName(this.$);var l=Qx(f,!1,i);r.setGeometry(l),void 0!==o&&r.setId(o),r.setProperties(s,!0);}return r;},n.prototype.getType=function(){return"arraybuffer";},n.prototype.readFeatures=function(t,n){var i=this.Uh,r=this.adaptOptions(n),e=br(r.dataProjection);e.setWorldExtent(r.extent),r.dataProjection=e;var o=new nM(t),s=o.readFields(rM,{}),u=[];for(var a in s){if(!i||-1!=i.indexOf(a)){var h=s[a],f=h?[0,0,h.extent,h.extent]:null;e.setExtent(f);for(var c=0,l=h.length;c<l;++c){var v=sM(o,h,c),p=this.ov(o,v,r);null!==p&&u.push(p);}}}return u;},n.prototype.readProjection=function(t){return this.dataProjection;},n.prototype.setLayers=function(t){this.Uh=t;},n;}(Jx),aM=function(){var _t165=function t(n,i){return _t165=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t165(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t165(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),hM=function(t){function n(n){var i=this,r=n||{},e=A({},r);delete e.preload,delete e.useInterimTilesOnError,(i=t.call(this,e)||this).on,i.once,i.un,r.renderMode===ux&&(console.warn('renderMode: "image" is deprecated. Option ignored.'),r.renderMode=void 0);var o=r.renderMode||ax;return Et(o==ax||o==hx,28),i.sv=o,i.setPreload(r.preload?r.preload:0),i.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),i.getBackground,i.setBackground,i;}return aM(n,t),n.prototype.createRenderer=function(){return new px(this);},n.prototype.getFeatures=function(n){return t.prototype.getFeatures.call(this,n);},n.prototype.getRenderMode=function(){return this.sv;},n.prototype.getPreload=function(){return this.get(hg);},n.prototype.getUseInterimTilesOnError=function(){return this.get(fg);},n.prototype.setPreload=function(t){this.set(hg,t);},n.prototype.setUseInterimTilesOnError=function(t){this.set(fg,t);},n;}(ub),fM=function(){var _t166=function t(n,i){return _t166=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t166(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t166(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}();function cM(t){for(var n=[],i=0,r=t.length;i<r;++i){n.push(t[i].clone());}return n;}var lM=function(t){function n(n){var i=t.call(this)||this;return i.uv=n||null,i.av=[],i.hv(),i;}return fM(n,t),n.prototype.fv=function(){this.av.forEach(H),this.av.length=0;},n.prototype.hv=function(){if(this.uv)for(var t=0,n=this.uv.length;t<n;++t){this.av.push(Z(this.uv[t],z,this.changed,this));}},n.prototype.clone=function(){var t=new n(null);return t.setGeometries(this.uv),t.applyProperties(this),t;},n.prototype.closestPointXY=function(t,n,i,r){if(r<_n(this.getExtent(),t,n))return r;for(var e=this.uv,o=0,s=e.length;o<s;++o){r=e[o].closestPointXY(t,n,i,r);}return r;},n.prototype.containsXY=function(t,n){for(var i=this.uv,r=0,e=i.length;r<e;++r){if(i[r].containsXY(t,n))return!0;}return!1;},n.prototype.computeExtent=function(t){Pn(t);for(var n=this.uv,i=0,r=n.length;i<r;++i){zn(t,n[i].getExtent());}return t;},n.prototype.getGeometries=function(){return cM(this.uv);},n.prototype.getGeometriesArray=function(){return this.uv;},n.prototype.getGeometriesArrayRecursive=function(){for(var t=[],n=this.uv,i=0,r=n.length;i<r;++i){n[i].getType()===this.getType()?t=t.concat(n[i].getGeometriesArrayRecursive()):t.push(n[i]);}return t;},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var i=[],r=this.uv,e=!1,o=0,s=r.length;o<s;++o){var u=r[o],a=u.getSimplifiedGeometry(t);i.push(a),a!==u&&(e=!0);}if(e){var h=new n(null);return h.setGeometriesArray(i),h;}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this;},n.prototype.getType=function(){return"GeometryCollection";},n.prototype.intersectsExtent=function(t){for(var n=this.uv,i=0,r=n.length;i<r;++i){if(n[i].intersectsExtent(t))return!0;}return!1;},n.prototype.isEmpty=function(){return 0===this.uv.length;},n.prototype.rotate=function(t,n){for(var i=this.uv,r=0,e=i.length;r<e;++r){i[r].rotate(t,n);}this.changed();},n.prototype.scale=function(t,n,i){var r=i;r||(r=Vn(this.getExtent()));for(var e=this.uv,o=0,s=e.length;o<s;++o){e[o].scale(t,n,r);}this.changed();},n.prototype.setGeometries=function(t){this.setGeometriesArray(cM(t));},n.prototype.setGeometriesArray=function(t){this.fv(),this.uv=t,this.hv(),this.changed();},n.prototype.applyTransform=function(t){for(var n=this.uv,i=0,r=n.length;i<r;++i){n[i].applyTransform(t);}this.changed();},n.prototype.translate=function(t,n){for(var i=this.uv,r=0,e=i.length;r<e;++r){i[r].translate(t,n);}this.changed();},n.prototype.disposeInternal=function(){this.fv(),t.prototype.disposeInternal.call(this);},n;}(Hr),vM=function(){var _t167=function t(n,i){return _t167=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t167(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t167(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}();function pM(t){if("string"==typeof t){var n=JSON.parse(t);return n||null;}return null!==t?t:null;}var dM=function(t){function n(){return t.call(this)||this;}return vM(n,t),n.prototype.getType=function(){return"json";},n.prototype.readFeature=function(t,n){return this.readFeatureFromObject(pM(t),this.getReadOptions(t,n));},n.prototype.readFeatures=function(t,n){return this.readFeaturesFromObject(pM(t),this.getReadOptions(t,n));},n.prototype.readFeatureFromObject=function(t,n){return r();},n.prototype.readFeaturesFromObject=function(t,n){return r();},n.prototype.readGeometry=function(t,n){return this.readGeometryFromObject(pM(t),this.getReadOptions(t,n));},n.prototype.readGeometryFromObject=function(t,n){return r();},n.prototype.readProjection=function(t){return this.readProjectionFromObject(pM(t));},n.prototype.readProjectionFromObject=function(t){return r();},n.prototype.writeFeature=function(t,n){return JSON.stringify(this.writeFeatureObject(t,n));},n.prototype.writeFeatureObject=function(t,n){return r();},n.prototype.writeFeatures=function(t,n){return JSON.stringify(this.writeFeaturesObject(t,n));},n.prototype.writeFeaturesObject=function(t,n){return r();},n.prototype.writeGeometry=function(t,n){return JSON.stringify(this.writeGeometryObject(t,n));},n.prototype.writeGeometryObject=function(t,n){return r();},n;}(Jx),yM=function(){var _t168=function t(n,i){return _t168=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t168(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t168(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}();function mM(t,n){if(!t)return null;var i;switch(t.type){case"Point":i=function(t){return new ke(t.coordinates);}(t);break;case"LineString":i=function(t){return new _x(t.coordinates);}(t);break;case"Polygon":i=function(t){return new to(t.coordinates);}(t);break;case"MultiPoint":i=function(t){return new mx(t.coordinates);}(t);break;case"MultiLineString":i=function(t){return new jx(t.coordinates);}(t);break;case"MultiPolygon":i=function(t){return new Px(t.coordinates);}(t);break;case"GeometryCollection":i=function(t,n){var i=t.geometries.map(function(t){return mM(t,n);});return new lM(i);}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type);}return Qx(i,!1,n);}function wM(t,n){var i,r=(t=Qx(t,!0,n)).getType();switch(r){case"Point":i=function(t,n){return{type:"Point",coordinates:t.getCoordinates()};}(t);break;case"LineString":i=function(t,n){return{type:"LineString",coordinates:t.getCoordinates()};}(t);break;case"Polygon":i=function(t,n){var i;n&&(i=n.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(i)};}(t,n);break;case"MultiPoint":i=function(t,n){return{type:"MultiPoint",coordinates:t.getCoordinates()};}(t);break;case"MultiLineString":i=function(t,n){return{type:"MultiLineString",coordinates:t.getCoordinates()};}(t);break;case"MultiPolygon":i=function(t,n){var i;n&&(i=n.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(i)};}(t,n);break;case"GeometryCollection":i=function(t,n){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(t){var i=A({},n);return delete i.featureProjection,wM(t,i);})};}(t,n);break;case"Circle":i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+r);}return i;}var gM,bM=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this)||this).dataProjection=br(r.dataProjection?r.dataProjection:"EPSG:4326"),r.featureProjection&&(i.defaultFeatureProjection=br(r.featureProjection)),i.$=r.geometryName,i.cv=r.extractGeometryName,i.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],i;}return yM(n,t),n.prototype.readFeatureFromObject=function(t,n){var i=null,r=mM((i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,n),e=new Ct();return this.$?e.setGeometryName(this.$):this.cv&&"geometry_name"in i!==void 0&&e.setGeometryName(i.geometry_name),e.setGeometry(r),"id"in i&&e.setId(i.id),i.properties&&e.setProperties(i.properties,!0),e;},n.prototype.readFeaturesFromObject=function(t,n){var i=null;if("FeatureCollection"===t.type){i=[];for(var r=t.features,e=0,o=r.length;e<o;++e){i.push(this.readFeatureFromObject(r[e],n));}}else i=[this.readFeatureFromObject(t,n)];return i;},n.prototype.readGeometryFromObject=function(t,n){return mM(t,n);},n.prototype.readProjectionFromObject=function(t){var n,i=t.crs;return i?"name"==i.type?n=br(i.properties.name):"EPSG"===i.type?n=br("EPSG:"+i.properties.code):Et(!1,36):n=this.dataProjection,n;},n.prototype.writeFeatureObject=function(t,n){n=this.adaptOptions(n);var i={type:"Feature",geometry:null,properties:null},r=t.getId();if(void 0!==r&&(i.id=r),!t.hasProperties())return i;var e=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=wM(o,n),delete e[t.getGeometryName()]),k(e)||(i.properties=e),i;},n.prototype.writeFeaturesObject=function(t,n){n=this.adaptOptions(n);for(var i=[],r=0,e=t.length;r<e;++r){i.push(this.writeFeatureObject(t[r],n));}return{type:"FeatureCollection",features:i};},n.prototype.writeGeometryObject=function(t,n){return wM(t,this.adaptOptions(n));},n;}(dM),xM={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function MM(t){return(t=Math.round(t))<0?0:t>255?255:t;}function _M(t){return t<0?0:t>1?1:t;}function SM(t){return"%"===t[t.length-1]?MM(parseFloat(t)/100*255):MM(parseInt(t));}function OM(t){return"%"===t[t.length-1]?_M(parseFloat(t)/100):_M(parseFloat(t));}function jM(t,n,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(n-t)*i*6:2*i<1?n:3*i<2?t+(n-t)*(2/3-i)*6:t;}try{gM={}.parseCSSColor=function(t){var n,i=t.replace(/ /g,"").toLowerCase();if(i in xM)return xM[i].slice();if("#"===i[0])return 4===i.length?(n=parseInt(i.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:7===i.length&&(n=parseInt(i.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var r=i.indexOf("("),e=i.indexOf(")");if(-1!==r&&e+1===i.length){var o=i.substr(0,r),s=i.substr(r+1,e-(r+1)).split(","),u=1;switch(o){case"rgba":if(4!==s.length)return null;u=OM(s.pop());case"rgb":return 3!==s.length?null:[SM(s[0]),SM(s[1]),SM(s[2]),u];case"hsla":if(4!==s.length)return null;u=OM(s.pop());case"hsl":if(3!==s.length)return null;var a=(parseFloat(s[0])%360+360)%360/360,h=OM(s[1]),f=OM(s[2]),c=f<=.5?f*(h+1):f+h-f*h,l=2*f-c;return[MM(255*jM(l,c,a+1/3)),MM(255*jM(l,c,a)),MM(255*jM(l,c,a-1/3)),u];default:return null;}}return null;};}catch(t){}var EM=function EM(t,n,i,r){void 0===r&&(r=1),this.r=t,this.g=n,this.b=i,this.a=r;};function TM(t){return"object"==_typeof(t)?["literal",t]:t;}function AM(t,n){var i=t.stops;if(!i)return function(t,n){var i=["get",t.property];if(void 0===t.default)return"string"===n.type?["string",i]:i;if("enum"===n.type)return["match",i,Object.keys(n.values),i,t.default];var r=["color"===n.type?"to-color":n.type,i,TM(t.default)];return"array"===n.type&&r.splice(1,0,n.value,n.length||null),r;}(t,n);var r=i&&"object"==_typeof(i[0][0]),e=r||void 0!==t.property,o=r||!e;return i=i.map(function(t){return!e&&n.tokens&&"string"==typeof t[1]?[t[0],LM(t[1])]:[t[0],TM(t[1])];}),r?function(t,n,i){for(var r={},e={},o=[],s=0;s<i.length;s++){var u=i[s],a=u[0].zoom;void 0===r[a]&&(r[a]={zoom:a,type:t.type,property:t.property,default:t.default},e[a]=[],o.push(a)),e[a].push([u[0].value,u[1]]);}if("exponential"===zM({},n)){for(var h=[PM(t),["linear"],["zoom"]],f=0,c=o;f<c.length;f+=1){var l=c[f];IM(h,l,kM(r[l],n,e[l]),!1);}return h;}for(var v=["step",["zoom"]],p=0,d=o;p<d.length;p+=1){var y=d[p];IM(v,y,kM(r[y],n,e[y]),!0);}return NM(v),v;}(t,n,i):o?function(t,n,i,r){void 0===r&&(r=["zoom"]);var e,o=zM(t,n),s=!1;if("interval"===o)e=["step",r],s=!0;else{if("exponential"!==o)throw new Error('Unknown zoom function type "'+o+'"');var u=void 0!==t.base?t.base:1;e=[PM(t),1===u?["linear"]:["exponential",u],r];}for(var a=0,h=i;a<h.length;a+=1){var f=h[a];IM(e,f[0],f[1],s);}return NM(e),e;}(t,n,i):kM(t,n,i);}function PM(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate";}}function CM(t,n){var i,r,e=TM((i=t.default,r=n.default,void 0!==i?i:void 0!==r?r:void 0));return void 0===e&&"resolvedImage"===n.type?"":e;}function kM(t,n,i){var r=zM(t,n),e=["get",t.property];if("categorical"===r&&"boolean"==typeof i[0][0]){for(var o=["case"],s=0,u=i;s<u.length;s+=1){var a=u[s];o.push(["==",e,a[0]],a[1]);}return o.push(CM(t,n)),o;}if("categorical"===r){for(var h=["match",e],f=0,c=i;f<c.length;f+=1){var l=c[f];IM(h,l[0],l[1],!1);}return h.push(CM(t,n)),h;}if("interval"===r){for(var v=["step",["number",e]],p=0,d=i;p<d.length;p+=1){var y=d[p];IM(v,y[0],y[1],!0);}return NM(v),void 0===t.default?v:["case",["==",["typeof",e],"number"],v,TM(t.default)];}if("exponential"===r){for(var m=void 0!==t.base?t.base:1,w=[PM(t),1===m?["linear"]:["exponential",m],["number",e]],g=0,b=i;g<b.length;g+=1){var x=b[g];IM(w,x[0],x[1],!1);}return void 0===t.default?w:["case",["==",["typeof",e],"number"],w,TM(t.default)];}throw new Error("Unknown property function type "+r);}function NM(t){"step"===t[0]&&3===t.length&&(t.push(0),t.push(t[3]));}function IM(t,n,i,r){t.length>3&&n===t[t.length-2]||(r&&2===t.length||t.push(n),t.push(i));}function zM(t,n){return t.type?t.type:n.expression.interpolated?"exponential":"interval";}function LM(t){for(var n=["concat"],i=/{([^{}]+)}/g,r=0,e=i.exec(t);null!==e;e=i.exec(t)){var o=t.slice(r,i.lastIndex-e[0].length);r=i.lastIndex,o.length>0&&n.push(o),n.push(["get",e[1]]);}if(1===n.length)return t;if(r<t.length)n.push(t.slice(r));else if(2===n.length)return["to-string",n[1]];return n;}EM.parse=function(t){if(t){if(t instanceof EM)return t;if("string"==typeof t){var n=gM(t);if(n)return new EM(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]);}}},EM.prototype.toString=function(){var t=this.toArray(),n=t[0],i=t[1],r=t[2],e=t[3];return"rgba("+Math.round(n)+","+Math.round(i)+","+Math.round(r)+","+e+")";},EM.prototype.toArray=function(){var t=this,n=t.r,i=t.g,r=t.b,e=t.a;return 0===e?[0,0,0,0]:[255*n/e,255*i/e,255*r/e,e];},EM.prototype.toArray01=function(){var t=this,n=t.r,i=t.g,r=t.b,e=t.a;return 0===e?[0,0,0,0]:[n/e,i/e,r/e,e];},EM.prototype.toArray01PremultipliedAlpha=function(){var t=this;return[t.r,t.g,t.b,t.a];},EM.black=new EM(0,0,0,1),EM.white=new EM(1,1,1,1),EM.transparent=new EM(0,0,0,0),EM.red=new EM(1,0,0,1),EM.blue=new EM(0,0,1,1);var RM=function(t){function n(n,i){t.call(this,i),this.message=i,this.key=n;}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n;}(Error),FM=function FM(t,n){void 0===n&&(n=[]),this.parent=t,this.bindings={};for(var i=0,r=n;i<r.length;i+=1){var e=r[i],o=e[0],s=e[1];this.bindings[o]=s;}};FM.prototype.concat=function(t){return new FM(this,t);},FM.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.");},FM.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t);};var GM={kind:"null"},DM={kind:"number"},qM={kind:"string"},UM={kind:"boolean"},BM={kind:"color"},XM={kind:"object"},VM={kind:"value"},WM={kind:"collator"},YM={kind:"formatted"},KM={kind:"resolvedImage"};function ZM(t,n){return{kind:"array",itemType:t,N:n};}function $M(t){if("array"===t.kind){var n=$M(t.itemType);return"number"==typeof t.N?"array<"+n+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+n+">";}return t.kind;}var HM=[GM,DM,qM,UM,BM,YM,XM,ZM(VM),KM];function JM(t,n){if("error"===n.kind)return null;if("array"===t.kind){if("array"===n.kind&&(0===n.N&&"value"===n.itemType.kind||!JM(t.itemType,n.itemType))&&("number"!=typeof t.N||t.N===n.N))return null;}else{if(t.kind===n.kind)return null;if("value"===t.kind)for(var i=0,r=HM;i<r.length;i+=1){if(!JM(r[i],n))return null;}}return"Expected "+$M(t)+" but found "+$M(n)+" instead.";}function QM(t,n){return n.some(function(n){return n.kind===t.kind;});}function t_(t,n){return n.some(function(n){return"null"===n?null===t:"array"===n?Array.isArray(t):"object"===n?t&&!Array.isArray(t)&&"object"==_typeof(t):n===_typeof(t);});}var n_=function n_(t,n,i){this.sensitivity=t?n?"variant":"case":n?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"});};n_.prototype.compare=function(t,n){return this.collator.compare(t,n);},n_.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale;};var i_=function i_(t,n,i,r,e){this.text=t.normalize?t.normalize():t,this.image=n,this.scale=i,this.fontStack=r,this.textColor=e;},r_=function r_(t){this.sections=t;};r_.fromString=function(t){return new r_([new i_(t,null,null,null,null)]);},r_.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length;});},r_.factory=function(t){return t instanceof r_?t:r_.fromString(t);},r_.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(t){return t.text;}).join("");},r_.prototype.serialize=function(){for(var t=["format"],n=0,i=this.sections;n<i.length;n+=1){var r=i[n];if(r.image)t.push(["image",r.image.name]);else{t.push(r.text);var e={};r.fontStack&&(e["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(e["font-scale"]=r.scale),r.textColor&&(e["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(e);}}return t;};var e_=function e_(t){this.name=t.name,this.available=t.available;};function o_(t,n,i,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,n,i,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,n,i,r]:[t,n,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255.";}function s_(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof EM)return!0;if(t instanceof n_)return!0;if(t instanceof r_)return!0;if(t instanceof e_)return!0;if(Array.isArray(t)){for(var n=0,i=t;n<i.length;n+=1){if(!s_(i[n]))return!1;}return!0;}if("object"==_typeof(t)){for(var r in t){if(!s_(t[r]))return!1;}return!0;}return!1;}function u_(t){if(null===t)return GM;if("string"==typeof t)return qM;if("boolean"==typeof t)return UM;if("number"==typeof t)return DM;if(t instanceof EM)return BM;if(t instanceof n_)return WM;if(t instanceof r_)return YM;if(t instanceof e_)return KM;if(Array.isArray(t)){for(var n,i=t.length,r=0,e=t;r<e.length;r+=1){var o=u_(e[r]);if(n){if(n===o)continue;n=VM;break;}n=o;}return ZM(n||VM,i);}return XM;}function a_(t){var n=_typeof(t);return null===t?"":"string"===n||"number"===n||"boolean"===n?String(t):t instanceof EM||t instanceof r_||t instanceof e_?t.toString():JSON.stringify(t);}e_.prototype.toString=function(){return this.name;},e_.fromString=function(t){return t?new e_({name:t,available:!1}):null;},e_.prototype.serialize=function(){return["image",this.name];};var h_=function h_(t,n){this.type=t,this.value=n;};h_.parse=function(t,n){if(2!==t.length)return n.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!s_(t[1]))return n.error("invalid value");var i=t[1],r=u_(i),e=n.expectedType;return"array"!==r.kind||0!==r.N||!e||"array"!==e.kind||"number"==typeof e.N&&0!==e.N||(r=e),new h_(r,i);},h_.prototype.evaluate=function(){return this.value;},h_.prototype.eachChild=function(){},h_.prototype.outputDefined=function(){return!0;},h_.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof EM?["rgba"].concat(this.value.toArray()):this.value instanceof r_?this.value.serialize():this.value;};var f_=function f_(t){this.name="ExpressionEvaluationError",this.message=t;};f_.prototype.toJSON=function(){return this.message;};var c_={string:qM,number:DM,boolean:UM,object:XM},l_=function l_(t,n){this.type=t,this.args=n;};l_.parse=function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var i,r=1,e=t[0];if("array"===e){var o,s;if(t.length>2){var u=t[1];if("string"!=typeof u||!(u in c_)||"object"===u)return n.error('The item type argument of "array" must be one of string, number, boolean',1);o=c_[u],r++;}else o=VM;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);s=t[2],r++;}i=ZM(o,s);}else i=c_[e];for(var a=[];r<t.length;r++){var h=n.parse(t[r],r,VM);if(!h)return null;a.push(h);}return new l_(i,a);},l_.prototype.evaluate=function(t){for(var n=0;n<this.args.length;n++){var i=this.args[n].evaluate(t);if(!JM(this.type,u_(i)))return i;if(n===this.args.length-1)throw new f_("Expected value to be of type "+$M(this.type)+", but found "+$M(u_(i))+" instead.");}return null;},l_.prototype.eachChild=function(t){this.args.forEach(t);},l_.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined();});},l_.prototype.serialize=function(){var t=this.type,n=[t.kind];if("array"===t.kind){var i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){n.push(i.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&n.push(r);}}return n.concat(this.args.map(function(t){return t.serialize();}));};var v_=function v_(t){this.type=YM,this.sections=t;};v_.parse=function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var i=t[1];if(!Array.isArray(i)&&"object"==_typeof(i))return n.error("First argument must be an image or text section.");for(var r=[],e=!1,o=1;o<=t.length-1;++o){var s=t[o];if(e&&"object"==_typeof(s)&&!Array.isArray(s)){e=!1;var u=null;if(s["font-scale"]&&!(u=n.parse(s["font-scale"],1,DM)))return null;var a=null;if(s["text-font"]&&!(a=n.parse(s["text-font"],1,ZM(qM))))return null;var h=null;if(s["text-color"]&&!(h=n.parse(s["text-color"],1,BM)))return null;var f=r[r.length-1];f.scale=u,f.font=a,f.textColor=h;}else{var c=n.parse(t[o],1,VM);if(!c)return null;var l=c.type.kind;if("string"!==l&&"value"!==l&&"null"!==l&&"resolvedImage"!==l)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");e=!0,r.push({content:c,scale:null,font:null,textColor:null});}}return new v_(r);},v_.prototype.evaluate=function(t){return new r_(this.sections.map(function(n){var i=n.content.evaluate(t);return u_(i)===KM?new i_("",i,null,null,null):new i_(a_(i),null,n.scale?n.scale.evaluate(t):null,n.font?n.font.evaluate(t).join(","):null,n.textColor?n.textColor.evaluate(t):null);}));},v_.prototype.eachChild=function(t){for(var n=0,i=this.sections;n<i.length;n+=1){var r=i[n];t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor);}},v_.prototype.outputDefined=function(){return!1;},v_.prototype.serialize=function(){for(var t=["format"],n=0,i=this.sections;n<i.length;n+=1){var r=i[n];t.push(r.content.serialize());var e={};r.scale&&(e["font-scale"]=r.scale.serialize()),r.font&&(e["text-font"]=r.font.serialize()),r.textColor&&(e["text-color"]=r.textColor.serialize()),t.push(e);}return t;};var p_=function p_(t){this.type=KM,this.input=t;};p_.parse=function(t,n){if(2!==t.length)return n.error("Expected two arguments.");var i=n.parse(t[1],1,qM);return i?new p_(i):n.error("No image name provided.");},p_.prototype.evaluate=function(t){var n=this.input.evaluate(t),i=e_.fromString(n);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(n)>-1),i;},p_.prototype.eachChild=function(t){t(this.input);},p_.prototype.outputDefined=function(){return!1;},p_.prototype.serialize=function(){return["image",this.input.serialize()];};var d_={"to-boolean":UM,"to-color":BM,"to-number":DM,"to-string":qM},y_=function y_(t,n){this.type=t,this.args=n;};y_.parse=function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return n.error("Expected one argument.");for(var r=d_[i],e=[],o=1;o<t.length;o++){var s=n.parse(t[o],o,VM);if(!s)return null;e.push(s);}return new y_(r,e);},y_.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var n,i,r=0,e=this.args;r<e.length;r+=1){if(i=null,(n=e[r].evaluate(t))instanceof EM)return n;if("string"==typeof n){var o=t.parseColor(n);if(o)return o;}else if(Array.isArray(n)&&!(i=n.length<3||n.length>4?"Invalid rbga value "+JSON.stringify(n)+": expected an array containing either three or four numeric values.":o_(n[0],n[1],n[2],n[3])))return new EM(n[0]/255,n[1]/255,n[2]/255,n[3]);}throw new f_(i||"Could not parse color from value '"+("string"==typeof n?n:String(JSON.stringify(n)))+"'");}if("number"===this.type.kind){for(var s=null,u=0,a=this.args;u<a.length;u+=1){if(null===(s=a[u].evaluate(t)))return 0;var h=Number(s);if(!isNaN(h))return h;}throw new f_("Could not convert "+JSON.stringify(s)+" to number.");}return"formatted"===this.type.kind?r_.fromString(a_(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?e_.fromString(a_(this.args[0].evaluate(t))):a_(this.args[0].evaluate(t));},y_.prototype.eachChild=function(t){this.args.forEach(t);},y_.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined();});},y_.prototype.serialize=function(){if("formatted"===this.type.kind)return new v_([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new p_(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(n){t.push(n.serialize());}),t;};var m_=["Unknown","Point","LineString","Polygon"],w_=function w_(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null;};w_.prototype.id=function(){return this.feature&&"id"in this.feature&&this.feature.id?this.feature.id:null;},w_.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?m_[this.feature.type]:this.feature.type:null;},w_.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null;},w_.prototype.canonicalID=function(){return this.canonical;},w_.prototype.properties=function(){return this.feature&&this.feature.properties||{};},w_.prototype.distanceFromCenter=function(){if(this.featureTileCoord&&this.featureDistanceData){var t=this.featureDistanceData.center,n=this.featureDistanceData.scale,i=this.featureTileCoord,r=i.x,e=i.y,o=r*n-t[0],s=e*n-t[1];return this.featureDistanceData.bearing[0]*o+this.featureDistanceData.bearing[1]*s;}return 0;},w_.prototype.parseColor=function(t){var n=this._parseColorCache[t];return n||(n=this._parseColorCache[t]=EM.parse(t)),n;};var g_=function g_(t,n,i,r){this.name=t,this.type=n,this._evaluate=i,this.args=r;};g_.prototype.evaluate=function(t){return this._evaluate(t,this.args);},g_.prototype.eachChild=function(t){this.args.forEach(t);},g_.prototype.outputDefined=function(){return!1;},g_.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize();}));},g_.parse=function(t,n){var i,r=t[0],e=g_.definitions[r];if(!e)return n.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(e)?e[0]:e.type,s=Array.isArray(e)?[[e[1],e[2]]]:e.overloads,u=s.filter(function(n){var i=n[0];return!Array.isArray(i)||i.length===t.length-1;}),a=null,h=0,f=u;h<f.length;h+=1){var c=f[h],l=c[0],v=c[1];a=new B_(n.registry,n.path,null,n.scope);for(var p=[],d=!1,y=1;y<t.length;y++){var m=t[y],w=Array.isArray(l)?l[y-1]:l.type,g=a.parse(m,1+p.length,w);if(!g){d=!0;break;}p.push(g);}if(!d)if(Array.isArray(l)&&l.length!==p.length)a.error("Expected "+l.length+" arguments, but found "+p.length+" instead.");else{for(var b=0;b<p.length;b++){var x=Array.isArray(l)?l[b]:l.type,M=p[b];a.concat(b+1).checkSubtype(x,M.type);}if(0===a.errors.length)return new g_(r,o,v,p);}}if(1===u.length)(i=n.errors).push.apply(i,a.errors);else{for(var _=(u.length?u:s).map(function(t){var n,i=t[0];return n=i,Array.isArray(n)?"("+n.map($M).join(", ")+")":"("+$M(n.type)+"...)";}).join(" | "),S=[],O=1;O<t.length;O++){var j=n.parse(t[O],1+S.length);if(!j)return null;S.push($M(j.type));}n.error("Expected arguments of type "+_+", but found ("+S.join(", ")+") instead.");}return null;},g_.register=function(t,n){for(var i in g_.definitions=n,n){t[i]=g_;}};var b_=function b_(t,n,i){this.type=WM,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=n;};b_.parse=function(t,n){if(2!==t.length)return n.error("Expected one argument.");var i=t[1];if("object"!=_typeof(i)||Array.isArray(i))return n.error("Collator options argument must be an object.");var r=n.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,UM);if(!r)return null;var e=n.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,UM);if(!e)return null;var o=null;return i.locale&&!(o=n.parse(i.locale,1,qM))?null:new b_(r,e,o);},b_.prototype.evaluate=function(t){return new n_(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null);},b_.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale);},b_.prototype.outputDefined=function(){return!1;},b_.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t];};var x_=8192;function M_(t,n){t[0]=Math.min(t[0],n[0]),t[1]=Math.min(t[1],n[1]),t[2]=Math.max(t[2],n[0]),t[3]=Math.max(t[3],n[1]);}function __(t,n){return!(t[0]<=n[0])&&!(t[2]>=n[2])&&!(t[1]<=n[1])&&!(t[3]>=n[3]);}function S_(t,n){var i,r=(180+t[0])/360,e=(i=t[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360),o=Math.pow(2,n.z);return[Math.round(r*o*x_),Math.round(e*o*x_)];}function O_(t,n,i){var r=t[0]-n[0],e=t[1]-n[1],o=t[0]-i[0],s=t[1]-i[1];return r*s-o*e==0&&r*o<=0&&e*s<=0;}function j_(t,n,i){return n[1]>t[1]!=i[1]>t[1]&&t[0]<(i[0]-n[0])*(t[1]-n[1])/(i[1]-n[1])+n[0];}function E_(t,n){for(var i=!1,r=0,e=n.length;r<e;r++){for(var o=n[r],s=0,u=o.length;s<u-1;s++){if(O_(t,o[s],o[s+1]))return!1;j_(t,o[s],o[s+1])&&(i=!i);}}return i;}function T_(t,n){for(var i=0;i<n.length;i++){if(E_(t,n[i]))return!0;}return!1;}function A_(t,n,i,r){var e=t[0]-i[0],o=t[1]-i[1],s=n[0]-i[0],u=n[1]-i[1],a=r[0]-i[0],h=r[1]-i[1],f=e*h-a*o,c=s*h-a*u;return f>0&&c<0||f<0&&c>0;}function P_(t,n,i){for(var r=0,e=i;r<e.length;r+=1){for(var o=e[r],s=0;s<o.length-1;++s){if(u=t,a=n,h=o[s],f=o[s+1],c=void 0,l=void 0,v=void 0,p=void 0,v=[a[0]-u[0],a[1]-u[1]],p=[f[0]-h[0],f[1]-h[1]],0!=(c=p)[0]*(l=v)[1]-c[1]*l[0]&&A_(u,a,h,f)&&A_(h,f,u,a))return!0;}}var u,a,h,f,c,l,v,p;return!1;}function C_(t,n){for(var i=0;i<t.length;++i){if(!E_(t[i],n))return!1;}for(var r=0;r<t.length-1;++r){if(P_(t[r],t[r+1],n))return!1;}return!0;}function k_(t,n){for(var i=0;i<n.length;i++){if(C_(t,n[i]))return!0;}return!1;}function N_(t,n,i){for(var r=[],e=0;e<t.length;e++){for(var o=[],s=0;s<t[e].length;s++){var u=S_(t[e][s],i);M_(n,u),o.push(u);}r.push(o);}return r;}function I_(t,n,i){for(var r=[],e=0;e<t.length;e++){var o=N_(t[e],n,i);r.push(o);}return r;}function z_(t,n,i,r){if(t[0]<i[0]||t[0]>i[2]){var e=.5*r,o=t[0]-i[0]>e?-r:i[0]-t[0]>e?r:0;0===o&&(o=t[0]-i[2]>e?-r:i[2]-t[0]>e?r:0),t[0]+=o;}M_(n,t);}function L_(t,n,i,r){var e=Math.pow(2,r.z)*x_,o=[r.x*x_,r.y*x_],s=[];if(!t)return s;for(var u=0,a=t;u<a.length;u+=1){for(var h=0,f=a[u];h<f.length;h+=1){var c=f[h],l=[c.x+o[0],c.y+o[1]];z_(l,n,i,e),s.push(l);}}return s;}function R_(t,n,i,r){var e=Math.pow(2,r.z)*x_,o=[r.x*x_,r.y*x_],s=[];if(!t)return s;for(var u=0,a=t;u<a.length;u+=1){for(var h=[],f=0,c=a[u];f<c.length;f+=1){var l=c[f],v=[l.x+o[0],l.y+o[1]];M_(n,v),h.push(v);}s.push(h);}if(n[2]-n[0]<=e/2){!function(t){t[0]=t[1]=1/0,t[2]=t[3]=-1/0;}(n);for(var p=0,d=s;p<d.length;p+=1){for(var y=0,m=d[p];y<m.length;y+=1){z_(m[y],n,i,e);}}}return s;}var F_=function F_(t,n){this.type=UM,this.geojson=t,this.geometries=n;};function G_(t){if(t instanceof g_){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1;}if(t instanceof F_)return!1;var n=!0;return t.eachChild(function(t){n&&!G_(t)&&(n=!1);}),n;}function D_(t){if(t instanceof g_&&"feature-state"===t.name)return!1;var n=!0;return t.eachChild(function(t){n&&!D_(t)&&(n=!1);}),n;}function q_(t,n){if(t instanceof g_&&n.indexOf(t.name)>=0)return!1;var i=!0;return t.eachChild(function(t){i&&!q_(t,n)&&(i=!1);}),i;}F_.parse=function(t,n){if(2!==t.length)return n.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(s_(t[1])){var i=t[1];if("FeatureCollection"===i.type)for(var r=0;r<i.features.length;++r){var e=i.features[r].geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new F_(i,i.features[r].geometry);}else if("Feature"===i.type){var o=i.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new F_(i,i.geometry);}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new F_(i,i);}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.");},F_.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,n){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],e=t.canonicalID();if(!e)return!1;if("Polygon"===n.type){var o=N_(n.coordinates,r,e),s=L_(t.geometry(),i,r,e);if(!__(i,r))return!1;for(var u=0,a=s;u<a.length;u+=1){if(!E_(a[u],o))return!1;}}if("MultiPolygon"===n.type){var h=I_(n.coordinates,r,e),f=L_(t.geometry(),i,r,e);if(!__(i,r))return!1;for(var c=0,l=f;c<l.length;c+=1){if(!T_(l[c],h))return!1;}}return!0;}(t,this.geometries);if("LineString"===t.geometryType())return function(t,n){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],e=t.canonicalID();if(!e)return!1;if("Polygon"===n.type){var o=N_(n.coordinates,r,e),s=R_(t.geometry(),i,r,e);if(!__(i,r))return!1;for(var u=0,a=s;u<a.length;u+=1){if(!C_(a[u],o))return!1;}}if("MultiPolygon"===n.type){var h=I_(n.coordinates,r,e),f=R_(t.geometry(),i,r,e);if(!__(i,r))return!1;for(var c=0,l=f;c<l.length;c+=1){if(!k_(l[c],h))return!1;}}return!0;}(t,this.geometries);}return!1;},F_.prototype.eachChild=function(){},F_.prototype.outputDefined=function(){return!0;},F_.prototype.serialize=function(){return["within",this.geojson];};var U_=function U_(t,n){this.type=n.type,this.name=t,this.boundExpression=n;};U_.parse=function(t,n){if(2!==t.length||"string"!=typeof t[1])return n.error("'var' expression requires exactly one string literal argument.");var i=t[1];return n.scope.has(i)?new U_(i,n.scope.get(i)):n.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1);},U_.prototype.evaluate=function(t){return this.boundExpression.evaluate(t);},U_.prototype.eachChild=function(){},U_.prototype.outputDefined=function(){return!1;},U_.prototype.serialize=function(){return["var",this.name];};var B_=function B_(t,n,i,r,e){void 0===n&&(n=[]),void 0===r&&(r=new FM()),void 0===e&&(e=[]),this.registry=t,this.path=n,this.key=n.map(function(t){return"["+t+"]";}).join(""),this.scope=r,this.errors=e,this.expectedType=i;};function X_(t){if(t instanceof U_)return X_(t.boundExpression);if(t instanceof g_&&"error"===t.name)return!1;if(t instanceof b_)return!1;if(t instanceof F_)return!1;var n=t instanceof y_||t instanceof l_,i=!0;return t.eachChild(function(t){i=n?i&&X_(t):i&&t instanceof h_;}),!!i&&G_(t)&&q_(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]);}function V_(t,n){for(var i,r,e=t.length-1,o=0,s=e,u=0;o<=s;){if(i=t[u=Math.floor((o+s)/2)],r=t[u+1],i<=n){if(u===e||n<r)return u;o=u+1;}else{if(!(i>n))throw new f_("Input is not a number.");s=u-1;}}return 0;}B_.prototype.parse=function(t,n,i,r,e){return void 0===e&&(e={}),n?this.concat(n,i,r)._parse(t,e):this._parse(t,e);},B_.prototype._parse=function(t,n){function i(t,n,i){return"assert"===i?new l_(n,[t]):"coerce"===i?new y_(n,[t]):t;}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+_typeof(r)+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var e=this.registry[r];if(e){var o=e.parse(t,this);if(!o)return null;if(this.expectedType){var s=this.expectedType,u=o.type;if("string"!==s.kind&&"number"!==s.kind&&"boolean"!==s.kind&&"object"!==s.kind&&"array"!==s.kind||"value"!==u.kind){if("color"!==s.kind&&"formatted"!==s.kind&&"resolvedImage"!==s.kind||"value"!==u.kind&&"string"!==u.kind){if(this.checkSubtype(s,u))return null;}else o=i(o,s,n.typeAnnotation||"coerce");}else o=i(o,s,n.typeAnnotation||"assert");}if(!(o instanceof h_)&&"resolvedImage"!==o.type.kind&&X_(o)){var a=new w_();try{o=new h_(o.type,o.evaluate(a));}catch(t){return this.error(t.message),null;}}return o;}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==_typeof(t)?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+_typeof(t)+" instead.");},B_.prototype.concat=function(t,n,i){var r="number"==typeof t?this.path.concat(t):this.path,e=i?this.scope.concat(i):this.scope;return new B_(this.registry,r,n||null,e,this.errors);},B_.prototype.error=function(t){for(var n=[],i=arguments.length-1;i-->0;){n[i]=arguments[i+1];}var r=""+this.key+n.map(function(t){return"["+t+"]";}).join("");this.errors.push(new RM(r,t));},B_.prototype.checkSubtype=function(t,n){var i=JM(t,n);return i&&this.error(i),i;};var W_=function W_(t,n,i){this.type=t,this.input=n,this.labels=[],this.outputs=[];for(var r=0,e=i;r<e.length;r+=1){var o=e[r],s=o[0],u=o[1];this.labels.push(s),this.outputs.push(u);}};W_.parse=function(t,n){if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");var i=n.parse(t[1],1,DM);if(!i)return null;var r=[],e=null;n.expectedType&&"value"!==n.expectedType.kind&&(e=n.expectedType);for(var o=1;o<t.length;o+=2){var s=1===o?-1/0:t[o],u=t[o+1],a=o,h=o+1;if("number"!=typeof s)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(r.length&&r[r.length-1][0]>=s)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',a);var f=n.parse(u,h,e);if(!f)return null;e=e||f.type,r.push([s,f]);}return new W_(e,i,r);},W_.prototype.evaluate=function(t){var n=this.labels,i=this.outputs;if(1===n.length)return i[0].evaluate(t);var r=this.input.evaluate(t);if(r<=n[0])return i[0].evaluate(t);var e=n.length;return r>=n[e-1]?i[e-1].evaluate(t):i[V_(n,r)].evaluate(t);},W_.prototype.eachChild=function(t){t(this.input);for(var n=0,i=this.outputs;n<i.length;n+=1){t(i[n]);}},W_.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined();});},W_.prototype.serialize=function(){for(var t=["step",this.input.serialize()],n=0;n<this.labels.length;n++){n>0&&t.push(this.labels[n]),t.push(this.outputs[n].serialize());}return t;};var Y_=K_;function K_(t,n,i,r){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(r-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=i,this.p2y=r;}function Z_(t,n,i){return t*(1-i)+n*i;}K_.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t;},K_.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t;},K_.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx;},K_.prototype.solveCurveX=function(t,n){var i,r,e,o,s;for(void 0===n&&(n=1e-6),e=t,s=0;s<8;s++){if(o=this.sampleCurveX(e)-t,Math.abs(o)<n)return e;var u=this.sampleCurveDerivativeX(e);if(Math.abs(u)<1e-6)break;e-=o/u;}if((e=t)<(i=0))return i;if(e>(r=1))return r;for(;i<r;){if(o=this.sampleCurveX(e),Math.abs(o-t)<n)return e;t>o?i=e:r=e,e=.5*(r-i)+i;}return e;},K_.prototype.solve=function(t,n){return this.sampleCurveY(this.solveCurveX(t,n));};var $_=Object.freeze({__proto__:null,number:Z_,color:function color(t,n,i){return new EM(Z_(t.r,n.r,i),Z_(t.g,n.g,i),Z_(t.b,n.b,i),Z_(t.a,n.a,i));},array:function array(t,n,i){return t.map(function(t,r){return Z_(t,n[r],i);});}}),H_=.95047,J_=1.08883,Q_=4/29,tS=6/29,nS=3*tS*tS,iS=Math.PI/180,rS=180/Math.PI;function eS(t){return t>.008856451679035631?Math.pow(t,1/3):t/nS+Q_;}function oS(t){return t>tS?t*t*t:nS*(t-Q_);}function sS(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055);}function uS(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);}function aS(t){var n=uS(t.r),i=uS(t.g),r=uS(t.b),e=eS((.4124564*n+.3575761*i+.1804375*r)/H_),o=eS((.2126729*n+.7151522*i+.072175*r)/1);return{l:116*o-16,a:500*(e-o),b:200*(o-eS((.0193339*n+.119192*i+.9503041*r)/J_)),alpha:t.a};}function hS(t){var n=(t.l+16)/116,i=isNaN(t.a)?n:n+t.a/500,r=isNaN(t.b)?n:n-t.b/200;return n=1*oS(n),i=H_*oS(i),r=J_*oS(r),new EM(sS(3.2404542*i-1.5371385*n-.4985314*r),sS(-.969266*i+1.8760108*n+.041556*r),sS(.0556434*i-.2040259*n+1.0572252*r),t.alpha);}function fS(t,n,i){var r=n-t;return t+i*(r>180||r<-180?r-360*Math.round(r/360):r);}var cS={forward:aS,reverse:hS,interpolate:function interpolate(t,n,i){return{l:Z_(t.l,n.l,i),a:Z_(t.a,n.a,i),b:Z_(t.b,n.b,i),alpha:Z_(t.alpha,n.alpha,i)};}},lS={forward:function forward(t){var n=aS(t),i=n.l,r=n.a,e=n.b,o=Math.atan2(e,r)*rS;return{h:o<0?o+360:o,c:Math.sqrt(r*r+e*e),l:i,alpha:t.a};},reverse:function reverse(t){var n=t.h*iS,i=t.c;return hS({l:t.l,a:Math.cos(n)*i,b:Math.sin(n)*i,alpha:t.alpha});},interpolate:function interpolate(t,n,i){return{h:fS(t.h,n.h,i),c:Z_(t.c,n.c,i),l:Z_(t.l,n.l,i),alpha:Z_(t.alpha,n.alpha,i)};}},vS=function vS(t,n,i,r,e){this.type=t,this.operator=n,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(var o=0,s=e;o<s.length;o+=1){var u=s[o],a=u[0],h=u[1];this.labels.push(a),this.outputs.push(h);}};function pS(t,n,i,r){var e=r-i,o=t-i;return 0===e?0:1===n?o/e:(Math.pow(n,o)-1)/(Math.pow(n,e)-1);}vS.interpolationFactor=function(t,n,i,r){var e=0;if("exponential"===t.name)e=pS(n,t.base,i,r);else if("linear"===t.name)e=pS(n,1,i,r);else if("cubic-bezier"===t.name){var o=t.controlPoints;e=new Y_(o[0],o[1],o[2],o[3]).solve(pS(n,1,i,r));}return e;},vS.parse=function(t,n){var i=t[0],r=t[1],e=t[2],o=t.slice(3);if(!Array.isArray(r)||0===r.length)return n.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var s=r[1];if("number"!=typeof s)return n.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:s};}else{if("cubic-bezier"!==r[0])return n.error("Unknown interpolation type "+String(r[0]),1,0);var u=r.slice(1);if(4!==u.length||u.some(function(t){return"number"!=typeof t||t<0||t>1;}))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:u};}if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(!(e=n.parse(e,2,DM)))return null;var a=[],h=null;"interpolate-hcl"===i||"interpolate-lab"===i?h=BM:n.expectedType&&"value"!==n.expectedType.kind&&(h=n.expectedType);for(var f=0;f<o.length;f+=2){var c=o[f],l=o[f+1],v=f+3,p=f+4;if("number"!=typeof c)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(a.length&&a[a.length-1][0]>=c)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',v);var d=n.parse(l,p,h);if(!d)return null;h=h||d.type,a.push([c,d]);}return"number"===h.kind||"color"===h.kind||"array"===h.kind&&"number"===h.itemType.kind&&"number"==typeof h.N?new vS(h,i,r,e,a):n.error("Type "+$M(h)+" is not interpolatable.");},vS.prototype.evaluate=function(t){var n=this.labels,i=this.outputs;if(1===n.length)return i[0].evaluate(t);var r=this.input.evaluate(t);if(r<=n[0])return i[0].evaluate(t);var e=n.length;if(r>=n[e-1])return i[e-1].evaluate(t);var o=V_(n,r),s=n[o],u=n[o+1],a=vS.interpolationFactor(this.interpolation,r,s,u),h=i[o].evaluate(t),f=i[o+1].evaluate(t);return"interpolate"===this.operator?$_[this.type.kind.toLowerCase()](h,f,a):"interpolate-hcl"===this.operator?lS.reverse(lS.interpolate(lS.forward(h),lS.forward(f),a)):cS.reverse(cS.interpolate(cS.forward(h),cS.forward(f),a));},vS.prototype.eachChild=function(t){t(this.input);for(var n=0,i=this.outputs;n<i.length;n+=1){t(i[n]);}},vS.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined();});},vS.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var n=[this.operator,t,this.input.serialize()],i=0;i<this.labels.length;i++){n.push(this.labels[i],this.outputs[i].serialize());}return n;};var dS=function dS(t,n){this.type=t,this.args=n;};dS.parse=function(t,n){if(t.length<2)return n.error("Expectected at least one argument.");var i=null,r=n.expectedType;r&&"value"!==r.kind&&(i=r);for(var e=[],o=0,s=t.slice(1);o<s.length;o+=1){var u=s[o],a=n.parse(u,1+e.length,i,void 0,{typeAnnotation:"omit"});if(!a)return null;i=i||a.type,e.push(a);}var h=r&&e.some(function(t){return JM(r,t.type);});return new dS(h?VM:i,e);},dS.prototype.evaluate=function(t){for(var n,i=null,r=0,e=0,o=this.args;e<o.length;e+=1){if(r++,(i=o[e].evaluate(t))&&i instanceof e_&&!i.available&&(n||(n=i),i=null,r===this.args.length))return n;if(null!==i)break;}return i;},dS.prototype.eachChild=function(t){this.args.forEach(t);},dS.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined();});},dS.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(n){t.push(n.serialize());}),t;};var yS=function yS(t,n){this.type=n.type,this.bindings=[].concat(t),this.result=n;};yS.prototype.evaluate=function(t){return this.result.evaluate(t);},yS.prototype.eachChild=function(t){for(var n=0,i=this.bindings;n<i.length;n+=1){t(i[n][1]);}t(this.result);},yS.parse=function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var i=[],r=1;r<t.length-1;r+=2){var e=t[r];if("string"!=typeof e)return n.error("Expected string, but found "+_typeof(e)+" instead.",r);if(/[^a-zA-Z0-9_]/.test(e))return n.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=n.parse(t[r+1],r+1);if(!o)return null;i.push([e,o]);}var s=n.parse(t[t.length-1],t.length-1,n.expectedType,i);return s?new yS(i,s):null;},yS.prototype.outputDefined=function(){return this.result.outputDefined();},yS.prototype.serialize=function(){for(var t=["let"],n=0,i=this.bindings;n<i.length;n+=1){var r=i[n],e=r[0],o=r[1];t.push(e,o.serialize());}return t.push(this.result.serialize()),t;};var mS=function mS(t,n,i){this.type=t,this.index=n,this.input=i;};mS.parse=function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=n.parse(t[1],1,DM),r=n.parse(t[2],2,ZM(n.expectedType||VM));if(!i||!r)return null;var e=r.type;return new mS(e.itemType,i,r);},mS.prototype.evaluate=function(t){var n=this.index.evaluate(t),i=this.input.evaluate(t);if(n<0)throw new f_("Array index out of bounds: "+n+" < 0.");if(n>=i.length)throw new f_("Array index out of bounds: "+n+" > "+(i.length-1)+".");if(n!==Math.floor(n))throw new f_("Array index must be an integer, but found "+n+" instead.");return i[n];},mS.prototype.eachChild=function(t){t(this.index),t(this.input);},mS.prototype.outputDefined=function(){return!1;},mS.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()];};var wS=function wS(t,n){this.type=UM,this.needle=t,this.haystack=n;};wS.parse=function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=n.parse(t[1],1,VM),r=n.parse(t[2],2,VM);return i&&r?QM(i.type,[UM,qM,DM,GM,VM])?new wS(i,r):n.error("Expected first argument to be of type boolean, string, number or null, but found "+$M(i.type)+" instead"):null;},wS.prototype.evaluate=function(t){var n=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(null==i)return!1;if(!t_(n,["boolean","string","number","null"]))throw new f_("Expected first argument to be of type boolean, string, number or null, but found "+$M(u_(n))+" instead.");if(!t_(i,["string","array"]))throw new f_("Expected second argument to be of type array or string, but found "+$M(u_(i))+" instead.");return i.indexOf(n)>=0;},wS.prototype.eachChild=function(t){t(this.needle),t(this.haystack);},wS.prototype.outputDefined=function(){return!0;},wS.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()];};var gS=function gS(t,n,i){this.type=DM,this.needle=t,this.haystack=n,this.fromIndex=i;};gS.parse=function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=n.parse(t[1],1,VM),r=n.parse(t[2],2,VM);if(!i||!r)return null;if(!QM(i.type,[UM,qM,DM,GM,VM]))return n.error("Expected first argument to be of type boolean, string, number or null, but found "+$M(i.type)+" instead");if(4===t.length){var e=n.parse(t[3],3,DM);return e?new gS(i,r,e):null;}return new gS(i,r);},gS.prototype.evaluate=function(t){var n=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!t_(n,["boolean","string","number","null"]))throw new f_("Expected first argument to be of type boolean, string, number or null, but found "+$M(u_(n))+" instead.");if(!t_(i,["string","array"]))throw new f_("Expected second argument to be of type array or string, but found "+$M(u_(i))+" instead.");if(this.fromIndex){var r=this.fromIndex.evaluate(t);return i.indexOf(n,r);}return i.indexOf(n);},gS.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex);},gS.prototype.outputDefined=function(){return!1;},gS.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t];}return["index-of",this.needle.serialize(),this.haystack.serialize()];};var bS=function bS(t,n,i,r,e,o){this.inputType=t,this.type=n,this.input=i,this.cases=r,this.outputs=e,this.otherwise=o;};bS.parse=function(t,n){if(t.length<5)return n.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return n.error("Expected an even number of arguments.");var i,r;n.expectedType&&"value"!==n.expectedType.kind&&(r=n.expectedType);for(var e={},o=[],s=2;s<t.length-1;s+=2){var u=t[s],a=t[s+1];Array.isArray(u)||(u=[u]);var h=n.concat(s);if(0===u.length)return h.error("Expected at least one branch label.");for(var f=0,c=u;f<c.length;f+=1){var l=c[f];if("number"!=typeof l&&"string"!=typeof l)return h.error("Branch labels must be numbers or strings.");if("number"==typeof l&&Math.abs(l)>Number.MAX_SAFE_INTEGER)return h.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof l&&Math.floor(l)!==l)return h.error("Numeric branch labels must be integer values.");if(i){if(h.checkSubtype(i,u_(l)))return null;}else i=u_(l);if(void 0!==e[String(l)])return h.error("Branch labels must be unique.");e[String(l)]=o.length;}var v=n.parse(a,s,r);if(!v)return null;r=r||v.type,o.push(v);}var p=n.parse(t[1],1,VM);if(!p)return null;var d=n.parse(t[t.length-1],t.length-1,r);return d?"value"!==p.type.kind&&n.concat(1).checkSubtype(i,p.type)?null:new bS(i,r,p,e,o,d):null;},bS.prototype.evaluate=function(t){var n=this.input.evaluate(t);return(u_(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(t);},bS.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise);},bS.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined();})&&this.otherwise.outputDefined();},bS.prototype.serialize=function(){for(var t=this,n=["match",this.input.serialize()],i=[],r={},e=0,o=Object.keys(this.cases).sort();e<o.length;e+=1){var s=o[e];void 0===(c=r[this.cases[s]])?(r[this.cases[s]]=i.length,i.push([this.cases[s],[s]])):i[c][1].push(s);}for(var u=function u(n){return"number"===t.inputType.kind?Number(n):n;},a=0,h=i;a<h.length;a+=1){var f=h[a],c=f[0],l=f[1];1===l.length?n.push(u(l[0])):n.push(l.map(u)),n.push(this.outputs[outputIndex$1].serialize());}return n.push(this.otherwise.serialize()),n;};var xS=function xS(t,n,i){this.type=t,this.branches=n,this.otherwise=i;};xS.parse=function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return n.error("Expected an odd number of arguments.");var i;n.expectedType&&"value"!==n.expectedType.kind&&(i=n.expectedType);for(var r=[],e=1;e<t.length-1;e+=2){var o=n.parse(t[e],e,UM);if(!o)return null;var s=n.parse(t[e+1],e+1,i);if(!s)return null;r.push([o,s]),i=i||s.type;}var u=n.parse(t[t.length-1],t.length-1,i);return u?new xS(i,r,u):null;},xS.prototype.evaluate=function(t){for(var n=0,i=this.branches;n<i.length;n+=1){var r=i[n],e=r[0],o=r[1];if(e.evaluate(t))return o.evaluate(t);}return this.otherwise.evaluate(t);},xS.prototype.eachChild=function(t){for(var n=0,i=this.branches;n<i.length;n+=1){var r=i[n],e=r[0],o=r[1];t(e),t(o);}t(this.otherwise);},xS.prototype.outputDefined=function(){return this.branches.every(function(t){return t[0],t[1].outputDefined();})&&this.otherwise.outputDefined();},xS.prototype.serialize=function(){var t=["case"];return this.eachChild(function(n){t.push(n.serialize());}),t;};var MS=function MS(t,n,i,r){this.type=t,this.input=n,this.beginIndex=i,this.endIndex=r;};function _S(t,n){return"=="===t||"!="===t?"boolean"===n.kind||"string"===n.kind||"number"===n.kind||"null"===n.kind||"value"===n.kind:"string"===n.kind||"number"===n.kind||"value"===n.kind;}function SS(t,n,i,r){return 0===r.compare(n,i);}function OS(t,n,i){var r="=="!==t&&"!="!==t;return function(){function e(t,n,i){this.type=UM,this.lhs=t,this.rhs=n,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===n.type.kind;}return e.parse=function(t,n){if(3!==t.length&&4!==t.length)return n.error("Expected two or three arguments.");var i=t[0],o=n.parse(t[1],1,VM);if(!o)return null;if(!_S(i,o.type))return n.concat(1).error('"'+i+"\" comparisons are not supported for type '"+$M(o.type)+"'.");var s=n.parse(t[2],2,VM);if(!s)return null;if(!_S(i,s.type))return n.concat(2).error('"'+i+"\" comparisons are not supported for type '"+$M(s.type)+"'.");if(o.type.kind!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return n.error("Cannot compare types '"+$M(o.type)+"' and '"+$M(s.type)+"'.");r&&("value"===o.type.kind&&"value"!==s.type.kind?o=new l_(s.type,[o]):"value"!==o.type.kind&&"value"===s.type.kind&&(s=new l_(o.type,[s])));var u=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return n.error("Cannot use collator to compare non-string types.");if(!(u=n.parse(t[3],3,WM)))return null;}return new e(o,s,u);},e.prototype.evaluate=function(e){var o=this.lhs.evaluate(e),s=this.rhs.evaluate(e);if(r&&this.hasUntypedArgument){var u=u_(o),a=u_(s);if(u.kind!==a.kind||"string"!==u.kind&&"number"!==u.kind)throw new f_('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+u.kind+", "+a.kind+") instead.");}if(this.collator&&!r&&this.hasUntypedArgument){var h=u_(o),f=u_(s);if("string"!==h.kind||"string"!==f.kind)return n(e,o,s);}return this.collator?i(e,o,s,this.collator.evaluate(e)):n(e,o,s);},e.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator);},e.prototype.outputDefined=function(){return!0;},e.prototype.serialize=function(){var n=[t];return this.eachChild(function(t){n.push(t.serialize());}),n;},e;}();}MS.parse=function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=n.parse(t[1],1,VM),r=n.parse(t[2],2,DM);if(!i||!r)return null;if(!QM(i.type,[ZM(VM),qM,VM]))return n.error("Expected first argument to be of type array or string, but found "+$M(i.type)+" instead");if(4===t.length){var e=n.parse(t[3],3,DM);return e?new MS(i.type,i,r,e):null;}return new MS(i.type,i,r);},MS.prototype.evaluate=function(t){var n=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!t_(n,["string","array"]))throw new f_("Expected first argument to be of type array or string, but found "+$M(u_(n))+" instead.");if(this.endIndex){var r=this.endIndex.evaluate(t);return n.slice(i,r);}return n.slice(i);},MS.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex);},MS.prototype.outputDefined=function(){return!1;},MS.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t];}return["slice",this.input.serialize(),this.beginIndex.serialize()];};var jS=OS("==",function(t,n,i){return n===i;},SS),ES=OS("!=",function(t,n,i){return n!==i;},function(t,n,i,r){return!SS(0,n,i,r);}),TS=OS("<",function(t,n,i){return n<i;},function(t,n,i,r){return r.compare(n,i)<0;}),AS=OS(">",function(t,n,i){return n>i;},function(t,n,i,r){return r.compare(n,i)>0;}),PS=OS("<=",function(t,n,i){return n<=i;},function(t,n,i,r){return r.compare(n,i)<=0;}),CS=OS(">=",function(t,n,i){return n>=i;},function(t,n,i,r){return r.compare(n,i)>=0;}),kS=function kS(t,n,i,r,e){this.type=qM,this.number=t,this.locale=n,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=e;};kS.parse=function(t,n){if(3!==t.length)return n.error("Expected two arguments.");var i=n.parse(t[1],1,DM);if(!i)return null;var r=t[2];if("object"!=_typeof(r)||Array.isArray(r))return n.error("NumberFormat options argument must be an object.");var e=null;if(r.locale&&!(e=n.parse(r.locale,1,qM)))return null;var o=null;if(r.currency&&!(o=n.parse(r.currency,1,qM)))return null;var s=null;if(r["min-fraction-digits"]&&!(s=n.parse(r["min-fraction-digits"],1,DM)))return null;var u=null;return r["max-fraction-digits"]&&!(u=n.parse(r["max-fraction-digits"],1,DM))?null:new kS(i,e,o,s,u);},kS.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t));},kS.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits);},kS.prototype.outputDefined=function(){return!1;},kS.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t];};var NS=function NS(t){this.type=DM,this.input=t;};NS.parse=function(t,n){if(2!==t.length)return n.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var i=n.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?n.error("Expected argument of type string or array, but found "+$M(i.type)+" instead."):new NS(i):null;},NS.prototype.evaluate=function(t){var n=this.input.evaluate(t);if("string"==typeof n)return n.length;if(Array.isArray(n))return n.length;throw new f_("Expected value to be of type string or array, but found "+$M(u_(n))+" instead.");},NS.prototype.eachChild=function(t){t(this.input);},NS.prototype.outputDefined=function(){return!1;},NS.prototype.serialize=function(){var t=["length"];return this.eachChild(function(n){t.push(n.serialize());}),t;};var IS={"==":jS,"!=":ES,">":AS,"<":TS,">=":CS,"<=":PS,array:l_,at:mS,boolean:l_,case:xS,coalesce:dS,collator:b_,format:v_,image:p_,in:wS,"index-of":gS,interpolate:vS,"interpolate-hcl":vS,"interpolate-lab":vS,length:NS,let:yS,literal:h_,match:bS,number:l_,"number-format":kS,object:l_,slice:MS,step:W_,string:l_,"to-boolean":y_,"to-color":y_,"to-number":y_,"to-string":y_,var:U_,within:F_};function zS(t,n){var i=n[0],r=n[1],e=n[2],o=n[3];i=i.evaluate(t),r=r.evaluate(t),e=e.evaluate(t);var s=o?o.evaluate(t):1,u=o_(i,r,e,s);if(u)throw new f_(u);return new EM(i/255*s,r/255*s,e/255*s,s);}function LS(t,n){return t in n;}function RS(t,n){var i=n[t];return void 0===i?null:i;}function FS(t){return{type:t};}function GS(t){return{result:"success",value:t};}function DS(t){return{result:"error",value:t};}function qS(t){return"object"==_typeof(t)&&null!==t&&!Array.isArray(t);}g_.register(IS,{error:[{kind:"error"},[qM],function(t,n){var i=n[0];throw new f_(i.evaluate(t));}],typeof:[qM,[VM],function(t,n){return $M(u_(n[0].evaluate(t)));}],"to-rgba":[ZM(DM,4),[BM],function(t,n){return n[0].evaluate(t).toArray();}],rgb:[BM,[DM,DM,DM],zS],rgba:[BM,[DM,DM,DM,DM],zS],has:{type:UM,overloads:[[[qM],function(t,n){return LS(n[0].evaluate(t),t.properties());}],[[qM,XM],function(t,n){var i=n[0],r=n[1];return LS(i.evaluate(t),r.evaluate(t));}]]},get:{type:VM,overloads:[[[qM],function(t,n){return RS(n[0].evaluate(t),t.properties());}],[[qM,XM],function(t,n){var i=n[0],r=n[1];return RS(i.evaluate(t),r.evaluate(t));}]]},"feature-state":[VM,[qM],function(t,n){return RS(n[0].evaluate(t),t.featureState||{});}],properties:[XM,[],function(t){return t.properties();}],"geometry-type":[qM,[],function(t){return t.geometryType();}],id:[VM,[],function(t){return t.id();}],zoom:[DM,[],function(t){return t.globals.zoom;}],pitch:[DM,[],function(t){return t.globals.pitch||0;}],"distance-from-center":[DM,[],function(t){return t.distanceFromCenter();}],"heatmap-density":[DM,[],function(t){return t.globals.heatmapDensity||0;}],"line-progress":[DM,[],function(t){return t.globals.lineProgress||0;}],"sky-radial-progress":[DM,[],function(t){return t.globals.skyRadialProgress||0;}],accumulated:[VM,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated;}],"+":[DM,FS(DM),function(t,n){for(var i=0,r=0,e=n;r<e.length;r+=1){i+=e[r].evaluate(t);}return i;}],"*":[DM,FS(DM),function(t,n){for(var i=1,r=0,e=n;r<e.length;r+=1){i*=e[r].evaluate(t);}return i;}],"-":{type:DM,overloads:[[[DM,DM],function(t,n){var i=n[0],r=n[1];return i.evaluate(t)-r.evaluate(t);}],[[DM],function(t,n){return-n[0].evaluate(t);}]]},"/":[DM,[DM,DM],function(t,n){var i=n[0],r=n[1];return i.evaluate(t)/r.evaluate(t);}],"%":[DM,[DM,DM],function(t,n){var i=n[0],r=n[1];return i.evaluate(t)%r.evaluate(t);}],ln2:[DM,[],function(){return Math.LN2;}],pi:[DM,[],function(){return Math.PI;}],e:[DM,[],function(){return Math.E;}],"^":[DM,[DM,DM],function(t,n){var i=n[0],r=n[1];return Math.pow(i.evaluate(t),r.evaluate(t));}],sqrt:[DM,[DM],function(t,n){var i=n[0];return Math.sqrt(i.evaluate(t));}],log10:[DM,[DM],function(t,n){var i=n[0];return Math.log(i.evaluate(t))/Math.LN10;}],ln:[DM,[DM],function(t,n){var i=n[0];return Math.log(i.evaluate(t));}],log2:[DM,[DM],function(t,n){var i=n[0];return Math.log(i.evaluate(t))/Math.LN2;}],sin:[DM,[DM],function(t,n){var i=n[0];return Math.sin(i.evaluate(t));}],cos:[DM,[DM],function(t,n){var i=n[0];return Math.cos(i.evaluate(t));}],tan:[DM,[DM],function(t,n){var i=n[0];return Math.tan(i.evaluate(t));}],asin:[DM,[DM],function(t,n){var i=n[0];return Math.asin(i.evaluate(t));}],acos:[DM,[DM],function(t,n){var i=n[0];return Math.acos(i.evaluate(t));}],atan:[DM,[DM],function(t,n){var i=n[0];return Math.atan(i.evaluate(t));}],min:[DM,FS(DM),function(t,n){return Math.min.apply(Math,n.map(function(n){return n.evaluate(t);}));}],max:[DM,FS(DM),function(t,n){return Math.max.apply(Math,n.map(function(n){return n.evaluate(t);}));}],abs:[DM,[DM],function(t,n){var i=n[0];return Math.abs(i.evaluate(t));}],round:[DM,[DM],function(t,n){var i=n[0].evaluate(t);return i<0?-Math.round(-i):Math.round(i);}],floor:[DM,[DM],function(t,n){var i=n[0];return Math.floor(i.evaluate(t));}],ceil:[DM,[DM],function(t,n){var i=n[0];return Math.ceil(i.evaluate(t));}],"filter-==":[UM,[qM,VM],function(t,n){var i=n[0],r=n[1];return t.properties()[i.value]===r.value;}],"filter-id-==":[UM,[VM],function(t,n){var i=n[0];return t.id()===i.value;}],"filter-type-==":[UM,[qM],function(t,n){var i=n[0];return t.geometryType()===i.value;}],"filter-<":[UM,[qM,VM],function(t,n){var i=n[0],r=n[1],e=t.properties()[i.value],o=r.value;return _typeof(e)==_typeof(o)&&e<o;}],"filter-id-<":[UM,[VM],function(t,n){var i=n[0],r=t.id(),e=i.value;return _typeof(r)==_typeof(e)&&r<e;}],"filter->":[UM,[qM,VM],function(t,n){var i=n[0],r=n[1],e=t.properties()[i.value],o=r.value;return _typeof(e)==_typeof(o)&&e>o;}],"filter-id->":[UM,[VM],function(t,n){var i=n[0],r=t.id(),e=i.value;return _typeof(r)==_typeof(e)&&r>e;}],"filter-<=":[UM,[qM,VM],function(t,n){var i=n[0],r=n[1],e=t.properties()[i.value],o=r.value;return _typeof(e)==_typeof(o)&&e<=o;}],"filter-id-<=":[UM,[VM],function(t,n){var i=n[0],r=t.id(),e=i.value;return _typeof(r)==_typeof(e)&&r<=e;}],"filter->=":[UM,[qM,VM],function(t,n){var i=n[0],r=n[1],e=t.properties()[i.value],o=r.value;return _typeof(e)==_typeof(o)&&e>=o;}],"filter-id->=":[UM,[VM],function(t,n){var i=n[0],r=t.id(),e=i.value;return _typeof(r)==_typeof(e)&&r>=e;}],"filter-has":[UM,[VM],function(t,n){return n[0].value in t.properties();}],"filter-has-id":[UM,[],function(t){return null!==t.id()&&void 0!==t.id();}],"filter-type-in":[UM,[ZM(qM)],function(t,n){return n[0].value.indexOf(t.geometryType())>=0;}],"filter-id-in":[UM,[ZM(VM)],function(t,n){return n[0].value.indexOf(t.id())>=0;}],"filter-in-small":[UM,[qM,ZM(VM)],function(t,n){var i=n[0];return n[1].value.indexOf(t.properties()[i.value])>=0;}],"filter-in-large":[UM,[qM,ZM(VM)],function(t,n){var i=n[0],r=n[1];return function(t,n,i,r){for(;i<=r;){var e=i+r>>1;if(n[e]===t)return!0;n[e]>t?r=e-1:i=e+1;}return!1;}(t.properties()[i.value],r.value,0,r.value.length-1);}],all:{type:UM,overloads:[[[UM,UM],function(t,n){var i=n[0],r=n[1];return i.evaluate(t)&&r.evaluate(t);}],[FS(UM),function(t,n){for(var i=0,r=n;i<r.length;i+=1){if(!r[i].evaluate(t))return!1;}return!0;}]]},any:{type:UM,overloads:[[[UM,UM],function(t,n){var i=n[0],r=n[1];return i.evaluate(t)||r.evaluate(t);}],[FS(UM),function(t,n){for(var i=0,r=n;i<r.length;i+=1){if(r[i].evaluate(t))return!0;}return!1;}]]},"!":[UM,[UM],function(t,n){return!n[0].evaluate(t);}],"is-supported-script":[UM,[qM],function(t,n){var i=n[0],r=t.globals&&t.globals.isSupportedScript;return!r||r(i.evaluate(t));}],upcase:[qM,[qM],function(t,n){return n[0].evaluate(t).toUpperCase();}],downcase:[qM,[qM],function(t,n){return n[0].evaluate(t).toLowerCase();}],concat:[qM,FS(VM),function(t,n){return n.map(function(n){return a_(n.evaluate(t));}).join("");}],"resolved-locale":[qM,[WM],function(t,n){return n[0].evaluate(t).resolvedLocale();}]});var US=function US(t,n){this.expression=t,this._warningHistory={},this._evaluator=new w_(),this._defaultValue=n?function(t){return"color"===t.type&&(qS(t.default)||Array.isArray(t.default))?new EM(0,0,0,0):"color"===t.type?EM.parse(t.default)||null:void 0===t.default?null:t.default;}(n):null,this._enumValues=n&&"enum"===n.type?n.values:null;};function BS(t,n){var i=new B_(IS,[],n?function(t){var n={color:BM,string:qM,number:DM,enum:qM,boolean:UM,formatted:YM,resolvedImage:KM};if("array"===t.type)return ZM(n[t.value]||VM,t.length);return n[t.type];}(n):void 0),r=i.parse(t,void 0,void 0,void 0,n&&"string"===n.type?{typeAnnotation:"coerce"}:void 0);return r?GS(new US(r,n)):DS(i.errors);}US.prototype.evaluateWithoutErrorHandling=function(t,n,i,r,e,o,s,u){return this._evaluator.globals=t,this._evaluator.feature=n,this._evaluator.featureState=i,this._evaluator.canonical=r||null,this._evaluator.availableImages=e||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=u||null,this.expression.evaluate(this._evaluator);},US.prototype.evaluate=function(t,n,i,r,e,o,s,u){this._evaluator.globals=t,this._evaluator.feature=n||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=e||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=u||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new f_("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t);}).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a;}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue;}};var XS=function XS(t,n){this.kind=t,this._styleExpression=n,this.isStateDependent="constant"!==t&&!D_(n.expression);};XS.prototype.evaluateWithoutErrorHandling=function(t,n,i,r,e,o){return this._styleExpression.evaluateWithoutErrorHandling(t,n,i,r,e,o);},XS.prototype.evaluate=function(t,n,i,r,e,o){return this._styleExpression.evaluate(t,n,i,r,e,o);};var VS=function VS(t,n,i,r){this.kind=t,this.zoomStops=i,this._styleExpression=n,this.isStateDependent="camera"!==t&&!D_(n.expression),this.interpolationType=r;};function WS(t,n){if("error"===(t=BS(t,n)).result)return t;var i=t.value.expression,r=G_(i);if(!r&&!function(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"];}(n))return DS([new RM("","data expressions not supported")]);var e=q_(i,["zoom","pitch","distance-from-center"]);if(!e&&!function(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1;}(n))return DS([new RM("","zoom expressions not supported")]);var o=YS(i);if(!o&&!e)return DS([new RM("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof RM)return DS([o]);if(o instanceof vS&&!function(t){return!!t.expression&&t.expression.interpolated;}(n))return DS([new RM("",'"interpolate" expressions cannot be used with this property')]);if(!o)return GS(new XS(r?"constant":"source",t.value));var s=o instanceof vS?o.interpolation:void 0;return GS(new VS(r?"camera":"composite",t.value,o.labels,s));}function YS(t){var n=null;if(t instanceof yS)n=YS(t.result);else if(t instanceof dS)for(var i=0,r=t.args;i<r.length;i+=1){var e=r[i];if(n=YS(e))break;}else(t instanceof W_||t instanceof vS)&&t.input instanceof g_&&"zoom"===t.input.name&&(n=t);return n instanceof RM||t.eachChild(function(t){var i=YS(t);i instanceof RM?n=i:!n&&i?n=new RM("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&i&&n!==i&&(n=new RM("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'));}),n;}function KS(t){if(Array.isArray(t))return t.map(KS);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var n={};for(var i in t){n[i]=KS(t[i]);}return n;}return function(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t;}(t);}VS.prototype.evaluateWithoutErrorHandling=function(t,n,i,r,e,o){return this._styleExpression.evaluateWithoutErrorHandling(t,n,i,r,e,o);},VS.prototype.evaluate=function(t,n,i,r,e,o){return this._styleExpression.evaluate(t,n,i,r,e,o);},VS.prototype.interpolationFactor=function(t,n,i){return this.interpolationType?vS.interpolationFactor(this.interpolationType,t,n,i):0;};var ZS={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function $S(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var n=0,i=t.slice(1);n<i.length;n+=1){var r=i[n];if(!$S(r)&&"boolean"!=typeof r)return!1;}return!0;default:return!0;}}function HS(t,n){if(void 0===n&&(n="fill"),null==t)return{filter:function filter(){return!0;},needGeometry:!1,needFeature:!1};$S(t)||(t=eO(t));var i=t,r=!0;try{r=function(t){if(!tO(t))return t;var n=KS(t);return QS(n),n=JS(n);}(i);}catch(t){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n"+JSON.stringify(i,null,2)+"\n        ");}var e=ZS["filter_"+n],o=BS(r,e),s=null;if("error"===o.result)throw new Error(o.value.map(function(t){return t.key+": "+t.message;}).join(", "));s=function s(t,n,i){return o.value.evaluate(t,n,{},i);};var u=null,a=null;if(r!==i){var h=BS(i,e);if("error"===h.result)throw new Error(h.value.map(function(t){return t.key+": "+t.message;}).join(", "));u=function u(t,n,i,r,e){return h.value.evaluate(t,n,{},i,void 0,void 0,r,e);},a=!G_(h.value.expression);}return{filter:s,dynamicFilter:u||void 0,needGeometry:rO(r),needFeature:!!a};}function JS(t){if(!Array.isArray(t))return t;var n=function(t){if(nO.has(t[0]))for(var n=1;n<t.length;n++){if(tO(t[n]))return!0;}return t;}(t);return!0===n?n:n.map(function(t){return JS(t);});}function QS(t){var n=!1,i=[];if("case"===t[0]){for(var r=1;r<t.length-1;r+=2){n=n||tO(t[r]),i.push(t[r+1]);}i.push(t[t.length-1]);}else if("match"===t[0]){n=n||tO(t[1]);for(var e=2;e<t.length-1;e+=2){i.push(t[e+1]);}i.push(t[t.length-1]);}else if("step"===t[0]){n=n||tO(t[1]);for(var o=1;o<t.length-1;o+=2){i.push(t[o+1]);}}n&&(t.length=0,t.push.apply(t,["any"].concat(i)));for(var s=1;s<t.length;s++){QS(t[s]);}}function tO(t){if(!Array.isArray(t))return!1;if("pitch"===(n=t[0])||"distance-from-center"===n)return!0;for(var n,i=1;i<t.length;i++){if(tO(t[i]))return!0;}return!1;}var nO=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function iO(t,n){return t<n?-1:t>n?1:0;}function rO(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(var n=1;n<t.length;n++){if(rO(t[n]))return!0;}return!1;}function eO(t){if(!t)return!0;var n,i=t[0];return t.length<=1?"any"!==i:"=="===i?oO(t[1],t[2],"=="):"!="===i?aO(oO(t[1],t[2],"==")):"<"===i||">"===i||"<="===i||">="===i?oO(t[1],t[2],i):"any"===i?(n=t.slice(1),["any"].concat(n.map(eO))):"all"===i?["all"].concat(t.slice(1).map(eO)):"none"===i?["all"].concat(t.slice(1).map(eO).map(aO)):"in"===i?sO(t[1],t.slice(2)):"!in"===i?aO(sO(t[1],t.slice(2))):"has"===i?uO(t[1]):"!has"===i?aO(uO(t[1])):"within"!==i||t;}function oO(t,n,i){switch(t){case"$type":return["filter-type-"+i,n];case"$id":return["filter-id-"+i,n];default:return["filter-"+i,t,n];}}function sO(t,n){if(0===n.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(function(t){return _typeof(t)!=_typeof(n[0]);})?["filter-in-large",t,["literal",n.sort(iO)]]:["filter-in-small",t,["literal",n]];}}function uO(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t];}}function aO(t){return["!",t];}var hO=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function fO(t,n){var i={};for(var r in t){"ref"!==r&&(i[r]=t[r]);}return hO.forEach(function(t){t in n&&(i[t]=n[t]);}),i;}var cO={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},lO=" ",vO=/(italic|oblique)$/i,pO={},dO=function dO(t,n,i){var r=pO[t];if(!r){Array.isArray(t)||(t=[t]);for(var e=400,o="normal",s=[],u=0,a=t.length;u<a;++u){var h=t[u].split(" "),f=h[h.length-1].toLowerCase();for(var c in"normal"==f||"italic"==f||"oblique"==f?(o=f,h.pop(),f=h[h.length-1].toLowerCase()):vO.test(f)&&(f=f.replace(vO,""),o=h[h.length-1].replace(f,"")),cO){var l=h.length>1?h[h.length-2].toLowerCase():"";if(f==c||f==c.replace("-","")||l+"-"+f==c){e=cO[c],h.pop(),l&&c.startsWith(l)&&h.pop();break;}}"number"==typeof f&&(e=f);var v=h.join(lO).replace("Klokantech Noto Sans","Noto Sans");-1!==v.indexOf(lO)&&(v='"'+v+'"'),s.push(v);}r=pO[t]=[o,e,s];}return r[0]+lO+r[1]+lO+n+"px"+(i?"/"+i:"")+lO+r[2];},yO="https://api.mapbox.com";function mO(t){var n="mapbox://";return 0!==t.indexOf(n)?"":t.slice(n.length);}function wO(t,n){var i=mO(t);if(!i)return decodeURI(new URL(t,location.href).href);var r="styles/";if(0!==i.indexOf(r))throw new Error("unexpected style url: "+t);var e=i.slice(r.length);return yO+"/styles/v1/"+e+"?&access_token="+n;}function gO(t,n,i,r){var e=new URL(t,r),o=mO(t);return o?"https://{a-d}.tiles.mapbox.com/v4/"+o+"/{z}/{x}/{y}.vector.pbf?access_token="+n:n?(e.searchParams.set(i,n),decodeURI(e.href)):decodeURI(e.href);}function bO(t){return t*Math.PI/180;}var xO=function(){for(var t=[],n=78271.51696402048;t.length<=24;n/=2){t.push(n);}return t;}();function MO(t,n){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(t,n);var i=document.createElement("canvas");return i.width=t,i.height=n,i;}var _O={};function SO(t,n,i){if(void 0===i&&(i={}),n in _O)return _O[n];var r=i.transformRequest&&i.transformRequest(n,t)||new Request(n);r.headers.get("Accept")||r.headers.set("Accept","application/json");var e=fetch(r).then(function(t){return delete _O[n],t.ok?t.json():Promise.reject(new Error("Error fetching source "+n));}).catch(function(t){return delete _O[n],Promise.reject(new Error("Error fetching source "+n));});return _O[n]=e,e;}function OO(t,n){if("string"!=typeof t)return Promise.resolve(t);if(!t.trim().startsWith("{"))return SO("Style",t=wO(t,n.accessToken),n);try{var i=JSON.parse(t);return Promise.resolve(i);}catch(t){return Promise.reject(t);}}var jO={};function EO(t,n,i){void 0===i&&(i={});var r=[n,JSON.stringify(t)].toString(),e=jO[r];if(!e||i.transformRequest){var o=t.url;if(o&&!t.tiles){var s=gO(o,i.accessToken,i.accessTokenParam||"access_token",n||location.href);e=o.startsWith("mapbox://")?Promise.resolve(Object.assign({},t,{url:void 0,tiles:s})):SO("Source",s,i).then(function(t){for(var n=0,r=t.tiles.length;n<r;++n){var e=t.tiles[n];if(i.transformRequest){var o=i.transformRequest(s,"Source");o&&(s=o.url);}var u=gO(e,i.accessToken,i.accessTokenParam||"access_token",s);if(i.transformRequest){var a=i.transformRequest(u,"Tiles");a instanceof Request&&(u=decodeURI(a.url));}t.tiles[n]=u;}return Promise.resolve(t);});}else t=Object.assign({},t,{tiles:t.tiles.map(function(t){return gO(t,i.accessToken,i.accessTokenParam||"access_token",n||location.href);})}),e=Promise.resolve(Object.assign({},t));jO[r]=e;}return e;}var TO,AO=Array(256).join(" ");function PO(t,n){if(n>=.05){for(var i="",r=t.split("\n"),e=AO.slice(0,Math.round(n/.1)),o=0,s=r.length;o<s;++o){o>0&&(i+="\n"),i+=r[o].split("").join(e);}return i;}return t;}function CO(){return TO||(TO=MO(1,1).getContext("2d")),TO;}function kO(t,n){return CO().measureText(t).width+(t.length-1)*n;}var NO={};function IO(t,n,i,r){if(-1!==t.indexOf("\n")){for(var e=t.split("\n"),o=[],s=0,u=e.length;s<u;++s){o.push(IO(e[s],n,i,r));}return o.join("\n");}var a=i+","+n+","+t+","+r,h=NO[a];if(!h){var f=t.split(" ");if(f.length>1){var c=CO();c.font=n;for(var l=c.measureText("M").width*i,v="",p=[],d=0,y=f.length;d<y;++d){var m=f[d],w=v+(v?" ":"")+m;kO(w,r)<=l?v=w:(v&&p.push(v),v=m);}v&&p.push(v);for(var g=0,b=p.length;g<b&&b>1;++g){var x=p[g];if(kO(x,r)<.35*l){var M=g>0?kO(p[g-1],r):1/0,_=g<b-1?kO(p[g+1],r):1/0;p.splice(g,1),b-=1,M<_?(p[g-1]+=" "+x,g-=1):p[g]=x+" "+p[g];}}for(var S=0,O=p.length-1;S<O;++S){var j=p[S],E=p[S+1];if(kO(j,r)>.7*l&&kO(E,r)<.6*l){var T=j.split(" "),A=T.pop();kO(A,r)<.2*l&&(p[S]=T.join(" "),p[S+1]=A+" "+E),O-=1;}}h=p.join("\n");}else h=t;h=PO(h,r),NO[a]=h;}return h;}var zO,LO=/font-family: ?([^;]*);/,RO=/("|')/g;function FO(t){if(!zO){zO={};for(var n=document.styleSheets,i=0,r=n.length;i<r;++i){var e=n[i];try{var o=e.rules||e.cssRules;if(o)for(var s=0,u=o.length;s<u;++s){var a=o[s];if(5==a.type){var h=a.cssText.match(LO);zO[h[1].replace(RO,"")]=!0;}}}catch(t){}}}return t in zO;}var GO={};function DO(t){var n=t.toString();if(n in GO)return GO[n];for(var i=[],r=0,e=t.length;r<e;++r){t[r]=t[r].replace("Arial Unicode MS","Arial");var o=t[r],s=dO(o,1);tu(s);var u=s.split(" ");i.push([u.slice(3).join(" ").replace(/"/g,""),u[1],u[0]]);}for(var a=0,h=i.length;a<h;++a){var f=i[a],c=f[0];if(!FO(c)&&100!==Ks.get(f[2]+"\n"+f[1]+" \n"+c)){var l="https://fonts.googleapis.com/css?family="+c.replace(/ /g,"+")+":"+f[1]+f[2];if(!document.querySelector('link[href="'+l+'"]')){var v=document.createElement("link");v.href=l,v.rel="stylesheet",document.head.appendChild(v);}}}return GO[n]=t,t;}var qO,UO,BO={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},XO={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},VO={},WO={zoom:0};function YO(t,n,i,r,e,o,s){var u=t.id;o||(o={},console.warn("No functionCache provided to getValue()")),o[u]||(o[u]={});var a,h=o[u];if(!h[i]){var f=(t[n]||VO)[i],c=ZS[n+"_"+t.type][i];void 0===f&&(f=c.default);var l=(a=f,Array.isArray(a)&&a.length>0&&"string"==typeof a[0]&&a[0]in IS);if(!l&&qS(f)&&(f=AM(f,c),l=!0),l){var v=function(t,n){var i=WS(t,n);if("error"===i.result)throw new Error(i.value.map(function(t){return t.key+": "+t.message;}).join(", "));return i.value;}(f,c);h[i]=v.evaluate.bind(v);}else"color"==c.type&&(f=EM.parse(f)),h[i]=function(){return f;};}return WO.zoom=r,h[i](WO,e,s);}function KO(t,n,i,r){return YO(t,"layout","icon-allow-overlap",n,i,r)?YO(t,"layout","icon-ignore-placement",n,i,r)?"none":"obstacle":"declutter";}function ZO(t,n,i,r,e){return e||console.warn("No filterCache provided to evaluateFilter()"),t in e||(e[t]=HS(n).filter),WO.zoom=r,e[t](WO,i);}var $O=!1;function HO(t,n){if(t){if(!$O&&(0===t.a||0===n))return;var i=t.a;return n=void 0===n?1:n,0===i?"transparent":"rgba("+Math.round(255*t.r/i)+","+Math.round(255*t.g/i)+","+Math.round(255*t.b/i)+","+i*n+")";}return t;}var JO=/\{[^{}}]*\}/g;function QO(t,n){return t.replace(JO,function(t){return n[t.slice(1,-1)]||"";});}var tj=!1;function nj(t,n,i,r,e,o,s){if(void 0===r&&(r=xO),void 0===e&&(e=void 0),void 0===o&&(o=void 0),void 0===s&&(s=void 0),"string"==typeof n&&(n=JSON.parse(n)),8!=n.version)throw new Error("glStyle version 8 required.");var u,a;if(o)if("undefined"!=typeof Image){var h=new Image();h.crossOrigin="anonymous",h.onload=function(){u=h,a=[h.width,h.height],t.changed(),h.onload=null;},h.src=o;}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var f=self;f.postMessage({action:"loadImage",src:o}),f.addEventListener("message",function(t){"imageLoaded"===t.data.action&&t.data.src===o&&(u=t.data.image,a=[u.width,u.height]);});}for(var c,l=function(t){t=t.slice();for(var n=Object.create(null),i=0;i<t.length;i++){n[t[i].id]=t[i];}for(var r=0;r<t.length;r++){("ref"in t[r])&&(t[r]=fO(t[r],n[t[r].ref]));}return t;}(n.layers),v={},p=[],d={},y={},m={},w={},g=0,b=l.length;g<b;++g){var x=l[g],M=x.id;if("string"==typeof i&&x.source==i||-1!==i.indexOf(M)){var _=x["source-layer"];if(c){if(x.source!==c)throw new Error('Layer "'+M+'" does not use source "'+c);}else{c=x.source;var S=n.sources[c];if(!S)throw new Error('Source "'+c+'" is not defined');var O=S.type;if("vector"!==O&&"geojson"!==O)throw new Error('Source "'+c+'" is not of type "vector" or "geojson", but "'+O+'"');}var j=v[_];j||(j=[],v[_]=j),j.push({layer:x,index:g}),p.push(M);}}var E=new ip(),T=new Dv(),A=[],P=function P(n,i){var o=n.getProperties(),h=v[o.layer];if(h){var f=r.indexOf(i);-1==f&&(f=function(t,n){for(var i=0,r=n.length;i<r;++i){if(n[i]<t&&i+1<r){var e=n[i]/n[i+1];return i+Math.log(n[i]/t)/Math.log(e);}}return r-1;}(i,r));for(var c,l=BO[n.getGeometry().getType()],p={properties:o,type:l},g=t.get("mapbox-featurestate")[n.getId()],b=-1,x=0,M=h.length;x<M;++x){var _=h[x],S=_.layer,O=S.id,j=S.layout||VO,P=S.paint||VO;if(!("none"===j.visibility||"minzoom"in S&&f<S.minzoom||"maxzoom"in S&&f>=S.maxzoom)){var C=S.filter;if(!C||ZO(O,C,p,f,w)){c=S;var k=void 0,N=void 0,I=void 0,z=void 0,L=void 0,R=void 0,F=_.index;if(3==l&&("fill"==S.type||"fill-extrusion"==S.type))if(N=YO(S,"paint",S.type+"-opacity",f,p,m,g),S.type+"-pattern"in P){var G=YO(S,"paint",S.type+"-pattern",f,p,m,g);if(G){var D="string"==typeof G?QO(G,o):G.toString();if(u&&e&&e[D]){++b,(R=A[b])&&R.getFill()&&!R.getStroke()&&!R.getText()||(R=new hp({fill:new Dv()}),A[b]=R),I=R.getFill(),R.setZIndex(F);var q=D+"."+N,U=y[q];if(!U){var B=e[D],X=MO(B.width,B.height),V=X.getContext("2d");V.globalAlpha=N,V.drawImage(u,B.x,B.y,B.width,B.height,0,0,B.width,B.height),U=V.createPattern(X,"repeat"),y[q]=U;}I.setColor(U);}}}else k=HO(YO(S,"paint",S.type+"-color",f,p,m,g),N),S.type+"-outline-color"in P&&(L=HO(YO(S,"paint",S.type+"-outline-color",f,p,m,g),N)),L||(L=k),(k||L)&&(++b,(!(R=A[b])||k&&!R.getFill()||!k&&R.getFill()||L&&!R.getStroke()||!L&&R.getStroke()||R.getText())&&(R=new hp({fill:k?new Dv():void 0,stroke:L?new ip():void 0}),A[b]=R),k&&(I=R.getFill()).setColor(k),L&&((z=R.getStroke()).setColor(L),z.setWidth(.5)),R.setZIndex(F));if(1!=l&&"line"==S.type){k=!("line-pattern"in P)&&"line-color"in P?HO(YO(S,"paint","line-color",f,p,m,g),YO(S,"paint","line-opacity",f,p,m,g)):void 0;var W=YO(S,"paint","line-width",f,p,m,g);k&&W>0&&(++b,(R=A[b])&&R.getStroke()&&!R.getFill()&&!R.getText()||(R=new hp({stroke:new ip()}),A[b]=R),(z=R.getStroke()).setLineCap(YO(S,"layout","line-cap",f,p,m,g)),z.setLineJoin(YO(S,"layout","line-join",f,p,m,g)),z.setMiterLimit(YO(S,"layout","line-miter-limit",f,p,m,g)),z.setColor(k),z.setWidth(W),z.setLineDash(P["line-dasharray"]?YO(S,"paint","line-dasharray",f,p,m,g).map(function(t){return t*W;}):null),R.setZIndex(F));}var Y=!1,K=null,Z=0,$=void 0,H=void 0,J=void 0;if((1==l||2==l)&&"icon-image"in j){var Q=YO(S,"layout","icon-image",f,p,m,g);if(Q){$="string"==typeof Q?QO(Q,o):Q.toString();var tt=void 0;if(u&&e&&e[$]){var nt=YO(S,"layout","icon-rotation-alignment",f,p,m,g);if(2==l){var it=n.getGeometry();if(it.getFlatMidpoint||it.getFlatMidpoints){var rt=it.getExtent();if(Math.sqrt(Math.max(Math.pow((rt[2]-rt[0])/i,2),Math.pow((rt[3]-rt[1])/i,2)))>150){var et="MultiLineString"===it.getType()?it.getFlatMidpoints():it.getFlatMidpoint();if(UO||(UO=new Ix("Point",qO=[NaN,NaN],[],{},null)),tt=UO,qO[0]=et[0],qO[1]=et[1],"line"===YO(S,"layout","symbol-placement",f,p,m,g)&&"map"===nt)for(var ot=it.getStride(),st=it.getFlatCoordinates(),ut=0,at=st.length-ot;ut<at;ut+=ot){var ht=st[ut],ft=st[ut+1],ct=st[ut+ot],lt=st[ut+ot+1],vt=Math.min(ht,ct),pt=Math.min(ft,lt),dt=Math.max(ht,ct),yt=Math.max(ft,lt);if(et[0]>=vt&&et[0]<=dt&&et[1]>=pt&&et[1]<=yt){Z=Math.atan2(ft-lt,ct-ht);break;}}}}}if(2!==l||tt){var mt=YO(S,"layout","icon-size",f,p,m,g),wt=void 0!==P["icon-color"]?YO(S,"paint","icon-color",f,p,m,g):null;if(!wt||0!==wt.a){var gt=$+"."+mt;if(null!==wt&&(gt+="."+wt),!(H=d[gt])){var bt=e[$],xt=KO(S,f,p,m);H=new tp({color:wt?[255*wt.r,255*wt.g,255*wt.b,wt.a]:void 0,img:u,imgSize:a,size:[bt.width,bt.height],offset:[bt.x,bt.y],rotateWithView:"map"===nt,scale:mt/bt.pixelRatio,displacement:"icon-offset"in j?YO(S,"layout","icon-offset",f,p,m,g).map(function(t){return-t*bt.pixelRatio;}):void 0,declutterMode:xt}),d[gt]=H;}}H&&(++b,(R=A[b])&&R.getImage()&&!R.getFill()&&!R.getStroke()||(R=new hp(),A[b]=R),R.setGeometry(tt),H.setRotation(Z+bO(YO(S,"layout","icon-rotate",f,p,m,g))),H.setOpacity(YO(S,"paint","icon-opacity",f,p,m,g)),H.setAnchor(XO[YO(S,"layout","icon-anchor",f,p,m,g)]),R.setImage(H),K=R.getText(),R.setText(void 0),R.setZIndex(F),Y=!0,J=!1);}else J=!0;}}}if(1==l&&"circle"===S.type){++b,(R=A[b])&&R.getImage()&&!R.getFill()&&!R.getStroke()||(R=new hp(),A[b]=R);var Mt="circle-radius"in P?YO(S,"paint","circle-radius",f,p,m,g):5,_t=HO(YO(S,"paint","circle-stroke-color",f,p,m,g),YO(S,"paint","circle-stroke-opacity",f,p,m,g)),St=HO(YO(S,"paint","circle-color",f,p,m,g),YO(S,"paint","circle-opacity",f,p,m,g)),Ot=YO(S,"paint","circle-stroke-width",f,p,m,g),jt=Mt+"."+_t+"."+St+"."+Ot;(H=d[jt])||(H=new Fv({radius:Mt,stroke:_t&&Ot>0?new ip({width:Ot,color:_t}):void 0,fill:St?new Dv({color:St}):void 0,declutterMode:"none"}),d[jt]=H),R.setImage(H),K=R.getText(),R.setText(void 0),R.setGeometry(void 0),R.setZIndex(F),Y=!0;}var Et=void 0,Tt=void 0,At=void 0,Pt=void 0,Ct=void 0,kt=void 0;if("text-field"in j){Pt=Math.round(YO(S,"layout","text-size",f,p,m,g));var Nt=YO(S,"layout","text-font",f,p,m,g);At=YO(S,"layout","text-line-height",f,p,m,g),(Tt=dO(s?s(Nt):Nt,Pt,At)).includes("sans-serif")||(Tt+=",sans-serif"),Ct=YO(S,"layout","text-letter-spacing",f,p,m,g),kt=YO(S,"layout","text-max-width",f,p,m,g);var It=YO(S,"layout","text-field",f,p,m,g);Et="object"==_typeof(It)&&It.sections?1===It.sections.length?It.toString():It.sections.reduce(function(t,n,i){var r=n.fontStack?n.fontStack.split(","):Nt,e=dO(s?s(r):r,Pt*(n.scale||1),At),o=n.text;if("\n"===o)return t.push("\n",""),t;if(2!=l){for(var u=0,a=(o=IO(o,e,kt,Ct).split("\n")).length;u<a;++u){u>0&&t.push("\n",""),t.push(o[u],e);}return t;}t.push(PO(o,Ct),e);},[]):QO(It,o).trim(),N=YO(S,"paint","text-opacity",f,p,m,g);}if(Et&&N&&!J){Y||(++b,(R=A[b])&&R.getText()&&!R.getFill()&&!R.getStroke()||(R=new hp(),A[b]=R),R.setImage(void 0),R.setGeometry(void 0)),R.getText()||R.setText(K||new vp({padding:[2,2,2,2]})),K=R.getText();var zt=j["text-transform"];"uppercase"==zt?Et=Array.isArray(Et)?Et.map(function(t,n){return n%2?t:t.toUpperCase();}):Et.toUpperCase():"lowercase"==zt&&(Et=Array.isArray(Et)?Et.map(function(t,n){return n%2?t:t.toLowerCase();}):Et.toLowerCase());var Lt=Array.isArray(Et)?Et:2==l?PO(Et,Ct):IO(Et,Tt,kt,Ct);K.setText(Lt),K.setFont(Tt),K.setRotation(bO(YO(S,"layout","text-rotate",f,p,m,g)));var Rt=YO(S,"layout","text-anchor",f,p,m,g),Ft=Y||1==l?"point":YO(S,"layout","symbol-placement",f,p,m,g);K.setPlacement(Ft),K.setOverflow("point"===Ft);var Gt=YO(S,"paint","text-halo-width",f,p,m,g),Dt=YO(S,"layout","text-offset",f,p,m,g),qt=YO(S,"paint","text-translate",f,p,m,g),Ut=0,Bt=0;if("point"==Ft){var Xt="center";-1!==Rt.indexOf("left")?(Xt="left",Bt=Gt):-1!==Rt.indexOf("right")&&(Xt="right",Bt=-Gt),K.setTextAlign(Xt);var Vt=YO(S,"layout","text-rotation-alignment",f,p,m,g);K.setRotateWithView("map"==Vt);}else K.setMaxAngle(bO(YO(S,"layout","text-max-angle",f,p,m,g))*Et.length/Lt.length),K.setTextAlign(),K.setRotateWithView(!1);var Wt="middle";0==Rt.indexOf("bottom")?(Wt="bottom",Ut=-Gt-.5*(At-1)*Pt):0==Rt.indexOf("top")&&(Wt="top",Ut=Gt+.5*(At-1)*Pt),K.setTextBaseline(Wt),K.setOffsetX(Dt[0]*Pt+Bt+qt[0]),K.setOffsetY(Dt[1]*Pt+Ut+qt[1]),T.setColor(HO(YO(S,"paint","text-color",f,p,m,g),N)),K.setFill(T);var Yt=HO(YO(S,"paint","text-halo-color",f,p,m,g),N);if(Yt){E.setColor(Yt),Gt*=2;var Kt=.5*Pt;E.setWidth(Gt<=Kt?Gt:Kt),K.setStroke(E);}else K.setStroke(void 0);var Zt=YO(S,"layout","text-padding",f,p,m,g),$t=K.getPadding();Zt!==$t[0]&&($t[0]=Zt,$t[1]=Zt,$t[2]=Zt,$t[3]=Zt),R.setZIndex(F);}}}}return b>-1?(A.length=b+1,tj&&("function"==typeof n.set?n.set("mapbox-layer",c):n.getProperties()["mapbox-layer"]=c),A):void 0;}};return t.setStyle(P),t.set("mapbox-source",c),t.set("mapbox-layers",p),t.set("mapbox-featurestate",{}),P;}function ij(t,n){n.accessToken||(n=Object.assign({},n),new URL(t).searchParams.forEach(function(t,i){n.accessToken=t,n.accessTokenParam=i;}));return n;}function rj(t,n,i,r,e){var o,s,u;return void 0===i&&(i=""),void 0===r&&(r={}),void 0===e&&(e=void 0),"string"==typeof r?(o=r,u={}):(o=r.styleUrl,u=r),e||(e=u.resolutions),o||"string"!=typeof n||n.trim().startsWith("{")||(o=n),o&&(o=o.startsWith("data:")?location.href:wO(o,u.accessToken),u=ij(o,u)),new Promise(function(r,a){OO(n,u).then(function(n){if(8!=n.version)return a(new Error("glStyle version 8 required."));if(!(t instanceof Lx||t instanceof hM))return a(new Error("Can only apply to VectorLayer or VectorTileLayer"));var h,f,c,l=t instanceof hM?"vector":"geojson";if(i?s=Array.isArray(i)?n.layers.find(function(t){return t.id===i[0];}).source:i:(s=Object.keys(n.sources).find(function(t){return n.sources[t].type===l;}),i=s),!s)return a(new Error("No "+l+" source found in the glStyle."));function v(){if(t instanceof hM)return aj(n.sources[s],o,u).then(function(n){var i=t.getSource();if(i?n!==i&&(i.setTileUrlFunction(n.getTileUrlFunction()),i.Le||(i.Le=n.Le),i.getAttributions()||i.setAttributions(n.getAttributions()),i.getTileLoadFunction()===Uw&&i.setTileLoadFunction(n.getTileLoadFunction()),Tr(i.getProjection(),n.getProjection())&&(i.tileGrid=n.getTileGrid())):t.setSource(n),!isFinite(t.getMaxResolution())&&!isFinite(t.getMinZoom())){var r=t.getSource().getTileGrid();t.setMaxResolution(r.getResolution(r.getMinZoom()));}});var i=n.sources[s],r=t.getSource();r&&r.get("mapbox-source")===i||(r=fj(i,o,u));var e=t.getSource();return e?r!==e&&(e.getAttributions()||e.setAttributions(r.getAttributions()),e.Le||(e.Le=r.getFormat()),e.Fe=r.getUrl()):t.setSource(r),Promise.resolve();}function p(){c||n.sprite&&!h?c?(t.setStyle(c),v().then(r).catch(a)):a(new Error("Something went wrong trying to apply style.")):(c=nj(t,n,i,e,h,f,DO),t.getStyle()?v().then(r).catch(a):a(new Error("Nothing to show for source ["+s+"]")));}if(n.sprite){var d=new URL(function(t,n,i){var r=mO(t);if(!r)return decodeURI(new URL(t,i).href);var e="sprites/";if(0!==r.indexOf(e))throw new Error("unexpected sprites url: "+t);var o=r.slice(e.length);return yO+"/styles/v1/"+o+"/sprite?access_token="+n;}(n.sprite,u.accessToken,o||location.href)),y=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",m=d.origin+d.pathname+y+".json"+d.search;new Promise(function(t,n){SO("Sprite",m,u).then(t).catch(function(i){SO("Sprite",m=d.origin+d.pathname+".json"+d.search,u).then(t).catch(n);});}).then(function(t){if(void 0===t&&a(new Error("No sprites found.")),h=t,f=d.origin+d.pathname+y+".png"+d.search,u.transformRequest){var n=u.transformRequest(f,"SpriteImage");n instanceof Request&&(f=encodeURI(n.url));}p();}).catch(function(t){a(new Error("Sprites cannot be loaded: "+m+": "+t.message));});}else p();}).catch(a);});}var ej={};function oj(t,n){var i={id:n.id,type:n.type},r={};function e(e){var o=n.layout||{},s=n.paint||{};i.paint=s;var u,a,h="function"==typeof t.getSource?t.getSource().getTileGrid().getZForResolution(e):t.getView().getZoom(),f="function"==typeof t.getTargetElement?t.getTargetElement():void 0;if(void 0!==s["background-color"]&&(u=YO(i,"paint","background-color",h,ej,r),f&&(f.style.background=EM.parse(u).toString())),void 0!==s["background-opacity"]&&(a=YO(i,"paint","background-opacity",h,ej,r),f&&(f.style.opacity=a)),"none"!=o.visibility)return HO(u,a);f&&(f.style.backgroundColor="",f.style.opacity="");}if("function"==typeof t.getTargetElement)t.getTargetElement()&&e(),t.on(["change:resolution","change:target"],e);else{if("function"!=typeof t.setBackground)throw new Error("Unable to apply background.");t.setBackground(e);}}function sj(t,n){n.layers.some(function(n){if("background"===n.type)return oj(t,n),!0;});}function uj(t){var n=t.bounds;if(n){var i=Er([n[0],n[1]]),r=Er([n[2],n[3]]);return[i[0],i[1],r[0],r[1]];}}function aj(t,n,i){return new Promise(function(r,e){EO(t,n,i).then(function(t){var n=new Kg({tileJSON:t}),i=n.getTileJSON(),e=n.getTileGrid(),o=uj(i),s=i.minzoom||0,u=i.maxzoom||22,a={attributions:n.getAttributions(),format:new uM(),tileGrid:new Yf({origin:e.getOrigin(0),extent:o||e.getExtent(),minZoom:s,resolutions:xO.slice(0,u+1),tileSize:512})};Array.isArray(i.tiles)?a.urls=i.tiles:a.url=i.tiles,t.olSourceOptions&&Object.assign(a,t.olSourceOptions),r(new qw(a));}).catch(e);});}var hj=new bM();function fj(t,n,i){var r=t.data,e={};if("string"==typeof r){var o=gO(r,i.accessToken,i.accessTokenParam||"access_token",n||location.href);if(i.transformRequest){var s=i.transformRequest(o,"GeoJSON");s instanceof Request&&(o=encodeURI(s.url));}e.url=o;}else e.features=hj.readFeatures(r,{featureProjection:zr()||"EPSG:3857"});var u=new Qp(Object.assign({attributions:t.attribution,format:hj},e));return u.set("mapbox-source",t),u;}var cj=function(){var _t169=function t(n,i){return _t169=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t169(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t169(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),lj=function(t){function n(n){var i=t.call(this,L)||this;return i.error=n,i;}return cj(n,t),n;}(c),vj=function(t){function n(n){var i=this,r=!("declutter"in n)||n.declutter,e=new qw({state:"loading",format:new uM()});i=t.call(this,{source:e,background:n.background,declutter:r,className:n.className,opacity:n.opacity,visible:n.visible,zIndex:n.zIndex,minResolution:n.minResolution,maxResolution:n.maxResolution,minZoom:n.minZoom,maxZoom:n.maxZoom,renderOrder:n.renderOrder,renderBuffer:n.renderBuffer,renderMode:n.renderMode,map:n.map,updateWhileAnimating:n.updateWhileAnimating,updateWhileInteracting:n.updateWhileInteracting,preload:n.preload,useInterimTilesOnError:n.useInterimTilesOnError,properties:n.properties})||this,n.accessToken&&(i.accessToken=n.accessToken);var o=n.styleUrl;return rj(i,o,n.layers||n.source,{accessToken:i.accessToken}).then(function(){e.setState("ready");}).catch(function(t){i.dispatchEvent(new lj(t)),i.getSource().setState("error");}),void 0===i.getBackground()&&function(t,n,i){void 0===i&&(i={}),"object"==_typeof(n)?(sj(t,n),Promise.resolve()):OO(n,i).then(function(n){sj(t,n);});}(i,n.styleUrl,{accessToken:i.accessToken}),i;}return cj(n,t),n;}(hM),pj=vj,dj=function(){var _t170=function t(n,i){return _t170=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t170(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t170(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),yj=function(t){function n(n){var i=this,r=n||{},e=A({},r);return delete e.imageRatio,(i=t.call(this,e)||this).lv=void 0!==r.imageRatio?r.imageRatio:1,i;}return dj(n,t),n.prototype.getImageRatio=function(){return this.lv;},n.prototype.createRenderer=function(){return new sx(this);},n;}(ub),mj=function(){var _t171=function t(n,i){return _t171=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t171(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t171(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),wj=function(t){function n(n){var i=this,r=A({},n);return(i=t.call(this,r)||this).vv=jv(n.style),i.pv=n.style.variables||{},i.dv=!!n.disableHitDetection,i;}return mj(n,t),n.prototype.createRenderer=function(){return new hb(this,{vertexShader:this.vv.builder.getSymbolVertexShader(),fragmentShader:this.vv.builder.getSymbolFragmentShader(),hitVertexShader:!this.dv&&this.vv.builder.getSymbolVertexShader(!0),hitFragmentShader:!this.dv&&this.vv.builder.getSymbolFragmentShader(!0),uniforms:this.vv.uniforms,attributes:this.vv.attributes});},n.prototype.updateStyleVariables=function(t){A(this.pv,t),this.changed();},n;}(Ms),gj=function(){var _t172=function t(n,i){return _t172=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t172(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t172(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}();function bj(t,n){var i="\n    attribute vec2 ".concat(Dl.TEXTURE_COORD,";\n    uniform mat4 ").concat(Gl.TILE_TRANSFORM,";\n    uniform float ").concat(Gl.TEXTURE_PIXEL_WIDTH,";\n    uniform float ").concat(Gl.TEXTURE_PIXEL_HEIGHT,";\n    uniform float ").concat(Gl.TEXTURE_RESOLUTION,";\n    uniform float ").concat(Gl.TEXTURE_ORIGIN_X,";\n    uniform float ").concat(Gl.TEXTURE_ORIGIN_Y,";\n    uniform float ").concat(Gl.DEPTH,";\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n\n    void main() {\n      v_textureCoord = ").concat(Dl.TEXTURE_COORD,";\n      v_mapCoord = vec2(\n        ").concat(Gl.TEXTURE_ORIGIN_X," + ").concat(Gl.TEXTURE_RESOLUTION," * ").concat(Gl.TEXTURE_PIXEL_WIDTH," * v_textureCoord[0],\n        ").concat(Gl.TEXTURE_ORIGIN_Y," - ").concat(Gl.TEXTURE_RESOLUTION," * ").concat(Gl.TEXTURE_PIXEL_HEIGHT," * v_textureCoord[1]\n      );\n      gl_Position = ").concat(Gl.TILE_TRANSFORM," * vec4(").concat(Dl.TEXTURE_COORD,", ").concat(Gl.DEPTH,", 1.0);\n    }\n  "),r={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:n},e=[];if(void 0!==t.color){var o=fv(r,t.color,Hl);e.push("color = ".concat(o,";"));}if(void 0!==t.contrast){var s=fv(r,t.contrast,Zl);e.push("color.rgb = clamp((".concat(s," + 1.0) * color.rgb - (").concat(s," / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"));}if(void 0!==t.exposure){var u=fv(r,t.exposure,Zl);e.push("color.rgb = clamp((".concat(u," + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"));}if(void 0!==t.saturation){var a=fv(r,t.saturation,Zl);e.push("\n      float saturation = ".concat(a," + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    "));}if(void 0!==t.gamma){var h=fv(r,t.gamma,Zl);e.push("color.rgb = pow(color.rgb, vec3(1.0 / ".concat(h,"));"));}if(void 0!==t.brightness){var f=fv(r,t.brightness,Zl);e.push("color.rgb = clamp(color.rgb + ".concat(f,", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"));}var c={},l=r.variables.length;if(l>1&&!t.variables)throw new Error("Missing variables in style (expected ".concat(r.variables,")"));for(var v=function v(n){var i=r.variables[n];if(!(i in t.variables))throw new Error("Missing '".concat(i,"' in style variables"));var e=bv(i);c[e]=function(){var n=t.variables[i];return"string"==typeof n&&(n=av(r,n)),void 0!==n?n:-9999999;};},p=0;p<l;++p){v(p);}var d=Object.keys(c).map(function(t){return"uniform float ".concat(t,";");}),y=Math.ceil(n/4);d.push("uniform sampler2D ".concat(Gl.TILE_TEXTURE_ARRAY,"[").concat(y,"];")),r.paletteTextures&&d.push("uniform sampler2D ".concat(xv,"[").concat(r.paletteTextures.length,"];"));var m=Object.keys(r.functions).map(function(t){return r.functions[t];});return{vertexShader:i,fragmentShader:"\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n    uniform vec4 ".concat(Gl.RENDER_EXTENT,";\n    uniform float ").concat(Gl.TRANSITION_ALPHA,";\n    uniform float ").concat(Gl.TEXTURE_PIXEL_WIDTH,";\n    uniform float ").concat(Gl.TEXTURE_PIXEL_HEIGHT,";\n    uniform float ").concat(Gl.RESOLUTION,";\n    uniform float ").concat(Gl.ZOOM,";\n\n    ").concat(d.join("\n"),"\n\n    ").concat(m.join("\n"),"\n\n    void main() {\n      if (\n        v_mapCoord[0] < ").concat(Gl.RENDER_EXTENT,"[0] ||\n        v_mapCoord[1] < ").concat(Gl.RENDER_EXTENT,"[1] ||\n        v_mapCoord[0] > ").concat(Gl.RENDER_EXTENT,"[2] ||\n        v_mapCoord[1] > ").concat(Gl.RENDER_EXTENT,"[3]\n      ) {\n        discard;\n      }\n\n      vec4 color = texture2D(").concat(Gl.TILE_TEXTURE_ARRAY,"[0],  v_textureCoord);\n\n      ").concat(e.join("\n"),"\n\n      if (color.a == 0.0) {\n        discard;\n      }\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= ").concat(Gl.TRANSITION_ALPHA,";\n    }"),uniforms:c,paletteTextures:r.paletteTextures};}var xj=function(t){function n(n){var i=this,r=n?A({},n):{},e=r.style||{};delete r.style;var o=r.cacheSize;return delete r.cacheSize,(i=t.call(this,r)||this).yv=r.sources,i.mv=null,i.Nc=NaN,i.H=e,i.Jt=o,i.pv=i.H.variables||{},i.addChangeListener(fs,i.wv),i;}return gj(n,t),n.prototype.getSources=function(t,n){var i=this.getSource();return this.yv?"function"==typeof this.yv?this.yv(t,n):this.yv:i?[i]:[];},n.prototype.getRenderSource=function(){return this.mv||this.getSource();},n.prototype.getSourceState=function(){var t=this.getRenderSource();return t?t.getState():"undefined";},n.prototype.wv=function(){this.getSource()&&this.setStyle(this.H);},n.prototype.gv=function(){var t=Number.MAX_SAFE_INTEGER,n=this.getSources([-t,-t,t,t],t);return n&&n.length&&"bandCount"in n[0]?n[0].bandCount:4;},n.prototype.createRenderer=function(){var t=bj(this.H,this.gv());return new Kl(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.Jt,paletteTextures:t.paletteTextures});},n.prototype.renderSources=function(t,n){for(var i,r=this.getRenderer(),e=0,o=n.length;e<o;++e){this.mv=n[e],r.prepareFrame(t)&&(i=r.renderFrame(t));}return i;},n.prototype.render=function(t,n){var i=this;this.rendered=!0;for(var r=t.viewState,e=this.getSources(t.extent,r.resolution),o=!0,s=function s(t,n){var r=e[t],s=r.getState();if("loading"==s){var u=function u(){"ready"==r.getState()&&(r.removeEventListener("change",u),i.changed());};r.addEventListener("change",u);}o=o&&"ready"==s;},u=0,a=e.length;u<a;++u){s(u);}var h=this.renderSources(t,e);if(this.getRenderer().renderComplete&&o)return this.Nc=r.resolution,h;if(this.Nc>.5*r.resolution){var f=this.getSources(t.extent,this.Nc).filter(function(t){return!e.includes(t);});if(f.length>0)return this.renderSources(t,f);}return h;},n.prototype.setStyle=function(t){this.pv=t.variables||{},this.H=t;var n=bj(this.H,this.gv());this.getRenderer().reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed();},n.prototype.updateStyleVariables=function(t){A(this.pv,t),this.changed();},n;}(lg);xj.prototype.dispose;var Mj=xj,_j=function(){var _t173=function t(n,i){return _t173=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t173(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t173(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Sj="addfeatures",Oj=function(t){function n(n,i,r,e){var o=t.call(this,n)||this;return o.features=r,o.file=i,o.projection=e,o;}return _j(n,t),n;}(c),jj=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{handleEvent:S})||this).on,i.once,i.un,i.bv=!1,i.xv=[];for(var e=r.formatConstructors?r.formatConstructors:[],o=0,s=e.length;o<s;++o){var u=e[o];"function"==typeof u&&(u=new u()),i.xv.push(u),i.bv=i.bv||"arraybuffer"===u.getType();}return i.di=r.projection?br(r.projection):null,i.Mv=null,i._v=r.source||null,i.target=r.target?r.target:null,i;}return _j(n,t),n.prototype.Sv=function(t,n){var i,r=n.target.result,e=this.getMap(),o=this.di;o||(o=e.getView().getProjection());for(var s=this.xv,u=0,a=s.length;u<a;++u){var h=s[u],f=r;this.bv&&"arraybuffer"!==h.getType()&&(void 0===i&&(i=new TextDecoder().decode(r)),f=i);var c=this.Ov(h,f,{featureProjection:o});if(c&&c.length>0){this._v&&(this._v.clear(),this._v.addFeatures(c)),this.dispatchEvent(new Oj(Sj,t,c,o));break;}}},n.prototype.jv=function(){var t=this.getMap();if(t){var n=this.target?this.target:t.getViewport();this.Mv=[Z(n,U,this.handleDrop,this),Z(n,D,this.handleStop,this),Z(n,q,this.handleStop,this),Z(n,U,this.handleStop,this)];}},n.prototype.setActive=function(n){!this.getActive()&&n&&this.jv(),this.getActive()&&!n&&this.Ev(),t.prototype.setActive.call(this,n);},n.prototype.setMap=function(n){this.Ev(),t.prototype.setMap.call(this,n),this.getActive()&&this.jv();},n.prototype.Ov=function(t,n,i){try{return t.readFeatures(n,i);}catch(t){return null;}},n.prototype.Ev=function(){this.Mv&&(this.Mv.forEach(H),this.Mv=null);},n.prototype.handleDrop=function(t){for(var n=t.dataTransfer.files,i=0,r=n.length;i<r;++i){var e=n.item(i),o=new FileReader();o.addEventListener(V,this.Sv.bind(this,e)),this.bv?o.readAsArrayBuffer(e):o.readAsText(e);}},n.prototype.handleStop=function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy";},n;}(Na),Ej=jj,Tj=function(){var _t174=function t(n,i){return _t174=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t174(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t174(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Aj=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).Kr=r.condition?r.condition:Za,i.$r=void 0,i.Tv=void 0,i.je=0,i.Fr=void 0!==r.duration?r.duration:400,i;}return Tj(n,t),n.prototype.handleDragEvent=function(t){if(Ha(t)){var n=t.map,i=n.getSize(),r=t.pixel,e=r[0]-i[0]/2,o=i[1]/2-r[1],s=Math.atan2(o,e),u=Math.sqrt(e*e+o*o),a=n.getView();if(void 0!==this.$r){var h=this.$r-s;a.adjustRotationInternal(h);}this.$r=s,void 0!==this.Tv&&a.adjustResolutionInternal(this.Tv/u),void 0!==this.Tv&&(this.je=this.Tv/u),this.Tv=u;}},n.prototype.handleUpEvent=function(t){if(!Ha(t))return!0;var n=t.map.getView(),i=this.je>1?1:-1;return n.endInteraction(this.Fr,i),this.je=0,!1;},n.prototype.handleDownEvent=function(t){return!!Ha(t)&&!!this.Kr(t)&&(t.map.getView().beginInteraction(),this.$r=void 0,this.Tv=void 0,!0);},n;}(Fa),Pj=Aj,Cj=function(){var _t175=function t(n,i){return _t175=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t175(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t175(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),kj=function(t){function n(n,i,r){var e=t.call(this)||this;if(void 0!==r&&void 0===i)e.setFlatCoordinates(r,n);else{var o=i||0;e.setCenterAndRadius(n,o,r);}return e;}return Cj(n,t),n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t;},n.prototype.closestPointXY=function(t,n,i,r){var e=this.flatCoordinates,o=t-e[0],s=n-e[1],u=o*o+s*s;if(u<r){if(0===u)for(var a=0;a<this.stride;++a){i[a]=e[a];}else{var h=this.getRadius()/Math.sqrt(u);i[0]=e[0]+h*o,i[1]=e[1]+h*s;for(a=2;a<this.stride;++a){i[a]=e[a];}}return i.length=this.stride,u;}return r;},n.prototype.containsXY=function(t,n){var i=this.flatCoordinates,r=t-i[0],e=n-i[1];return r*r+e*e<=this.Av();},n.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride);},n.prototype.computeExtent=function(t){var n=this.flatCoordinates,i=n[this.stride]-n[0];return An(n[0]-i,n[1]-i,n[0]+i,n[1]+i,t);},n.prototype.getRadius=function(){return Math.sqrt(this.Av());},n.prototype.Av=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+n*n;},n.prototype.getType=function(){return"Circle";},n.prototype.intersectsExtent=function(t){if(ti(t,this.getExtent())){var n=this.getCenter();return t[0]<=n[0]&&t[2]>=n[0]||t[1]<=n[1]&&t[3]>=n[1]||qn(t,this.intersectsCoordinate.bind(this));}return!1;},n.prototype.setCenter=function(t){var n=this.stride,i=this.flatCoordinates[n]-this.flatCoordinates[0],r=t.slice();r[n]=r[0]+i;for(var e=1;e<n;++e){r[n+e]=t[e];}this.setFlatCoordinates(this.layout,r),this.changed();},n.prototype.setCenterAndRadius=function(t,n,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,e=fe(r,0,t,this.stride);r[e++]=r[0]+n;for(var o=1,s=this.stride;o<s;++o){r[e++]=r[o];}r.length=e,this.changed();},n.prototype.getCoordinates=function(){return null;},n.prototype.setCoordinates=function(t,n){},n.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed();},n.prototype.rotate=function(t,n){var i=this.getCenter(),r=this.getStride();this.setCenter(Vr(i,0,i.length,r,t,n,i)),this.changed();},n.prototype.translate=function(t,n){var i=this.getCenter(),r=this.getStride();this.setCenter(Yr(i,0,i.length,r,t,n,i)),this.changed();},n;}(ie);kj.prototype.transform;var Nj=kj,Ij=function(){var _t176=function t(n,i){return _t176=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t176(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t176(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),zj="Point",Lj="LineString",Rj="Polygon",Fj="Circle",Gj="drawstart",Dj="drawend",qj="drawabort",Uj=function(t){function n(n,i){var r=t.call(this,n)||this;return r.feature=i,r;}return Ij(n,t),n;}(c),Bj=function(t){function n(n){var i=this,r=n;r.stopDown||(r.stopDown=O),(i=t.call(this,r)||this).on,i.once,i.un,i.Pv=!1,i.Cv=null,i.kv,i.Nv,i.Iv,i.zv=!1,i._v=n.source?n.source:null,i.Re=n.features?n.features:null,i.Lv=n.snapTolerance?n.snapTolerance:12,i.rl=n.type,i.de=function(t){switch(t){case"Point":case"MultiPoint":return zj;case"LineString":case"MultiLineString":return Lj;case"Polygon":case"MultiPolygon":return Rj;case"Circle":return Fj;default:throw new Error("Invalid type: "+t);}}(i.rl),i.Rv=!!n.stopClick,i.Fv=n.minPoints?n.minPoints:i.de===Rj?3:2,i.Gv=i.de===Fj?2:n.maxPoints?n.maxPoints:1/0,i.Dv=n.finishCondition?n.finishCondition:S,i.qv=n.geometryLayout?n.geometryLayout:kt;var e,o=n.geometryFunction;if(!o){var s,u=i.de;if(u===Fj)o=function o(t,n,i){var r=n||new Nj([NaN,NaN]),e=Rr(t[0],i),o=rr(e,Rr(t[t.length-1],i));r.setCenterAndRadius(e,Math.sqrt(o),this.qv);var s=zr();return s&&r.transform(i,s),r;};else u===zj?s=ke:u===Lj?s=_x:u===Rj&&(s=to),o=function o(t,n,i){return n?u===Rj?t[0].length?n.setCoordinates([t[0].concat([t[0][0]])],this.qv):n.setCoordinates([],this.qv):n.setCoordinates(t,this.qv):n=new s(t,this.qv),n;};}return i.Bu=o,i.Uv=void 0!==n.dragVertexDelay?n.dragVertexDelay:500,i.Bv=null,i.Xv=null,i.Vv=null,i.Wv=null,i.Yv=null,i.Kv=null,i.Zv=n.clickTolerance?n.clickTolerance*n.clickTolerance:36,i.$v=new Lx({source:new Qp({useSpatialIndex:!1,wrapX:!!n.wrapX&&n.wrapX}),style:n.style?n.style:(e=up(),function(t,n){return e[t.getGeometry().getType()];}),updateWhileInteracting:!0}),i.$=n.geometryName,i.Kr=n.condition?n.condition:Ka,i.Hv,n.freehand?i.Hv=Xa:i.Hv=n.freehandCondition?n.freehandCondition:Za,i.addChangeListener(Aa,i.Jv),i;}return Ij(n,t),n.prototype.setMap=function(n){t.prototype.setMap.call(this,n),this.Jv();},n.prototype.getOverlay=function(){return this.$v;},n.prototype.handleEvent=function(n){n.originalEvent.type===R&&n.originalEvent.preventDefault(),this.zv=this.de!==zj&&this.Hv(n);var i=n.type===wu.POINTERMOVE,r=!0;!this.zv&&this.Nv&&n.type===wu.POINTERDRAG&&(Date.now()-this.Nv>=this.Uv?(this.Cv=n.pixel,this.Pv=!this.zv,i=!0):this.Nv=void 0,this.Pv&&void 0!==this.kv&&(clearTimeout(this.kv),this.kv=void 0));return this.zv&&n.type===wu.POINTERDRAG&&null!==this.Xv?(this.Qv(n.coordinate),r=!1):this.zv&&n.type===wu.POINTERDOWN?r=!1:i&&this.getPointerCount()<2?(r=n.type===wu.POINTERMOVE)&&this.zv?(this.Kn(n),this.Pv&&n.originalEvent.preventDefault()):("mouse"===n.originalEvent.pointerType||n.type===wu.POINTERDRAG&&void 0===this.kv)&&this.Kn(n):n.type===wu.DBLCLICK&&(r=!1),t.prototype.handleEvent.call(this,n)&&r;},n.prototype.handleDownEvent=function(t){return this.Pv=!this.zv,this.zv?(this.Cv=t.pixel,this.Bv||this.tp(t.coordinate),!0):this.Kr(t)?(this.Nv=Date.now(),this.kv=setTimeout(function(){this.Kn(new mu(wu.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState));}.bind(this),this.Uv),this.Cv=t.pixel,!0):(this.Nv=void 0,!1);},n.prototype.handleUpEvent=function(t){var n=!0;if(0===this.getPointerCount())if(this.kv&&(clearTimeout(this.kv),this.kv=void 0),this.Kn(t),this.Pv){var i=!this.Bv;i&&this.tp(t.coordinate),!i&&this.zv?this.finishDrawing():this.zv||i&&this.de!==zj||(this.np(t.pixel)?this.Dv(t)&&this.finishDrawing():this.Qv(t.coordinate)),n=!1;}else this.zv&&this.abortDrawing();return!n&&this.Rv&&t.preventDefault(),n;},n.prototype.Kn=function(t){if(this.Iv=t.originalEvent.pointerType,this.Cv&&(!this.zv&&this.Pv||this.zv&&!this.Pv)){var n=this.Cv,i=t.pixel,r=n[0]-i[0],e=n[1]-i[1],o=r*r+e*e;if(this.Pv=this.zv?o>this.Zv:o<=this.Zv,!this.Pv)return;}this.Bv?this.ip(t.coordinate):this.rp(t.coordinate.slice());},n.prototype.np=function(t){var n=!1;if(this.Xv){var i=!1,r=[this.Bv],e=this.de;if(e===zj)n=!0;else if(e===Fj)n=2===this.Wv.length;else if(e===Lj)i=this.Wv.length>this.Fv;else if(e===Rj){var o=this.Wv;i=o[0].length>this.Fv,r=[o[0][0],o[0][o[0].length-2]];}if(i)for(var s=this.getMap(),u=0,a=r.length;u<a;u++){var h=r[u],f=s.getPixelFromCoordinate(h),c=t[0]-f[0],l=t[1]-f[1],v=this.zv?1:this.Lv;if(n=Math.sqrt(c*c+l*l)<=v){this.Bv=h;break;}}}return n;},n.prototype.rp=function(t){this.Vv?this.Vv.getGeometry().setCoordinates(t):(this.Vv=new Ct(new ke(t)),this.ep());},n.prototype.op=function(t){this.Yv||(this.Yv=new Ct());var n=t.getLinearRing(0),i=this.Yv.getGeometry();i?(i.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),i.changed()):(i=new _x(n.getFlatCoordinates(),n.getLayout()),this.Yv.setGeometry(i));},n.prototype.tp=function(t){for(var n=this.getMap().getView().getProjection(),i=te(this.qv);t.length<i;){t.push(0);}this.Bv=t,this.de===zj?this.Wv=t.slice():this.de===Rj?(this.Wv=[[t.slice(),t.slice()]],this.Kv=this.Wv[0]):this.Wv=[t.slice(),t.slice()],this.Kv&&(this.Yv=new Ct(new _x(this.Kv)));var r=this.Bu(this.Wv,void 0,n);this.Xv=new Ct(),this.$&&this.Xv.setGeometryName(this.$),this.Xv.setGeometry(r),this.ep(),this.dispatchEvent(new Uj(Gj,this.Xv));},n.prototype.ip=function(t){for(var n,i,r=this.getMap(),e=this.Xv.getGeometry(),o=r.getView().getProjection(),s=te(this.qv);t.length<s;){t.push(0);}(this.de===zj?i=this.Wv:this.de===Rj?(i=(n=this.Wv[0])[n.length-1],this.np(r.getPixelFromCoordinate(t))&&(t=this.Bv.slice())):i=(n=this.Wv)[n.length-1],i[0]=t[0],i[1]=t[1],this.Bu(this.Wv,e,o),this.Vv)&&this.Vv.getGeometry().setCoordinates(t);if("Polygon"===e.getType()&&this.de!==Rj)this.op(e);else if(this.Kv){this.Yv.getGeometry().setCoordinates(this.Kv);}this.ep();},n.prototype.Qv=function(t){var n,i,r=this.Xv.getGeometry(),e=this.getMap().getView().getProjection(),o=this.de;o===Lj||o===Fj?(this.Bv=t.slice(),(i=this.Wv).length>=this.Gv&&(this.zv?i.pop():n=!0),i.push(t.slice()),this.Bu(i,r,e)):o===Rj&&((i=this.Wv[0]).length>=this.Gv&&(this.zv?i.pop():n=!0),i.push(t.slice()),n&&(this.Bv=i[0]),this.Bu(this.Wv,r,e)),this.rp(t.slice()),this.ep(),n&&this.finishDrawing();},n.prototype.removeLastPoint=function(){if(this.Xv){var t,n=this.Xv.getGeometry(),i=this.getMap().getView().getProjection(),r=this.de;if(r===Lj||r===Fj){if((t=this.Wv).splice(-2,1),t.length>=2){this.Bv=t[t.length-2].slice();var e=this.Bv.slice();t[t.length-1]=e,this.rp(e);}this.Bu(t,n,i),"Polygon"===n.getType()&&this.Yv&&this.op(n);}else if(r===Rj){(t=this.Wv[0]).splice(-2,1);var o=this.Yv.getGeometry();if(t.length>=2){e=t[t.length-2].slice();t[t.length-1]=e,this.rp(e);}o.setCoordinates(t),this.Bu(this.Wv,n,i);}1===t.length&&this.abortDrawing(),this.ep();}},n.prototype.finishDrawing=function(){var t=this.sp();if(t){var n=this.Wv,i=t.getGeometry(),r=this.getMap().getView().getProjection();this.de===Lj?(n.pop(),this.Bu(n,i,r)):this.de===Rj&&(n[0].pop(),this.Bu(n,i,r),n=i.getCoordinates()),"MultiPoint"===this.rl?t.setGeometry(new mx([n])):"MultiLineString"===this.rl?t.setGeometry(new jx([n])):"MultiPolygon"===this.rl&&t.setGeometry(new Px([n])),this.dispatchEvent(new Uj(Dj,t)),this.Re&&this.Re.push(t),this._v&&this._v.addFeature(t);}},n.prototype.sp=function(){this.Bv=null;var t=this.Xv;return this.Xv=null,this.Vv=null,this.Yv=null,this.$v.getSource().clear(!0),t;},n.prototype.abortDrawing=function(){var t=this.sp();t&&this.dispatchEvent(new Uj(qj,t));},n.prototype.appendCoordinates=function(t){var n,i=this.de,r=!this.Xv;if(r&&this.tp(t[0]),i===Lj||i===Fj)n=this.Wv;else{if(i!==Rj)return;n=this.Wv&&this.Wv.length?this.Wv[0]:[];}r&&n.shift(),n.pop();for(var e=0;e<t.length;e++){this.Qv(t[e]);}var o=t[t.length-1];this.Qv(o),this.ip(o);},n.prototype.extend=function(t){var n=t.getGeometry();this.Xv=t,this.Wv=n.getCoordinates();var i=this.Wv[this.Wv.length-1];this.Bv=i.slice(),this.Wv.push(i.slice()),this.Vv=new Ct(new ke(i)),this.ep(),this.dispatchEvent(new Uj(Gj,this.Xv));},n.prototype.ep=function(){var t=[];this.Xv&&t.push(this.Xv),this.Yv&&t.push(this.Yv),this.Vv&&t.push(this.Vv);var n=this.$v.getSource();n.clear(!0),n.addFeatures(t);},n.prototype.Jv=function(){var t=this.getMap(),n=this.getActive();t&&n||this.abortDrawing(),this.$v.setMap(n?t:null);},n;}(Fa);var Xj=Bj,Vj=function(){var _t177=function t(n,i){return _t177=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t177(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t177(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Wj="extentchanged",Yj=function(t){function n(n){var i=t.call(this,Wj)||this;return i.extent=n,i;}return Vj(n,t),n;}(c);function Kj(){var t=up();return function(n,i){return t.Point;};}function Zj(t){return function(n){return bn([t,n]);};}function $j(t,n){return t[0]==n[0]?function(i){return bn([t,[i[0],n[1]]]);}:t[1]==n[1]?function(i){return bn([t,[n[0],i[1]]]);}:null;}var Hj=function(t){function n(n){var i,r=this,e=n||{};return(r=t.call(this,e)||this).on,r.once,r.un,r.Kr=e.condition?e.condition:Xa,r.st=null,r.up=null,r.ap=void 0!==e.pixelTolerance?e.pixelTolerance:10,r.hp=!1,r.fp=null,r.cp=null,n||(n={}),r.lp=new Lx({source:new Qp({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.boxStyle?n.boxStyle:(i=up(),function(t,n){return i.Polygon;}),updateWhileAnimating:!0,updateWhileInteracting:!0}),r.vp=new Lx({source:new Qp({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.pointerStyle?n.pointerStyle:Kj(),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.extent&&r.setExtent(n.extent),r;}return Vj(n,t),n.prototype.pp=function(t,n){var i=n.getCoordinateFromPixelInternal(t),r=this.getExtentInternal();if(r){var e=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]];}(r);e.sort(function(t,n){return or(i,t)-or(i,n);});var o=e[0],s=Hi(i,o),u=n.getPixelFromCoordinateInternal(s);if(er(t,u)<=this.ap){var a=n.getPixelFromCoordinateInternal(o[0]),h=n.getPixelFromCoordinateInternal(o[1]),f=rr(u,a),c=rr(u,h),l=Math.sqrt(Math.min(f,c));return this.hp=l<=this.ap,this.hp&&(s=f>c?o[1]:o[0]),s;}}return null;},n.prototype.Kn=function(t){var n=t.pixel,i=t.map,r=this.pp(n,i);r||(r=i.getCoordinateFromPixelInternal(n)),this.dp(r);},n.prototype.yp=function(t){var n=this.fp;return n?t?n.setGeometry(io(t)):n.setGeometry(void 0):(n=new Ct(t?io(t):{}),this.fp=n,this.lp.getSource().addFeature(n)),n;},n.prototype.dp=function(t){var n=this.cp;n?n.getGeometry().setCoordinates(t):(n=new Ct(new ke(t)),this.cp=n,this.vp.getSource().addFeature(n));return n;},n.prototype.handleEvent=function(n){return!n.originalEvent||!this.Kr(n)||(n.type!=wu.POINTERMOVE||this.handlingDownUpSequence||this.Kn(n),t.prototype.handleEvent.call(this,n),!1);},n.prototype.handleDownEvent=function(t){var n=t.pixel,i=t.map,r=this.getExtentInternal(),e=this.pp(n,i),o=function o(t){var n=null,i=null;return t[0]==r[0]?n=r[2]:t[0]==r[2]&&(n=r[0]),t[1]==r[1]?i=r[3]:t[1]==r[3]&&(i=r[1]),null!==n&&null!==i?[n,i]:null;};if(e&&r){var s=e[0]==r[0]||e[0]==r[2]?e[0]:null,u=e[1]==r[1]||e[1]==r[3]?e[1]:null;null!==s&&null!==u?this.up=Zj(o(e)):null!==s?this.up=$j(o([s,r[1]]),o([s,r[3]])):null!==u&&(this.up=$j(o([r[0],u]),o([r[2],u])));}else e=i.getCoordinateFromPixelInternal(n),this.setExtent([e[0],e[1],e[0],e[1]]),this.up=Zj(e);return!0;},n.prototype.handleDragEvent=function(t){if(this.up){var n=t.coordinate;this.setExtent(this.up(n)),this.dp(n);}},n.prototype.handleUpEvent=function(t){this.up=null;var n=this.getExtentInternal();return n&&0!==Un(n)||this.setExtent(null),!1;},n.prototype.setMap=function(n){this.lp.setMap(n),this.vp.setMap(n),t.prototype.setMap.call(this,n);},n.prototype.getExtent=function(){return Fr(this.getExtentInternal(),this.getMap().getView().getProjection());},n.prototype.getExtentInternal=function(){return this.st;},n.prototype.setExtent=function(t){this.st=t||null,this.yp(t),this.dispatchEvent(new Yj(this.st));},n;}(Fa),Jj=function(){var _t178=function t(n,i){return _t178=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t178(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t178(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}();function Qj(t){return parseFloat(t);}function tE(t){return function(t){return gi(t,5);}(t).toString();}function nE(t,n){return!isNaN(t)&&t!==Qj(tE(n));}var iE=function(t){function n(n){var i,r=t.call(this)||this,e=A({animate:!0,replace:!1,prefix:""},n||{});return i=!0===e.animate?{duration:250}:e.animate?e.animate:null,r.mp=i,r.wp=e.replace,r.gp=e.prefix,r.gn=[],r.bp=!0,r.Jv=r.Jv.bind(r),r;}return Jj(n,t),n.prototype.xp=function(t){return this.gp?this.gp+t:t;},n.prototype.Mp=function(t,n){return t.get(this.xp(n));},n.prototype._p=function(t,n,i){t.set(this.xp(n),i);},n.prototype.Sp=function(t,n){t.delete(this.xp(n));},n.prototype.setMap=function(n){var i=this.getMap();t.prototype.setMap.call(this,n),n!==i&&(i&&this.Ev(i),n&&(this.bp=!0,this.Jv(),this.jv(n)));},n.prototype.jv=function(t){this.gn.push(Z(t,Eu,this.Op,this),Z(t.getLayerGroup(),z,this.Op,this),Z(t,"change:layergroup",this.jp,this)),this.wp||addEventListener("popstate",this.Jv);},n.prototype.Ev=function(t){for(var n=0,i=this.gn.length;n<i;++n){H(this.gn[n]);}this.gn.length=0,this.wp||removeEventListener("popstate",this.Jv);var r=new URL(window.location.href),e=r.searchParams;this.Sp(e,"x"),this.Sp(e,"y"),this.Sp(e,"z"),this.Sp(e,"r"),this.Sp(e,"l"),window.history.replaceState(null,"",r);},n.prototype.jp=function(){var t=this.getMap();t&&(this.Ev(t),this.jv(t),this.bp=!0,this.Op());},n.prototype.Jv=function(){var t=this.getMap();if(t){var n=t.getView();if(n){var i=new URL(window.location.href).searchParams,r=!1,e={},o=Qj(this.Mp(i,"z"));nE(o,n.getZoom())&&(r=!0,e.zoom=o);var s=Qj(this.Mp(i,"r"));nE(s,n.getRotation())&&(r=!0,e.rotation=s);var u,a,h=[Qj(this.Mp(i,"x")),Qj(this.Mp(i,"y"))];u=h,a=n.getCenter(),(nE(u[0],a[0])||nE(u[1],a[1]))&&(r=!0,e.center=h),r&&(!this.bp&&this.mp?n.animate(A(e,this.mp)):(e.center&&n.setCenter(e.center),"zoom"in e&&n.setZoom(e.zoom),"rotation"in e&&n.setRotation(e.rotation)));var f=t.getAllLayers(),c=this.Mp(i,"l");if(c&&c.length===f.length)for(var l=0,v=f.length;l<v;++l){var p=parseInt(c[l]);if(!isNaN(p)){var d=Boolean(p),y=f[l];y.getVisible()!==d&&y.setVisible(d);}}}}},n.prototype.Op=function(){var t=this.getMap();if(t){var n=t.getView();if(n){var i=this.bp;this.bp=!1;for(var r=n.getCenter(),e=n.getZoom(),o=n.getRotation(),s=t.getAllLayers(),u=new Array(s.length),a=0,h=s.length;a<h;++a){u[a]=s[a].getVisible()?"1":"0";}var f=new URL(window.location.href),c=f.searchParams;this._p(c,"x",tE(r[0])),this._p(c,"y",tE(r[1])),this._p(c,"z",tE(e)),this._p(c,"r",tE(o)),this._p(c,"l",u.join("")),f.href!==window.location.href&&(i||this.wp?window.history.replaceState(null,"",f):window.history.pushState(null,"",f));}}},n;}(Na),rE=function(){var _t179=function t(n,i){return _t179=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t179(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t179(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),eE=[0,0,0,0],oE=[],sE="modifystart",uE="modifyend",aE=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.features=i,e.mapBrowserEvent=r,e;}return rE(n,t),n;}(c),hE=function(t){function n(n){var i,r,e=t.call(this,n)||this;if(e.on,e.once,e.un,e.Ep=e.Za.bind(e),e.Kr=n.condition?n.condition:Ja,e.Tp=function(t){return Da(t)&&Ya(t);},e.Ap=n.deleteCondition?n.deleteCondition:e.Tp,e.Pp=n.insertVertexCondition?n.insertVertexCondition:Xa,e.cp=null,e.Cp=null,e.kp=[0,0],e.Np=!1,e.Ip=null,e.zp=new mp(),e.ap=void 0!==n.pixelTolerance?n.pixelTolerance:10,e.hp=!1,e.Lp=!1,e.Rp=[],e.$v=new Lx({source:new Qp({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.style?n.style:(i=up(),function(t,n){return i.Point;}),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.Fp={Point:e.Gp.bind(e),LineString:e.Dp.bind(e),LinearRing:e.Dp.bind(e),Polygon:e.qp.bind(e),MultiPoint:e.Up.bind(e),MultiLineString:e.Bp.bind(e),MultiPolygon:e.Xp.bind(e),Circle:e.Vp.bind(e),GeometryCollection:e.Wp.bind(e)},e._v=null,e.Yp=null,n.features?r=n.features:n.source&&(e._v=n.source,r=new ct(e._v.getFeatures()),e._v.addEventListener(Xp,e.Kp.bind(e)),e._v.addEventListener(Yp,e.Zp.bind(e))),!r)throw new Error("The modify interaction requires features, a source or a layer");return n.hitDetection&&(e.Yp=n.hitDetection),e.Re=r,e.Re.forEach(e.$p.bind(e)),e.Re.addEventListener(ot,e.Hp.bind(e)),e.Re.addEventListener(st,e.Jp.bind(e)),e.Qp=null,e.Br=[0,0],e.td=void 0===n.snapToPointer?!e.Yp:n.snapToPointer,e;}return rE(n,t),n.prototype.$p=function(t){var n=t.getGeometry();if(n){var i=this.Fp[n.getType()];i&&i(t,n);}var r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.rd(this.kp,r),t.addEventListener(z,this.Ep);},n.prototype.ed=function(t,n){if(!this.Ip){this.Ip=new ct();for(var i=this.Ip.getArray(),r=0,e=n.length;r<e;++r){for(var o=n[r],s=0,u=o.length;s<u;++s){var a=o[s].feature;a&&-1===i.indexOf(a)&&this.Ip.push(a);}}0===this.Ip.getLength()?this.Ip=null:this.dispatchEvent(new aE(sE,this.Ip,t));}},n.prototype.od=function(t){this.sd(t),this.cp&&0===this.Re.getLength()&&(this.$v.getSource().removeFeature(this.cp),this.cp=null),t.removeEventListener(z,this.Ep);},n.prototype.sd=function(t){var n=this.zp,i=[];n.forEach(function(n){t===n.feature&&i.push(n);});for(var r=i.length-1;r>=0;--r){for(var e=i[r],o=this.Rp.length-1;o>=0;--o){this.Rp[o][0]===e&&this.Rp.splice(o,1);}n.remove(e);}},n.prototype.setActive=function(n){this.cp&&!n&&(this.$v.getSource().removeFeature(this.cp),this.cp=null),t.prototype.setActive.call(this,n);},n.prototype.setMap=function(n){this.$v.setMap(n),t.prototype.setMap.call(this,n);},n.prototype.getOverlay=function(){return this.$v;},n.prototype.Kp=function(t){t.feature&&this.Re.push(t.feature);},n.prototype.Zp=function(t){t.feature&&this.Re.remove(t.feature);},n.prototype.Hp=function(t){this.$p(t.element);},n.prototype.Za=function(t){if(!this.Lp){var n=t.target;this.od(n),this.$p(n);}},n.prototype.Jp=function(t){var n=t.element;this.od(n);},n.prototype.Gp=function(t,n){var i=n.getCoordinates(),r={feature:t,geometry:n,segment:[i,i]};this.zp.insert(n.getExtent(),r);},n.prototype.Up=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r){var o=i[r],s={feature:t,geometry:n,depth:[r],index:r,segment:[o,o]};this.zp.insert(n.getExtent(),s);}},n.prototype.Dp=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length-1;r<e;++r){var o=i.slice(r,r+2),s={feature:t,geometry:n,index:r,segment:o};this.zp.insert(bn(o),s);}},n.prototype.Bp=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r){for(var o=i[r],s=0,u=o.length-1;s<u;++s){var a=o.slice(s,s+2),h={feature:t,geometry:n,depth:[r],index:s,segment:a};this.zp.insert(bn(a),h);}}},n.prototype.qp=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r){for(var o=i[r],s=0,u=o.length-1;s<u;++s){var a=o.slice(s,s+2),h={feature:t,geometry:n,depth:[r],index:s,segment:a};this.zp.insert(bn(a),h);}}},n.prototype.Xp=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r){for(var o=i[r],s=0,u=o.length;s<u;++s){for(var a=o[s],h=0,f=a.length-1;h<f;++h){var c=a.slice(h,h+2),l={feature:t,geometry:n,depth:[s,r],index:h,segment:c};this.zp.insert(bn(c),l);}}}},n.prototype.Vp=function(t,n){var i=n.getCenter(),r={feature:t,geometry:n,index:0,segment:[i,i]},e={feature:t,geometry:n,index:1,segment:[i,i]},o=[r,e];r.featureSegments=o,e.featureSegments=o,this.zp.insert(Cn(i),r);var s=n,u=zr();if(u&&this.getMap()){var a=this.getMap().getView().getProjection();s=ro(s=s.clone().transform(u,a)).transform(a,u);}this.zp.insert(s.getExtent(),e);},n.prototype.Wp=function(t,n){for(var i=n.getGeometriesArray(),r=0;r<i.length;++r){var e=i[r];(0,this.Fp[e.getType()])(t,e);}},n.prototype.ud=function(t,n,i){var r=this.cp;r?r.getGeometry().setCoordinates(t):(r=new Ct(new ke(t)),this.cp=r,this.$v.getSource().addFeature(r));return r.set("features",n),r.set("geometries",i),r;},n.prototype.handleEvent=function(n){return!n.originalEvent||(this.Qp=n,n.map.getView().getInteracting()||n.type!=wu.POINTERMOVE||this.handlingDownUpSequence||this.Kn(n),this.cp&&this.Ap(n)&&(i=!(n.type!=wu.SINGLECLICK||!this.Np)||this.removePoint()),n.type==wu.SINGLECLICK&&(this.Np=!1),t.prototype.handleEvent.call(this,n)&&!i);var i;},n.prototype.handleDragEvent=function(t){this.Np=!1,this.ed(t,this.Rp);for(var n=[t.coordinate[0]+this.Br[0],t.coordinate[1]+this.Br[1]],i=[],r=[],e=0,o=this.Rp.length;e<o;++e){var s=this.Rp[e],u=s[0],a=u.feature;-1===i.indexOf(a)&&i.push(a);var h=u.geometry;-1===r.indexOf(h)&&r.push(h);for(var f=u.depth,c=void 0,l=u.segment,v=s[1];n.length<h.getStride();){n.push(l[v][n.length]);}switch(h.getType()){case"Point":c=n,l[0]=n,l[1]=n;break;case"MultiPoint":(c=h.getCoordinates())[u.index]=n,l[0]=n,l[1]=n;break;case"LineString":(c=h.getCoordinates())[u.index+v]=n,l[v]=n;break;case"MultiLineString":case"Polygon":(c=h.getCoordinates())[f[0]][u.index+v]=n,l[v]=n;break;case"MultiPolygon":(c=h.getCoordinates())[f[1]][f[0]][u.index+v]=n,l[v]=n;break;case"Circle":if(l[0]=n,l[1]=n,0===u.index)this.Lp=!0,h.setCenter(n),this.Lp=!1;else{this.Lp=!0;var p=t.map.getView().getProjection(),d=er(Rr(h.getCenter(),p),Rr(n,p)),y=zr();if(y){var m=h.clone().transform(y,p);m.setRadius(d),d=m.transform(p,y).getRadius();}h.setRadius(d),this.Lp=!1;}}c&&this.ad(h,c);}this.ud(n,i,r);},n.prototype.handleDownEvent=function(t){if(!this.Kr(t))return!1;var n=t.coordinate;this.rd(t.pixel,t.map,n),this.Rp.length=0,this.Ip=null;var i=this.cp;if(i){var r=t.map.getView().getProjection(),e=[],s=i.getGeometry().getCoordinates(),u=bn([s]),a=this.zp.getInExtent(u),h={};a.sort(fE);for(var f=0,c=a.length;f<c;++f){var l=a[f],v=l.segment,p=o(l.geometry),d=l.depth;if(d&&(p+="-"+d.join("-")),h[p]||(h[p]=new Array(2)),"Circle"!==l.geometry.getType()||1!==l.index){if(!tr(v[0],s)||h[p][0]){if(!tr(v[1],s)||h[p][1])o(v)in this.Cp&&!h[p][0]&&!h[p][1]&&this.Pp(t)&&e.push(l);else{if(h[p][0]&&0===h[p][0].index){var y=l.geometry.getCoordinates();switch(l.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":y=y[d[1]];case"Polygon":if(l.index!==y[d[0]].length-2)continue;}}this.Rp.push([l,1]),h[p][1]=l;}}else this.Rp.push([l,0]),h[p][0]=l;}else tr(lE(n,l,r),s)&&!h[p][0]&&(this.Rp.push([l,0]),h[p][0]=l);}e.length&&this.ed(t,[e]);for(var m=e.length-1;m>=0;--m){this.hd(e[m],s);}}return!!this.cp;},n.prototype.handleUpEvent=function(t){for(var n=this.Rp.length-1;n>=0;--n){var i=this.Rp[n][0],r=i.geometry;if("Circle"===r.getType()){var e=r.getCenter(),o=i.featureSegments[0],s=i.featureSegments[1];o.segment[0]=e,o.segment[1]=e,s.segment[0]=e,s.segment[1]=e,this.zp.update(Cn(e),o);var u=r,a=zr();if(a){var h=t.map.getView().getProjection();u=ro(u=u.clone().transform(a,h)).transform(h,a);}this.zp.update(u.getExtent(),s);}else this.zp.update(bn(i.segment),i);}return this.Ip&&(this.dispatchEvent(new aE(uE,this.Ip,t)),this.Ip=null),!1;},n.prototype.Kn=function(t){this.kp=t.pixel,this.rd(t.pixel,t.map,t.coordinate);},n.prototype.rd=function(t,n,i){var r,e,s=this,u=i||n.getCoordinateFromPixel(t),a=n.getView().getProjection();if(this.Yp){var h="object"==_typeof(this.Yp)?function(t){return t===s.Yp;}:void 0;n.forEachFeatureAtPixel(t,function(t,n,i){if("Point"===(i=i||t.getGeometry()).getType()&&y(s.Re.getArray(),t)){e=i;var o=i.getFlatCoordinates().slice(0,2);r=[{feature:t,geometry:i,segment:[o,o]}];}return!0;},{layerFilter:h});}if(!r){var f=Fr(xn(Gr(Cn(u,eE),a),n.getView().getResolution()*this.ap,eE),a);r=this.zp.getInExtent(f);}if(r&&r.length>0){var c=r.sort(function(t,n){return cE(u,t,a)-cE(u,n,a);})[0],l=c.segment,v=lE(u,c,a),p=n.getPixelFromCoordinate(v),d=er(t,p);if(e||d<=this.ap){var m={};if(m[o(l)]=!0,this.td||(this.Br[0]=v[0]-u[0],this.Br[1]=v[1]-u[1]),"Circle"===c.geometry.getType()&&1===c.index)this.hp=!0,this.ud(v,[c.feature],[c.geometry]);else{var w=n.getPixelFromCoordinate(l[0]),g=n.getPixelFromCoordinate(l[1]),b=rr(p,w),x=rr(p,g);d=Math.sqrt(Math.min(b,x)),this.hp=d<=this.ap,this.hp&&(v=b>x?l[1]:l[0]),this.ud(v,[c.feature],[c.geometry]);var M={};M[o(c.geometry)]=!0;for(var _=1,S=r.length;_<S;++_){var O=r[_].segment;if(!(tr(l[0],O[0])&&tr(l[1],O[1])||tr(l[0],O[1])&&tr(l[1],O[0])))break;var j=o(r[_].geometry);j in M||(M[j]=!0,m[o(O)]=!0);}}return void(this.Cp=m);}}this.cp&&(this.$v.getSource().removeFeature(this.cp),this.cp=null);},n.prototype.hd=function(t,n){for(var i,r=t.segment,e=t.feature,o=t.geometry,s=t.depth,u=t.index;n.length<o.getStride();){n.push(0);}switch(o.getType()){case"MultiLineString":case"Polygon":(i=o.getCoordinates())[s[0]].splice(u+1,0,n);break;case"MultiPolygon":(i=o.getCoordinates())[s[1]][s[0]].splice(u+1,0,n);break;case"LineString":(i=o.getCoordinates()).splice(u+1,0,n);break;default:return;}this.ad(o,i);var a=this.zp;a.remove(t),this.fd(o,u,s,1);var h={segment:[r[0],n],feature:e,geometry:o,depth:s,index:u};a.insert(bn(h.segment),h),this.Rp.push([h,1]);var f={segment:[n,r[1]],feature:e,geometry:o,depth:s,index:u+1};a.insert(bn(f.segment),f),this.Rp.push([f,0]),this.Np=!0;},n.prototype.removePoint=function(){if(this.Qp&&this.Qp.type!=wu.POINTERDRAG){var t=this.Qp;this.ed(t,this.Rp);var n=this.ld();return this.Ip&&this.dispatchEvent(new aE(uE,this.Ip,t)),this.Ip=null,n;}return!1;},n.prototype.ld=function(){var t,n,i,r,e,s,u,a,h,f,c,l=this.Rp,v={},p=!1;for(e=l.length-1;e>=0;--e){c=o((f=(i=l[e])[0]).feature),f.depth&&(c+="-"+f.depth.join("-")),c in v||(v[c]={}),0===i[1]?(v[c].right=f,v[c].index=f.index):1==i[1]&&(v[c].left=f,v[c].index=f.index+1);}for(c in v){switch(h=v[c].right,u=v[c].left,(a=(s=v[c].index)-1)<0&&(a=0),t=n=(r=(f=void 0!==u?u:h).geometry).getCoordinates(),p=!1,r.getType()){case"MultiLineString":n[f.depth[0]].length>2&&(n[f.depth[0]].splice(s,1),p=!0);break;case"LineString":n.length>2&&(n.splice(s,1),p=!0);break;case"MultiPolygon":t=t[f.depth[1]];case"Polygon":(t=t[f.depth[0]]).length>4&&(s==t.length-1&&(s=0),t.splice(s,1),p=!0,0===s&&(t.pop(),t.push(t[0]),a=t.length-1));}if(p){this.ad(r,n);var d=[];if(void 0!==u&&(this.zp.remove(u),d.push(u.segment[0])),void 0!==h&&(this.zp.remove(h),d.push(h.segment[1])),void 0!==u&&void 0!==h){var y={depth:f.depth,feature:f.feature,geometry:f.geometry,index:a,segment:d};this.zp.insert(bn(y.segment),y);}this.fd(r,s,f.depth,-1),this.cp&&(this.$v.getSource().removeFeature(this.cp),this.cp=null),l.length=0;}}return p;},n.prototype.ad=function(t,n){this.Lp=!0,t.setCoordinates(n),this.Lp=!1;},n.prototype.fd=function(t,n,i,r){this.zp.forEachInExtent(t.getExtent(),function(e){e.geometry===t&&(void 0===i||void 0===e.depth||x(e.depth,i))&&e.index>n&&(e.index+=r);});},n;}(Fa);function fE(t,n){return t.index-n.index;}function cE(t,n,i){var r=n.geometry;if("Circle"===r.getType()){var e=r;if(1===n.index){var o=zr();o&&(e=e.clone().transform(o,i));var s=rr(e.getCenter(),Rr(t,i)),u=Math.sqrt(s)-e.getRadius();return u*u;}}var a=Rr(t,i);return oE[0]=Rr(n.segment[0],i),oE[1]=Rr(n.segment[1],i),or(a,oE);}function lE(t,n,i){var r=n.geometry;if("Circle"===r.getType()&&1===n.index){var e=r,o=zr();return o&&(e=e.clone().transform(o,i)),Lr(e.getClosestPoint(Rr(t,i)),i);}var s=Rr(t,i);return oE[0]=Rr(n.segment[0],i),oE[1]=Rr(n.segment[1],i),Lr(Hi(s,oE),i);}var vE=hE,pE=function(){var _t180=function t(n,i){return _t180=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t180(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t180(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),dE="select",yE=function(t){function n(n,i,r,e){var o=t.call(this,n)||this;return o.selected=i,o.deselected=r,o.mapBrowserEvent=e,o;}return pE(n,t),n;}(c),mE={},wE=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r,e,o=n||{};if(i.vd=i.$p.bind(i),i.dd=i.od.bind(i),i.Kr=o.condition?o.condition:Ya,i.yd=o.addCondition?o.addCondition:Wa,i.md=o.removeCondition?o.removeCondition:Wa,i.wd=o.toggleCondition?o.toggleCondition:Za,i.gd=!!o.multi&&o.multi,i.bd=o.filter?o.filter:S,i.xd=o.hitTolerance?o.hitTolerance:0,i.H=void 0!==o.style?o.style:(g((r=up()).Polygon,r.LineString),g(r.GeometryCollection,r.LineString),function(t){return t.getGeometry()?r[t.getGeometry().getType()]:null;}),i.Re=o.features||new ct(),o.layers){if("function"==typeof o.layers)e=o.layers;else{var s=o.layers;e=function e(t){return y(s,t);};}}else e=S;return i.Md=e,i._d={},i;}return pE(n,t),n.prototype.Sd=function(t,n){this._d[o(t)]=n;},n.prototype.getFeatures=function(){return this.Re;},n.prototype.getHitTolerance=function(){return this.xd;},n.prototype.getLayer=function(t){return this._d[o(t)];},n.prototype.setHitTolerance=function(t){this.xd=t;},n.prototype.setMap=function(n){this.getMap()&&this.H&&this.Re.forEach(this.Od.bind(this)),t.prototype.setMap.call(this,n),n?(this.Re.addEventListener(ot,this.vd),this.Re.addEventListener(st,this.dd),this.H&&this.Re.forEach(this.jd.bind(this))):(this.Re.removeEventListener(ot,this.vd),this.Re.removeEventListener(st,this.dd));},n.prototype.$p=function(t){var n=t.element;if(this.H&&this.jd(n),!this.getLayer(n)){var i=this.getMap().getAllLayers().find(function(t){if(t instanceof Lx&&t.getSource()&&t.getSource().hasFeature(n))return t;});i&&this.Sd(n,i);}},n.prototype.od=function(t){var n=t.element;this.H&&this.Od(n);},n.prototype.getStyle=function(){return this.H;},n.prototype.jd=function(t){var n=o(t);n in mE||(mE[n]=t.getStyle()),t.setStyle(this.H);},n.prototype.Od=function(t){for(var i=this.getMap().getInteractions().getArray(),r=i.length-1;r>=0;--r){var e=i[r];if(e!==this&&e instanceof n&&e.getStyle()&&-1!==e.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(e.getStyle());}var s=o(t);t.setStyle(mE[s]),delete mE[s];},n.prototype.Ed=function(t){delete this._d[o(t)];},n.prototype.handleEvent=function(t){if(!this.Kr(t))return!0;var n=this.yd(t),i=this.md(t),r=this.wd(t),e=!n&&!i&&!r,o=t.map,s=this.getFeatures(),u=[],a=[];if(e){P(this._d),o.forEachFeatureAtPixel(t.pixel,function(t,n){if(this.bd(t,n))return this.Sd(t,n),a.push(t),!this.gd;}.bind(this),{layerFilter:this.Md,hitTolerance:this.xd});for(var h=s.getLength()-1;h>=0;--h){var f=s.item(h),c=a.indexOf(f);c>-1?a.splice(c,1):(s.remove(f),u.push(f));}0!==a.length&&s.extend(a);}else{o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.bd(t,e))return!n&&!r||y(s.getArray(),t)?(i||r)&&y(s.getArray(),t)&&(u.push(t),this.Ed(t)):(this.Sd(t,e),a.push(t)),!this.gd;}.bind(this),{layerFilter:this.Md,hitTolerance:this.xd});for(var l=u.length-1;l>=0;--l){s.remove(u[l]);}s.extend(a);}return(a.length>0||u.length>0)&&this.dispatchEvent(new yE(dE,a,u,t)),!0;},n;}(Na);var gE=wE,bE=function(){var _t181=function t(n,i){return _t181=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t181(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t181(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}();function xE(t){return t.feature?t.feature:t.element?t.element:void 0;}var ME=[],_E=function(t){function n(n){var i=this,r=n||{},e=r;return e.handleDownEvent||(e.handleDownEvent=S),e.stopDown||(e.stopDown=O),(i=t.call(this,e)||this)._v=r.source?r.source:null,i.Td=void 0===r.vertex||r.vertex,i.Ad=void 0===r.edge||r.edge,i.Re=r.features?r.features:null,i.Pd=[],i.Cd={},i.kd={},i.Nd={},i.ap=void 0!==r.pixelTolerance?r.pixelTolerance:10,i.zp=new mp(),i.Id={Point:i.zd.bind(i),LineString:i.Ld.bind(i),LinearRing:i.Ld.bind(i),Polygon:i.Rd.bind(i),MultiPoint:i.Fd.bind(i),MultiLineString:i.Gd.bind(i),MultiPolygon:i.Dd.bind(i),GeometryCollection:i.qd.bind(i),Circle:i.Ud.bind(i)},i;}return bE(n,t),n.prototype.addFeature=function(t,n){var i=void 0===n||n,r=o(t),e=t.getGeometry();if(e){var s=this.Id[e.getType()];if(s){this.kd[r]=e.getExtent([1/0,1/0,-1/0,-1/0]);var u=[];if(s(u,e),1===u.length)this.zp.insert(bn(u[0]),{feature:t,segment:u[0]});else if(u.length>1){var a=u.map(function(t){return bn(t);}),h=u.map(function(n){return{feature:t,segment:n};});this.zp.load(a,h);}}}i&&(this.Cd[r]=Z(t,z,this.Za,this));},n.prototype.Bd=function(t){this.addFeature(t);},n.prototype.Xd=function(t){this.removeFeature(t);},n.prototype.Vd=function(){var t;return this.Re?t=this.Re:this._v&&(t=this._v.getFeatures()),t;},n.prototype.handleEvent=function(n){var i=this.snapTo(n.pixel,n.coordinate,n.map);return i&&(n.coordinate=i.vertex.slice(0,2),n.pixel=i.vertexPixel),t.prototype.handleEvent.call(this,n);},n.prototype.Hp=function(t){var n=xE(t);this.addFeature(n);},n.prototype.Jp=function(t){var n=xE(t);this.removeFeature(n);},n.prototype.Za=function(t){var n=t.target;if(this.handlingDownUpSequence){var i=o(n);i in this.Nd||(this.Nd[i]=n);}else this.Wd(n);},n.prototype.handleUpEvent=function(t){var n=C(this.Nd);return n.length&&(n.forEach(this.Wd.bind(this)),this.Nd={}),!1;},n.prototype.removeFeature=function(t,n){var i=void 0===n||n,r=o(t),e=this.kd[r];if(e){var s=this.zp,u=[];s.forEachInExtent(e,function(n){t===n.feature&&u.push(n);});for(var a=u.length-1;a>=0;--a){s.remove(u[a]);}}i&&(H(this.Cd[r]),delete this.Cd[r]);},n.prototype.setMap=function(n){var i=this.getMap(),r=this.Pd,e=this.Vd();i&&(r.forEach(H),r.length=0,e.forEach(this.Xd.bind(this))),t.prototype.setMap.call(this,n),n&&(this.Re?r.push(Z(this.Re,ot,this.Hp,this),Z(this.Re,st,this.Jp,this)):this._v&&r.push(Z(this._v,Xp,this.Hp,this),Z(this._v,Yp,this.Jp,this)),e.forEach(this.Bd.bind(this)));},n.prototype.snapTo=function(t,n,i){var r=bn([i.getCoordinateFromPixel([t[0]-this.ap,t[1]+this.ap]),i.getCoordinateFromPixel([t[0]+this.ap,t[1]-this.ap])]),e=this.zp.getInExtent(r),o=e.length;if(0===o)return null;var s,u=i.getView().getProjection(),a=Rr(n,u),h=1/0,f=this.ap*this.ap,c=function c(){if(s){var n=i.getPixelFromCoordinate(s);if(rr(t,n)<=f)return{vertex:s,vertexPixel:[Math.round(n[0]),Math.round(n[1])]};}return null;};if(this.Td){for(var l=0;l<o;++l){"Circle"!==(v=e[l]).feature.getGeometry().getType()&&v.segment.forEach(function(t){var n=Rr(t,u),i=rr(a,n);i<h&&(s=t,h=i);});}if(x=c())return x;}if(this.Ad){for(l=0;l<o;++l){var v,p=null;if("Circle"===(v=e[l]).feature.getGeometry().getType()){var d=v.feature.getGeometry(),y=zr();y&&(d=d.clone().transform(y,u)),p=Lr($i(a,d),u);}else{var m=v.segment,w=m[0],g=m[1];g&&(ME[0]=Rr(w,u),ME[1]=Rr(g,u),p=Hi(a,ME));}if(p){var b=rr(a,p);b<h&&(s=p,h=b);}}var x;if(x=c())return x;}return null;},n.prototype.Wd=function(t){this.removeFeature(t,!1),this.addFeature(t,!1);},n.prototype.Ud=function(t,n){var i=this.getMap().getView().getProjection(),r=n,e=zr();e&&(r=r.clone().transform(e,i));var o=ro(r);e&&o.transform(i,e);for(var s=o.getCoordinates()[0],u=0,a=s.length-1;u<a;++u){t.push(s.slice(u,u+2));}},n.prototype.qd=function(t,n){for(var i=n.getGeometriesArray(),r=0;r<i.length;++r){var e=this.Id[i[r].getType()];e&&e(t,i[r]);}},n.prototype.Ld=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length-1;r<e;++r){t.push(i.slice(r,r+2));}},n.prototype.Gd=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r){for(var o=i[r],s=0,u=o.length-1;s<u;++s){t.push(o.slice(s,s+2));}}},n.prototype.Fd=function(t,n){n.getCoordinates().forEach(function(n){t.push([n]);});},n.prototype.Dd=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r){for(var o=i[r],s=0,u=o.length;s<u;++s){for(var a=o[s],h=0,f=a.length-1;h<f;++h){t.push(a.slice(h,h+2));}}}},n.prototype.zd=function(t,n){t.push([n.getCoordinates()]);},n.prototype.Rd=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r){for(var o=i[r],s=0,u=o.length-1;s<u;++s){t.push(o.slice(s,s+2));}}},n;}(Fa),SE=_E,OE=function(){var _t182=function t(n,i){return _t182=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t182(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t182(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),jE="translatestart",EE="translating",TE="translateend",AE=function(t){function n(n,i,r,e,o){var s=t.call(this,n)||this;return s.features=i,s.coordinate=r,s.startCoordinate=e,s.mapBrowserEvent=o,s;}return OE(n,t),n;}(c),PE=function(t){function n(n){var i,r=this,e=n||{};if((r=t.call(this,e)||this).on,r.once,r.un,r.Yd=null,r.Kd=null,r.Re=void 0!==e.features?e.features:null,e.layers&&!r.Re){if("function"==typeof e.layers)i=e.layers;else{var o=e.layers;i=function i(t){return y(o,t);};}}else i=S;return r.Md=i,r.bd=e.filter&&!r.Re?e.filter:S,r.xd=e.hitTolerance?e.hitTolerance:0,r.Kr=e.condition?e.condition:Xa,r.Zd=null,r.addChangeListener(Aa,r.$d),r;}return OE(n,t),n.prototype.handleDownEvent=function(t){if(!t.originalEvent||!this.Kr(t))return!1;if(this.Zd=this.Hd(t.pixel,t.map),!this.Yd&&this.Zd){this.Kd=t.coordinate,this.Yd=t.coordinate,this.handleMoveEvent(t);var n=this.Re||new ct([this.Zd]);return this.dispatchEvent(new AE(jE,n,t.coordinate,this.Kd,t)),!0;}return!1;},n.prototype.handleUpEvent=function(t){if(this.Yd){this.Yd=null,this.handleMoveEvent(t);var n=this.Re||new ct([this.Zd]);return this.dispatchEvent(new AE(TE,n,t.coordinate,this.Kd,t)),this.Kd=null,!0;}return!1;},n.prototype.handleDragEvent=function(t){if(this.Yd){var n=t.coordinate,i=n[0]-this.Yd[0],r=n[1]-this.Yd[1],e=this.Re||new ct([this.Zd]);e.forEach(function(t){var n=t.getGeometry();n.translate(i,r),t.setGeometry(n);}),this.Yd=n,this.dispatchEvent(new AE(EE,e,n,this.Kd,t));}},n.prototype.handleMoveEvent=function(t){var n=t.map.getViewport();this.Hd(t.pixel,t.map)?(n.classList.remove(this.Yd?"ol-grab":"ol-grabbing"),n.classList.add(this.Yd?"ol-grabbing":"ol-grab")):n.classList.remove("ol-grab","ol-grabbing");},n.prototype.Hd=function(t,n){return n.forEachFeatureAtPixel(t,function(t,n){if(this.bd(t,n)&&(!this.Re||y(this.Re.getArray(),t)))return t;}.bind(this),{layerFilter:this.Md,hitTolerance:this.xd});},n.prototype.getHitTolerance=function(){return this.xd;},n.prototype.setHitTolerance=function(t){this.xd=t;},n.prototype.setMap=function(n){var i=this.getMap();t.prototype.setMap.call(this,n),this.Jv(i);},n.prototype.$d=function(){this.Jv(null);},n.prototype.Jv=function(t){var n=this.getMap(),i=this.getActive();n&&i||(n=n||t)&&n.getViewport().classList.remove("ol-grab","ol-grabbing");},n;}(Fa);function CE(t,n,i,r,e,o){var s,u;void 0!==e?(s=e,u=void 0!==o?o:0):(s=[],u=0);for(var a=n;a<i;){var h=t[a++];s[u++]=t[a++],s[u++]=h;for(var f=2;f<r;++f){s[u++]=t[a++];}}return s.length=u,s;}var kE=function(){var _t183=function t(n,i){return _t183=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t183(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t183(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),NE={Point:function Point(t){var n;n=void 0!==t.m&&void 0!==t.z?new ke([t.x,t.y,t.z,t.m],zt):void 0!==t.z?new ke([t.x,t.y,t.z],Nt):void 0!==t.m?new ke([t.x,t.y,t.m],It):new ke([t.x,t.y]);return n;},LineString:function LineString(t){var n=LE(t);return new _x(t.paths[0],n);},Polygon:function Polygon(t){var n=LE(t);return new to(t.rings,n);},MultiPoint:function MultiPoint(t){var n=LE(t);return new mx(t.points,n);},MultiLineString:function MultiLineString(t){var n=LE(t);return new jx(t.paths,n);},MultiPolygon:function MultiPolygon(t){var n=LE(t);return new Px(t.rings,n);}},IE={Point:function Point(t,n){var i,r=t.getCoordinates(),e=t.getLayout();e===Nt?i={x:r[0],y:r[1],z:r[2]}:e===It?i={x:r[0],y:r[1],m:r[2]}:e===zt?i={x:r[0],y:r[1],z:r[2],m:r[3]}:e===kt?i={x:r[0],y:r[1]}:Et(!1,34);return i;},LineString:function LineString(t,n){var i=RE(t);return{hasZ:i.hasZ,hasM:i.hasM,paths:[t.getCoordinates()]};},Polygon:function Polygon(t,n){var i=RE(t);return{hasZ:i.hasZ,hasM:i.hasM,rings:t.getCoordinates(!1)};},MultiPoint:function MultiPoint(t,n){var i=RE(t);return{hasZ:i.hasZ,hasM:i.hasM,points:t.getCoordinates()};},MultiLineString:function MultiLineString(t,n){var i=RE(t);return{hasZ:i.hasZ,hasM:i.hasM,paths:t.getCoordinates()};},MultiPolygon:function MultiPolygon(t,n){for(var i=RE(t),r=t.getCoordinates(!1),e=[],o=0;o<r.length;o++){for(var s=r[o].length-1;s>=0;s--){e.push(r[o][s]);}}return{hasZ:i.hasZ,hasM:i.hasM,rings:e};}};function zE(t,n){var i,r,e;if(!t)return null;if("number"==typeof t.x&&"number"==typeof t.y)e="Point";else if(t.points)e="MultiPoint";else if(t.paths){e=1===t.paths.length?"LineString":"MultiLineString";}else if(t.rings){var o=t,s=LE(o),u=function(t,n){var i,r,e=[],o=[],s=[];for(i=0,r=t.length;i<r;++i){e.length=0,ce(e,0,t[i],n.length),We(e,0,e.length,n.length)?o.push([t[i]]):s.push(t[i]);}for(;s.length;){var u=s.shift(),a=!1;for(i=o.length-1;i>=0;i--){var h=o[i][0];if(On(new Ae(h).getExtent(),new Ae(u).getExtent())){o[i].push(u),a=!0;break;}}a||o.push([u.reverse()]);}return o;}(o.rings,s);1===u.length?(e="Polygon",t=A({},t,((i={}).rings=u[0],i))):(e="MultiPolygon",t=A({},t,((r={}).rings=u,r)));}return Qx((0,NE[e])(t),!1,n);}function LE(t){var n=kt;return!0===t.hasZ&&!0===t.hasM?n=zt:!0===t.hasZ?n=Nt:!0===t.hasM&&(n=It),n;}function RE(t){var n=t.getLayout();return{hasZ:n===Nt||n===zt,hasM:n===It||n===zt};}function FE(t,n){return(0,IE[t.getType()])(Qx(t,!0,n),n);}var GE=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this)||this).$=r.geometryName,i;}return kE(n,t),n.prototype.readFeatureFromObject=function(t,n,i){var r=t,e=zE(r.geometry,n),o=new Ct();if(this.$&&o.setGeometryName(this.$),o.setGeometry(e),r.attributes){o.setProperties(r.attributes,!0);var s=r.attributes[i];void 0!==s&&o.setId(s);}return o;},n.prototype.readFeaturesFromObject=function(t,n){var i=n||{};if(t.features){for(var r=[],e=t.features,o=0,s=e.length;o<s;++o){r.push(this.readFeatureFromObject(e[o],i,t.objectIdFieldName));}return r;}return[this.readFeatureFromObject(t,i)];},n.prototype.readGeometryFromObject=function(t,n){return zE(t,n);},n.prototype.readProjectionFromObject=function(t){return t.spatialReference&&void 0!==t.spatialReference.wkid?br("EPSG:"+t.spatialReference.wkid):null;},n.prototype.writeGeometryObject=function(t,n){return FE(t,this.adaptOptions(n));},n.prototype.writeFeatureObject=function(t,n){n=this.adaptOptions(n);var i={};if(!t.hasProperties())return i.attributes={},i;var r=t.getProperties(),e=t.getGeometry();if(e){i.geometry=FE(e,n);var o=n&&(n.dataProjection||n.featureProjection);o&&(i.geometry.spatialReference={wkid:Number(br(o).getCode().split(":").pop())}),delete r[t.getGeometryName()];}return k(r)?i.attributes={}:i.attributes=r,i;},n.prototype.writeFeaturesObject=function(t,n){n=this.adaptOptions(n);for(var i=[],r=0,e=t.length;r<e;++r){i.push(this.writeFeatureObject(t[r],n));}return{features:i};},n;}(dM),DE=function(){var _t184=function t(n,i){return _t184=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t184(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t184(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),qE=function(t){function n(){var n=t.call(this)||this;return n.Jd=Fc(),n;}return DE(n,t),n.prototype.getType=function(){return"xml";},n.prototype.readFeature=function(t,n){if(t){if("string"==typeof t){var i=xc(t);return this.readFeatureFromDocument(i,n);}return gc(t)?this.readFeatureFromDocument(t,n):this.readFeatureFromNode(t,n);}return null;},n.prototype.readFeatureFromDocument=function(t,n){var i=this.readFeaturesFromDocument(t,n);return i.length>0?i[0]:null;},n.prototype.readFeatureFromNode=function(t,n){return null;},n.prototype.readFeatures=function(t,n){if(t){if("string"==typeof t){var i=xc(t);return this.readFeaturesFromDocument(i,n);}return gc(t)?this.readFeaturesFromDocument(t,n):this.readFeaturesFromNode(t,n);}return[];},n.prototype.readFeaturesFromDocument=function(t,n){for(var i=[],r=t.firstChild;r;r=r.nextSibling){r.nodeType==Node.ELEMENT_NODE&&g(i,this.readFeaturesFromNode(r,n));}return i;},n.prototype.readFeaturesFromNode=function(t,n){return r();},n.prototype.readGeometry=function(t,n){if(t){if("string"==typeof t){var i=xc(t);return this.readGeometryFromDocument(i,n);}return gc(t)?this.readGeometryFromDocument(t,n):this.readGeometryFromNode(t,n);}return null;},n.prototype.readGeometryFromDocument=function(t,n){return null;},n.prototype.readGeometryFromNode=function(t,n){return null;},n.prototype.readProjection=function(t){if(t){if("string"==typeof t){var n=xc(t);return this.readProjectionFromDocument(n);}return gc(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t);}return null;},n.prototype.readProjectionFromDocument=function(t){return this.dataProjection;},n.prototype.readProjectionFromNode=function(t){return this.dataProjection;},n.prototype.writeFeature=function(t,n){var i=this.writeFeatureNode(t,n);return this.Jd.serializeToString(i);},n.prototype.writeFeatureNode=function(t,n){return null;},n.prototype.writeFeatures=function(t,n){var i=this.writeFeaturesNode(t,n);return this.Jd.serializeToString(i);},n.prototype.writeFeaturesNode=function(t,n){return null;},n.prototype.writeGeometry=function(t,n){var i=this.writeGeometryNode(t,n);return this.Jd.serializeToString(i);},n.prototype.writeGeometryNode=function(t,n){return null;},n;}(Jx),UE=function(){var _t185=function t(n,i){return _t185=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t185(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t185(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),BE="http://www.opengis.net/gml",XE=/^[\s\xa0]*$/,VE=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.featureType=r.featureType,i.featureNS=r.featureNS,i.srsName=r.srsName,i.schemaLocation="",i.FEATURE_COLLECTION_PARSERS={},i.FEATURE_COLLECTION_PARSERS[i.namespace]={featureMember:_c(i.readFeaturesInternal),featureMembers:Sc(i.readFeaturesInternal)},i.supportedMediaTypes=["application/gml+xml"],i;}return UE(n,t),n.prototype.readFeaturesInternal=function(t,n){var i=t.localName,r=null;if("FeatureCollection"==i)r=Ic([],this.FEATURE_COLLECTION_PARSERS,t,n,this);else if("featureMembers"==i||"featureMember"==i||"member"==i){var e=n[0],o=e.featureType,s=e.featureNS;if(!o&&t.childNodes){o=[],s={};for(var u=0,a=t.childNodes.length;u<a;++u){var h=t.childNodes[u];if(1===h.nodeType){var f=h.nodeName.split(":").pop();if(-1===o.indexOf(f)){var c="",l=0,v=h.namespaceURI;for(var p in s){if(s[p]===v){c=p;break;}++l;}c||(s[c="p"+l]=v),o.push(c+":"+f);}}}"featureMember"!=i&&(e.featureType=o,e.featureNS=s);}if("string"==typeof s){var d=s;(s={}).p0=d;}var y={},m=Array.isArray(o)?o:[o];for(var w in s){var g={};for(u=0,a=m.length;u<a;++u){(-1===m[u].indexOf(":")?"p0":m[u].split(":")[0])===w&&(g[m[u].split(":").pop()]="featureMembers"==i?_c(this.readFeatureElement,this):Sc(this.readFeatureElement,this));}y[s[w]]=g;}r=Ic("featureMember"==i||"member"==i?void 0:[],y,t,n);}return null===r&&(r=[]),r;},n.prototype.readGeometryOrExtent=function(t,n){var i=n[0];return i.srsName=t.firstElementChild.getAttribute("srsName"),i.srsDimension=t.firstElementChild.getAttribute("srsDimension"),Ic(null,this.GEOMETRY_PARSERS,t,n,this);},n.prototype.readExtentElement=function(t,n){var i=n[0],r=this.readGeometryOrExtent(t,n);return r?tM(r,i):void 0;},n.prototype.readGeometryElement=function(t,n){var i=n[0],r=this.readGeometryOrExtent(t,n);return r?Qx(r,!1,i):void 0;},n.prototype.readFeatureElementInternal=function(t,n,i){for(var r,e={},o=t.firstElementChild;o;o=o.nextElementSibling){var s=void 0,u=o.localName;0===o.childNodes.length||1===o.childNodes.length&&(3===o.firstChild.nodeType||4===o.firstChild.nodeType)?(s=mc(o,!1),XE.test(s)&&(s=void 0)):(i&&(s="boundedBy"===u?this.readExtentElement(o,n):this.readGeometryElement(o,n)),s?"boundedBy"!==u&&(r=u):s=this.readFeatureElementInternal(o,n,!1));var a=o.attributes.length;if(a>0){s={Qd:s};for(var h=0;h<a;h++){s[o.attributes[h].name]=o.attributes[h].value;}}e[u]?(e[u]instanceof Array||(e[u]=[e[u]]),e[u].push(s)):e[u]=s;}if(i){var f=new Ct(e);r&&f.setGeometryName(r);var c=t.getAttribute("fid")||bc(t,this.namespace,"id");return c&&f.setId(c),f;}return e;},n.prototype.readFeatureElement=function(t,n){return this.readFeatureElementInternal(t,n,!0);},n.prototype.readPoint=function(t,n){var i=this.readFlatCoordinatesFromNode(t,n);if(i)return new ke(i,Nt);},n.prototype.readMultiPoint=function(t,n){var i=Ic([],this.MULTIPOINT_PARSERS,t,n,this);return i?new mx(i):void 0;},n.prototype.readMultiLineString=function(t,n){var i=Ic([],this.MULTILINESTRING_PARSERS,t,n,this);if(i)return new jx(i);},n.prototype.readMultiPolygon=function(t,n){var i=Ic([],this.MULTIPOLYGON_PARSERS,t,n,this);if(i)return new Px(i);},n.prototype.pointMemberParser=function(t,n){Nc(this.POINTMEMBER_PARSERS,t,n,this);},n.prototype.lineStringMemberParser=function(t,n){Nc(this.LINESTRINGMEMBER_PARSERS,t,n,this);},n.prototype.polygonMemberParser=function(t,n){Nc(this.POLYGONMEMBER_PARSERS,t,n,this);},n.prototype.readLineString=function(t,n){var i=this.readFlatCoordinatesFromNode(t,n);return i?new _x(i,Nt):void 0;},n.prototype.readFlatLinearRing=function(t,n){var i=Ic(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this);return i||void 0;},n.prototype.readLinearRing=function(t,n){var i=this.readFlatCoordinatesFromNode(t,n);if(i)return new Ae(i,Nt);},n.prototype.readPolygon=function(t,n){var i=Ic([null],this.FLAT_LINEAR_RINGS_PARSERS,t,n,this);if(i&&i[0]){var r,e=i[0],o=[e.length],s=void 0;for(s=1,r=i.length;s<r;++s){g(e,i[s]),o.push(e.length);}return new to(e,Nt,o);}},n.prototype.readFlatCoordinatesFromNode=function(t,n){return Ic(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this);},n.prototype.readGeometryFromNode=function(t,n){var i=this.readGeometryElement(t,[this.getReadOptions(t,n||{})]);return i||null;},n.prototype.readFeaturesFromNode=function(t,n){var i={featureType:this.featureType,featureNS:this.featureNS};return n&&A(i,this.getReadOptions(t,n)),this.readFeaturesInternal(t,[i])||[];},n.prototype.readProjectionFromNode=function(t){return br(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"));},n;}(qE);VE.prototype.namespace=BE,VE.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},VE.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},VE.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},VE.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:_c(VE.prototype.pointMemberParser),pointMembers:_c(VE.prototype.pointMemberParser)}},VE.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:_c(VE.prototype.lineStringMemberParser),lineStringMembers:_c(VE.prototype.lineStringMemberParser)}},VE.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:_c(VE.prototype.polygonMemberParser),polygonMembers:_c(VE.prototype.polygonMemberParser)}},VE.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:_c(VE.prototype.readFlatCoordinatesFromNode)}},VE.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:_c(VE.prototype.readLineString)}},VE.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:_c(VE.prototype.readPolygon)}},VE.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Sc(VE.prototype.readFlatLinearRing)}};var WE=VE;function YE(t){return KE(mc(t,!1));}function KE(t){var n=/^\s*(true|1)|(false|0)\s*$/.exec(t);return n?void 0!==n[1]||!1:void 0;}function ZE(t){var n=mc(t,!1),i=Date.parse(n);return isNaN(i)?void 0:i/1e3;}function $E(t){return HE(mc(t,!1));}function HE(t){var n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return n?parseFloat(n[1]):void 0;}function JE(t){return QE(mc(t,!1));}function QE(t){var n=/^\s*(\d+)\s*$/.exec(t);return n?parseInt(n[1],10):void 0;}function tT(t){return mc(t,!1).trim();}function nT(t,n){sT(t,n?"1":"0");}function iT(t,n){t.appendChild(Dc().createCDATASection(n));}function rT(t,n){var i=new Date(1e3*n),r=i.getUTCFullYear()+"-"+Yi(i.getUTCMonth()+1,2)+"-"+Yi(i.getUTCDate(),2)+"T"+Yi(i.getUTCHours(),2)+":"+Yi(i.getUTCMinutes(),2)+":"+Yi(i.getUTCSeconds(),2)+"Z";t.appendChild(Dc().createTextNode(r));}function eT(t,n){var i=n.toPrecision();t.appendChild(Dc().createTextNode(i));}function oT(t,n){var i=n.toString();t.appendChild(Dc().createTextNode(i));}function sT(t,n){t.appendChild(Dc().createTextNode(n));}var uT=function(){var _t186=function t(n,i){return _t186=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t186(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t186(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),aT={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},hT=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).FEATURE_COLLECTION_PARSERS[BE].featureMember=_c(i.readFeaturesInternal),i.schemaLocation=r.schemaLocation?r.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",i;}return uT(n,t),n.prototype.readFlatCoordinates=function(t,n){var i=mc(t,!1).replace(/^\s*|\s*$/g,""),r=n[0].srsName,e="enu";if(r){var o=br(r);o&&(e=o.getAxisOrientation());}for(var s=i.trim().split(/\s+/),u=[],a=0,h=s.length;a<h;a++){var f=s[a].split(/,+/),c=parseFloat(f[0]),l=parseFloat(f[1]),v=3===f.length?parseFloat(f[2]):0;"en"===e.substr(0,2)?u.push(c,l,v):u.push(l,c,v);}return u;},n.prototype.readBox=function(t,n){var i=Ic([null],this.ty,t,n,this);return An(i[1][0],i[1][1],i[1][3],i[1][4]);},n.prototype.innerBoundaryIsParser=function(t,n){var i=Ic(void 0,this.RING_PARSERS,t,n,this);i&&n[n.length-1].push(i);},n.prototype.outerBoundaryIsParser=function(t,n){var i=Ic(void 0,this.RING_PARSERS,t,n,this);i&&(n[n.length-1][0]=i);},n.prototype.ny=function(t,n,i){var r,e=n[n.length-1],o=e.multiSurface,s=e.surface,u=e.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===s?r="Surface":"MultiLineString"===r&&!0===u&&(r="MultiCurve"),yc("http://www.opengis.net/gml",r);},n.prototype.writeFeatureElement=function(t,n,i){var r=n.getId();r&&t.setAttribute("fid",r);var e=i[i.length-1],o=e.featureNS,s=n.getGeometryName();e.serializers||(e.serializers={},e.serializers[o]={});var u=[],a=[];if(n.hasProperties()){var h=n.getProperties();for(var f in h){var c=h[f];null!==c&&(u.push(f),a.push(c),f==s||"function"==typeof c.getSimplifiedGeometry?f in e.serializers[o]||(e.serializers[o][f]=Ec(this.writeGeometryElement,this)):f in e.serializers[o]||(e.serializers[o][f]=Ec(sT)));}}var l=A({},e);l.node=t,Lc(l,e.serializers,Ac(void 0,o),a,i,u);},n.prototype.writeCurveOrLineString=function(t,n,i){var r=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var e=this.iy(t.namespaceURI);t.appendChild(e),this.ey(e,n,i);}else if("Curve"===t.nodeName){var o=yc(t.namespaceURI,"segments");t.appendChild(o),this.oy(o,n,i);}},n.prototype.writeLineStringOrCurveMember=function(t,n,i){var r=this.ny(n,i);r&&(t.appendChild(r),this.writeCurveOrLineString(r,n,i));},n.prototype.writeMultiCurveOrLineString=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName,s=r.curve;o&&t.setAttribute("srsName",o);var u=n.getLineStrings();Lc({node:t,hasZ:e,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.sy,u,i,void 0,this);},n.prototype.writeGeometryElement=function(t,n,i){var r,e=i[i.length-1],o=A({},e);o.node=t,r=Array.isArray(n)?tM(n,e):Qx(n,!0,e),Lc(o,this.GEOMETRY_SERIALIZERS,this.ny,[r],i,void 0,this);},n.prototype.iy=function(t){var n=yc(t,"coordinates");return n.setAttribute("decimal","."),n.setAttribute("cs",","),n.setAttribute("ts"," "),n;},n.prototype.ey=function(t,n,i){for(var r=i[i.length-1],e=r.hasZ,o=r.srsName,s=n.getCoordinates(),u=s.length,a=new Array(u),h=0;h<u;++h){var f=s[h];a[h]=this.uy(f,o,e);}sT(t,a.join(" "));},n.prototype.oy=function(t,n,i){var r=yc(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString(r,n,i);},n.prototype.writeSurfaceOrPolygon=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var s=n.getLinearRings();Lc({node:t,hasZ:e,srsName:o},this.RING_SERIALIZERS,this.hy,s,i,void 0,this);}else if("Surface"===t.nodeName){var u=yc(t.namespaceURI,"patches");t.appendChild(u),this.ly(u,n,i);}},n.prototype.hy=function(t,n,i){var r=n[n.length-1],e=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),yc(e.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs");},n.prototype.ly=function(t,n,i){var r=yc(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon(r,n,i);},n.prototype.writeRing=function(t,n,i){var r=yc(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing(r,n,i);},n.prototype.uy=function(t,n,i){var r="enu";n&&(r=br(n).getAxisOrientation());var e="en"===r.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];i&&(e+=","+(t[2]||0));return e;},n.prototype.writePoint=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var s=this.iy(t.namespaceURI);t.appendChild(s);var u=n.getCoordinates();sT(s,this.uy(u,o,e));},n.prototype.writeMultiPoint=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var s=n.getPoints();Lc({node:t,hasZ:e,srsName:o},this.POINTMEMBER_SERIALIZERS,Ac("pointMember"),s,i,void 0,this);},n.prototype.writePointMember=function(t,n,i){var r=yc(t.namespaceURI,"Point");t.appendChild(r),this.writePoint(r,n,i);},n.prototype.writeLinearRing=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=this.iy(t.namespaceURI);t.appendChild(e),this.ey(e,n,i);},n.prototype.writeMultiSurfaceOrPolygon=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName,s=r.surface;o&&t.setAttribute("srsName",o);var u=n.getPolygons();Lc({node:t,hasZ:e,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.sy,u,i,void 0,this);},n.prototype.writeSurfaceOrPolygonMember=function(t,n,i){var r=this.ny(n,i);r&&(t.appendChild(r),this.writeSurfaceOrPolygon(r,n,i));},n.prototype.writeEnvelope=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=[n[0]+" "+n[1],n[2]+" "+n[3]];Lc({node:t},this.ENVELOPE_SERIALIZERS,Pc,e,i,["lowerCorner","upperCorner"],this);},n.prototype.sy=function(t,n,i){var r=n[n.length-1].node;return yc("http://www.opengis.net/gml",aT[r.nodeName]);},n;}(WE);hT.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:Sc(hT.prototype.readFlatCoordinates)}},hT.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:hT.prototype.innerBoundaryIsParser,outerBoundaryIs:hT.prototype.outerBoundaryIsParser}},hT.prototype.ty={"http://www.opengis.net/gml":{coordinates:_c(hT.prototype.readFlatCoordinates)}},hT.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Sc(WE.prototype.readPoint),MultiPoint:Sc(WE.prototype.readMultiPoint),LineString:Sc(WE.prototype.readLineString),MultiLineString:Sc(WE.prototype.readMultiLineString),LinearRing:Sc(WE.prototype.readLinearRing),Polygon:Sc(WE.prototype.readPolygon),MultiPolygon:Sc(WE.prototype.readMultiPolygon),Box:Sc(hT.prototype.readBox)}},hT.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Ec(hT.prototype.writeCurveOrLineString),MultiCurve:Ec(hT.prototype.writeMultiCurveOrLineString),Point:Ec(hT.prototype.writePoint),MultiPoint:Ec(hT.prototype.writeMultiPoint),LineString:Ec(hT.prototype.writeCurveOrLineString),MultiLineString:Ec(hT.prototype.writeMultiCurveOrLineString),LinearRing:Ec(hT.prototype.writeLinearRing),Polygon:Ec(hT.prototype.writeSurfaceOrPolygon),MultiPolygon:Ec(hT.prototype.writeMultiSurfaceOrPolygon),Surface:Ec(hT.prototype.writeSurfaceOrPolygon),MultiSurface:Ec(hT.prototype.writeMultiSurfaceOrPolygon),Envelope:Ec(hT.prototype.writeEnvelope)}},hT.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Ec(hT.prototype.writeLineStringOrCurveMember),curveMember:Ec(hT.prototype.writeLineStringOrCurveMember)}},hT.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:Ec(hT.prototype.writeRing),innerBoundaryIs:Ec(hT.prototype.writeRing)}},hT.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Ec(hT.prototype.writePointMember)}},hT.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Ec(hT.prototype.writeSurfaceOrPolygonMember),polygonMember:Ec(hT.prototype.writeSurfaceOrPolygonMember)}},hT.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Ec(sT),upperCorner:Ec(sT)}};var fT=hT,cT=function(){var _t187=function t(n,i){return _t187=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t187(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t187(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),lT={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},vT=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).vy=void 0!==r.surface&&r.surface,i.py=void 0!==r.curve&&r.curve,i.yy=void 0===r.multiCurve||r.multiCurve,i.my=void 0===r.multiSurface||r.multiSurface,i.schemaLocation=r.schemaLocation?r.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",i.hasZ=void 0!==r.hasZ&&r.hasZ,i;}return cT(n,t),n.prototype.readMultiCurve=function(t,n){var i=Ic([],this.MULTICURVE_PARSERS,t,n,this);return i?new jx(i):void 0;},n.prototype.readFlatCurveRing=function(t,n){for(var i=Ic([],this.MULTICURVE_PARSERS,t,n,this),r=[],e=0,o=i.length;e<o;++e){g(r,i[e].getFlatCoordinates());}return r;},n.prototype.readMultiSurface=function(t,n){var i=Ic([],this.MULTISURFACE_PARSERS,t,n,this);if(i)return new Px(i);},n.prototype.curveMemberParser=function(t,n){Nc(this.CURVEMEMBER_PARSERS,t,n,this);},n.prototype.surfaceMemberParser=function(t,n){Nc(this.SURFACEMEMBER_PARSERS,t,n,this);},n.prototype.readPatch=function(t,n){return Ic([null],this.PATCHES_PARSERS,t,n,this);},n.prototype.readSegment=function(t,n){return Ic([],this.SEGMENTS_PARSERS,t,n,this);},n.prototype.readPolygonPatch=function(t,n){return Ic([null],this.FLAT_LINEAR_RINGS_PARSERS,t,n,this);},n.prototype.readLineStringSegment=function(t,n){return Ic([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this);},n.prototype.interiorParser=function(t,n){var i=Ic(void 0,this.RING_PARSERS,t,n,this);i&&n[n.length-1].push(i);},n.prototype.exteriorParser=function(t,n){var i=Ic(void 0,this.RING_PARSERS,t,n,this);i&&(n[n.length-1][0]=i);},n.prototype.readSurface=function(t,n){var i=Ic([null],this.SURFACE_PARSERS,t,n,this);if(i&&i[0]){var r,e=i[0],o=[e.length],s=void 0;for(s=1,r=i.length;s<r;++s){g(e,i[s]),o.push(e.length);}return new to(e,Nt,o);}},n.prototype.readCurve=function(t,n){var i=Ic([null],this.CURVE_PARSERS,t,n,this);return i?new _x(i,Nt):void 0;},n.prototype.readEnvelope=function(t,n){var i=Ic([null],this.ENVELOPE_PARSERS,t,n,this);return An(i[1][0],i[1][1],i[2][0],i[2][1]);},n.prototype.readFlatPos=function(t,n){for(var i,r=mc(t,!1),e=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];i=e.exec(r);){o.push(parseFloat(i[1])),r=r.substr(i[0].length);}if(""===r){var s=n[0].srsName,u="enu";if(s)u=br(s).getAxisOrientation();if("neu"===u){var a,h=void 0;for(h=0,a=o.length;h<a;h+=3){var f=o[h],c=o[h+1];o[h]=c,o[h+1]=f;}}var l=o.length;if(2==l&&o.push(0),0!==l)return o;}},n.prototype.readFlatPosList=function(t,n){var i=mc(t,!1).replace(/^\s*|\s*$/g,""),r=n[0],e=r.srsName,o=r.srsDimension,s="enu";e&&(s=br(e).getAxisOrientation());var u,a,h,f=i.split(/\s+/),c=2;t.getAttribute("srsDimension")?c=QE(t.getAttribute("srsDimension")):t.getAttribute("dimension")?c=QE(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?c=QE(t.parentNode.getAttribute("srsDimension")):o&&(c=QE(o));for(var l=[],v=0,p=f.length;v<p;v+=c){u=parseFloat(f[v]),a=parseFloat(f[v+1]),h=3===c?parseFloat(f[v+2]):0,"en"===s.substr(0,2)?l.push(u,a,h):l.push(a,u,h);}return l;},n.prototype.wy=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=e?"3":"2";t.setAttribute("srsDimension",o);var s=r.srsName,u="enu";s&&(u=br(s).getAxisOrientation());var a,h=n.getCoordinates();(a="en"===u.substr(0,2)?h[0]+" "+h[1]:h[1]+" "+h[0],e)&&(a+=" "+(h[2]||0));sT(t,a);},n.prototype.uy=function(t,n,i){var r="enu";n&&(r=br(n).getAxisOrientation());var e="en"===r.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];i&&(e+=" "+(t[2]||0));return e;},n.prototype.gy=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=e?"3":"2";t.setAttribute("srsDimension",o);for(var s,u=r.srsName,a=n.getCoordinates(),h=a.length,f=new Array(h),c=0;c<h;++c){s=a[c],f[c]=this.uy(s,u,e);}sT(t,f.join(" "));},n.prototype.writePoint=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=yc(t.namespaceURI,"pos");t.appendChild(e),this.wy(e,n,i);},n.prototype.writeEnvelope=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=[n[0]+" "+n[1],n[2]+" "+n[3]];Lc({node:t},this.ENVELOPE_SERIALIZERS,Pc,e,i,["lowerCorner","upperCorner"],this);},n.prototype.writeLinearRing=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=yc(t.namespaceURI,"posList");t.appendChild(e),this.gy(e,n,i);},n.prototype.hy=function(t,n,i){var r=n[n.length-1],e=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),yc(e.namespaceURI,void 0!==o?"interior":"exterior");},n.prototype.writeSurfaceOrPolygon=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var s=n.getLinearRings();Lc({node:t,hasZ:e,srsName:o},this.RING_SERIALIZERS,this.hy,s,i,void 0,this);}else if("Surface"===t.nodeName){var u=yc(t.namespaceURI,"patches");t.appendChild(u),this.ly(u,n,i);}},n.prototype.writeCurveOrLineString=function(t,n,i){var r=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var e=yc(t.namespaceURI,"posList");t.appendChild(e),this.gy(e,n,i);}else if("Curve"===t.nodeName){var o=yc(t.namespaceURI,"segments");t.appendChild(o),this.oy(o,n,i);}},n.prototype.writeMultiSurfaceOrPolygon=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName,s=r.surface;o&&t.setAttribute("srsName",o);var u=n.getPolygons();Lc({node:t,hasZ:e,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.sy,u,i,void 0,this);},n.prototype.writeMultiPoint=function(t,n,i){var r=i[i.length-1],e=r.srsName,o=r.hasZ;e&&t.setAttribute("srsName",e);var s=n.getPoints();Lc({node:t,hasZ:o,srsName:e},this.POINTMEMBER_SERIALIZERS,Ac("pointMember"),s,i,void 0,this);},n.prototype.writeMultiCurveOrLineString=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName,s=r.curve;o&&t.setAttribute("srsName",o);var u=n.getLineStrings();Lc({node:t,hasZ:e,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.sy,u,i,void 0,this);},n.prototype.writeRing=function(t,n,i){var r=yc(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing(r,n,i);},n.prototype.writeSurfaceOrPolygonMember=function(t,n,i){var r=this.ny(n,i);r&&(t.appendChild(r),this.writeSurfaceOrPolygon(r,n,i));},n.prototype.writePointMember=function(t,n,i){var r=yc(t.namespaceURI,"Point");t.appendChild(r),this.writePoint(r,n,i);},n.prototype.writeLineStringOrCurveMember=function(t,n,i){var r=this.ny(n,i);r&&(t.appendChild(r),this.writeCurveOrLineString(r,n,i));},n.prototype.ly=function(t,n,i){var r=yc(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon(r,n,i);},n.prototype.oy=function(t,n,i){var r=yc(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString(r,n,i);},n.prototype.writeGeometryElement=function(t,n,i){var r,e=i[i.length-1],o=A({},e);o.node=t,r=Array.isArray(n)?tM(n,e):Qx(n,!0,e),Lc(o,this.GEOMETRY_SERIALIZERS,this.ny,[r],i,void 0,this);},n.prototype.writeFeatureElement=function(t,n,i){var r=n.getId();r&&t.setAttribute("fid",r);var e=i[i.length-1],o=e.featureNS,s=n.getGeometryName();e.serializers||(e.serializers={},e.serializers[o]={});var u=[],a=[];if(n.hasProperties()){var h=n.getProperties();for(var f in h){var c=h[f];null!==c&&(u.push(f),a.push(c),f==s||"function"==typeof c.getSimplifiedGeometry?f in e.serializers[o]||(e.serializers[o][f]=Ec(this.writeGeometryElement,this)):f in e.serializers[o]||(e.serializers[o][f]=Ec(sT)));}}var l=A({},e);l.node=t,Lc(l,e.serializers,Ac(void 0,o),a,i,u);},n.prototype.xy=function(t,n,i){var r=i[i.length-1],e=r.featureType,o=r.featureNS,s={};s[o]={},s[o][e]=Ec(this.writeFeatureElement,this);var u=A({},r);u.node=t,Lc(u,s,Ac(e,o),n,i);},n.prototype.sy=function(t,n,i){var r=n[n.length-1].node;return yc(this.namespace,lT[r.nodeName]);},n.prototype.ny=function(t,n,i){var r,e=n[n.length-1],o=e.multiSurface,s=e.surface,u=e.curve,a=e.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===s?r="Surface":"LineString"===r&&!0===u?r="Curve":"MultiLineString"===r&&!0===a&&(r="MultiCurve"),yc(this.namespace,r);},n.prototype.writeGeometryNode=function(t,n){n=this.adaptOptions(n);var i=yc(this.namespace,"geom"),r={node:i,hasZ:this.hasZ,srsName:this.srsName,curve:this.py,surface:this.vy,multiSurface:this.my,multiCurve:this.yy};return n&&A(r,n),this.writeGeometryElement(i,t,[r]),i;},n.prototype.writeFeaturesNode=function(t,n){n=this.adaptOptions(n);var i=yc(this.namespace,"featureMembers");i.setAttributeNS(dc,"xsi:schemaLocation",this.schemaLocation);var r={srsName:this.srsName,hasZ:this.hasZ,curve:this.py,surface:this.vy,multiSurface:this.my,multiCurve:this.yy,featureNS:this.featureNS,featureType:this.featureType};return n&&A(r,n),this.xy(i,t,[r]),i;},n;}(WE);vT.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:Sc(vT.prototype.readFlatPos),posList:Sc(vT.prototype.readFlatPosList),coordinates:Sc(fT.prototype.readFlatCoordinates)}},vT.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:vT.prototype.interiorParser,exterior:vT.prototype.exteriorParser}},vT.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Sc(WE.prototype.readPoint),MultiPoint:Sc(WE.prototype.readMultiPoint),LineString:Sc(WE.prototype.readLineString),MultiLineString:Sc(WE.prototype.readMultiLineString),LinearRing:Sc(WE.prototype.readLinearRing),Polygon:Sc(WE.prototype.readPolygon),MultiPolygon:Sc(WE.prototype.readMultiPolygon),Surface:Sc(vT.prototype.readSurface),MultiSurface:Sc(vT.prototype.readMultiSurface),Curve:Sc(vT.prototype.readCurve),MultiCurve:Sc(vT.prototype.readMultiCurve),Envelope:Sc(vT.prototype.readEnvelope)}},vT.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:_c(vT.prototype.curveMemberParser),curveMembers:_c(vT.prototype.curveMemberParser)}},vT.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:_c(vT.prototype.surfaceMemberParser),surfaceMembers:_c(vT.prototype.surfaceMemberParser)}},vT.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:_c(WE.prototype.readLineString),Curve:_c(vT.prototype.readCurve)}},vT.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:_c(WE.prototype.readPolygon),Surface:_c(vT.prototype.readSurface)}},vT.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:Sc(vT.prototype.readPatch)}},vT.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:Sc(vT.prototype.readSegment)}},vT.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:_c(vT.prototype.readFlatPosList),upperCorner:_c(vT.prototype.readFlatPosList)}},vT.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:Sc(vT.prototype.readPolygonPatch)}},vT.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:Mc(vT.prototype.readLineStringSegment)}},WE.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Sc(WE.prototype.readFlatLinearRing),Ring:Sc(vT.prototype.readFlatCurveRing)}},vT.prototype.writeFeatures,vT.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:Ec(vT.prototype.writeRing),interior:Ec(vT.prototype.writeRing)}},vT.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Ec(sT),upperCorner:Ec(sT)}},vT.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Ec(vT.prototype.writeSurfaceOrPolygonMember),polygonMember:Ec(vT.prototype.writeSurfaceOrPolygonMember)}},vT.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Ec(vT.prototype.writePointMember)}},vT.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Ec(vT.prototype.writeLineStringOrCurveMember),curveMember:Ec(vT.prototype.writeLineStringOrCurveMember)}},vT.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Ec(vT.prototype.writeCurveOrLineString),MultiCurve:Ec(vT.prototype.writeMultiCurveOrLineString),Point:Ec(vT.prototype.writePoint),MultiPoint:Ec(vT.prototype.writeMultiPoint),LineString:Ec(vT.prototype.writeCurveOrLineString),MultiLineString:Ec(vT.prototype.writeMultiCurveOrLineString),LinearRing:Ec(vT.prototype.writeLinearRing),Polygon:Ec(vT.prototype.writeSurfaceOrPolygon),MultiPolygon:Ec(vT.prototype.writeMultiSurfaceOrPolygon),Surface:Ec(vT.prototype.writeSurfaceOrPolygon),MultiSurface:Ec(vT.prototype.writeMultiSurfaceOrPolygon),Envelope:Ec(vT.prototype.writeEnvelope)}};var pT=vT,dT=pT;dT.prototype.writeFeatures,dT.prototype.writeFeaturesNode;var yT=dT,mT=function(){var _t188=function t(n,i){return _t188=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t188(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t188(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),wT=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).schemaLocation=r.schemaLocation?r.schemaLocation:i.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd",i;}return mT(n,t),n;}(pT);wT.prototype.namespace="http://www.opengis.net/gml/3.2",wT.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:Sc(pT.prototype.readFlatPos),posList:Sc(pT.prototype.readFlatPosList),coordinates:Sc(fT.prototype.readFlatCoordinates)}},wT.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:pT.prototype.interiorParser,exterior:pT.prototype.exteriorParser}},wT.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Sc(WE.prototype.readPoint),MultiPoint:Sc(WE.prototype.readMultiPoint),LineString:Sc(WE.prototype.readLineString),MultiLineString:Sc(WE.prototype.readMultiLineString),LinearRing:Sc(WE.prototype.readLinearRing),Polygon:Sc(WE.prototype.readPolygon),MultiPolygon:Sc(WE.prototype.readMultiPolygon),Surface:Sc(wT.prototype.readSurface),MultiSurface:Sc(pT.prototype.readMultiSurface),Curve:Sc(wT.prototype.readCurve),MultiCurve:Sc(pT.prototype.readMultiCurve),Envelope:Sc(wT.prototype.readEnvelope)}},wT.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:_c(pT.prototype.curveMemberParser),curveMembers:_c(pT.prototype.curveMemberParser)}},wT.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:_c(pT.prototype.surfaceMemberParser),surfaceMembers:_c(pT.prototype.surfaceMemberParser)}},wT.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:_c(WE.prototype.readLineString),Curve:_c(pT.prototype.readCurve)}},wT.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:_c(WE.prototype.readPolygon),Surface:_c(pT.prototype.readSurface)}},wT.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:Sc(pT.prototype.readPatch)}},wT.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:Sc(pT.prototype.readSegment)}},wT.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:_c(pT.prototype.readFlatPosList),upperCorner:_c(pT.prototype.readFlatPosList)}},wT.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:Sc(pT.prototype.readPolygonPatch)}},wT.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:Mc(pT.prototype.readLineStringSegment)}},wT.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:_c(WE.prototype.pointMemberParser),pointMembers:_c(WE.prototype.pointMemberParser)}},wT.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:_c(WE.prototype.lineStringMemberParser),lineStringMembers:_c(WE.prototype.lineStringMemberParser)}},wT.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:_c(WE.prototype.polygonMemberParser),polygonMembers:_c(WE.prototype.polygonMemberParser)}},wT.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:_c(WE.prototype.readFlatCoordinatesFromNode)}},wT.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:_c(WE.prototype.readLineString)}},wT.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:_c(WE.prototype.readPolygon)}},wT.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:Sc(WE.prototype.readFlatLinearRing),Ring:Sc(wT.prototype.readFlatCurveRing)}},wT.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:Ec(pT.prototype.writeRing),interior:Ec(pT.prototype.writeRing)}},wT.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Ec(sT),upperCorner:Ec(sT)}},wT.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Ec(pT.prototype.writeSurfaceOrPolygonMember),polygonMember:Ec(pT.prototype.writeSurfaceOrPolygonMember)}},wT.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:Ec(pT.prototype.writePointMember)}},wT.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Ec(pT.prototype.writeLineStringOrCurveMember),curveMember:Ec(pT.prototype.writeLineStringOrCurveMember)}},wT.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:Ec(pT.prototype.writeCurveOrLineString),MultiCurve:Ec(pT.prototype.writeMultiCurveOrLineString),Point:Ec(wT.prototype.writePoint),MultiPoint:Ec(pT.prototype.writeMultiPoint),LineString:Ec(pT.prototype.writeCurveOrLineString),MultiLineString:Ec(pT.prototype.writeMultiCurveOrLineString),LinearRing:Ec(pT.prototype.writeLinearRing),Polygon:Ec(pT.prototype.writeSurfaceOrPolygon),MultiPolygon:Ec(pT.prototype.writeMultiSurfaceOrPolygon),Surface:Ec(pT.prototype.writeSurfaceOrPolygon),MultiSurface:Ec(pT.prototype.writeMultiSurfaceOrPolygon),Envelope:Ec(pT.prototype.writeEnvelope)}};var gT=wT,bT=function(){var _t189=function t(n,i){return _t189=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t189(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t189(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),xT=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],MT={rte:$T,trk:HT,wpt:JT},_T=kc(xT,{rte:_c($T),trk:_c(HT),wpt:_c(JT)}),ST=kc(xT,{text:jc(tT,"linkText"),type:jc(tT,"linkType")}),OT=kc(xT,{rte:Ec(function(t,n,i){var r=i[0],e=n.getProperties(),o={node:t};o.properties=e;var s=n.getGeometry();if("LineString"==s.getType()){var u=Qx(s,!0,r);o.geometryLayout=u.getLayout(),e.rtept=u.getCoordinates();}var a=i[i.length-1].node,h=zT[a.namespaceURI],f=Cc(e,h);Lc(o,LT,Pc,f,i,h);}),trk:Ec(function(t,n,i){var r=i[0],e=n.getProperties(),o={node:t};o.properties=e;var s=n.getGeometry();if("MultiLineString"==s.getType()){var u=Qx(s,!0,r);e.trkseg=u.getLineStrings();}var a=i[i.length-1].node,h=FT[a.namespaceURI],f=Cc(e,h);Lc(o,GT,Pc,f,i,h);}),wpt:Ec(function(t,n,i){var r=i[0],e=i[i.length-1];e.properties=n.getProperties();var o=n.getGeometry();if("Point"==o.getType()){var s=Qx(o,!0,r);e.geometryLayout=s.getLayout(),tA(t,s.getCoordinates(),i);}})}),jT=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=br("EPSG:4326"),i.My=r.readExtensions,i;}return bT(n,t),n.prototype._y=function(t){t||(t=[]);for(var n=0,i=t.length;n<i;++n){var r=t[n];if(this.My){var e=r.get("extensionsNode_")||null;this.My(r,e);}r.set("extensionsNode_",void 0);}},n.prototype.readFeatureFromNode=function(t,n){if(!y(xT,t.namespaceURI))return null;var i=MT[t.localName];if(!i)return null;var r=i(t,[this.getReadOptions(t,n)]);return r?(this._y([r]),r):null;},n.prototype.readFeaturesFromNode=function(t,n){if(!y(xT,t.namespaceURI))return[];if("gpx"==t.localName){var i=Ic([],_T,t,[this.getReadOptions(t,n)]);return i?(this._y(i),i):[];}return[];},n.prototype.writeFeaturesNode=function(t,n){n=this.adaptOptions(n);var i=yc("http://www.topografix.com/GPX/1/1","gpx");return i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",dc),i.setAttributeNS(dc,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),Lc({node:i},OT,VT,t,[n]),i;},n;}(qE),ET=kc(xT,{name:jc(tT),cmt:jc(tT),desc:jc(tT),src:jc(tT),link:KT,number:jc(JE),extensions:ZT,type:jc(tT),rtept:function rtept(t,n){var i=Ic({},TT,t,n);if(i){var r=n[n.length-1],e=r.flatCoordinates,o=r.layoutOptions;WT(e,o,t,i);}}}),TT=kc(xT,{ele:jc($E),time:jc(ZE)}),AT=kc(xT,{name:jc(tT),cmt:jc(tT),desc:jc(tT),src:jc(tT),link:KT,number:jc(JE),type:jc(tT),extensions:ZT,trkseg:function trkseg(t,n){var i=n[n.length-1];Nc(PT,t,n);var r=i.flatCoordinates;i.ends.push(r.length);}}),PT=kc(xT,{trkpt:function trkpt(t,n){var i=Ic({},CT,t,n);if(i){var r=n[n.length-1],e=r.flatCoordinates,o=r.layoutOptions;WT(e,o,t,i);}}}),CT=kc(xT,{ele:jc($E),time:jc(ZE)}),kT=kc(xT,{ele:jc($E),time:jc(ZE),magvar:jc($E),geoidheight:jc($E),name:jc(tT),cmt:jc(tT),desc:jc(tT),src:jc(tT),link:KT,sym:jc(tT),type:jc(tT),fix:jc(tT),sat:jc(JE),hdop:jc($E),vdop:jc($E),pdop:jc($E),ageofdgpsdata:jc($E),dgpsid:jc(JE),extensions:ZT}),NT=["text","type"],IT=kc(xT,{text:Ec(sT),type:Ec(sT)}),zT=kc(xT,["name","cmt","desc","src","link","number","type","rtept"]),LT=kc(xT,{name:Ec(sT),cmt:Ec(sT),desc:Ec(sT),src:Ec(sT),link:Ec(QT),number:Ec(oT),type:Ec(sT),rtept:Tc(Ec(tA))}),RT=kc(xT,["ele","time"]),FT=kc(xT,["name","cmt","desc","src","link","number","type","trkseg"]),GT=kc(xT,{name:Ec(sT),cmt:Ec(sT),desc:Ec(sT),src:Ec(sT),link:Ec(QT),number:Ec(oT),type:Ec(sT),trkseg:Tc(Ec(function(t,n,i){var r={node:t};r.geometryLayout=n.getLayout(),r.properties={},Lc(r,qT,DT,n.getCoordinates(),i);}))}),DT=Ac("trkpt"),qT=kc(xT,{trkpt:Ec(tA)}),UT=kc(xT,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),BT=kc(xT,{ele:Ec(eT),time:Ec(rT),magvar:Ec(eT),geoidheight:Ec(eT),name:Ec(sT),cmt:Ec(sT),desc:Ec(sT),src:Ec(sT),link:Ec(QT),sym:Ec(sT),type:Ec(sT),fix:Ec(sT),sat:Ec(oT),hdop:Ec(eT),vdop:Ec(eT),pdop:Ec(eT),ageofdgpsdata:Ec(eT),dgpsid:Ec(oT)}),XT={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function VT(t,n,i){var r=t.getGeometry();if(r){var e=XT[r.getType()];if(e)return yc(n[n.length-1].node.namespaceURI,e);}}function WT(t,n,i,r){return t.push(parseFloat(i.getAttribute("lon")),parseFloat(i.getAttribute("lat"))),"ele"in r?(t.push(r.ele),delete r.ele,n.hasZ=!0):t.push(0),"time"in r?(t.push(r.time),delete r.time,n.hasM=!0):t.push(0),t;}function YT(t,n,i){var r=kt,e=2;if(t.hasZ&&t.hasM?(r=zt,e=4):t.hasZ?(r=Nt,e=3):t.hasM&&(r=It,e=3),4!==e){for(var o=0,s=n.length/4;o<s;o++){n[o*e]=n[4*o],n[o*e+1]=n[4*o+1],t.hasZ&&(n[o*e+2]=n[4*o+2]),t.hasM&&(n[o*e+2]=n[4*o+3]);}if(n.length=n.length/4*e,i)for(o=0,s=i.length;o<s;o++){i[o]=i[o]/4*e;}}return r;}function KT(t,n){var i=n[n.length-1],r=t.getAttribute("href");null!==r&&(i.link=r),Nc(ST,t,n);}function ZT(t,n){n[n.length-1].Sy=t;}function $T(t,n){var i=n[0],r=Ic({flatCoordinates:[],layoutOptions:{}},ET,t,n);if(r){var e=r.flatCoordinates;delete r.flatCoordinates;var o=r.layoutOptions;delete r.layoutOptions;var s=YT(o,e),u=new _x(e,s);Qx(u,!1,i);var a=new Ct(u);return a.setProperties(r,!0),a;}}function HT(t,n){var i=n[0],r=Ic({flatCoordinates:[],ends:[],layoutOptions:{}},AT,t,n);if(r){var e=r.flatCoordinates;delete r.flatCoordinates;var o=r.ends;delete r.ends;var s=r.layoutOptions;delete r.layoutOptions;var u=YT(s,e,o),a=new jx(e,u,o);Qx(a,!1,i);var h=new Ct(a);return h.setProperties(r,!0),h;}}function JT(t,n){var i=n[0],r=Ic({},kT,t,n);if(r){var e={},o=WT([],e,t,r),s=YT(e,o),u=new ke(o,s);Qx(u,!1,i);var a=new Ct(u);return a.setProperties(r,!0),a;}}function QT(t,n,i){t.setAttribute("href",n);var r=i[i.length-1].properties,e=[r.linkText,r.linkType];Lc({node:t},IT,Pc,e,i,NT);}function tA(t,n,i){var r=i[i.length-1],e=r.node.namespaceURI,o=r.properties;switch(t.setAttributeNS(null,"lat",String(n[1])),t.setAttributeNS(null,"lon",String(n[0])),r.geometryLayout){case zt:0!==n[3]&&(o.time=n[3]);case Nt:0!==n[2]&&(o.ele=n[2]);break;case It:0!==n[2]&&(o.time=n[2]);}var s="rtept"==t.nodeName?RT[e]:UT[e],u=Cc(o,s);Lc({node:t,properties:o},BT,Pc,u,i,s);}var nA=jT,iA=function(){var _t190=function t(n,i){return _t190=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t190(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t190(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}();function rA(t){return"string"==typeof t?t:"";}var eA,oA,sA,uA,aA,hA,fA=function(t){function n(){return t.call(this)||this;}return iA(n,t),n.prototype.getType=function(){return"text";},n.prototype.readFeature=function(t,n){return this.readFeatureFromText(rA(t),this.adaptOptions(n));},n.prototype.readFeatureFromText=function(t,n){return r();},n.prototype.readFeatures=function(t,n){return this.readFeaturesFromText(rA(t),this.adaptOptions(n));},n.prototype.readFeaturesFromText=function(t,n){return r();},n.prototype.readGeometry=function(t,n){return this.readGeometryFromText(rA(t),this.adaptOptions(n));},n.prototype.readGeometryFromText=function(t,n){return r();},n.prototype.readProjection=function(t){return this.readProjectionFromText(rA(t));},n.prototype.readProjectionFromText=function(t){return this.dataProjection;},n.prototype.writeFeature=function(t,n){return this.writeFeatureText(t,this.adaptOptions(n));},n.prototype.writeFeatureText=function(t,n){return r();},n.prototype.writeFeatures=function(t,n){return this.writeFeaturesText(t,this.adaptOptions(n));},n.prototype.writeFeaturesText=function(t,n){return r();},n.prototype.writeGeometry=function(t,n){return this.writeGeometryText(t,this.adaptOptions(n));},n.prototype.writeGeometryText=function(t,n){return r();},n;}(Jx),cA=function(){var _t191=function t(n,i){return _t191=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t191(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t191(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),lA="barometric",vA="gps",pA="none",dA=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,yA=/^H.([A-Z]{3}).*?:(.*)/,mA=/^HFDTE(\d{2})(\d{2})(\d{2})/,wA=/\r\n|\r|\n/,gA=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=br("EPSG:4326"),i.Oy=r.altitudeMode?r.altitudeMode:pA,i;}return cA(n,t),n.prototype.readFeatureFromText=function(t,n){var i,r,e=this.Oy,o=t.split(wA),s={},u=[],a=2e3,h=0,f=1,c=-1;for(i=0,r=o.length;i<r;++i){var l=o[i],v=void 0;if("B"==l.charAt(0)){if(v=dA.exec(l)){var p=parseInt(v[1],10),d=parseInt(v[2],10),y=parseInt(v[3],10),m=parseInt(v[4],10)+parseInt(v[5],10)/6e4;"S"==v[6]&&(m=-m);var w=parseInt(v[7],10)+parseInt(v[8],10)/6e4;if("W"==v[9]&&(w=-w),u.push(w,m),e!=pA){var g=void 0;g=e==vA?parseInt(v[11],10):e==lA?parseInt(v[12],10):0,u.push(g);}var b=Date.UTC(a,h,f,p,d,y);b<c&&(b=Date.UTC(a,h,f+1,p,d,y)),u.push(b/1e3),c=b;}}else"H"==l.charAt(0)&&((v=mA.exec(l))?(f=parseInt(v[1],10),h=parseInt(v[2],10)-1,a=2e3+parseInt(v[3],10)):(v=yA.exec(l))&&(s[v[1]]=v[2].trim()));}if(0===u.length)return null;var x=new _x(u,e==pA?It:zt),M=new Ct(Qx(x,!1,n));return M.setProperties(s,!0),M;},n.prototype.readFeaturesFromText=function(t,n){var i=this.readFeatureFromText(t,n);return i?[i]:[];},n;}(fA),bA=gA,xA=function(){var _t192=function t(n,i){return _t192=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t192(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t192(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),MA=["http://www.google.com/kml/ext/2.2"],_A=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],SA={fraction:qv,pixels:Uv,insetPixels:Uv},OA=kc(_A,{ExtendedData:MP,Region:_P,MultiGeometry:jc(vP,"geometry"),LineString:jc(fP,"geometry"),LinearRing:jc(cP,"geometry"),Point:jc(pP,"geometry"),Polygon:jc(yP,"geometry"),Style:jc(wP),StyleMap:function StyleMap(t,n){var i=$A.call(this,t,n);if(!i)return;var r=n[n.length-1];Array.isArray(i)?r.Style=i:"string"==typeof i?r.styleUrl=i:Et(!1,38);},address:jc(tT),description:jc(tT),name:jc(tT),open:jc(YE),phoneNumber:jc(tT),styleUrl:jc(YA),visibility:jc(YE)},kc(MA,{MultiTrack:jc(function(t,n){var i=Ic([],rP,t,n);if(!i)return;return new jx(i);},"geometry"),Track:jc(oP,"geometry")})),jA=kc(_A,{ExtendedData:MP,Region:_P,Link:function Link(t,n){Nc(EA,t,n);},address:jc(tT),description:jc(tT),name:jc(tT),open:jc(YE),phoneNumber:jc(tT),visibility:jc(YE)}),EA=kc(_A,{href:jc(WA)}),TA=kc(_A,{LatLonAltBox:function LatLonAltBox(t,n){var i=Ic({},jP,t,n);if(!i)return;var r=n[n.length-1],e=[parseFloat(i.west),parseFloat(i.south),parseFloat(i.east),parseFloat(i.north)];r.extent=e,r.altitudeMode=i.altitudeMode,r.minAltitude=parseFloat(i.minAltitude),r.maxAltitude=parseFloat(i.maxAltitude);},Lod:function Lod(t,n){var i=Ic({},EP,t,n);if(!i)return;var r=n[n.length-1];r.minLodPixels=parseFloat(i.minLodPixels),r.maxLodPixels=parseFloat(i.maxLodPixels),r.minFadeExtent=parseFloat(i.minFadeExtent),r.maxFadeExtent=parseFloat(i.maxFadeExtent);}}),AA=kc(_A,["Document","Placemark"]),PA=kc(_A,{Document:Ec(function(t,n,i){Lc({node:t},kP,NP,n,i,void 0,this);}),Placemark:Ec(rC)}),CA=null;var kA,NA=null;var IA,zA=null;var LA=null;var RA=null;var FA,GA=null;function DA(t){return 32/Math.min(t[0],t[1]);}function qA(t){return t;}var UA=function(t){function n(n){var i=t.call(this)||this,r=n||{};return GA||(CA=new Dv({color:eA=[255,255,255,1]}),hA="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",NA=new tp({anchor:oA=[20,2],anchorOrigin:Bv,anchorXUnits:sA=Uv,anchorYUnits:uA=Uv,crossOrigin:"anonymous",rotation:0,scale:DA(aA=[64,64]),size:aA,src:hA}),kA="NO_IMAGE",zA=new ip({color:eA,width:1}),IA=new ip({color:[51,51,51,1],width:2}),LA=new vp({font:"bold 16px Helvetica",fill:CA,stroke:IA,scale:.8}),RA=new hp({fill:CA,image:NA,text:LA,stroke:zA,zIndex:0}),GA=[RA]),i.dataProjection=br("EPSG:4326"),i.jy=r.defaultStyle?r.defaultStyle:GA,i.Ey=void 0===r.extractStyles||r.extractStyles,i.Ty=void 0===r.writeStyles||r.writeStyles,i.Ay={},i.Py=void 0===r.showPointNames||r.showPointNames,i.Bt=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",i.Cy=r.iconUrlFunction?r.iconUrlFunction:qA,i.supportedMediaTypes=["application/vnd.google-earth.kml+xml"],i;}return xA(n,t),n.prototype.ky=function(t,n){var i=Ic([],kc(_A,{Document:Mc(this.ky,this),Folder:Mc(this.ky,this),Placemark:_c(this.Ny,this),Style:this.Iy.bind(this),StyleMap:this.zy.bind(this)}),t,n,this);return i||void 0;},n.prototype.Ny=function(t,n){var i=Ic({geometry:null},OA,t,n,this);if(i){var r=new Ct(),e=t.getAttribute("id");null!==e&&r.setId(e);var o=n[0],s=i.geometry;if(s&&Qx(s,!1,o),r.setGeometry(s),delete i.geometry,this.Ey){var u=function(t,n,i,r,e){return function(o,s){var u=e,a="",h=[];if(u){var f=o.getGeometry();if(f)if(f instanceof lM)h=f.getGeometriesArrayRecursive().filter(function(t){var n=t.getType();return"Point"===n||"MultiPoint"===n;}),u=h.length>0;else{var c=f.getType();u="Point"===c||"MultiPoint"===c;}}u&&(a=o.get("name"),(u=u&&!!a)&&a.search(/&[^&]+;/)>-1&&(FA||(FA=document.createElement("textarea")),FA.innerHTML=a,a=FA.value));var l=i;if(t?l=t:n&&(l=BA(n,i,r)),u){var v=function(t,n){var i=[0,0],r="start",e=t.getImage();if(e){var o=e.getSize();if(o&&2==o.length){var s=e.getScaleArray(),u=e.getAnchor();i[0]=s[0]*(o[0]-u[0]),i[1]=s[1]*(o[1]/2-u[1]),r="left";}}var a=t.getText();a?((a=a.clone()).setFont(a.getFont()||LA.getFont()),a.setScale(a.getScale()||LA.getScale()),a.setFill(a.getFill()||LA.getFill()),a.setStroke(a.getStroke()||IA)):a=LA.clone();return a.setText(n),a.setOffsetX(i[0]),a.setOffsetY(i[1]),a.setTextAlign(r),new hp({image:e,text:a});}(l[0],a);return h.length>0?(v.setGeometry(new lM(h)),[v,new hp({geometry:l[0].getGeometry(),image:null,fill:l[0].getFill(),stroke:l[0].getStroke(),text:null})].concat(l.slice(1))):v;}return l;};}(i.Style,i.styleUrl,this.jy,this.Ay,this.Py);r.setStyle(u);}return delete i.Style,r.setProperties(i,!0),r;}},n.prototype.Iy=function(t,n){var i=t.getAttribute("id");if(null!==i){var r=wP.call(this,t,n);if(r){var e=void 0,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)e=new URL("#"+i,o).href;else e="#"+i;this.Ay[e]=r;}}},n.prototype.zy=function(t,n){var i=t.getAttribute("id");if(null!==i){var r=$A.call(this,t,n);if(r){var e,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)e=new URL("#"+i,o).href;else e="#"+i;this.Ay[e]=r;}}},n.prototype.readFeatureFromNode=function(t,n){if(!y(_A,t.namespaceURI))return null;var i=this.Ny(t,[this.getReadOptions(t,n)]);return i||null;},n.prototype.readFeaturesFromNode=function(t,n){if(!y(_A,t.namespaceURI))return[];var i,r=t.localName;if("Document"==r||"Folder"==r)return(i=this.ky(t,[this.getReadOptions(t,n)]))||[];if("Placemark"==r){var e=this.Ny(t,[this.getReadOptions(t,n)]);return e?[e]:[];}if("kml"==r){i=[];for(var o=t.firstElementChild;o;o=o.nextElementSibling){var s=this.readFeaturesFromNode(o,n);s&&g(i,s);}return i;}return[];},n.prototype.readName=function(t){if(t){if("string"==typeof t){var n=xc(t);return this.readNameFromDocument(n);}return gc(t)?this.readNameFromDocument(t):this.readNameFromNode(t);}},n.prototype.readNameFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling){if(n.nodeType==Node.ELEMENT_NODE){var i=this.readNameFromNode(n);if(i)return i;}}},n.prototype.readNameFromNode=function(t){for(var n=t.firstElementChild;n;n=n.nextElementSibling){if(y(_A,n.namespaceURI)&&"name"==n.localName)return tT(n);}for(n=t.firstElementChild;n;n=n.nextElementSibling){var i=n.localName;if(y(_A,n.namespaceURI)&&("Document"==i||"Folder"==i||"Placemark"==i||"kml"==i)){var r=this.readNameFromNode(n);if(r)return r;}}},n.prototype.readNetworkLinks=function(t){var n=[];if("string"==typeof t){var i=xc(t);g(n,this.readNetworkLinksFromDocument(i));}else gc(t)?g(n,this.readNetworkLinksFromDocument(t)):g(n,this.readNetworkLinksFromNode(t));return n;},n.prototype.readNetworkLinksFromDocument=function(t){for(var n=[],i=t.firstChild;i;i=i.nextSibling){i.nodeType==Node.ELEMENT_NODE&&g(n,this.readNetworkLinksFromNode(i));}return n;},n.prototype.readNetworkLinksFromNode=function(t){for(var n=[],i=t.firstElementChild;i;i=i.nextElementSibling){if(y(_A,i.namespaceURI)&&"NetworkLink"==i.localName){var r=Ic({},jA,i,[]);n.push(r);}}for(i=t.firstElementChild;i;i=i.nextElementSibling){var e=i.localName;!y(_A,i.namespaceURI)||"Document"!=e&&"Folder"!=e&&"kml"!=e||g(n,this.readNetworkLinksFromNode(i));}return n;},n.prototype.readRegion=function(t){var n=[];if("string"==typeof t){var i=xc(t);g(n,this.readRegionFromDocument(i));}else gc(t)?g(n,this.readRegionFromDocument(t)):g(n,this.readRegionFromNode(t));return n;},n.prototype.readRegionFromDocument=function(t){for(var n=[],i=t.firstChild;i;i=i.nextSibling){i.nodeType==Node.ELEMENT_NODE&&g(n,this.readRegionFromNode(i));}return n;},n.prototype.readRegionFromNode=function(t){for(var n=[],i=t.firstElementChild;i;i=i.nextElementSibling){if(y(_A,i.namespaceURI)&&"Region"==i.localName){var r=Ic({},TA,i,[]);n.push(r);}}for(i=t.firstElementChild;i;i=i.nextElementSibling){var e=i.localName;!y(_A,i.namespaceURI)||"Document"!=e&&"Folder"!=e&&"kml"!=e||g(n,this.readRegionFromNode(i));}return n;},n.prototype.writeFeaturesNode=function(t,n){n=this.adaptOptions(n);var i=yc(_A[4],"kml"),r="http://www.w3.org/2000/xmlns/";i.setAttributeNS(r,"xmlns:gx",MA[0]),i.setAttributeNS(r,"xmlns:xsi",dc),i.setAttributeNS(dc,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var e={node:i},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);var s=AA[i.namespaceURI],u=Cc(o,s);return Lc(e,PA,Pc,u,[n],s,this),i;},n;}(qE);function BA(t,n,i){return Array.isArray(t)?t:"string"==typeof t?BA(i[t],n,i):n;}function XA(t){var n=mc(t,!1),i=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(n);if(i){var r=i[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255];}}function VA(t){var n=mc(t,!1),i=[];n=n.replace(/\s*,\s*/g,",");for(var r,e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;r=e.exec(n);){var o=parseFloat(r[1]),s=parseFloat(r[2]),u=r[3]?parseFloat(r[3]):0;i.push(o,s,u),n=n.substr(r[0].length);}if(""===n)return i;}function WA(t){var n=mc(t,!1).trim(),i=t.baseURI;return i&&"about:blank"!=i||(i=window.location.href),i?new URL(n,i).href:n;}function YA(t){var n=mc(t,!1).trim().replace(/^(?!.*#)/,"#"),i=t.baseURI;return i&&"about:blank"!=i||(i=window.location.href),i?new URL(n,i).href:n;}function KA(t){return $E(t);}var ZA=kc(_A,{Pair:function Pair(t,n){var i=Ic({},SP,t,n,this);if(!i)return;var r=i.key;if(r&&"normal"==r){var e=i.styleUrl;e&&(n[n.length-1]=e);var o=i.Style;o&&(n[n.length-1]=o);}}});function $A(t,n){return Ic(void 0,ZA,t,n,this);}var HA=kc(_A,{Icon:jc(function(t,n){var i=Ic({},sP,t,n);return i||null;}),color:jc(XA),heading:jc($E),hotSpot:jc(function(t){var n,i=t.getAttribute("xunits"),r=t.getAttribute("yunits");return n="insetPixels"!==i?"insetPixels"!==r?Bv:Vv:"insetPixels"!==r?Xv:Wv,{x:parseFloat(t.getAttribute("x")),xunits:SA[i],y:parseFloat(t.getAttribute("y")),yunits:SA[r],origin:n};}),scale:jc(KA)});var JA=kc(_A,{color:jc(XA),scale:jc(KA)});var QA=kc(_A,{color:jc(XA),width:jc($E)});var tP=kc(_A,{color:jc(XA),fill:jc(YE),outline:jc(YE)});var nP=kc(_A,{coordinates:Sc(VA)});function iP(t,n){return Ic(null,nP,t,n);}var rP=kc(MA,{Track:_c(oP)});var eP=kc(_A,{when:function when(t,n){var i=n[n.length-1].whens,r=mc(t,!1),e=Date.parse(r);i.push(isNaN(e)?0:e);}},kc(MA,{coord:function coord(t,n){var i=n[n.length-1].coordinates,r=mc(t,!1),e=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(r);if(e){var o=parseFloat(e[1]),s=parseFloat(e[2]),u=parseFloat(e[3]);i.push([o,s,u]);}else i.push([]);}}));function oP(t,n){var i=Ic({coordinates:[],whens:[]},eP,t,n);if(i){for(var r=[],e=i.coordinates,o=i.whens,s=0,u=Math.min(e.length,o.length);s<u;++s){3==e[s].length&&r.push(e[s][0],e[s][1],e[s][2],o[s]);}return new _x(r,zt);}}var sP=kc(_A,{href:jc(WA)},kc(MA,{x:jc($E),y:jc($E),w:jc($E),h:jc($E)}));var uP=kc(_A,{coordinates:Sc(VA)});function aP(t,n){return Ic(null,uP,t,n);}var hP=kc(_A,{extrude:jc(YE),tessellate:jc(YE),altitudeMode:jc(tT)});function fP(t,n){var i=Ic({},hP,t,n),r=aP(t,n);if(r){var e=new _x(r,Nt);return e.setProperties(i,!0),e;}}function cP(t,n){var i=Ic({},hP,t,n),r=aP(t,n);if(r){var e=new to(r,Nt,[r.length]);return e.setProperties(i,!0),e;}}var lP=kc(_A,{LineString:_c(fP),LinearRing:_c(cP),MultiGeometry:_c(vP),Point:_c(pP),Polygon:_c(yP)});function vP(t,n){var i,r=Ic([],lP,t,n);if(!r)return null;if(0===r.length)return new lM(r);for(var e=!0,o=r[0].getType(),s=1,u=r.length;s<u;++s){if(r[s].getType()!=o){e=!1;break;}}if(e){var a=void 0,h=void 0;if("Point"==o){var f=r[0];a=f.getLayout(),h=f.getFlatCoordinates();for(s=1,u=r.length;s<u;++s){g(h,r[s].getFlatCoordinates());}gP(i=new mx(h,a),r);}else"LineString"==o?gP(i=new jx(r),r):"Polygon"==o?gP(i=new Px(r),r):"GeometryCollection"==o?i=new lM(r):Et(!1,37);}else i=new lM(r);return i;}function pP(t,n){var i=Ic({},hP,t,n),r=aP(t,n);if(r){var e=new ke(r,Nt);return e.setProperties(i,!0),e;}}var dP=kc(_A,{innerBoundaryIs:function innerBoundaryIs(t,n){var i=Ic([],TP,t,n);if(i.length>0){var r=n[n.length-1];r.push.apply(r,i);}},outerBoundaryIs:function outerBoundaryIs(t,n){var i=Ic(void 0,AP,t,n);if(i){n[n.length-1][0]=i;}}});function yP(t,n){var i=Ic({},hP,t,n),r=Ic([null],dP,t,n);if(r&&r[0]){for(var e=r[0],o=[e.length],s=1,u=r.length;s<u;++s){g(e,r[s]),o.push(e.length);}var a=new to(e,Nt,o);return a.setProperties(i,!0),a;}}var mP=kc(_A,{IconStyle:function IconStyle(t,n){var i=Ic({},HA,t,n);if(i){var r,e,o,s,u=n[n.length-1],a="Icon"in i?i.Icon:{},h=!("Icon"in i)||Object.keys(a).length>0,f=a.href;f?r=f:h&&(r=hA);var c,l=Bv,v=i.hotSpot;v?(e=[v.x,v.y],o=v.xunits,s=v.yunits,l=v.origin):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(r)&&(/pushpin/.test(r)?(e=oA,o=sA,s=uA):/arrow-reverse/.test(r)?(e=[54,42],o=sA,s=uA):/paddle/.test(r)&&(e=[32,1],o=sA,s=uA));var p,d=a.x,y=a.y;void 0!==d&&void 0!==y&&(c=[d,y]);var m,w=a.w,g=a.h;void 0!==w&&void 0!==g&&(p=[w,g]);var b=i.heading;void 0!==b&&(m=yi(b));var x=i.scale,M=i.color;if(h){r==hA&&(p=aA);var _=new tp({anchor:e,anchorOrigin:l,anchorXUnits:o,anchorYUnits:s,crossOrigin:this.Bt,offset:c,offsetOrigin:Bv,rotation:m,scale:x,size:p,src:this.Cy(r),color:M}),S=_.getScaleArray()[0],O=_.getSize();if(null===O){var j=_.getImageState();if(j===Mo||j===_o){var E=function E(){var t=_.getImageState();if(t!==Mo&&t!==_o){var n=_.getSize();if(n&&2==n.length){var i=DA(n);_.setScale(S*i);}_.unlistenImageChange(E);}};_.listenImageChange(E),j===Mo&&_.load();}}else if(2==O.length){var T=DA(O);_.setScale(S*T);}u.imageStyle=_;}else u.imageStyle=kA;}},LabelStyle:function LabelStyle(t,n){var i=Ic({},JA,t,n);if(i){var r=n[n.length-1],e=new vp({fill:new Dv({color:"color"in i?i.color:eA}),scale:i.scale});r.textStyle=e;}},LineStyle:function LineStyle(t,n){var i=Ic({},QA,t,n);if(i){var r=n[n.length-1],e=new ip({color:"color"in i?i.color:eA,width:"width"in i?i.width:1});r.strokeStyle=e;}},PolyStyle:function PolyStyle(t,n){var i=Ic({},tP,t,n);if(i){var r=n[n.length-1],e=new Dv({color:"color"in i?i.color:eA});r.fillStyle=e;var o=i.fill;void 0!==o&&(r.fill=o);var s=i.outline;void 0!==s&&(r.outline=s);}}});function wP(t,n){var i=Ic({},mP,t,n,this);if(!i)return null;var r,e="fillStyle"in i?i.fillStyle:CA,o=i.fill;void 0===o||o||(e=null),"imageStyle"in i?i.imageStyle!=kA&&(r=i.imageStyle):r=NA;var s="textStyle"in i?i.textStyle:LA,u="strokeStyle"in i?i.strokeStyle:zA,a=i.outline;return void 0===a||a?[new hp({fill:e,image:r,stroke:u,text:s,zIndex:void 0})]:[new hp({geometry:function geometry(t){var n=t.getGeometry(),i=n.getType();return"GeometryCollection"===i?new lM(n.getGeometriesArrayRecursive().filter(function(t){var n=t.getType();return"Polygon"!==n&&"MultiPolygon"!==n;})):"Polygon"!==i&&"MultiPolygon"!==i?n:void 0;},fill:e,image:r,stroke:u,text:s,zIndex:void 0}),new hp({geometry:function geometry(t){var n=t.getGeometry(),i=n.getType();return"GeometryCollection"===i?new lM(n.getGeometriesArrayRecursive().filter(function(t){var n=t.getType();return"Polygon"===n||"MultiPolygon"===n;})):"Polygon"===i||"MultiPolygon"===i?n:void 0;},fill:e,stroke:null,zIndex:void 0})];}function gP(t,n){var i,r,e,o=n.length,s=new Array(n.length),u=new Array(n.length),a=new Array(n.length);i=!1,r=!1,e=!1;for(var h=0;h<o;++h){var f=n[h];s[h]=f.get("extrude"),u[h]=f.get("tessellate"),a[h]=f.get("altitudeMode"),i=i||void 0!==s[h],r=r||void 0!==u[h],e=e||a[h];}i&&t.set("extrude",s),r&&t.set("tessellate",u),e&&t.set("altitudeMode",a);}var bP=kc(_A,{displayName:jc(tT),value:jc(tT)});var xP=kc(_A,{Data:function Data(t,n){var i=t.getAttribute("name");Nc(bP,t,n);var r=n[n.length-1];i&&r.displayName?r[i]={value:r.value,displayName:r.displayName,toString:function toString(){return r.value;}}:null!==i?r[i]=r.value:null!==r.displayName&&(r[r.displayName]=r.value),delete r.value;},SchemaData:function SchemaData(t,n){Nc(OP,t,n);}});function MP(t,n){Nc(xP,t,n);}function _P(t,n){Nc(TA,t,n);}var SP=kc(_A,{Style:jc(wP),key:jc(tT),styleUrl:jc(YA)});var OP=kc(_A,{SimpleData:function SimpleData(t,n){var i=t.getAttribute("name");if(null!==i){var r=tT(t);n[n.length-1][i]=r;}}});var jP=kc(_A,{altitudeMode:jc(tT),minAltitude:jc($E),maxAltitude:jc($E),north:jc($E),south:jc($E),east:jc($E),west:jc($E)});var EP=kc(_A,{minLodPixels:jc($E),maxLodPixels:jc($E),minFadeExtent:jc($E),maxFadeExtent:jc($E)});var TP=kc(_A,{LinearRing:_c(iP)});var AP=kc(_A,{LinearRing:Sc(iP)});function PP(t,n){for(var i=Ko(n),r=[255*(4==i.length?i[3]:1),i[2],i[1],i[0]],e=0;e<4;++e){var o=Math.floor(r[e]).toString(16);r[e]=1==o.length?"0"+o:o;}sT(t,r.join(""));}var CP=kc(_A,{Data:Ec(function(t,n,i){t.setAttribute("name",n.name);var r={node:t},e=n.value;"object"==_typeof(e)?(null!==e&&e.displayName&&Lc(r,CP,Pc,[e.displayName],i,["displayName"]),null!==e&&e.value&&Lc(r,CP,Pc,[e.value],i,["value"])):Lc(r,CP,Pc,[e],i,["value"]);}),value:Ec(function(t,n){sT(t,n);}),displayName:Ec(function(t,n){iT(t,n);})});var kP=kc(_A,{Placemark:Ec(rC)}),NP=function NP(t,n,i){return yc(n[n.length-1].node.namespaceURI,"Placemark");};var IP=Ac("Data");var zP=kc(_A,["href"],kc(MA,["x","y","w","h"])),LP=kc(_A,{href:Ec(sT)},kc(MA,{x:Ec(eT),y:Ec(eT),w:Ec(eT),h:Ec(eT)})),RP=function RP(t,n,i){return yc(MA[0],"gx:"+i);};var FP=kc(_A,["scale","heading","Icon","color","hotSpot"]),GP=kc(_A,{Icon:Ec(function(t,n,i){var r={node:t},e=i[i.length-1].node,o=zP[e.namespaceURI],s=Cc(n,o);Lc(r,LP,Pc,s,i,o),s=Cc(n,o=zP[MA[0]]),Lc(r,LP,RP,s,i,o);}),color:Ec(PP),heading:Ec(eT),hotSpot:Ec(function(t,n){t.setAttribute("x",String(n.x)),t.setAttribute("y",String(n.y)),t.setAttribute("xunits",n.xunits),t.setAttribute("yunits",n.yunits);}),scale:Ec(vC)});var DP=kc(_A,["color","scale"]),qP=kc(_A,{color:Ec(PP),scale:Ec(vC)});var UP=kc(_A,["color","width"]),BP=kc(_A,{color:Ec(PP),width:Ec(eT)});var XP={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},VP=function VP(t,n,i){if(t)return yc(n[n.length-1].node.namespaceURI,XP[t.getType()]);},WP=Ac("Point"),YP=Ac("LineString"),KP=Ac("LinearRing"),ZP=Ac("Polygon"),$P=kc(_A,{LineString:Ec(sC),Point:Ec(sC),Polygon:Ec(cC),GeometryCollection:Ec(HP)});function HP(t,n,i){var r,e={node:t},o=n.getType(),s=[];"GeometryCollection"===o?(n.getGeometriesArrayRecursive().forEach(function(t){var n=t.getType();"MultiPoint"===n?s=s.concat(t.getPoints()):"MultiLineString"===n?s=s.concat(t.getLineStrings()):"MultiPolygon"===n?s=s.concat(t.getPolygons()):"Point"===n||"LineString"===n||"Polygon"===n?s.push(t):Et(!1,39);}),r=VP):"MultiPoint"===o?(s=n.getPoints(),r=WP):"MultiLineString"===o?(s=n.getLineStrings(),r=YP):"MultiPolygon"===o?(s=n.getPolygons(),r=ZP):Et(!1,39),Lc(e,$P,r,s,i);}var JP=kc(_A,{LinearRing:Ec(sC)});function QP(t,n,i){Lc({node:t},JP,KP,[n],i);}var tC=kc(_A,{ExtendedData:Ec(function(t,n,i){for(var r={node:t},e=n.names,o=n.values,s=e.length,u=0;u<s;u++){Lc(r,CP,IP,[{name:e[u],value:o[u]}],i);}}),MultiGeometry:Ec(HP),LineString:Ec(sC),LinearRing:Ec(sC),Point:Ec(sC),Polygon:Ec(cC),Style:Ec(function(t,n,i){var r={node:t},e={};if(n.pointStyles.length){var o=n.pointStyles[0].getText();o&&(e.LabelStyle=o);var s=n.pointStyles[0].getImage();s&&"function"==typeof s.getSrc&&(e.IconStyle=s);}if(n.lineStyles.length){(u=n.lineStyles[0].getStroke())&&(e.LineStyle=u);}if(n.polyStyles.length){var u;(u=n.polyStyles[0].getStroke())&&!e.LineStyle&&(e.LineStyle=u),e.PolyStyle=n.polyStyles[0];}var a=i[i.length-1].node,h=pC[a.namespaceURI],f=Cc(e,h);Lc(r,dC,Pc,f,i,h);}),address:Ec(sT),description:Ec(sT),name:Ec(sT),open:Ec(nT),phoneNumber:Ec(sT),styleUrl:Ec(sT),visibility:Ec(nT)}),nC=kc(_A,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),iC=Ac("ExtendedData");function rC(t,n,i){var r={node:t};n.getId()&&t.setAttribute("id",n.getId());var e=n.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[n.getGeometryName()]=1;var s=Object.keys(e||{}).sort().filter(function(t){return!o[t];}),u=n.getStyleFunction();if(u){var a=u(n,0);if(a){var h=Array.isArray(a)?a:[a],f=h;if(n.getGeometry()&&(f=h.filter(function(t){var i=t.getGeometryFunction()(n);if(i){var r=i.getType();return"GeometryCollection"===r?i.getGeometriesArrayRecursive().filter(function(t){var n=t.getType();return"Point"===n||"MultiPoint"===n;}).length:"Point"===r||"MultiPoint"===r;}})),this.Ty){var c=h,l=h;n.getGeometry()&&(c=h.filter(function(t){var i=t.getGeometryFunction()(n);if(i){var r=i.getType();return"GeometryCollection"===r?i.getGeometriesArrayRecursive().filter(function(t){var n=t.getType();return"LineString"===n||"MultiLineString"===n;}).length:"LineString"===r||"MultiLineString"===r;}}),l=h.filter(function(t){var i=t.getGeometryFunction()(n);if(i){var r=i.getType();return"GeometryCollection"===r?i.getGeometriesArrayRecursive().filter(function(t){var n=t.getType();return"Polygon"===n||"MultiPolygon"===n;}).length:"Polygon"===r||"MultiPolygon"===r;}})),e.Style={pointStyles:f,lineStyles:c,polyStyles:l};}if(f.length&&void 0===e.name){var v=f[0].getText();v&&(e.name=v.getText());}}}var p=i[i.length-1].node,d=nC[p.namespaceURI],y=Cc(e,d);if(Lc(r,tC,Pc,y,i,d),s.length>0){var m=Cc(e,s);Lc(r,tC,iC,[{names:s,values:m}],i);}var w=i[0],g=n.getGeometry();g&&(g=Qx(g,!0,w)),Lc(r,tC,VP,[g],i);}var eC=kc(_A,["extrude","tessellate","altitudeMode","coordinates"]),oC=kc(_A,{extrude:Ec(nT),tessellate:Ec(nT),altitudeMode:Ec(sT),coordinates:Ec(function(t,n,i){var r,e=i[i.length-1],o=e.layout,s=e.stride;o==kt||o==It?r=2:o==Nt||o==zt?r=3:Et(!1,34);var u=n.length,a="";if(u>0){a+=n[0];for(var h=1;h<r;++h){a+=","+n[h];}for(var f=s;f<u;f+=s){a+=" "+n[f];for(h=1;h<r;++h){a+=","+n[f+h];}}}sT(t,a);})});function sC(t,n,i){var r=n.getFlatCoordinates(),e={node:t};e.layout=n.getLayout(),e.stride=n.getStride();var o=n.getProperties();o.coordinates=r;var s=i[i.length-1].node,u=eC[s.namespaceURI],a=Cc(o,u);Lc(e,oC,Pc,a,i,u);}var uC=kc(_A,["color","fill","outline"]),aC=kc(_A,{outerBoundaryIs:Ec(QP),innerBoundaryIs:Ec(QP)}),hC=Ac("innerBoundaryIs"),fC=Ac("outerBoundaryIs");function cC(t,n,i){var r=n.getLinearRings(),e=r.shift(),o={node:t};Lc(o,aC,hC,r,i),Lc(o,aC,fC,[e],i);}var lC=kc(_A,{color:Ec(PP),fill:Ec(nT),outline:Ec(nT)});function vC(t,n){eT(t,Math.round(1e6*n)/1e6);}var pC=kc(_A,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),dC=kc(_A,{IconStyle:Ec(function(t,n,i){var r={node:t},e={},o=n.getSrc(),s=n.getSize(),u=n.getImageSize(),a={href:o};if(s){a.w=s[0],a.h=s[1];var h=n.getAnchor(),f=n.getOrigin();if(f&&u&&0!==f[0]&&f[1]!==s[1]&&(a.x=f[0],a.y=u[1]-(f[1]+s[1])),h&&(h[0]!==s[0]/2||h[1]!==s[1]/2)){var c={x:h[0],xunits:Uv,y:s[1]-h[1],yunits:Uv};e.hotSpot=c;}}e.Icon=a;var l=n.getScaleArray()[0],v=s;null===v&&(v=aA),2==v.length&&(l/=DA(v)),1!==l&&(e.scale=l);var p=n.getRotation();0!==p&&(e.heading=p);var d=n.getColor();d&&(e.color=d);var y=i[i.length-1].node,m=FP[y.namespaceURI],w=Cc(e,m);Lc(r,GP,Pc,w,i,m);}),LabelStyle:Ec(function(t,n,i){var r={node:t},e={},o=n.getFill();o&&(e.color=o.getColor());var s=n.getScale();s&&1!==s&&(e.scale=s);var u=i[i.length-1].node,a=DP[u.namespaceURI],h=Cc(e,a);Lc(r,qP,Pc,h,i,a);}),LineStyle:Ec(function(t,n,i){var r={node:t},e={color:n.getColor(),width:Number(n.getWidth())||1},o=i[i.length-1].node,s=UP[o.namespaceURI],u=Cc(e,s);Lc(r,BP,Pc,u,i,s);}),PolyStyle:Ec(function(t,n,i){var r={node:t},e=n.getFill(),o=n.getStroke(),s={color:e?e.getColor():void 0,fill:!!e&&void 0,outline:!!o&&void 0},u=i[i.length-1].node,a=uC[u.namespaceURI],h=Cc(s,a);Lc(r,lC,Pc,h,i,a);})});var yC=UA,mC=function(){var _t193=function t(n,i){return _t193=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t193(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t193(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),wC=[null],gC=kc(wC,{nd:function nd(t,n){n[n.length-1].ndrefs.push(t.getAttribute("ref"));},tag:_C}),bC=kc(wC,{node:function node(t,n){var i=n[0],r=n[n.length-1],e=t.getAttribute("id"),o=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];r.nodes[e]=o;var s=Ic({tags:{}},MC,t,n);if(!k(s.tags)){var u=new ke(o);Qx(u,!1,i);var a=new Ct(u);void 0!==e&&a.setId(e),a.setProperties(s.tags,!0),r.features.push(a);}},way:function way(t,n){var i=Ic({id:t.getAttribute("id"),ndrefs:[],tags:{}},gC,t,n);n[n.length-1].ways.push(i);}}),xC=function(t){function n(){var n=t.call(this)||this;return n.dataProjection=br("EPSG:4326"),n;}return mC(n,t),n.prototype.readFeaturesFromNode=function(t,n){var i=this.getReadOptions(t,n);if("osm"==t.localName){for(var r=Ic({nodes:{},ways:[],features:[]},bC,t,[i]),e=0;e<r.ways.length;e++){for(var o=r.ways[e],s=[],u=0,a=o.ndrefs.length;u<a;u++){g(s,r.nodes[o.ndrefs[u]]);}var h=void 0;Qx(h=o.ndrefs[0]==o.ndrefs[o.ndrefs.length-1]?new to(s,kt,[s.length]):new _x(s,kt),!1,i);var f=new Ct(h);void 0!==o.id&&f.setId(o.id),f.setProperties(o.tags,!0),r.features.push(f);}if(r.features)return r.features;}return[];},n;}(qE),MC=kc(wC,{tag:_C});function _C(t,n){n[n.length-1].tags[t.getAttribute("k")]=t.getAttribute("v");}var SC=xC,OC=function(){function t(){}return t.prototype.read=function(t){if(t){if("string"==typeof t){var n=xc(t);return this.readFromDocument(n);}return gc(t)?this.readFromDocument(t):this.readFromNode(t);}return null;},t.prototype.readFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling){if(n.nodeType==Node.ELEMENT_NODE)return this.readFromNode(n);}return null;},t.prototype.readFromNode=function(t){},t;}();function jC(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href");}var EC=function(){var _t194=function t(n,i){return _t194=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t194(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t194(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),TC=[null,"http://www.opengis.net/ows/1.1"],AC=kc(TC,{ServiceIdentification:jc(function(t,n){return Ic({},UC,t,n);}),ServiceProvider:jc(function(t,n){return Ic({},BC,t,n);}),OperationsMetadata:jc(function(t,n){return Ic({},FC,t,n);})}),PC=function(t){function n(){return t.call(this)||this;}return EC(n,t),n.prototype.readFromNode=function(t){var n=Ic({},AC,t,[]);return n||null;},n;}(OC),CC=kc(TC,{DeliveryPoint:jc(tT),City:jc(tT),AdministrativeArea:jc(tT),PostalCode:jc(tT),Country:jc(tT),ElectronicMailAddress:jc(tT)}),kC=kc(TC,{Value:Oc(function(t,n){return tT(t);})}),NC=kc(TC,{AllowedValues:jc(function(t,n){return Ic({},kC,t,n);})}),IC=kc(TC,{Phone:jc(function(t,n){return Ic({},GC,t,n);}),Address:jc(function(t,n){return Ic({},CC,t,n);})}),zC=kc(TC,{HTTP:jc(function(t,n){return Ic({},LC,t,n);})}),LC=kc(TC,{Get:Oc(function(t,n){var i=jC(t);if(!i)return;return Ic({href:i},DC,t,n);}),Post:void 0}),RC=kc(TC,{DCP:jc(function(t,n){return Ic({},zC,t,n);})}),FC=kc(TC,{Operation:function Operation(t,n){var i=t.getAttribute("name"),r=Ic({},RC,t,n);if(!r)return;n[n.length-1][i]=r;}}),GC=kc(TC,{Voice:jc(tT),Facsimile:jc(tT)}),DC=kc(TC,{Constraint:Oc(function(t,n){var i=t.getAttribute("name");if(!i)return;return Ic({name:i},NC,t,n);})}),qC=kc(TC,{IndividualName:jc(tT),PositionName:jc(tT),ContactInfo:jc(function(t,n){return Ic({},IC,t,n);})}),UC=kc(TC,{Abstract:jc(tT),AccessConstraints:jc(tT),Fees:jc(tT),Title:jc(tT),ServiceTypeVersion:jc(tT),ServiceType:jc(tT)}),BC=kc(TC,{ProviderName:jc(tT),ProviderSite:jc(jC),ServiceContact:jc(function(t,n){return Ic({},qC,t,n);})});var XC=PC,VC=function(){var _t195=function t(n,i){return _t195=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t195(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t195(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),WC=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=br("EPSG:4326"),i.Ly=r.factor?r.factor:1e5,i.qv=r.geometryLayout?r.geometryLayout:kt,i;}return VC(n,t),n.prototype.readFeatureFromText=function(t,n){var i=this.readGeometryFromText(t,n);return new Ct(i);},n.prototype.readFeaturesFromText=function(t,n){return[this.readFeatureFromText(t,n)];},n.prototype.readGeometryFromText=function(t,n){var i=te(this.qv),r=KC(t,i,this.Ly);CE(r,0,r.length,i,r);var e=xe(r,0,r.length,i);return Qx(new _x(e,this.qv),!1,this.adaptOptions(n));},n.prototype.writeFeatureText=function(t,n){var i=t.getGeometry();return i?this.writeGeometryText(i,n):(Et(!1,40),"");},n.prototype.writeFeaturesText=function(t,n){return this.writeFeatureText(t[0],n);},n.prototype.writeGeometryText=function(t,n){var i=(t=Qx(t,!0,this.adaptOptions(n))).getFlatCoordinates(),r=t.getStride();return CE(i,0,i.length,r,i),YC(i,r,this.Ly);},n;}(fA);function YC(t,n,i){var r,e=i||1e5,o=new Array(n);for(r=0;r<n;++r){o[r]=0;}for(var s=0,u=t.length;s<u;){for(r=0;r<n;++r,++s){var a=t[s],h=a-o[r];o[r]=a,t[s]=h;}}return ZC(t,e);}function KC(t,n,i){var r,e=i||1e5,o=new Array(n);for(r=0;r<n;++r){o[r]=0;}for(var s=$C(t,e),u=0,a=s.length;u<a;){for(r=0;r<n;++r,++u){o[r]+=s[u],s[u]=o[r];}}return s;}function ZC(t,n){for(var i=n||1e5,r=0,e=t.length;r<e;++r){t[r]=Math.round(t[r]*i);}return HC(t);}function $C(t,n){for(var i=n||1e5,r=JC(t),e=0,o=r.length;e<o;++e){r[e]/=i;}return r;}function HC(t){for(var n=0,i=t.length;n<i;++n){var r=t[n];t[n]=r<0?~(r<<1):r<<1;}return QC(t);}function JC(t){for(var n=tk(t),i=0,r=n.length;i<r;++i){var e=n[i];n[i]=1&e?~(e>>1):e>>1;}return n;}function QC(t){for(var n="",i=0,r=t.length;i<r;++i){n+=nk(t[i]);}return n;}function tk(t){for(var n=[],i=0,r=0,e=0,o=t.length;e<o;++e){var s=t.charCodeAt(e)-63;i|=(31&s)<<r,s<32?(n.push(i),i=0,r=0):r+=5;}return n;}function nk(t){for(var n,i="";t>=32;){n=63+(32|31&t),i+=String.fromCharCode(n),t>>=5;}return n=t+63,i+=String.fromCharCode(n);}var ik=WC,rk=function(){var _t196=function t(n,i){return _t196=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t196(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t196(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),ek=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.iv=r.layerName,i.Uh=r.layers?r.layers:null,i.dataProjection=br(r.dataProjection?r.dataProjection:"EPSG:4326"),i;}return rk(n,t),n.prototype.readFeaturesFromObject=function(t,n){if("Topology"==t.type){var i=t,r=void 0,e=null,o=null;i.transform&&(e=(r=i.transform).scale,o=r.translate);var s=i.arcs;r&&function(t,n,i){for(var r=0,e=t.length;r<e;++r){hk(t[r],n,i);}}(s,e,o);var u=[],a=i.objects,h=this.iv,f=void 0;for(var c in a){this.Uh&&-1==this.Uh.indexOf(c)||("GeometryCollection"===a[c].type?(f=a[c],u.push.apply(u,uk(f,s,e,o,h,c,n))):(f=a[c],u.push(ak(f,s,e,o,h,c,n))));}return u;}return[];},n.prototype.readProjectionFromObject=function(t){return this.dataProjection;},n;}(dM),ok={Point:function Point(t,n,i){var r=t.coordinates;n&&i&&fk(r,n,i);return new ke(r);},LineString:function LineString(t,n){var i=sk(t.arcs,n);return new _x(i);},Polygon:function Polygon(t,n){for(var i=[],r=0,e=t.arcs.length;r<e;++r){i[r]=sk(t.arcs[r],n);}return new to(i);},MultiPoint:function MultiPoint(t,n,i){var r=t.coordinates;if(n&&i)for(var e=0,o=r.length;e<o;++e){fk(r[e],n,i);}return new mx(r);},MultiLineString:function MultiLineString(t,n){for(var i=[],r=0,e=t.arcs.length;r<e;++r){i[r]=sk(t.arcs[r],n);}return new jx(i);},MultiPolygon:function MultiPolygon(t,n){for(var i=[],r=0,e=t.arcs.length;r<e;++r){for(var o=t.arcs[r],s=[],u=0,a=o.length;u<a;++u){s[u]=sk(o[u],n);}i[r]=s;}return new Px(i);}};function sk(t,n){for(var i,r=[],e=0,o=t.length;e<o;++e){if(i=t[e],e>0&&r.pop(),i>=0)for(var s=0,u=(a=n[i]).length;s<u;++s){r.push(a[s].slice(0));}else{var a;for(s=(a=n[~i]).length-1;s>=0;--s){r.push(a[s].slice(0));}}}return r;}function uk(t,n,i,r,e,o,s){for(var u=t.geometries,a=[],h=0,f=u.length;h<f;++h){a[h]=ak(u[h],n,i,r,e,o,s);}return a;}function ak(t,n,i,r,e,o,s){var u=null,a=t.type;if(a){var h=ok[a];u=Qx(u="Point"===a||"MultiPoint"===a?h(t,i,r):h(t,n),!1,s);}var f=new Ct({geometry:u});void 0!==t.id&&f.setId(t.id);var c=t.properties;return e&&(c||(c={}),c[e]=o),c&&f.setProperties(c,!0),f;}function hk(t,n,i){for(var r=0,e=0,o=0,s=t.length;o<s;++o){var u=t[o];r+=u[0],e+=u[1],u[0]=r,u[1]=e,fk(u,n,i);}}function fk(t,n,i){t[0]=t[0]*n[0]+i[0],t[1]=t[1]*n[1]+i[1];}var ck=ek,lk=function(){function t(t){this.Ry=t;}return t.prototype.getTagName=function(){return this.Ry;},t;}(),vk=function(){var _t197=function t(n,i){return _t197=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t197(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t197(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),pk=function(t){function n(n,i){var r=t.call(this,n)||this;return r.conditions=i,Et(r.conditions.length>=2,57),r;}return vk(n,t),n;}(lk),dk=function(){var _t198=function t(n,i){return _t198=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t198(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t198(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),yk=function(t){function n(n){return t.call(this,"And",Array.prototype.slice.call(arguments))||this;}return dk(n,t),n;}(pk),mk=yk,wk=function(){var _t199=function t(n,i){return _t199=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t199(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t199(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),gk=function(t){function n(n,i,r){var e=t.call(this,"BBOX")||this;if(e.geometryName=n,e.extent=i,4!==i.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return e.srsName=r,e;}return wk(n,t),n;}(lk),bk=function(){var _t200=function t(n,i){return _t200=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t200(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t200(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),xk=function(t){function n(n,i,r,e){var o=t.call(this,n)||this;return o.geometryName=i||"the_geom",o.geometry=r,o.srsName=e,o;}return bk(n,t),n;}(lk),Mk=function(){var _t201=function t(n,i){return _t201=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t201(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t201(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),_k=function(t){function n(n,i,r){return t.call(this,"Contains",n,i,r)||this;}return Mk(n,t),n;}(xk),Sk=function(){var _t202=function t(n,i){return _t202=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t202(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t202(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Ok=function(t){function n(n,i,r,e,o){var s=t.call(this,"DWithin",n,i,o)||this;return s.distance=r,s.unit=e,s;}return Sk(n,t),n;}(xk),jk=Ok,Ek=function(){var _t203=function t(n,i){return _t203=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t203(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t203(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Tk=function(t){function n(n,i,r){return t.call(this,"Disjoint",n,i,r)||this;}return Ek(n,t),n;}(xk),Ak=function(){var _t204=function t(n,i){return _t204=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t204(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t204(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Pk=function(t){function n(n,i){var r=t.call(this,n)||this;return r.propertyName=i,r;}return Ak(n,t),n;}(lk),Ck=function(){var _t205=function t(n,i){return _t205=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t205(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t205(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),kk=function(t){function n(n,i,r){var e=t.call(this,"During",n)||this;return e.begin=i,e.end=r,e;}return Ck(n,t),n;}(Pk),Nk=function(){var _t206=function t(n,i){return _t206=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t206(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t206(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Ik=function(t){function n(n,i,r,e){var o=t.call(this,n,i)||this;return o.expression=r,o.matchCase=e,o;}return Nk(n,t),n;}(Pk),zk=function(){var _t207=function t(n,i){return _t207=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t207(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t207(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Lk=function(t){function n(n,i,r){return t.call(this,"PropertyIsEqualTo",n,i,r)||this;}return zk(n,t),n;}(Ik),Rk=function(){var _t208=function t(n,i){return _t208=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t208(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t208(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Fk=function(t){function n(n,i){return t.call(this,"PropertyIsGreaterThan",n,i)||this;}return Rk(n,t),n;}(Ik),Gk=Fk,Dk=function(){var _t209=function t(n,i){return _t209=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t209(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t209(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),qk=function(t){function n(n,i){return t.call(this,"PropertyIsGreaterThanOrEqualTo",n,i)||this;}return Dk(n,t),n;}(Ik),Uk=function(){var _t210=function t(n,i){return _t210=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t210(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t210(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Bk=function(t){function n(n,i,r){return t.call(this,"Intersects",n,i,r)||this;}return Uk(n,t),n;}(xk),Xk=function(){var _t211=function t(n,i){return _t211=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t211(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t211(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Vk=function(t){function n(n,i,r){var e=t.call(this,"PropertyIsBetween",n)||this;return e.lowerBoundary=i,e.upperBoundary=r,e;}return Xk(n,t),n;}(Pk),Wk=function(){var _t212=function t(n,i){return _t212=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t212(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t212(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Yk=function(t){function n(n,i,r,e,o,s){var u=t.call(this,"PropertyIsLike",n)||this;return u.pattern=i,u.wildCard=void 0!==r?r:"*",u.singleChar=void 0!==e?e:".",u.escapeChar=void 0!==o?o:"!",u.matchCase=s,u;}return Wk(n,t),n;}(Pk),Kk=function(){var _t213=function t(n,i){return _t213=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t213(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t213(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Zk=function(t){function n(n){return t.call(this,"PropertyIsNull",n)||this;}return Kk(n,t),n;}(Pk),$k=function(){var _t214=function t(n,i){return _t214=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t214(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t214(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Hk=function(t){function n(n,i){return t.call(this,"PropertyIsLessThan",n,i)||this;}return $k(n,t),n;}(Ik),Jk=Hk,Qk=function(){var _t215=function t(n,i){return _t215=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t215(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t215(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),tN=function(t){function n(n,i){return t.call(this,"PropertyIsLessThanOrEqualTo",n,i)||this;}return Qk(n,t),n;}(Ik),nN=function(){var _t216=function t(n,i){return _t216=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t216(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t216(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),iN=function(t){function n(n){var i=t.call(this,"Not")||this;return i.condition=n,i;}return nN(n,t),n;}(lk),rN=function(){var _t217=function t(n,i){return _t217=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t217(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t217(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),eN=function(t){function n(n,i,r){return t.call(this,"PropertyIsNotEqualTo",n,i,r)||this;}return rN(n,t),n;}(Ik),oN=function(){var _t218=function t(n,i){return _t218=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t218(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t218(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),sN=function(t){function n(n){return t.call(this,"Or",Array.prototype.slice.call(arguments))||this;}return oN(n,t),n;}(pk),uN=sN,aN=function(){var _t219=function t(n,i){return _t219=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t219(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t219(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),hN=function(t){function n(n){var i=t.call(this,"ResourceId")||this;return i.rid=n,i;}return aN(n,t),n;}(lk),fN=function(){var _t220=function t(n,i){return _t220=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t220(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t220(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),cN=function(t){function n(n,i,r){return t.call(this,"Within",n,i,r)||this;}return fN(n,t),n;}(xk),lN=cN;function vN(t){var n=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(mk,n))();}function pN(t,n,i){return new gk(t,n,i);}var dN=function(){var _t221=function t(n,i){return _t221=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t221(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t221(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),yN={"http://www.opengis.net/gml":{boundedBy:jc(WE.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:_c(WE.prototype.readFeaturesInternal)}},mN={"http://www.opengis.net/wfs":{totalInserted:jc(JE),totalUpdated:jc(JE),totalDeleted:jc(JE)},"http://www.opengis.net/wfs/2.0":{totalInserted:jc(JE),totalUpdated:jc(JE),totalDeleted:jc(JE)}},wN={"http://www.opengis.net/wfs":{TransactionSummary:jc(PN,"transactionSummary"),InsertResults:jc(IN,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:jc(PN,"transactionSummary"),InsertResults:jc(IN,"insertIds")}},gN={"http://www.opengis.net/wfs":{PropertyName:Ec(sT)},"http://www.opengis.net/wfs/2.0":{PropertyName:Ec(sT)}},bN={"http://www.opengis.net/wfs":{Insert:Ec(zN),Update:Ec(GN),Delete:Ec(FN),Property:Ec(DN),Native:Ec(qN)},"http://www.opengis.net/wfs/2.0":{Insert:Ec(zN),Update:Ec(GN),Delete:Ec(FN),Property:Ec(DN),Native:Ec(qN)}},xN="feature",MN="http://www.w3.org/2000/xmlns/",_N={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},SN={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},ON={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},jN={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},EN={"2.0.0":gT,"1.1.0":pT,"1.0.0":fT},TN=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.af=r.version?r.version:"1.1.0",i.Fy=r.featureType,i.Gy=r.featureNS,i.Dy=r.gmlFormat?r.gmlFormat:new EN[i.af](),i.qy=r.schemaLocation?r.schemaLocation:jN[i.af],i;}return dN(n,t),n.prototype.getFeatureType=function(){return this.Fy;},n.prototype.setFeatureType=function(t){this.Fy=t;},n.prototype.readFeaturesFromNode=function(t,n){var i={node:t};A(i,{featureType:this.Fy,featureNS:this.Gy}),A(i,this.getReadOptions(t,n||{}));var r=[i],e=Ic([],"2.0.0"===this.af?yN:this.Dy.FEATURE_COLLECTION_PARSERS,t,r,this.Dy);return e||(e=[]),e;},n.prototype.readTransactionResponse=function(t){if(t){if("string"==typeof t){var n=xc(t);return this.readTransactionResponseFromDocument(n);}return gc(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t);}},n.prototype.readFeatureCollectionMetadata=function(t){if(t){if("string"==typeof t){var n=xc(t);return this.readFeatureCollectionMetadataFromDocument(n);}return gc(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t);}},n.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling){if(n.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(n);}},n.prototype.readFeatureCollectionMetadataFromNode=function(t){var n={},i=QE(t.getAttribute("numberOfFeatures"));return n.numberOfFeatures=i,Ic(n,yN,t,[],this.Dy);},n.prototype.readTransactionResponseFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling){if(n.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(n);}},n.prototype.readTransactionResponseFromNode=function(t){return Ic({},wN,t,[]);},n.prototype.writeGetFeature=function(t){var n=this,i=yc(SN[this.af],"GetFeature");i.setAttribute("service","WFS"),i.setAttribute("version",this.af),t.handle&&i.setAttribute("handle",t.handle),t.outputFormat&&i.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&i.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&i.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&i.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&i.setAttribute("count",String(t.count)),void 0!==t.viewParams&&i.setAttribute("viewParams",t.viewParams),i.setAttributeNS(dc,"xsi:schemaLocation",this.qy);var r={node:i};if(A(r,{version:this.af,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.Gy,featurePrefix:t.featurePrefix,propertyNames:t.propertyNames?t.propertyNames:[]}),Et(Array.isArray(t.featureTypes),11),"string"==typeof t.featureTypes[0]){var e=t.filter;t.bbox&&(Et(t.geometryName,12),e=this.combineBboxAndFilter(t.geometryName,t.bbox,t.srsName,e)),A(r,{geometryName:t.geometryName,filter:e}),oI(i,t.featureTypes,[r]);}else t.featureTypes.forEach(function(e){var o=n.combineBboxAndFilter(e.geometryName,e.bbox,t.srsName,t.filter);A(r,{geometryName:e.geometryName,filter:o}),oI(i,[e.name],[r]);});return i;},n.prototype.combineBboxAndFilter=function(t,n,i,r){var e=pN(t,n,i);return r?vN(r,e):e;},n.prototype.writeTransaction=function(t,n,i,r){var e,o=[],s=r.version?r.version:this.af,u=yc(SN[s],"Transaction");u.setAttribute("service","WFS"),u.setAttribute("version",s),r&&(e=r.gmlOptions?r.gmlOptions:{},r.handle&&u.setAttribute("handle",r.handle)),u.setAttributeNS(dc,"xsi:schemaLocation",jN[s]);var a=function(t,n,i,r){var e,o=r.featurePrefix?r.featurePrefix:xN;"1.0.0"===i?e=2:"1.1.0"===i?e=3:"2.0.0"===i&&(e=3.2);return A({node:t},{version:i,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:o,gmlVersion:e,hasZ:r.hasZ,srsName:r.srsName},n);}(u,e,s,r);return t&&AN("Insert",t,o,a),n&&AN("Update",n,o,a),i&&AN("Delete",i,o,a),r.nativeElements&&AN("Native",r.nativeElements,o,a),u;},n.prototype.readProjectionFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling){if(n.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(n);}return null;},n.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(var n=(t=t.firstElementChild.firstElementChild).firstElementChild;n;n=n.nextElementSibling){if(0!==n.childNodes.length&&(1!==n.childNodes.length||3!==n.firstChild.nodeType)){var i=[{}];return this.Dy.readGeometryElement(n,i),br(i.pop().srsName);}}return null;},n;}(qE);function AN(t,n,i,r){Lc(r,bN,Ac(t),n,i);}function PN(t,n){return Ic({},mN,t,n);}var CN={"http://www.opengis.net/ogc":{FeatureId:_c(function(t,n){return t.getAttribute("fid");})},"http://www.opengis.net/ogc/1.1":{FeatureId:_c(function(t,n){return t.getAttribute("fid");})}};function kN(t,n){Nc(CN,t,n);}var NN={"http://www.opengis.net/wfs":{Feature:kN},"http://www.opengis.net/wfs/2.0":{Feature:kN}};function IN(t,n){return Ic([],NN,t,n);}function zN(t,n,i){var r=i[i.length-1],e=r.featureType,o=r.featureNS,s=r.gmlVersion,u=yc(o,e);t.appendChild(u),2===s?fT.prototype.writeFeatureElement(u,n,i):3===s?pT.prototype.writeFeatureElement(u,n,i):gT.prototype.writeFeatureElement(u,n,i);}function LN(t,n,i){var r=i[i.length-1].version,e=_N[r],o=yc(e,"Filter"),s=yc(e,"FeatureId");o.appendChild(s),s.setAttribute("fid",n),t.appendChild(o);}function RN(t,n){var i=(t=t||xN)+":";return 0===n.indexOf(i)?n:i+n;}function FN(t,n,i){var r=i[i.length-1];Et(void 0!==n.getId(),26);var e=r.featureType,o=r.featurePrefix,s=r.featureNS,u=RN(o,e);t.setAttribute("typeName",u),t.setAttributeNS(MN,"xmlns:"+o,s);var a=n.getId();void 0!==a&&LN(t,a,i);}function GN(t,n,i){var r=i[i.length-1];Et(void 0!==n.getId(),27);var e=r.version,o=r.featureType,s=r.featurePrefix,u=r.featureNS,a=RN(s,o),h=n.getGeometryName();t.setAttribute("typeName",a),t.setAttributeNS(MN,"xmlns:"+s,u);var f=n.getId();if(void 0!==f){for(var c=n.getKeys(),l=[],v=0,p=c.length;v<p;v++){var d=n.get(c[v]);if(void 0!==d){var y=c[v];d&&"function"==typeof d.getSimplifiedGeometry&&(y=h),l.push({name:y,value:d});}}Lc({version:e,gmlVersion:r.gmlVersion,node:t,hasZ:r.hasZ,srsName:r.srsName},bN,Ac("Property"),l,i),LN(t,f,i);}}function DN(t,n,i){var r=i[i.length-1],e=r.version,o=SN[e],s=yc(o,"Name"),u=r.gmlVersion;if(t.appendChild(s),sT(s,n.name),void 0!==n.value&&null!==n.value){var a=yc(o,"Value");t.appendChild(a),n.value&&"function"==typeof n.value.getSimplifiedGeometry?2===u?fT.prototype.writeGeometryElement(a,n.value,i):3===u?pT.prototype.writeGeometryElement(a,n.value,i):gT.prototype.writeGeometryElement(a,n.value,i):sT(a,n.value);}}function qN(t,n,i){n.vendorId&&t.setAttribute("vendorId",n.vendorId),void 0!==n.safeToIgnore&&t.setAttribute("safeToIgnore",String(n.safeToIgnore)),void 0!==n.value&&sT(t,n.value);}var UN={"http://www.opengis.net/wfs":{Query:Ec(BN)},"http://www.opengis.net/wfs/2.0":{Query:Ec(BN)},"http://www.opengis.net/ogc":{During:Ec(KN),And:Ec(ZN),Or:Ec(ZN),Not:Ec($N),BBOX:Ec(VN),Contains:Ec(WN),Intersects:Ec(WN),Within:Ec(WN),DWithin:Ec(YN),PropertyIsEqualTo:Ec(HN),PropertyIsNotEqualTo:Ec(HN),PropertyIsLessThan:Ec(HN),PropertyIsLessThanOrEqualTo:Ec(HN),PropertyIsGreaterThan:Ec(HN),PropertyIsGreaterThanOrEqualTo:Ec(HN),PropertyIsNull:Ec(JN),PropertyIsBetween:Ec(QN),PropertyIsLike:Ec(tI)},"http://www.opengis.net/fes/2.0":{During:Ec(KN),And:Ec(ZN),Or:Ec(ZN),Not:Ec($N),BBOX:Ec(VN),Contains:Ec(WN),Disjoint:Ec(WN),Intersects:Ec(WN),ResourceId:Ec(function(t,n,i){t.setAttribute("rid",n.rid);}),Within:Ec(WN),DWithin:Ec(YN),PropertyIsEqualTo:Ec(HN),PropertyIsNotEqualTo:Ec(HN),PropertyIsLessThan:Ec(HN),PropertyIsLessThanOrEqualTo:Ec(HN),PropertyIsGreaterThan:Ec(HN),PropertyIsGreaterThanOrEqualTo:Ec(HN),PropertyIsNull:Ec(JN),PropertyIsBetween:Ec(QN),PropertyIsLike:Ec(tI)}};function BN(t,n,i){var r,e,o=i[i.length-1],s=o.version,u=o.featurePrefix,a=o.featureNS,h=o.propertyNames,f=o.srsName;r=u?RN(u,n):n,e="2.0.0"===s?"typeNames":"typeName",t.setAttribute(e,r),f&&t.setAttribute("srsName",f),a&&t.setAttributeNS(MN,"xmlns:"+u,a);var c=A({},o);c.node=t,Lc(c,gN,Ac("PropertyName"),h,i);var l=o.filter;if(l){var v=yc(sI(s),"Filter");t.appendChild(v),XN(v,l,i);}}function XN(t,n,i){var r=i[i.length-1],e={node:t};A(e,{context:r}),Lc(e,UN,Ac(n.getTagName()),[n],i);}function VN(t,n,i){var r=i[i.length-1],e=r.context.version;r.srsName=n.srsName;var o=EN[e];rI(e,t,n.geometryName),o.prototype.writeGeometryElement(t,n.extent,i);}function WN(t,n,i){var r=i[i.length-1],e=r.context.version;r.srsName=n.srsName;var o=EN[e];rI(e,t,n.geometryName),o.prototype.writeGeometryElement(t,n.geometry,i);}function YN(t,n,i){var r=i[i.length-1].context.version;WN(t,n,i);var e=yc(sI(r),"Distance");sT(e,n.distance.toString()),"2.0.0"===r?e.setAttribute("uom",n.unit):e.setAttribute("units",n.unit),t.appendChild(e);}function KN(t,n,i){var r=i[i.length-1].context.version;nI(ON[r],"ValueReference",t,n.propertyName);var e=yc(BE,"TimePeriod");t.appendChild(e);var o=yc(BE,"begin");e.appendChild(o),eI(o,n.begin);var s=yc(BE,"end");e.appendChild(s),eI(s,n.end);}function ZN(t,n,i){var r=i[i.length-1].context,e={node:t};A(e,{context:r});for(var o=n.conditions,s=0,u=o.length;s<u;++s){var a=o[s];Lc(e,UN,Ac(a.getTagName()),[a],i);}}function $N(t,n,i){var r=i[i.length-1].context,e={node:t};A(e,{context:r});var o=n.condition;Lc(e,UN,Ac(o.getTagName()),[o],i);}function HN(t,n,i){var r=i[i.length-1].context.version;void 0!==n.matchCase&&t.setAttribute("matchCase",n.matchCase.toString()),rI(r,t,n.propertyName),iI(r,t,""+n.expression);}function JN(t,n,i){rI(i[i.length-1].context.version,t,n.propertyName);}function QN(t,n,i){var r=i[i.length-1].context.version,e=sI(r);rI(r,t,n.propertyName);var o=yc(e,"LowerBoundary");t.appendChild(o),iI(r,o,""+n.lowerBoundary);var s=yc(e,"UpperBoundary");t.appendChild(s),iI(r,s,""+n.upperBoundary);}function tI(t,n,i){var r=i[i.length-1].context.version;t.setAttribute("wildCard",n.wildCard),t.setAttribute("singleChar",n.singleChar),t.setAttribute("escapeChar",n.escapeChar),void 0!==n.matchCase&&t.setAttribute("matchCase",n.matchCase.toString()),rI(r,t,n.propertyName),iI(r,t,""+n.pattern);}function nI(t,n,i,r){var e=yc(t,n);sT(e,r),i.appendChild(e);}function iI(t,n,i){nI(sI(t),"Literal",n,i);}function rI(t,n,i){"2.0.0"===t?nI(ON[t],"ValueReference",n,i):nI(_N[t],"PropertyName",n,i);}function eI(t,n){var i=yc(BE,"TimeInstant");t.appendChild(i);var r=yc(BE,"timePosition");i.appendChild(r),sT(r,n);}function oI(t,n,i){var r=i[i.length-1],e=A({},r);e.node=t,Lc(e,UN,Ac("Query"),n,i);}function sI(t){return"2.0.0"===t?ON[t]:_N[t];}var uI=TN,aI=function(){var _t222=function t(n,i){return _t222=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t222(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t222(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),hI=1,fI=2,cI=3,lI=4,vI=5,pI=6,dI=7,yI=15,mI=16,wI=17,gI=function(){function t(t){this.Uy=t,this.By=0,this.Xy=!1,this.Vy=!1,this.Wy=!1,this.Yy=!1,this.Ky=null,this.Zy=kt;}return t.prototype.readUint8=function(){return this.Uy.getUint8(this.By++);},t.prototype.readUint32=function(t){return this.Uy.getUint32((this.By+=4)-4,void 0!==t?t:this.Vy);},t.prototype.readDouble=function(t){return this.Uy.getFloat64((this.By+=8)-8,void 0!==t?t:this.Vy);},t.prototype.readPoint=function(){var t=[];return t.push(this.readDouble()),t.push(this.readDouble()),this.Wy&&t.push(this.readDouble()),this.Yy&&t.push(this.readDouble()),t;},t.prototype.readLineString=function(){for(var t=this.readUint32(),n=[],i=0;i<t;i++){n.push(this.readPoint());}return n;},t.prototype.readPolygon=function(){for(var t=this.readUint32(),n=[],i=0;i<t;i++){n.push(this.readLineString());}return n;},t.prototype.readWkbHeader=function(t){var n=this.readUint8()>0,i=this.readUint32(n),r=Math.floor((268435455&i)/1e3),e=Boolean(2147483648&i)||1===r||3===r,o=Boolean(1073741824&i)||2===r||3===r,s=Boolean(536870912&i),u=(268435455&i)%1e3,a=["XY",e?"Z":"",o?"M":""].join(""),h=s?this.readUint32(n):null;if(void 0!==t&&t!==u)throw new Error("Unexpected WKB geometry type "+u);if(this.Xy){if(this.Vy!==n)throw new Error("Inconsistent endian");if(this.Zy!==a)throw new Error("Inconsistent geometry layout");if(h&&this.Ky!==h)throw new Error("Inconsistent coordinate system (SRID)");}else this.Vy=n,this.Wy=e,this.Yy=o,this.Zy=a,this.Ky=h,this.Xy=!0;return u;},t.prototype.readWkbPayload=function(t){switch(t){case hI:return this.readPoint();case fI:return this.readLineString();case cI:case wI:return this.readPolygon();case lI:return this.readMultiPoint();case vI:return this.readMultiLineString();case pI:case yI:case mI:return this.readMultiPolygon();case dI:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+t+" is found");}},t.prototype.readWkbBlock=function(t){return this.readWkbPayload(this.readWkbHeader(t));},t.prototype.readWkbCollection=function(t,n){for(var i=this.readUint32(),r=[],e=0;e<i;e++){var o=t.call(this,n);o&&r.push(o);}return r;},t.prototype.readMultiPoint=function(){return this.readWkbCollection(this.readWkbBlock,hI);},t.prototype.readMultiLineString=function(){return this.readWkbCollection(this.readWkbBlock,fI);},t.prototype.readMultiPolygon=function(){return this.readWkbCollection(this.readWkbBlock,cI);},t.prototype.readGeometryCollection=function(){return this.readWkbCollection(this.readGeometry);},t.prototype.readGeometry=function(){var t=this.readWkbHeader(),n=this.readWkbPayload(t);switch(t){case hI:return new ke(n,this.Zy);case fI:return new _x(n,this.Zy);case cI:case wI:return new to(n,this.Zy);case lI:return new mx(n,this.Zy);case vI:return new jx(n,this.Zy);case pI:case yI:case mI:return new Px(n,this.Zy);case dI:return new lM(n);default:return null;}},t.prototype.getSrid=function(){return this.Ky;},t;}(),bI=function(){function t(t){t=t||{},this.Zy=t.layout,this.Vy=!1!==t.littleEndian,this.$y=!1!==t.ewkb,this.Hy=[],this.Jy=A({X:0,Y:0,Z:0,M:0},t.nodata);}return t.prototype.writeUint8=function(t){this.Hy.push([1,t]);},t.prototype.writeUint32=function(t){this.Hy.push([4,t]);},t.prototype.writeDouble=function(t){this.Hy.push([8,t]);},t.prototype.writePoint=function(t,n){for(var i=A.apply(null,n.split("").map(function(n,i){var r;return(r={})[n]=t[i],r;})),r=0,e=this.Zy;r<e.length;r++){var o=e[r];this.writeDouble(o in i?i[o]:this.Jy[o]);}},t.prototype.writeLineString=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++){this.writePoint(t[i],n);}},t.prototype.writePolygon=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++){this.writeLineString(t[i],n);}},t.prototype.writeWkbHeader=function(t,n){t%=1e3,this.Zy.indexOf("Z")>=0&&(t+=this.$y?2147483648:1e3),this.Zy.indexOf("M")>=0&&(t+=this.$y?1073741824:2e3),this.$y&&Number.isInteger(n)&&(t|=536870912),this.writeUint8(this.Vy?1:0),this.writeUint32(t),this.$y&&Number.isInteger(n)&&this.writeUint32(n);},t.prototype.writeMultiPoint=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++){this.writeWkbHeader(1),this.writePoint(t[i],n);}},t.prototype.writeMultiLineString=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++){this.writeWkbHeader(2),this.writeLineString(t[i],n);}},t.prototype.writeMultiPolygon=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++){this.writeWkbHeader(3),this.writePolygon(t[i],n);}},t.prototype.writeGeometryCollection=function(t){this.writeUint32(t.length);for(var n=0;n<t.length;n++){this.writeGeometry(t[n]);}},t.prototype.findMinimumLayout=function(t,n){void 0===n&&(n=zt);var i,r;if(t instanceof ie)return(i=t.getLayout())===(r=n)?i:i===zt?r:r===zt?i:kt;if(t instanceof lM)for(var e=t.getGeometriesArray(),o=0;o<e.length&&n!==kt;o++){n=this.findMinimumLayout(e[o],n);}return n;},t.prototype.writeGeometry=function(t,n){var i={Point:hI,LineString:fI,Polygon:cI,MultiPoint:lI,MultiLineString:vI,MultiPolygon:pI,GeometryCollection:dI},r=t.getType(),e=i[r];if(!e)throw new Error("GeometryType "+r+" is not supported");(this.Zy||(this.Zy=this.findMinimumLayout(t)),this.writeWkbHeader(e,n),t instanceof ie)?{Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon}[r].call(this,t.getCoordinates(),t.getLayout()):t instanceof lM&&this.writeGeometryCollection(t.getGeometriesArray());},t.prototype.getBuffer=function(){var t=this,n=this.Hy.reduce(function(t,n){return t+n[0];},0),i=new ArrayBuffer(n),r=new DataView(i),e=0;return this.Hy.forEach(function(n){switch(n[0]){case 1:r.setUint8(e,n[1]);break;case 4:r.setUint32(e,n[1],t.Vy);break;case 8:r.setFloat64(e,n[1],t.Vy);}e+=n[0];}),i;},t;}(),xI=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.splitCollection=Boolean(r.splitCollection),i.Qy=null,i.tm=!1!==r.hex,i.nm=!1!==r.littleEndian,i.im=!1!==r.ewkb,i.Zy=r.geometryLayout,i.rm=r.nodataZ||0,i.om=r.nodataM||0,i.Ky=r.srid,i;}return aI(n,t),n.prototype.getType=function(){return this.tm?"text":"arraybuffer";},n.prototype.readFeature=function(t,n){return new Ct({geometry:this.readGeometry(t,n)});},n.prototype.readFeatures=function(t,n){var i=this.readGeometry(t,n);return(this.splitCollection&&i instanceof lM?i.getGeometriesArray():[i]).map(function(t){return new Ct({geometry:t});});},n.prototype.readGeometry=function(t,n){var i=MI(t);if(!i)return null;var r=new gI(i).readGeometry();this.Qy=i;var e=this.getReadOptions(t,n);return this.Qy=null,Qx(r,!1,e);},n.prototype.readProjection=function(t){var n=this.Qy||MI(t);if(n){var i=new gI(n);return i.readWkbHeader(),i.getSrid()&&br("EPSG:"+i.getSrid())||void 0;}},n.prototype.writeFeature=function(t,n){return this.writeGeometry(t.getGeometry(),n);},n.prototype.writeFeatures=function(t,n){return this.writeGeometry(new lM(t.map(function(t){return t.getGeometry();})),n);},n.prototype.writeGeometry=function(t,n){var i=this.adaptOptions(n),r=new bI({layout:this.Zy,littleEndian:this.nm,ewkb:this.im,nodata:{Z:this.rm,M:this.om}}),e=Number.isInteger(this.Ky)?Number(this.Ky):null;if(!1!==this.Ky&&!Number.isInteger(this.Ky)){var o=i.dataProjection&&br(i.dataProjection);if(o){var s=o.getCode();0===s.indexOf("EPSG:")&&(e=Number(s.substring(5)));}}r.writeGeometry(Qx(t,!0,i),e);var u=r.getBuffer();return this.tm?function(t){var n=new Uint8Array(t);return Array.from(n.values()).map(function(t){return(t<16?"0":"")+Number(t).toString(16).toUpperCase();}).join("");}(u):u;},n;}(Jx);function MI(t){return"string"==typeof t?function(t){for(var n=new Uint8Array(t.length/2),i=0;i<t.length/2;i++){n[i]=parseInt(t.substr(2*i,2),16);}return new DataView(n.buffer);}(t):ArrayBuffer.isView(t)?t instanceof DataView?t:new DataView(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new DataView(t):null;}var _I=xI,SI=function(){var _t223=function t(n,i){return _t223=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t223(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t223(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),OI={POINT:ke,LINESTRING:_x,POLYGON:to,MULTIPOINT:mx,MULTILINESTRING:jx,MULTIPOLYGON:Px},jI="EMPTY",EI=0,TI=1,AI=2,PI=3,CI=4,kI=5,NI=6,II={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"},zI=function(){function t(t){this.wkt=t,this.sm=-1;}return t.prototype.um=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z";},t.prototype.am=function(t,n){return t>="0"&&t<="9"||"."==t&&!(void 0!==n&&n);},t.prototype.hm=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t;},t.prototype.fm=function(){return this.wkt.charAt(++this.sm);},t.prototype.nextToken=function(){var t,n=this.fm(),i=this.sm,r=n;if("("==n)t=AI;else if(","==n)t=kI;else if(")"==n)t=PI;else if(this.am(n)||"-"==n)t=CI,r=this.lm();else if(this.um(n))t=TI,r=this.vm();else{if(this.hm(n))return this.nextToken();if(""!==n)throw new Error("Unexpected character: "+n);t=NI;}return{position:i,value:r,type:t};},t.prototype.lm=function(){var t,n=this.sm,i=!1,r=!1;do{"."==t?i=!0:"e"!=t&&"E"!=t||(r=!0),t=this.fm();}while(this.am(t,i)||!r&&("e"==t||"E"==t)||r&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(n,this.sm--));},t.prototype.vm=function(){var t,n=this.sm;do{t=this.fm();}while(this.um(t));return this.wkt.substring(n,this.sm--).toUpperCase();},t;}(),LI=function(){function t(t){this.pm=t,this.dm={position:0,type:EI},this.Zy=kt;}return t.prototype.ym=function(){this.dm=this.pm.nextToken();},t.prototype.isTokenType=function(t){return this.dm.type==t;},t.prototype.match=function(t){var n=this.isTokenType(t);return n&&this.ym(),n;},t.prototype.parse=function(){return this.ym(),this.wm();},t.prototype.gm=function(){var t=kt,n=this.dm;if(this.isTokenType(TI)){var i=n.value;"Z"===i?t=Nt:"M"===i?t=It:"ZM"===i&&(t=zt),t!==kt&&this.ym();}return t;},t.prototype.bm=function(){if(this.match(AI)){var t=[];do{t.push(this.wm());}while(this.match(kI));if(this.match(PI))return t;}throw new Error(this.xm());},t.prototype.Mm=function(){if(this.match(AI)){var t=this._m();if(this.match(PI))return t;}throw new Error(this.xm());},t.prototype.Sm=function(){if(this.match(AI)){var t=this.Om();if(this.match(PI))return t;}throw new Error(this.xm());},t.prototype.jm=function(){if(this.match(AI)){var t=this.Em();if(this.match(PI))return t;}throw new Error(this.xm());},t.prototype.Tm=function(){if(this.match(AI)){var t=void 0;if(t=this.dm.type==AI?this.Am():this.Om(),this.match(PI))return t;}throw new Error(this.xm());},t.prototype.Pm=function(){if(this.match(AI)){var t=this.Em();if(this.match(PI))return t;}throw new Error(this.xm());},t.prototype.Cm=function(){if(this.match(AI)){var t=this.km();if(this.match(PI))return t;}throw new Error(this.xm());},t.prototype._m=function(){for(var t=[],n=this.Zy.length,i=0;i<n;++i){var r=this.dm;if(!this.match(CI))break;t.push(r.value);}if(t.length==n)return t;throw new Error(this.xm());},t.prototype.Om=function(){for(var t=[this._m()];this.match(kI);){t.push(this._m());}return t;},t.prototype.Am=function(){for(var t=[this.Mm()];this.match(kI);){t.push(this.Mm());}return t;},t.prototype.Em=function(){for(var t=[this.Sm()];this.match(kI);){t.push(this.Sm());}return t;},t.prototype.km=function(){for(var t=[this.jm()];this.match(kI);){t.push(this.jm());}return t;},t.prototype.Nm=function(){var t=this.isTokenType(TI)&&this.dm.value==jI;return t&&this.ym(),t;},t.prototype.xm=function(){return"Unexpected `"+this.dm.value+"` at position "+this.dm.position+" in `"+this.pm.wkt+"`";},t.prototype.wm=function(){var t=this.dm;if(this.match(TI)){var n=t.value;this.Zy=this.gm();var i=this.Nm();if("GEOMETRYCOLLECTION"==n){if(i)return new lM([]);var r=this.bm();return new lM(r);}var e=OI[n];if(!e)throw new Error("Invalid geometry type: "+n);var o=void 0;if(i)o="POINT"==n?[NaN,NaN]:[];else switch(n){case"POINT":o=this.Mm();break;case"LINESTRING":o=this.Sm();break;case"POLYGON":o=this.jm();break;case"MULTIPOINT":o=this.Tm();break;case"MULTILINESTRING":o=this.Pm();break;case"MULTIPOLYGON":o=this.Cm();}return new e(o,this.Zy);}throw new Error(this.xm());},t;}(),RI=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.Im=void 0!==r.splitCollection&&r.splitCollection,i;}return SI(n,t),n.prototype.zm=function(t){var n=new zI(t);return new LI(n).parse();},n.prototype.readFeatureFromText=function(t,n){var i=this.readGeometryFromText(t,n),r=new Ct();return r.setGeometry(i),r;},n.prototype.readFeaturesFromText=function(t,n){for(var i=[],r=this.readGeometryFromText(t,n),e=[],o=0,s=(i=this.Im&&"GeometryCollection"==r.getType()?r.getGeometriesArray():[r]).length;o<s;++o){var u=new Ct();u.setGeometry(i[o]),e.push(u);}return e;},n.prototype.readGeometryFromText=function(t,n){return Qx(this.zm(t),!1,n);},n.prototype.writeFeatureText=function(t,n){var i=t.getGeometry();return i?this.writeGeometryText(i,n):"";},n.prototype.writeFeaturesText=function(t,n){if(1==t.length)return this.writeFeatureText(t[0],n);for(var i=[],r=0,e=t.length;r<e;++r){i.push(t[r].getGeometry());}var o=new lM(i);return this.writeGeometryText(o,n);},n.prototype.writeGeometryText=function(t,n){return UI(Qx(t,!0,n));},n;}(fA);function FI(t){var n=t.getCoordinates();return 0===n.length?"":n.join(" ");}function GI(t){for(var n=t.getCoordinates(),i=[],r=0,e=n.length;r<e;++r){i.push(n[r].join(" "));}return i.join(",");}function DI(t){for(var n=[],i=t.getLinearRings(),r=0,e=i.length;r<e;++r){n.push("("+GI(i[r])+")");}return n.join(",");}var qI={Point:FI,LineString:GI,Polygon:DI,MultiPoint:function MultiPoint(t){for(var n=[],i=t.getPoints(),r=0,e=i.length;r<e;++r){n.push("("+FI(i[r])+")");}return n.join(",");},MultiLineString:function MultiLineString(t){for(var n=[],i=t.getLineStrings(),r=0,e=i.length;r<e;++r){n.push("("+GI(i[r])+")");}return n.join(",");},MultiPolygon:function MultiPolygon(t){for(var n=[],i=t.getPolygons(),r=0,e=i.length;r<e;++r){n.push("("+DI(i[r])+")");}return n.join(",");},GeometryCollection:function GeometryCollection(t){for(var n=[],i=t.getGeometries(),r=0,e=i.length;r<e;++r){n.push(UI(i[r]));}return n.join(",");}};function UI(t){var n=t.getType(),i=(0,qI[n])(t),r=II[n];if("function"==typeof t.getFlatCoordinates){var e=function(t){var n=t.getLayout(),i="";return n!==Nt&&n!==zt||(i+="Z"),n!==It&&n!==zt||(i+="M"),i;}(t);e.length>0&&(r+=" "+e);}return 0===i.length?r+" "+jI:r+"("+i+")";}var BI=RI,XI=function(){var _t224=function t(n,i){return _t224=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t224(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t224(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),VI=[null,"http://www.opengis.net/wms"],WI=kc(VI,{Service:jc(function(t,n){return Ic({},ZI,t,n);}),Capability:jc(function(t,n){return Ic({},YI,t,n);})}),YI=kc(VI,{Request:jc(function(t,n){return Ic({},rz,t,n);}),Exception:jc(function(t,n){return Ic([],QI,t,n);}),Layer:jc(function(t,n){var i=Ic({},tz,t,n);if(void 0===i.Layer)return Object.assign(i,fz(t,n));return i;})}),KI=function(t){function n(){var n=t.call(this)||this;return n.version=void 0,n;}return XI(n,t),n.prototype.readFromNode=function(t){this.version=t.getAttribute("version").trim();var n=Ic({version:this.version},WI,t,[]);return n||null;},n;}(OC),ZI=kc(VI,{Name:jc(tT),Title:jc(tT),Abstract:jc(tT),KeywordList:jc(pz),OnlineResource:jc(jC),ContactInformation:jc(function(t,n){return Ic({},$I,t,n);}),Fees:jc(tT),AccessConstraints:jc(tT),LayerLimit:jc(JE),MaxWidth:jc(JE),MaxHeight:jc(JE)}),$I=kc(VI,{ContactPersonPrimary:jc(function(t,n){return Ic({},HI,t,n);}),ContactPosition:jc(tT),ContactAddress:jc(function(t,n){return Ic({},JI,t,n);}),ContactVoiceTelephone:jc(tT),ContactFacsimileTelephone:jc(tT),ContactElectronicMailAddress:jc(tT)}),HI=kc(VI,{ContactPerson:jc(tT),ContactOrganization:jc(tT)}),JI=kc(VI,{AddressType:jc(tT),Address:jc(tT),City:jc(tT),StateOrProvince:jc(tT),PostCode:jc(tT),Country:jc(tT)}),QI=kc(VI,{Format:_c(tT)}),tz=kc(VI,{Name:jc(tT),Title:jc(tT),Abstract:jc(tT),KeywordList:jc(pz),CRS:Oc(tT),EX_GeographicBoundingBox:jc(function(t,n){var i=Ic({},iz,t,n);if(!i)return;var r=i.westBoundLongitude,e=i.southBoundLatitude,o=i.eastBoundLongitude,s=i.northBoundLatitude;if(void 0===r||void 0===e||void 0===o||void 0===s)return;return[r,e,o,s];}),BoundingBox:Oc(function(t,n){var i=[HE(t.getAttribute("minx")),HE(t.getAttribute("miny")),HE(t.getAttribute("maxx")),HE(t.getAttribute("maxy"))],r=[HE(t.getAttribute("resx")),HE(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:i,res:r};}),Dimension:Oc(function(t,n){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:KE(t.getAttribute("multipleValues")),nearestValue:KE(t.getAttribute("nearestValue")),current:KE(t.getAttribute("current")),values:tT(t)};}),Attribution:jc(function(t,n){return Ic({},nz,t,n);}),AuthorityURL:Oc(function(t,n){var i=cz(t,n);if(i)return i.name=t.getAttribute("name"),i;return;}),Identifier:Oc(tT),MetadataURL:Oc(function(t,n){var i=cz(t,n);if(i)return i.type=t.getAttribute("type"),i;return;}),DataURL:Oc(cz),FeatureListURL:Oc(cz),Style:Oc(function(t,n){return Ic({},uz,t,n);}),MinScaleDenominator:jc($E),MaxScaleDenominator:jc($E),Layer:Oc(fz)}),nz=kc(VI,{Title:jc(tT),OnlineResource:jc(jC),LogoURL:jc(vz)}),iz=kc(VI,{westBoundLongitude:jc($E),eastBoundLongitude:jc($E),southBoundLatitude:jc($E),northBoundLatitude:jc($E)}),rz=kc(VI,{GetCapabilities:jc(lz),GetMap:jc(lz),GetFeatureInfo:jc(lz)}),ez=kc(VI,{Format:Oc(tT),DCPType:Oc(function(t,n){return Ic({},oz,t,n);})}),oz=kc(VI,{HTTP:jc(function(t,n){return Ic({},sz,t,n);})}),sz=kc(VI,{Get:jc(cz),Post:jc(cz)}),uz=kc(VI,{Name:jc(tT),Title:jc(tT),Abstract:jc(tT),LegendURL:Oc(vz),StyleSheetURL:jc(cz),StyleURL:jc(cz)}),az=kc(VI,{Format:jc(tT),OnlineResource:jc(jC)}),hz=kc(VI,{Keyword:_c(tT)});function fz(t,n){var i=n[n.length-1],r=Ic({},tz,t,n);if(r){var e=KE(t.getAttribute("queryable"));void 0===e&&(e=i.queryable),r.queryable=void 0!==e&&e;var o=QE(t.getAttribute("cascaded"));void 0===o&&(o=i.cascaded),r.cascaded=o;var s=KE(t.getAttribute("opaque"));void 0===s&&(s=i.opaque),r.opaque=void 0!==s&&s;var u=KE(t.getAttribute("noSubsets"));void 0===u&&(u=i.noSubsets),r.noSubsets=void 0!==u&&u;var a=HE(t.getAttribute("fixedWidth"));a||(a=i.fixedWidth),r.fixedWidth=a;var h=HE(t.getAttribute("fixedHeight"));h||(h=i.fixedHeight),r.fixedHeight=h;["Style","CRS","AuthorityURL"].forEach(function(t){if(t in i){var n=r[t]||[];r[t]=n.concat(i[t]);}});return["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(t){if(!(t in r)){var n=i[t];r[t]=n;}}),r;}}function cz(t,n){return Ic({},az,t,n);}function lz(t,n){return Ic({},ez,t,n);}function vz(t,n){var i=cz(t,n);if(i){var r=[QE(t.getAttribute("width")),QE(t.getAttribute("height"))];return i.size=r,i;}}function pz(t,n){return Ic([],hz,t,n);}var dz=KI,yz=function(){var _t225=function t(n,i){return _t225=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t225(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t225(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),mz=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.Gy="http://mapserver.gis.umn.edu/mapserver",i.Dy=new fT(),i.Uh=r.layers?r.layers:null,i;}return yz(n,t),n.prototype.getLayers=function(){return this.Uh;},n.prototype.setLayers=function(t){this.Uh=t;},n.prototype.Lm=function(t,n){t.setAttribute("namespaceURI",this.Gy);var i=t.localName,r=[];if(0===t.childNodes.length)return r;if("msGMLOutput"==i)for(var e=0,o=t.childNodes.length;e<o;e++){var s=t.childNodes[e];if(s.nodeType===Node.ELEMENT_NODE){var u=s,a=n[0],h=u.localName.replace("_layer","");if(!this.Uh||y(this.Uh,h)){var f=h+"_feature";a.featureType=f,a.featureNS=this.Gy;var c={};c[f]=_c(this.Dy.readFeatureElement,this.Dy);var l=kc([a.featureNS,null],c);u.setAttribute("namespaceURI",this.Gy);var v=Ic([],l,u,n,this.Dy);v&&g(r,v);}}}if("FeatureCollection"==i){var p=Ic([],this.Dy.FEATURE_COLLECTION_PARSERS,t,[{}],this.Dy);p&&(r=p);}return r;},n.prototype.readFeaturesFromNode=function(t,n){var i={};return n&&A(i,this.getReadOptions(t,n)),this.Lm(t,[i]);},n;}(qE),wz=mz,gz=function(){var _t226=function t(n,i){return _t226=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t226(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t226(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),bz=[null,"http://www.opengis.net/wmts/1.0"],xz=[null,"http://www.opengis.net/ows/1.1"],Mz=kc(bz,{Contents:jc(function(t,n){return Ic({},Sz,t,n);})}),_z=function(t){function n(){var n=t.call(this)||this;return n.Rm=new XC(),n;}return gz(n,t),n.prototype.readFromNode=function(t){var n=t.getAttribute("version");n&&(n=n.trim());var i=this.Rm.readFromNode(t);return i?(i.version=n,(i=Ic(i,Mz,t,[]))||null):null;},n;}(OC),Sz=kc(bz,{Layer:Oc(function(t,n){return Ic({},Oz,t,n);}),TileMatrixSet:Oc(function(t,n){return Ic({},kz,t,n);})}),Oz=kc(bz,{Style:Oc(function(t,n){var i=Ic({},jz,t,n);if(!i)return;var r="true"===t.getAttribute("isDefault");return i.isDefault=r,i;}),Format:Oc(tT),TileMatrixSetLink:Oc(function(t,n){return Ic({},Ez,t,n);}),Dimension:Oc(function(t,n){return Ic({},Pz,t,n);}),ResourceURL:Oc(function(t,n){var i=t.getAttribute("format"),r=t.getAttribute("template"),e=t.getAttribute("resourceType"),o={};i&&(o.format=i);r&&(o.template=r);e&&(o.resourceType=e);return o;})},kc(xz,{Title:jc(tT),Abstract:jc(tT),WGS84BoundingBox:jc(Iz),Identifier:jc(tT)})),jz=kc(bz,{LegendURL:Oc(function(t,n){var i={};return i.format=t.getAttribute("format"),i.href=jC(t),i;})},kc(xz,{Title:jc(tT),Identifier:jc(tT)})),Ez=kc(bz,{TileMatrixSet:jc(tT),TileMatrixSetLimits:jc(function(t,n){return Ic([],Tz,t,n);})}),Tz=kc(bz,{TileMatrixLimits:_c(function(t,n){return Ic({},Az,t,n);})}),Az=kc(bz,{TileMatrix:jc(tT),MinTileRow:jc(JE),MaxTileRow:jc(JE),MinTileCol:jc(JE),MaxTileCol:jc(JE)}),Pz=kc(bz,{Default:jc(tT),Value:Oc(tT)},kc(xz,{Identifier:jc(tT)})),Cz=kc(xz,{LowerCorner:_c(zz),UpperCorner:_c(zz)}),kz=kc(bz,{WellKnownScaleSet:jc(tT),TileMatrix:Oc(function(t,n){return Ic({},Nz,t,n);})},kc(xz,{SupportedCRS:jc(tT),Identifier:jc(tT),BoundingBox:jc(Iz)})),Nz=kc(bz,{TopLeftCorner:jc(zz),ScaleDenominator:jc($E),TileWidth:jc(JE),TileHeight:jc(JE),MatrixWidth:jc(JE),MatrixHeight:jc(JE)},kc(xz,{Identifier:jc(tT)}));function Iz(t,n){var i=Ic([],Cz,t,n);if(2==i.length)return bn(i);}function zz(t,n){var i=tT(t).split(/\s+/);if(i&&2==i.length){var r=+i[0],e=+i[1];if(!isNaN(r)&&!isNaN(e))return[r,e];}}var Lz=_z,Rz=function(){var _t227=function t(n,i){return _t227=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t227(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t227(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Fz=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],Gz="enterfullscreen",Dz="leavefullscreen";function qz(t){var n=t.body;return!!(n.webkitRequestFullscreen||n.msRequestFullscreen&&t.msFullscreenEnabled||n.requestFullscreen&&t.fullscreenEnabled);}function Uz(t){return!!(t.webkitIsFullScreen||t.msFullscreenElement||t.fullscreenElement);}function Bz(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen();}var Xz=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),target:r.target})||this).on,i.once,i.un,i.nf=void 0!==r.keys&&r.keys,i._v=r.source,i.Fm=!1,i.Gm=i.Dm.bind(i),i.qm=void 0!==r.className?r.className:"ol-full-screen",i.Um=[],i.Bm=void 0!==r.activeClassName?r.activeClassName.split(" "):[i.qm+"-true"],i.Xm=void 0!==r.inactiveClassName?r.inactiveClassName.split(" "):[i.qm+"-false"];var e=void 0!==r.label?r.label:"⤢";i.Vm="string"==typeof e?document.createTextNode(e):e;var o=void 0!==r.labelActive?r.labelActive:"×";i.Wm="string"==typeof o?document.createTextNode(o):o;var s=r.tipLabel?r.tipLabel:"Toggle full-screen";return i.Ym=document.createElement("button"),i.Ym.title=s,i.Ym.setAttribute("type","button"),i.Ym.appendChild(i.Vm),i.Ym.addEventListener(F,i.kr.bind(i),!1),i.Km(i.Ym,i.Fm),i.element.className="".concat(i.qm," ").concat(Cs," ").concat(Ns),i.element.appendChild(i.Ym),i;}return Rz(n,t),n.prototype.kr=function(t){t.preventDefault(),this.Zm();},n.prototype.Zm=function(){var t=this.getMap();if(t){var n=t.getOwnerDocument();if(qz(n))if(Uz(n))!function(t){t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitExitFullscreen&&t.webkitExitFullscreen();}(n);else{var i=void 0;i=this._v?"string"==typeof this._v?n.getElementById(this._v):this._v:t.getTargetElement(),this.nf?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():Bz(t);}(i):Bz(i);}}},n.prototype.$m=function(){var t=this.getMap();if(t){var n=this.Fm;this.Fm=Uz(t.getOwnerDocument()),n!==this.Fm&&(this.Km(this.Ym,this.Fm),this.Fm?(Lo(this.Wm,this.Vm),this.dispatchEvent(Gz)):(Lo(this.Vm,this.Wm),this.dispatchEvent(Dz)),t.updateSize());}},n.prototype.Km=function(t,n){var i,r,e,o;n?((i=t.classList).remove.apply(i,this.Xm),(r=t.classList).add.apply(r,this.Bm)):((e=t.classList).remove.apply(e,this.Bm),(o=t.classList).add.apply(o,this.Xm));},n.prototype.setMap=function(n){var i=this.getMap();i&&i.removeChangeListener(ku,this.Gm),t.prototype.setMap.call(this,n),this.Dm(),n&&n.addChangeListener(ku,this.Gm);},n.prototype.Dm=function(){for(var t=this.Um,n=0,i=t.length;n<i;++n){H(t[n]);}t.length=0;var r=this.getMap();if(r){var e=r.getOwnerDocument();qz(e)?this.element.classList.remove(ks):this.element.classList.add(ks);for(n=0,i=Fz.length;n<i;++n){t.push(Z(e,Fz[n],this.$m,this));}this.$m();}},n;}(ba),Vz=function(){var _t228=function t(n,i){return _t228=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t228(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t228(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Wz="projection",Yz="coordinateFormat",Kz=function(t){function n(n){var i=this,r=n||{},e=document.createElement("div");e.className=void 0!==r.className?r.className:"ol-mouse-position",(i=t.call(this,{element:e,render:r.render,target:r.target})||this).on,i.once,i.un,i.addChangeListener(Wz,i.Tt),r.coordinateFormat&&i.setCoordinateFormat(r.coordinateFormat),r.projection&&i.setProjection(r.projection);var o=!0,s="&#160;";return"undefinedHTML"in r?(void 0!==r.undefinedHTML&&(s=r.undefinedHTML),o=!!s):"placeholder"in r&&(!1===r.placeholder?o=!1:s=String(r.placeholder)),i.Hm=s,i.Jm=o,i.Qm=e.innerHTML,i.tw=null,i.jt=null,i;}return Vz(n,t),n.prototype.Tt=function(){this.jt=null;},n.prototype.getCoordinateFormat=function(){return this.get(Yz);},n.prototype.getProjection=function(){return this.get(Wz);},n.prototype.handleMouseMove=function(t){var n=this.getMap();this.nw(n.getEventPixel(t));},n.prototype.handleMouseOut=function(t){this.nw(null);},n.prototype.setMap=function(n){if(t.prototype.setMap.call(this,n),n){var i=n.getViewport();this.listenerKeys.push(Z(i,gu,this.handleMouseMove,this)),this.Jm&&this.listenerKeys.push(Z(i,Mu,this.handleMouseOut,this)),this.nw(null);}},n.prototype.setCoordinateFormat=function(t){this.set(Yz,t);},n.prototype.setProjection=function(t){this.set(Wz,br(t));},n.prototype.nw=function(t){var n=this.Hm;if(t&&this.tw){if(!this.jt){var i=this.getProjection();this.jt=i?Ar(this.tw,i):mr;}var r=this.getMap().getCoordinateFromPixelInternal(t);if(r){var e=zr();e&&(this.jt=Ar(this.tw,e)),this.jt(r,r);var o=this.getCoordinateFormat();n=o?o(r):r.toString();}}this.Qm&&n===this.Qm||(this.element.innerHTML=n,this.Qm=n);},n.prototype.render=function(t){var n=t.frameState;n?this.tw!=n.viewState.projection&&(this.tw=n.viewState.projection,this.jt=null):this.tw=null;},n;}(ba),Zz=Kz,$z=function(){var _t229=function t(n,i){return _t229=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t229(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t229(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),Hz=.75,Jz=.1,Qz=function(t){function n(){return null!==t&&t.apply(this,arguments)||this;}return $z(n,t),n.prototype.createRenderer=function(){return new au(this);},n;}(wa),tL=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).iw=i.rw.bind(i),i.Sr=void 0===r.collapsed||r.collapsed,i.Tr=void 0===r.collapsible||r.collapsible,i.Tr||(i.Sr=!1),i.su=void 0!==r.rotateWithView&&r.rotateWithView,i.ew=void 0;var e=void 0!==r.className?r.className:"ol-overviewmap",o=void 0!==r.tipLabel?r.tipLabel:"Overview map",s=void 0!==r.collapseLabel?r.collapseLabel:"‹";"string"==typeof s?(i.Ar=document.createElement("span"),i.Ar.textContent=s):i.Ar=s;var u=void 0!==r.label?r.label:"›";"string"==typeof u?(i.Pr=document.createElement("span"),i.Pr.textContent=u):i.Pr=u;var a=i.Tr&&!i.Sr?i.Ar:i.Pr,h=document.createElement("button");h.setAttribute("type","button"),h.title=o,h.appendChild(a),h.addEventListener(F,i.kr.bind(i),!1),i.ow=document.createElement("div"),i.ow.className="ol-overviewmap-map",i.Uy=r.view,i.sw=new Qz({view:r.view});var f=i.sw;r.layers&&r.layers.forEach(function(t){f.addLayer(t);});var c=document.createElement("div");c.className="ol-overviewmap-box",c.style.boxSizing="border-box",i.uw=new Xh({position:[0,0],positioning:"center-center",element:c}),i.sw.addOverlay(i.uw);var l=e+" "+"ol-unselectable "+Ns+(i.Sr&&i.Tr?" ol-collapsed":"")+(i.Tr?"":" ol-uncollapsible"),v=i.element;v.className=l,v.appendChild(i.ow),v.appendChild(h);var p=i,d=i.uw,y=i.uw.getElement(),m=function m(t){var n,i={clientX:(n=t).clientX,clientY:n.clientY},r=f.getEventCoordinateInternal(i);d.setPosition(r);},w=function w(t){var n=f.getEventCoordinateInternal(t);p.getMap().getView().setCenterInternal(n),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",w);};return y.addEventListener("mousedown",function(){window.addEventListener("mousemove",m),window.addEventListener("mouseup",w);}),i;}return $z(n,t),n.prototype.setMap=function(n){var i=this.getMap();if(n!==i){if(i){var r=i.getView();r&&this.aw(r),this.sw.setTarget(null);}if(t.prototype.setMap.call(this,n),n){this.sw.setTarget(this.ow),this.listenerKeys.push(Z(n,l,this.hw,this));var e=n.getView();e&&(this.fw(e),e.isDef()&&(this.sw.updateSize(),this.cw())),this.sw.isRendered()||this.lw();}}},n.prototype.hw=function(t){if(t.key===Nu){var n=t.oldValue;n&&this.aw(n);var i=this.getMap().getView();this.fw(i);}else this.sw.isRendered()||t.key!==ku&&t.key!==Cu||this.sw.updateSize();},n.prototype.fw=function(t){if(!this.Uy){var n=new ha({projection:t.getProjection()});this.sw.setView(n);}t.addChangeListener(Uu.ROTATION,this.iw),this.rw();},n.prototype.aw=function(t){t.removeChangeListener(Uu.ROTATION,this.iw);},n.prototype.rw=function(){this.su&&this.sw.getView().setRotation(this.getMap().getView().getRotation());},n.prototype.pw=function(){var t=this.getMap(),n=this.sw;if(t.isRendered()&&n.isRendered()){var i=t.getSize(),r=t.getView().calculateExtentInternal(i);if(!this.ew||!Nn(r,this.ew)){this.ew=r;var e=n.getSize(),o=n.getView().calculateExtentInternal(e),s=n.getPixelFromCoordinateInternal(Hn(r)),u=n.getPixelFromCoordinateInternal(Xn(r)),a=Math.abs(s[0]-u[0]),h=Math.abs(s[1]-u[1]),f=e[0],c=e[1];a<f*Jz||h<c*Jz||a>f*Hz||h>c*Hz?this.cw():On(o,r)||this.dw();}}},n.prototype.cw=function(){var t=this.getMap(),n=this.sw,i=t.getSize(),r=t.getView().calculateExtentInternal(i),e=n.getView(),o=Math.log(7.5)/Math.LN2;ri(r,1/(Math.pow(2,o/2)*Jz)),e.fitInternal(io(r));},n.prototype.dw=function(){var t=this.getMap(),n=this.sw,i=t.getView();n.getView().setCenterInternal(i.getCenterInternal());},n.prototype.yw=function(){var t=this.getMap(),n=this.sw;if(t.isRendered()&&n.isRendered()){var i=t.getSize(),r=t.getView(),e=n.getView(),o=this.su?0:-r.getRotation(),s=this.uw,u=this.uw.getElement(),a=r.getCenterInternal(),h=r.getResolution(),f=e.getResolution(),c=i[0]*h/f,l=i[1]*h/f;if(s.setPosition(a),u){u.style.width=c+"px",u.style.height=l+"px";var v="rotate("+o+"rad)";u.style.transform=v;}}},n.prototype.lw=function(){this.mw||(this.mw=$(this.sw,Ou,function(t){delete this.mw,this.yw();},this));},n.prototype.kr=function(t){t.preventDefault(),this.Lr();},n.prototype.Lr=function(){this.element.classList.toggle(Is),this.Sr?Lo(this.Ar,this.Pr):Lo(this.Pr,this.Ar),this.Sr=!this.Sr;var t=this.sw;if(!this.Sr){if(t.isRendered())return this.ew=void 0,void t.render();t.updateSize(),this.cw(),this.lw();}},n.prototype.getCollapsible=function(){return this.Tr;},n.prototype.setCollapsible=function(t){this.Tr!==t&&(this.Tr=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.Sr&&this.Lr());},n.prototype.setCollapsed=function(t){this.Tr&&this.Sr!==t&&this.Lr();},n.prototype.getCollapsed=function(){return this.Sr;},n.prototype.getRotateWithView=function(){return this.su;},n.prototype.setRotateWithView=function(t){this.su!==t&&(this.su=t,0!==this.getMap().getView().getRotation()&&(this.su?this.rw():this.sw.getView().setRotation(0),this.ew=void 0,this.pw(),this.yw()));},n.prototype.getOverviewMap=function(){return this.sw;},n.prototype.render=function(t){this.pw(),this.yw();},n;}(ba),nL=tL,iL=function(){var _t230=function t(n,i){return _t230=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t230(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t230(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),rL="units",eL="degrees",oL="imperial",sL="nautical",uL="metric",aL="us",hL=[1,2,5],fL=25.4/.28,cL=function(t){function n(n){var i=this,r=n||{},e=void 0!==r.className?r.className:r.bar?"ol-scale-bar":"ol-scale-line";return(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).on,i.once,i.un,i.ww=document.createElement("div"),i.ww.className=e+"-inner",i.element.className=e+" "+Cs,i.element.appendChild(i.ww),i.gw=null,i.bw=void 0!==r.minWidth?r.minWidth:64,i.xw=r.maxWidth,i.mn=!1,i.Mw=void 0,i.Qm="",i.addChangeListener(rL,i._w),i.setUnits(r.units||uL),i.Sw=r.bar||!1,i.Ow=r.steps||4,i.jw=r.text||!1,i.Ew=r.dpi||void 0,i;}return iL(n,t),n.prototype.getUnits=function(){return this.get(rL);},n.prototype._w=function(){this.zr();},n.prototype.setUnits=function(t){this.set(rL,t);},n.prototype.setDpi=function(t){this.Ew=t;},n.prototype.zr=function(){var t=this.gw;if(t){var n=t.center,i=t.projection,r=this.getUnits(),e=r==eL?qt.DEGREES:qt.METERS,o=xr(i,t.resolution,n,e),s=this.bw*(this.Ew||fL)/fL,u=void 0!==this.xw?this.xw*(this.Ew||fL)/fL:void 0,a=s*o,h="";if(r==eL){var f=Gt[qt.DEGREES];(a*=f)<f/60?(h="″",o*=3600):a<f?(h="′",o*=60):h="°";}else r==oL?a<.9144?(h="in",o/=.0254):a<1609.344?(h="ft",o/=.3048):(h="mi",o/=1609.344):r==sL?(o/=1852,h="NM"):r==uL?a<.001?(h="μm",o*=1e6):a<1?(h="mm",o*=1e3):a<1e3?h="m":(h="km",o/=1e3):r==aL?a<.9144?(h="in",o*=39.37):a<1609.344?(h="ft",o/=.30480061):(h="mi",o/=1609.3472):Et(!1,33);for(var c,l,v,p,d,y,m,w=3*Math.floor(Math.log(s*o)/Math.log(10));;){v=Math.floor(w/3);var g=Math.pow(10,v);if(c=hL[(w%3+3)%3]*g,l=Math.round(c/o),isNaN(l))return this.element.style.display="none",void(this.mn=!1);if(void 0!==u&&l>=u){c=p,l=d,v=y;break;}if(l>=s)break;p=c,d=l,y=v,++w;}m=this.Sw?this.createScaleBar(l,c,h):c.toFixed(v<0?-v:0)+" "+h,this.Qm!=m&&(this.ww.innerHTML=m,this.Qm=m),this.Mw!=l&&(this.ww.style.width=l+"px",this.Mw=l),this.mn||(this.element.style.display="",this.mn=!0);}else this.mn&&(this.element.style.display="none",this.mn=!1);},n.prototype.createScaleBar=function(t,n,i){for(var r="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),e=[],o=t/this.Ow,s="ol-scale-singlebar-odd",u=0;u<this.Ow;u++){0===u&&e.push(this.createMarker("absolute",u)),e.push('<div><div class="ol-scale-singlebar '+s+'" style="width: '+o+'px;"></div>'+this.createMarker("relative",u)+(u%2==0||2===this.Ow?this.createStepText(u,t,!1,n,i):"")+"</div>"),u===this.Ow-1&&e.push(this.createStepText(u+1,t,!0,n,i)),s="ol-scale-singlebar-odd"===s?"ol-scale-singlebar-even":"ol-scale-singlebar-odd";}return'<div style="display: flex;">'+(this.jw?'<div class="ol-scale-text" style="width: '+t+'px;">'+r+"</div>":"")+e.join("")+"</div>";},n.prototype.createMarker=function(t,n){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>';},n.prototype.createStepText=function(t,n,i,r,e){var o=(0===t?0:Math.round(r/this.Ow*t*100)/100)+(0===t?"":" "+e);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:n/this.Ow*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:n/this.Ow*2)+"px;left: "+(i?n+"px":"unset")+';">'+o+"</div>";},n.prototype.getScaleForResolution=function(){var t=xr(this.gw.projection,this.gw.resolution,this.gw.center,qt.METERS),n=this.Ew||fL;return parseFloat(t.toString())*(1e3/25.4)*n;},n.prototype.render=function(t){var n=t.frameState;this.gw=n?n.viewState:null,this.zr();},n;}(ba),lL=cL,vL=function(){var _t231=function t(n,i){return _t231=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t231(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t231(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),pL=0,dL=1,yL=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render})||this).kn=[],i.Tw=void 0,i.Aw=pL,i.Cn,i.Pw=0,i.Cw=0,i.kw,i.Nw,i.Iw=null,i.zw=!1,i.Fr=void 0!==r.duration?r.duration:200;var e=void 0!==r.className?r.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=e+"-thumb "+Cs;var s=i.element;return s.className=e+" "+"ol-unselectable "+Ns,s.appendChild(o),s.addEventListener(bu,i.Lw.bind(i),!1),s.addEventListener(gu,i.Rw.bind(i),!1),s.addEventListener(xu,i.Fw.bind(i),!1),s.addEventListener(F,i.Gw.bind(i),!1),o.addEventListener(F,f,!1),i;}return vL(n,t),n.prototype.setMap=function(n){t.prototype.setMap.call(this,n),n&&n.render();},n.prototype.Dw=function(){var t=this.element,n=t.offsetWidth,i=t.offsetHeight;if(0===n&&0===i)return this.zw=!1;var r=getComputedStyle(t);n-=parseFloat(r.paddingRight)+parseFloat(r.paddingLeft),i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom);var e=t.firstElementChild,o=getComputedStyle(e),s=e.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),u=e.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.Iw=[s,u],n>i?(this.Aw=dL,this.Cw=n-s):(this.Aw=pL,this.Pw=i-u),this.zw=!0;},n.prototype.Gw=function(t){var n=this.getMap().getView(),i=this.qw(t.offsetX-this.Iw[0]/2,t.offsetY-this.Iw[1]/2),r=this.Uw(i),e=n.getConstrainedZoom(n.getZoomForResolution(r));n.animateInternal({zoom:e,duration:this.Fr,easing:wt});},n.prototype.Lw=function(t){if(!this.Cn&&t.target===this.element.firstElementChild){var n=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.kw=t.clientX-parseFloat(n.style.left),this.Nw=t.clientY-parseFloat(n.style.top),this.Cn=!0,0===this.kn.length){var i=this.Rw,r=this.Fw,e=this.getMap().getOwnerDocument();this.kn.push(Z(e,gu,i,this),Z(e,xu,r,this));}}},n.prototype.Rw=function(t){if(this.Cn){var n=t.clientX-this.kw,i=t.clientY-this.Nw,r=this.qw(n,i);this.Tw=this.Uw(r),this.getMap().getView().setResolution(this.Tw);}},n.prototype.Fw=function(t){this.Cn&&(this.getMap().getView().endInteraction(),this.Cn=!1,this.kw=void 0,this.Nw=void 0,this.kn.forEach(H),this.kn.length=0);},n.prototype.Bw=function(t){var n=this.Xw(t),i=this.element.firstElementChild;this.Aw==dL?i.style.left=this.Cw*n+"px":i.style.top=this.Pw*n+"px";},n.prototype.qw=function(t,n){return hi(this.Aw===dL?t/this.Cw:n/this.Pw,0,1);},n.prototype.Uw=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t);},n.prototype.Xw=function(t){return hi(1-this.getMap().getView().getValueForResolutionFunction()(t),0,1);},n.prototype.render=function(t){if(t.frameState&&(this.zw||this.Dw())){var n=t.frameState.viewState.resolution;this.Tw=n,this.Bw(n);}},n;}(ba),mL=function(){var _t232=function t(n,i){return _t232=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n;}||function(t,n){for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}},_t232(n,i);};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n;}_t232(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r());};}(),wL=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),target:r.target})||this).extent=r.extent?r.extent:null;var e=void 0!==r.className?r.className:"ol-zoom-extent",o=void 0!==r.label?r.label:"E",s=void 0!==r.tipLabel?r.tipLabel:"Fit to extent",u=document.createElement("button");u.setAttribute("type","button"),u.title=s,u.appendChild("string"==typeof o?document.createTextNode(o):o),u.addEventListener(F,i.kr.bind(i),!1);var a=e+" "+"ol-unselectable "+Ns,h=i.element;return h.className=a,h.appendChild(u),i;}return mL(n,t),n.prototype.kr=function(t){t.preventDefault(),this.handleZoomToExtent();},n.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),n=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(io(n));},n;}(ba),gL={};gL.AssertionError=h,gL.Collection=ct,gL.Collection.CollectionEvent=ht,gL.DataTile=jt,gL.Disposable=v,gL.Feature=Ct,gL.Feature.createStyleFunction=Pt,gL.Geolocation=go,gL.Image=Ao,gL.Image.listenImage=To,gL.ImageBase=xo,gL.ImageCanvas=Co,gL.ImageTile=qo,gL.Kinetic=Uo,gL.Map=Lh,gL.MapBrowserEvent=mu,gL.MapBrowserEventHandler=Su,gL.MapEvent=du,gL.Object=et,gL.Object.ObjectEvent=rt,gL.Observable=nt,gL.Observable.unByKey=tt,gL.Overlay=Xh,gL.PluggableMap=wa,gL.Tile=_t,gL.TileCache=nf,gL.TileQueue=Fu,gL.TileQueue.getTilePriority=Gu,gL.TileRange=of,gL.TileRange.createOrUpdate=ef,gL.VectorRenderTile=hf,gL.VectorTile=lf,gL.View=ha,gL.View.createCenterConstraint=ea,gL.View.createResolutionConstraint=oa,gL.View.createRotationConstraint=sa,gL.View.isNoopAnimation=ua,gL.array={},gL.array.binarySearch=p,gL.array.equals=x,gL.array.extend=g,gL.array.find=b,gL.array.findIndex=M,gL.array.includes=y,gL.array.isSorted=_,gL.array.linearFindNearest=m,gL.array.numberSafeCompareFunction=d,gL.array.remove=function(t,n){var i=t.indexOf(n),r=i>-1;return r&&t.splice(i,1),r;},gL.array.reverseSubArray=w,gL.array.stableSort=function(t,n){var i,r=t.length,e=Array(t.length);for(i=0;i<r;i++){e[i]={index:i,value:t[i]};}for(e.sort(function(t,i){return n(t.value,i.value)||t.index-i.index;}),i=0;i<t.length;i++){t[i]=e[i].value;}},gL.asserts={},gL.asserts.assert=Et,gL.centerconstraint={},gL.centerconstraint.createExtent=Xu,gL.centerconstraint.none=Vu,gL.color={},gL.color.asArray=Ko,gL.color.asString=Vo,gL.color.fromString=Yo,gL.color.isStringColor=Ho,gL.color.normalize=Zo,gL.color.toString=$o,gL.colorlike={},gL.colorlike.asColorLike=vf,gL.control={},gL.control.Attribution=Ma,gL.control.Control=ba,gL.control.FullScreen=Xz,gL.control.MousePosition=Zz,gL.control.OverviewMap=nL,gL.control.Rotate=Oa,gL.control.ScaleLine=lL,gL.control.Zoom=Ea,gL.control.ZoomSlider=yL,gL.control.ZoomToExtent=wL,gL.control.defaults=Ta,gL.coordinate={},gL.coordinate.add=Zi,gL.coordinate.closestOnCircle=$i,gL.coordinate.closestOnSegment=Hi,gL.coordinate.createStringXY=function(t){return function(n){return sr(n,t);};},gL.coordinate.degreesToStringHDMS=Ji,gL.coordinate.distance=er,gL.coordinate.equals=tr,gL.coordinate.format=Qi,gL.coordinate.getWorldsAway=ar,gL.coordinate.rotate=nr,gL.coordinate.scale=ir,gL.coordinate.squaredDistance=rr,gL.coordinate.squaredDistanceToSegment=or,gL.coordinate.toStringHDMS=function(t,n){return t?Ji("NS",t[1],n)+" "+Ji("EW",t[0],n):"";},gL.coordinate.toStringXY=sr,gL.coordinate.wrapX=ur,gL.css={},gL.css.CLASS_COLLAPSED=Is,gL.css.CLASS_CONTROL=Ns,gL.css.CLASS_HIDDEN=As,gL.css.CLASS_SELECTABLE=Ps,gL.css.CLASS_UNSELECTABLE=Cs,gL.css.CLASS_UNSUPPORTED=ks,gL.css.getFontParameters=Rs,gL.dom={},gL.dom.createCanvasContext2D=ko,gL.dom.outerHeight=zo,gL.dom.outerWidth=Io,gL.dom.releaseCanvas=No,gL.dom.removeChildren=Fo,gL.dom.removeNode=Ro,gL.dom.replaceChildren=Go,gL.dom.replaceNode=Lo,gL.easing={},gL.easing.easeIn=mt,gL.easing.easeOut=wt,gL.easing.inAndOut=gt,gL.easing.linear=bt,gL.easing.upAndDown=function(t){return t<.5?gt(2*t):1-gt(2*(t-.5));},gL.events={},gL.events.Event=c,gL.events.Event.preventDefault=function(t){t.preventDefault();},gL.events.Event.stopPropagation=f,gL.events.Target=I,gL.events.condition={},gL.events.condition.all=Ga,gL.events.condition.altKeyOnly=Da,gL.events.condition.altShiftKeysOnly=qa,gL.events.condition.always=Xa,gL.events.condition.click=function(t){return t.type==wu.CLICK;},gL.events.condition.doubleClick=function(t){return t.type==wu.DBLCLICK;},gL.events.condition.focus=Ua,gL.events.condition.focusWithTabindex=Ba,gL.events.condition.mouseActionButton=Va,gL.events.condition.mouseOnly=Ha,gL.events.condition.never=Wa,gL.events.condition.noModifierKeys=Ka,gL.events.condition.penOnly=function(t){var n=t.originalEvent;return Et(void 0!==n,56),"pen"===n.pointerType;},gL.events.condition.platformModifierKeyOnly=function(t){var n=t.originalEvent;return!n.altKey&&(Yt?n.metaKey:n.ctrlKey)&&!n.shiftKey;},gL.events.condition.pointerMove=function(t){return"pointermove"==t.type;},gL.events.condition.primaryAction=Ja,gL.events.condition.shiftKeyOnly=Za,gL.events.condition.singleClick=Ya,gL.events.condition.targetNotEditable=$a,gL.events.condition.touchOnly=function(t){var n=t.originalEvent;return Et(void 0!==n,56),"touch"===n.pointerType;},gL.events.listen=Z,gL.events.listenOnce=$,gL.events.unlistenByKey=H,gL.extent={},gL.extent.applyTransform=oi,gL.extent.approximatelyEquals=In,gL.extent.boundingExtent=bn,gL.extent.buffer=xn,gL.extent.clone=Mn,gL.extent.closestSquaredDistanceXY=_n,gL.extent.containsCoordinate=Sn,gL.extent.containsExtent=On,gL.extent.containsXY=jn,gL.extent.coordinateRelationship=En,gL.extent.createEmpty=Tn,gL.extent.createOrUpdate=An,gL.extent.createOrUpdateEmpty=Pn,gL.extent.createOrUpdateFromCoordinate=Cn,gL.extent.createOrUpdateFromCoordinates=function(t,n){return Rn(Pn(n),t);},gL.extent.createOrUpdateFromFlatCoordinates=kn,gL.extent.createOrUpdateFromRings=function(t,n){return Gn(Pn(n),t);},gL.extent.equals=Nn,gL.extent.extend=zn,gL.extent.extendCoordinate=Ln,gL.extent.extendCoordinates=Rn,gL.extent.extendFlatCoordinates=Fn,gL.extent.extendRings=Gn,gL.extent.extendXY=Dn,gL.extent.forEachCorner=qn,gL.extent.getArea=Un,gL.extent.getBottomLeft=Bn,gL.extent.getBottomRight=Xn,gL.extent.getCenter=Vn,gL.extent.getCorner=Wn,gL.extent.getEnlargedArea=function(t,n){var i=Math.min(t[0],n[0]),r=Math.min(t[1],n[1]);return(Math.max(t[2],n[2])-i)*(Math.max(t[3],n[3])-r);},gL.extent.getForViewAndSize=Yn,gL.extent.getHeight=Zn,gL.extent.getIntersection=$n,gL.extent.getIntersectionArea=function(t,n){return Un($n(t,n));},gL.extent.getMargin=function(t){return Qn(t)+Zn(t);},gL.extent.getRotatedViewport=Kn,gL.extent.getSize=function(t){return[t[2]-t[0],t[3]-t[1]];},gL.extent.getTopLeft=Hn,gL.extent.getTopRight=Jn,gL.extent.getWidth=Qn,gL.extent.intersects=ti,gL.extent.intersectsSegment=ei,gL.extent.isEmpty=ni,gL.extent.returnOrUpdate=ii,gL.extent.scaleFromCenter=ri,gL.extent.wrapAndSliceX=ui,gL.extent.wrapX=si,gL.featureloader={},gL.featureloader.loadFeaturesXhr=df,gL.featureloader.setWithCredentials=function(t){pf=t;},gL.featureloader.xhr=yf,gL.format={},gL.format.EsriJSON=GE,gL.format.Feature=Jx,gL.format.Feature.transformExtentWithOptions=tM,gL.format.Feature.transformGeometryWithOptions=Qx,gL.format.GML=yT,gL.format.GML2=fT,gL.format.GML3=pT,gL.format.GML32=gT,gL.format.GMLBase=WE,gL.format.GMLBase.GMLNS=BE,gL.format.GPX=nA,gL.format.GeoJSON=bM,gL.format.IGC=bA,gL.format.IIIFInfo=Hm,gL.format.JSONFeature=dM,gL.format.KML=yC,gL.format.KML.getDefaultFillStyle=function(){return CA;},gL.format.KML.getDefaultImageStyle=function(){return NA;},gL.format.KML.getDefaultStrokeStyle=function(){return zA;},gL.format.KML.getDefaultStyle=function(){return RA;},gL.format.KML.getDefaultStyleArray=function(){return GA;},gL.format.KML.getDefaultTextStyle=function(){return LA;},gL.format.KML.readFlatCoordinates=VA,gL.format.MVT=uM,gL.format.OSMXML=SC,gL.format.OWS=XC,gL.format.Polyline=ik,gL.format.Polyline.decodeDeltas=KC,gL.format.Polyline.decodeFloats=$C,gL.format.Polyline.decodeSignedIntegers=JC,gL.format.Polyline.decodeUnsignedIntegers=tk,gL.format.Polyline.encodeDeltas=YC,gL.format.Polyline.encodeFloats=ZC,gL.format.Polyline.encodeSignedIntegers=HC,gL.format.Polyline.encodeUnsignedInteger=nk,gL.format.Polyline.encodeUnsignedIntegers=QC,gL.format.TextFeature=fA,gL.format.TopoJSON=ck,gL.format.WFS=uI,gL.format.WFS.writeFilter=function(t,n){var i=n||"1.1.0",r=yc(sI(i),"Filter"),e={node:r};return A(e,{version:i,filter:t}),XN(r,t,[e]),r;},gL.format.WKB=_I,gL.format.WKT=BI,gL.format.WMSCapabilities=dz,gL.format.WMSGetFeatureInfo=wz,gL.format.WMTSCapabilities=Lz,gL.format.XML=OC,gL.format.XMLFeature=qE,gL.format.filter={},gL.format.filter.And=mk,gL.format.filter.Bbox=gk,gL.format.filter.Comparison=Pk,gL.format.filter.ComparisonBinary=Ik,gL.format.filter.Contains=_k,gL.format.filter.DWithin=jk,gL.format.filter.Disjoint=Tk,gL.format.filter.During=kk,gL.format.filter.EqualTo=Lk,gL.format.filter.Filter=lk,gL.format.filter.GreaterThan=Gk,gL.format.filter.GreaterThanOrEqualTo=qk,gL.format.filter.Intersects=Bk,gL.format.filter.IsBetween=Vk,gL.format.filter.IsLike=Yk,gL.format.filter.IsNull=Zk,gL.format.filter.LessThan=Jk,gL.format.filter.LessThanOrEqualTo=tN,gL.format.filter.LogicalNary=pk,gL.format.filter.Not=iN,gL.format.filter.NotEqualTo=eN,gL.format.filter.Or=uN,gL.format.filter.ResourceId=hN,gL.format.filter.Spatial=xk,gL.format.filter.Within=lN,gL.format.filter.and=vN,gL.format.filter.bbox=pN,gL.format.filter.between=function(t,n,i){return new Vk(t,n,i);},gL.format.filter.contains=function(t,n,i){return new _k(t,n,i);},gL.format.filter.disjoint=function(t,n,i){return new Tk(t,n,i);},gL.format.filter.during=function(t,n,i){return new kk(t,n,i);},gL.format.filter.dwithin=function(t,n,i,r,e){return new jk(t,n,i,r,e);},gL.format.filter.equalTo=function(t,n,i){return new Lk(t,n,i);},gL.format.filter.greaterThan=function(t,n){return new Gk(t,n);},gL.format.filter.greaterThanOrEqualTo=function(t,n){return new qk(t,n);},gL.format.filter.intersects=function(t,n,i){return new Bk(t,n,i);},gL.format.filter.isNull=function(t){return new Zk(t);},gL.format.filter.lessThan=function(t,n){return new Jk(t,n);},gL.format.filter.lessThanOrEqualTo=function(t,n){return new tN(t,n);},gL.format.filter.like=function(t,n,i,r,e,o){return new Yk(t,n,i,r,e,o);},gL.format.filter.not=function(t){return new iN(t);},gL.format.filter.notEqualTo=function(t,n,i){return new eN(t,n,i);},gL.format.filter.or=function(t){var n=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(uN,n))();},gL.format.filter.resourceId=function(t){return new hN(t);},gL.format.filter.within=function(t,n,i){return new lN(t,n,i);},gL.format.xlink={},gL.format.xlink.readHref=jC,gL.format.xsd={},gL.format.xsd.readBoolean=YE,gL.format.xsd.readBooleanString=KE,gL.format.xsd.readDateTime=ZE,gL.format.xsd.readDecimal=$E,gL.format.xsd.readDecimalString=HE,gL.format.xsd.readNonNegativeIntegerString=QE,gL.format.xsd.readPositiveInteger=JE,gL.format.xsd.readString=tT,gL.format.xsd.writeBooleanTextNode=nT,gL.format.xsd.writeCDATASection=iT,gL.format.xsd.writeDateTimeTextNode=rT,gL.format.xsd.writeDecimalTextNode=eT,gL.format.xsd.writeNonNegativeIntegerTextNode=oT,gL.format.xsd.writeStringTextNode=sT,gL.functions={},gL.functions.FALSE=O,gL.functions.TRUE=S,gL.functions.VOID=j,gL.functions.memoizeOne=E,gL.functions.toPromise=T,gL.geom={},gL.geom.Circle=Nj,gL.geom.Geometry=Hr,gL.geom.GeometryCollection=lM,gL.geom.LineString=_x,gL.geom.LinearRing=Ae,gL.geom.MultiLineString=jx,gL.geom.MultiPoint=mx,gL.geom.MultiPolygon=Px,gL.geom.Point=ke,gL.geom.Polygon=to,gL.geom.Polygon.circular=no,gL.geom.Polygon.fromCircle=ro,gL.geom.Polygon.fromExtent=io,gL.geom.Polygon.makeRegular=eo,gL.geom.SimpleGeometry=ie,gL.geom.SimpleGeometry.getStrideForLayout=te,gL.geom.SimpleGeometry.transformGeom2D=ne,gL.geom.flat={},gL.geom.flat.area={},gL.geom.flat.area.linearRing=Se,gL.geom.flat.area.linearRings=Oe,gL.geom.flat.area.linearRingss=je,gL.geom.flat.center={},gL.geom.flat.center.linearRingss=Ex,gL.geom.flat.closest={},gL.geom.flat.closest.arrayMaxSquaredDelta=oe,gL.geom.flat.closest.assignClosestArrayPoint=ae,gL.geom.flat.closest.assignClosestMultiArrayPoint=he,gL.geom.flat.closest.assignClosestPoint=ue,gL.geom.flat.closest.maxSquaredDelta=ee,gL.geom.flat.closest.multiArrayMaxSquaredDelta=se,gL.geom.flat.contains={},gL.geom.flat.contains.linearRingContainsExtent=Ne,gL.geom.flat.contains.linearRingContainsXY=Ie,gL.geom.flat.contains.linearRingsContainsXY=ze,gL.geom.flat.contains.linearRingssContainsXY=Le,gL.geom.flat.deflate={},gL.geom.flat.deflate.deflateCoordinate=fe,gL.geom.flat.deflate.deflateCoordinates=ce,gL.geom.flat.deflate.deflateCoordinatesArray=le,gL.geom.flat.deflate.deflateMultiCoordinatesArray=ve,gL.geom.flat.flip={},gL.geom.flat.flip.flipXY=CE,gL.geom.flat.geodesic={},gL.geom.flat.geodesic.greatCircleArc=function(t,n,i,r,e,o){var s=br("EPSG:4326"),u=Math.cos(yi(n)),a=Math.sin(yi(n)),h=Math.cos(yi(r)),f=Math.sin(yi(r)),c=Math.cos(yi(i-t)),l=Math.sin(yi(i-t)),v=a*f+u*h*c;return Rx(function(n){if(1<=v)return[i,r];var e=n*Math.acos(v),o=Math.cos(e),s=Math.sin(e),p=l*h,d=u*f-a*h*c,y=Math.atan2(p,d),m=Math.asin(a*o+u*s*Math.cos(y));return[di(yi(t)+Math.atan2(Math.sin(y)*s*u,o-a*Math.sin(m))),di(m)];},Pr(s,e),o);},gL.geom.flat.geodesic.meridian=Fx,gL.geom.flat.geodesic.parallel=Gx,gL.geom.flat.inflate={},gL.geom.flat.inflate.inflateCoordinates=xe,gL.geom.flat.inflate.inflateCoordinatesArray=Me,gL.geom.flat.inflate.inflateMultiCoordinatesArray=_e,gL.geom.flat.interiorpoint={},gL.geom.flat.interiorpoint.getInteriorPointOfArray=Re,gL.geom.flat.interiorpoint.getInteriorPointsOfMultiArray=Fe,gL.geom.flat.interpolate={},gL.geom.flat.interpolate.interpolatePoint=wx,gL.geom.flat.interpolate.lineStringCoordinateAtM=gx,gL.geom.flat.interpolate.lineStringsCoordinateAtM=bx,gL.geom.flat.intersectsextent={},gL.geom.flat.intersectsextent.intersectsLineString=De,gL.geom.flat.intersectsextent.intersectsLineStringArray=qe,gL.geom.flat.intersectsextent.intersectsLinearRing=Ue,gL.geom.flat.intersectsextent.intersectsLinearRingArray=Be,gL.geom.flat.intersectsextent.intersectsLinearRingMultiArray=Xe,gL.geom.flat.length={},gL.geom.flat.length.lineStringLength=zb,gL.geom.flat.length.linearRingLength=function(t,n,i,r){var e=zb(t,n,i,r),o=t[i-r]-t[n],s=t[i-r+1]-t[n+1];return e+=Math.sqrt(o*o+s*s);},gL.geom.flat.orient={},gL.geom.flat.orient.inflateEnds=He,gL.geom.flat.orient.linearRingIsClockwise=We,gL.geom.flat.orient.linearRingsAreOriented=Ye,gL.geom.flat.orient.linearRingssAreOriented=Ke,gL.geom.flat.orient.orientLinearRings=Ze,gL.geom.flat.orient.orientLinearRingsArray=$e,gL.geom.flat.reverse={},gL.geom.flat.reverse.coordinates=Ve,gL.geom.flat.segments={},gL.geom.flat.segments.forEach=Ge,gL.geom.flat.simplify={},gL.geom.flat.simplify.douglasPeucker=pe,gL.geom.flat.simplify.douglasPeuckerArray=de,gL.geom.flat.simplify.douglasPeuckerMultiArray=function(t,n,i,r,e,o,s,u){for(var a=0,h=i.length;a<h;++a){var f=i[a],c=[];s=de(t,n,f,r,e,o,s,c),u.push(c),n=f[f.length-1];}return s;},gL.geom.flat.simplify.quantize=we,gL.geom.flat.simplify.quantizeArray=ge,gL.geom.flat.simplify.quantizeMultiArray=be,gL.geom.flat.simplify.radialDistance=ye,gL.geom.flat.simplify.simplifyLineString=function(t,n,i,r,e,o,s){var u=void 0!==s?s:[];return o||(i=ye(t,n,i,r,e,u,0),t=u,n=0,r=2),u.length=pe(t,n,i,r,e,u,0),u;},gL.geom.flat.simplify.snap=me,gL.geom.flat.straightchunk={},gL.geom.flat.straightchunk.matchingChunk=Eb,gL.geom.flat.textpath={},gL.geom.flat.textpath.drawTextOnPath=Ib,gL.geom.flat.topology={},gL.geom.flat.topology.lineStringIsClosed=function(t,n,i,r){var e=i-r;return t[n]===t[e]&&t[n+1]===t[e+1]&&(i-n)/r>3&&!!Se(t,n,i,r);},gL.geom.flat.transform={},gL.geom.flat.transform.rotate=Vr,gL.geom.flat.transform.scale=Wr,gL.geom.flat.transform.transform2D=Xr,gL.geom.flat.transform.translate=Yr,gL.has={},gL.has.DEVICE_PIXEL_RATIO=Kt,gL.has.FIREFOX=Bt,gL.has.IMAGE_DECODE=$t,gL.has.MAC=Yt,gL.has.PASSIVE_EVENT_LISTENERS=Ht,gL.has.SAFARI=Xt,gL.has.SAFARI_BUG_237906=Vt,gL.has.WEBKIT=Wt,gL.has.WORKER_OFFSCREEN_CANVAS=Zt,gL.interaction={},gL.interaction.DoubleClickZoom=za,gL.interaction.DragAndDrop=Ej,gL.interaction.DragAndDrop.DragAndDropEvent=Oj,gL.interaction.DragBox=ph,gL.interaction.DragBox.DragBoxEvent=vh,gL.interaction.DragPan=nh,gL.interaction.DragRotate=eh,gL.interaction.DragRotateAndZoom=Pj,gL.interaction.DragZoom=yh,gL.interaction.Draw=Xj,gL.interaction.Draw.DrawEvent=Uj,gL.interaction.Draw.createBox=function(){return function(t,n,i){var r=bn([t[0],t[t.length-1]].map(function(t){return Rr(t,i);})),e=[[Bn(r),Xn(r),Jn(r),Hn(r),Bn(r)]],o=n;o?o.setCoordinates(e):o=new to(e);var s=zr();return s&&o.transform(i,s),o;};},gL.interaction.Draw.createRegularPolygon=function(t,n){return function(i,r,e){var o=Rr(i[0],e),s=Rr(i[i.length-1],e),u=Math.sqrt(rr(o,s)),a=r||ro(new Nj(o),t),h=n;if(!n&&0!==n){var f=s[0]-o[0],c=s[1]-o[1];h=Math.atan2(c,f);}eo(a,o,u,h);var l=zr();return l&&a.transform(e,l),a;};},gL.interaction.Extent=Hj,gL.interaction.Extent.ExtentEvent=Yj,gL.interaction.Interaction=Na,gL.interaction.Interaction.pan=Ca,gL.interaction.Interaction.zoomByDelta=ka,gL.interaction.KeyboardPan=Mh,gL.interaction.KeyboardZoom=Sh,gL.interaction.Link=iE,gL.interaction.Modify=vE,gL.interaction.Modify.ModifyEvent=aE,gL.interaction.MouseWheelZoom=Th,gL.interaction.PinchRotate=Ph,gL.interaction.PinchZoom=Nh,gL.interaction.Pointer=Fa,gL.interaction.Pointer.centroid=Ra,gL.interaction.Select=gE,gL.interaction.Select.SelectEvent=yE,gL.interaction.Snap=SE,gL.interaction.Translate=PE,gL.interaction.Translate.TranslateEvent=AE,gL.interaction.defaults=Ih,gL.layer={},gL.layer.Base=vs,gL.layer.BaseImage=Hw,gL.layer.BaseTile=lg,gL.layer.BaseVector=ub,gL.layer.Graticule=Xx,gL.layer.Group=vu,gL.layer.Group.GroupEvent=fu,gL.layer.Heatmap=Hx,gL.layer.Image=ag,gL.layer.Layer=Ms,gL.layer.Layer.inView=xs,gL.layer.MapboxVector=pj,gL.layer.Tile=mg,gL.layer.Vector=Lx,gL.layer.VectorImage=yj,gL.layer.VectorTile=hM,gL.layer.WebGLPoints=wj,gL.layer.WebGLTile=Mj,gL.loadingstrategy={},gL.loadingstrategy.all=mf,gL.loadingstrategy.bbox=function(t,n){return[t];},gL.loadingstrategy.tile=function(t){return function(n,i,r){var e=t.getZForResolution(qr(i,r)),o=t.getTileRangeForExtentAndZ(Gr(n,r),e),s=[],u=[e,0,0];for(u[1]=o.minX;u[1]<=o.maxX;++u[1]){for(u[2]=o.minY;u[2]<=o.maxY;++u[2]){s.push(Fr(t.getTileCoordExtent(u),r));}}return s;};},gL.math={},gL.math.ceil=Mi,gL.math.clamp=hi,gL.math.cosh=fi,gL.math.floor=xi,gL.math.lerp=wi,gL.math.log2=ci,gL.math.modulo=mi,gL.math.round=bi,gL.math.solveLinearSystem=pi,gL.math.squaredDistance=vi,gL.math.squaredSegmentDistance=li,gL.math.toDegrees=di,gL.math.toFixed=gi,gL.math.toRadians=yi,gL.net={},gL.net.ClientError=Mf,gL.net.ResponseError=xf,gL.net.getJSON=_f,gL.net.jsonp=gf,gL.net.overrideXHR=function(t){"undefined"!=typeof XMLHttpRequest&&(bf=XMLHttpRequest),global.XMLHttpRequest=t;},gL.net.resolveUrl=Sf,gL.net.restoreXHR=function(){global.XMLHttpRequest=bf;},gL.obj={},gL.obj.assign=A,gL.obj.clear=P,gL.obj.getValues=C,gL.obj.isEmpty=k,gL.proj={},gL.proj.Projection=ai,gL.proj.Units={},gL.proj.Units.METERS_PER_UNIT=Gt,gL.proj.Units.fromCode=Ft,gL.proj.addCommon=Br,gL.proj.addCoordinateTransforms=jr,gL.proj.addEquivalentProjections=Mr,gL.proj.addEquivalentTransforms=_r,gL.proj.addProjection=wr,gL.proj.addProjections=gr,gL.proj.clearAllProjections=function(){Di(),Xi();},gL.proj.clearUserProjection=function(){Nr=null;},gL.proj.cloneTransform=yr,gL.proj.createProjection=Sr,gL.proj.createSafeCoordinateTransform=Ur,gL.proj.createTransformFromCoordinateTransform=Or,gL.proj.disableCoordinateWarning=dr,gL.proj.epsg3857={},gL.proj.epsg3857.EXTENT=ji,gL.proj.epsg3857.HALF_SIZE=Oi,gL.proj.epsg3857.MAX_SAFE_Y=Ti,gL.proj.epsg3857.PROJECTIONS=Pi,gL.proj.epsg3857.RADIUS=Si,gL.proj.epsg3857.WORLD_EXTENT=Ei,gL.proj.epsg3857.fromEPSG4326=Ci,gL.proj.epsg3857.toEPSG4326=ki,gL.proj.epsg4326={},gL.proj.epsg4326.EXTENT=zi,gL.proj.epsg4326.METERS_PER_UNIT=Li,gL.proj.epsg4326.PROJECTIONS=Fi,gL.proj.epsg4326.RADIUS=Ii,gL.proj.equivalent=Tr,gL.proj.fromLonLat=Er,gL.proj.fromUserCoordinate=Rr,gL.proj.fromUserExtent=Gr,gL.proj.fromUserResolution=qr,gL.proj.get=br,gL.proj.getPointResolution=xr,gL.proj.getTransform=Pr,gL.proj.getTransformFromProjections=Ar,gL.proj.getUserProjection=zr,gL.proj.identityTransform=mr,gL.proj.proj4={},gL.proj.proj4.register=function(t){var n,i,r=Object.keys(t.defs),e=r.length;for(n=0;n<e;++n){var o=r[n];if(!br(o)){var s=t.defs(o),u=s.units;u||"longlat"!==s.projName||(u=qt.DEGREES),wr(new ai({code:o,axisOrientation:s.axis,metersPerUnit:s.to_meter,units:u}));}}for(n=0;n<e;++n){var a=r[n],h=br(a);for(i=0;i<e;++i){var f=r[i],c=br(f);if(!Wi(a,f))if(t.defs[a]===t.defs[f])Mr([h,c]);else{var l=t(a,f);jr(h,c,Ur(h,c,l.forward),Ur(c,h,l.inverse));}}}},gL.proj.projections={},gL.proj.projections.add=Ui,gL.proj.projections.clear=Di,gL.proj.projections.get=qi,gL.proj.setUserProjection=Ir,gL.proj.toLonLat=function(t,n){var i=Cr(t,void 0!==n?n:"EPSG:3857","EPSG:4326"),r=i[0];return(r<-180||r>180)&&(i[0]=mi(r+180,360)-180),i;},gL.proj.toUserCoordinate=Lr,gL.proj.toUserExtent=Fr,gL.proj.toUserResolution=Dr,gL.proj.transform=Cr,gL.proj.transformExtent=kr,gL.proj.transformWithProjections=function(t,n,i){return Ar(n,i)(t);},gL.proj.transforms={},gL.proj.transforms.add=Vi,gL.proj.transforms.clear=Xi,gL.proj.transforms.get=Wi,gL.proj.transforms.remove=function(t,n){var i=t.getCode(),r=n.getCode(),e=Bi[i][r];return delete Bi[i][r],k(Bi[i])&&delete Bi[i],e;},gL.proj.useGeographic=function(){Ir("EPSG:4326");},gL.render={},gL.render.Box=uh,gL.render.Event=Ts,gL.render.Feature=Ix,gL.render.Feature.toFeature=function(t,n){var i=t.getId(),r=Nx(t),e=t.getProperties(),o=new Ct();return void 0!==n&&o.setGeometryName(n),o.setGeometry(r),void 0!==i&&o.setId(i),o.setProperties(e,!0),o;},gL.render.Feature.toGeometry=Nx,gL.render.VectorContext=Of,gL.render.canvas={},gL.render.canvas.Builder=wb,gL.render.canvas.BuilderGroup=Nb,gL.render.canvas.Executor=Wb,gL.render.canvas.ExecutorGroup=Hb,gL.render.canvas.ExecutorGroup.getPixelIndexArray=$b,gL.render.canvas.ImageBuilder=bb,gL.render.canvas.Immediate=Tf,gL.render.canvas.Instruction={},gL.render.canvas.Instruction.beginPathInstruction=vb,gL.render.canvas.Instruction.closePathInstruction=pb,gL.render.canvas.Instruction.fillInstruction=cb,gL.render.canvas.Instruction.strokeInstruction=lb,gL.render.canvas.LineStringBuilder=_b,gL.render.canvas.PolygonBuilder=jb,gL.render.canvas.TextBuilder=Cb,gL.render.canvas.checkedFonts=Ks,gL.render.canvas.defaultFillStyle=Gs,gL.render.canvas.defaultFont=Fs,gL.render.canvas.defaultLineCap=Ds,gL.render.canvas.defaultLineDash=qs,gL.render.canvas.defaultLineDashOffset=0,gL.render.canvas.defaultLineJoin=Us,gL.render.canvas.defaultLineWidth=1,gL.render.canvas.defaultMiterLimit=Bs,gL.render.canvas.defaultPadding=Ys,gL.render.canvas.defaultStrokeStyle=Xs,gL.render.canvas.defaultTextAlign=Vs,gL.render.canvas.defaultTextBaseline=Ws,gL.render.canvas.drawImageOrLabel=su,gL.render.canvas.getTextDimensions=ou,gL.render.canvas.hitdetect={},gL.render.canvas.hitdetect.HIT_DETECT_RESOLUTION=Jb,gL.render.canvas.hitdetect.createHitDetectionImageData=Qb,gL.render.canvas.hitdetect.hitDetect=tx,gL.render.canvas.labelCache=Zs,gL.render.canvas.measureAndCacheTextWidth=eu,gL.render.canvas.measureTextHeight=nu,gL.render.canvas.measureTextWidth=ru,gL.render.canvas.registerFont=tu,gL.render.canvas.rotateAtOffset=function(t,n,i,r){0!==n&&(t.translate(i,r),t.rotate(n),t.translate(-i,-r));},gL.render.canvas.textHeights=Qs,gL.render.getRenderPixel=function(t,n){return on(t.inversePixelTransform,n.slice(0));},gL.render.getVectorContext=zf,gL.render.toContext=function(t,n){var i=t.canvas,r=n||{},e=r.pixelRatio||Kt,o=r.size;o&&(i.width=o[0]*e,i.height=o[1]*e,i.style.width=o[0]+"px",i.style.height=o[1]+"px");var s=[0,0,i.width,i.height],u=un([1,0,0,1,0,0],e,e);return new Tf(t,e,s,u,0);},gL.renderer={},gL.renderer.Composite=au,gL.renderer.Layer=Tl,gL.renderer.Map=js,gL.renderer.canvas={},gL.renderer.canvas.ImageLayer=sg,gL.renderer.canvas.Layer=rg,gL.renderer.canvas.Layer.canvasPool=Qw,gL.renderer.canvas.TileLayer=dg,gL.renderer.canvas.VectorImageLayer=sx,gL.renderer.canvas.VectorLayer=rx,gL.renderer.canvas.VectorTileLayer=px,gL.renderer.canvas.common={},gL.renderer.canvas.common.IMAGE_SMOOTHING_DISABLED=Rf,gL.renderer.canvas.common.IMAGE_SMOOTHING_ENABLED=Ff,gL.renderer.vector={},gL.renderer.vector.defaultOrder=Pf,gL.renderer.vector.getSquaredTolerance=Cf,gL.renderer.vector.getTolerance=kf,gL.renderer.vector.renderFeature=Nf,gL.renderer.webgl={},gL.renderer.webgl.Layer=Rl,gL.renderer.webgl.Layer.colorDecodeId=Ll,gL.renderer.webgl.Layer.colorEncodeId=zl,gL.renderer.webgl.Layer.getBlankImageData=function(){var t=document.createElement("canvas").getContext("2d").createImageData(1,1);return t.data[0]=255,t.data[1]=255,t.data[2]=255,t.data[3]=255,t;},gL.renderer.webgl.Layer.writePointFeatureToBuffers=function(t,n,i,r,e,o){var s=3+e,u=t[n+0],a=t[n+1],h=kl;h.length=e;for(var f=0;f<h.length;f++){h[f]=t[n+2+f];}var c=o?o.vertexPosition:0,l=o?o.indexPosition:0,v=c/s;return Il(i,c,u,a,0),h.length&&i.set(h,c+3),Il(i,c+=s,u,a,1),h.length&&i.set(h,c+3),Il(i,c+=s,u,a,2),h.length&&i.set(h,c+3),Il(i,c+=s,u,a,3),h.length&&i.set(h,c+3),c+=s,r[l++]=v,r[l++]=v+1,r[l++]=v+3,r[l++]=v+1,r[l++]=v+2,r[l++]=v+3,Nl.vertexPosition=c,Nl.indexPosition=l,Nl;},gL.renderer.webgl.PointsLayer=hb,gL.renderer.webgl.TileLayer=Kl,gL.renderer.webgl.TileLayer.Attributes=Dl,gL.renderer.webgl.TileLayer.Uniforms=Gl,gL.reproj={},gL.reproj.Image=ew,gL.reproj.Tile=gl,gL.reproj.Triangulation=yl,gL.reproj.calculateSourceExtentResolution=Bf,gL.reproj.calculateSourceResolution=Uf,gL.reproj.canvasPool=Gf,gL.reproj.common={},gL.reproj.common.ENABLE_RASTER_REPROJECTION=dl,gL.reproj.common.ERROR_THRESHOLD=.5,gL.reproj.render=Xf,gL.resolutionconstraint={},gL.resolutionconstraint.createMinMaxResolution=$u,gL.resolutionconstraint.createSnapToPower=Zu,gL.resolutionconstraint.createSnapToResolutions=Ku,gL.rotationconstraint={},gL.rotationconstraint.createSnapToN=Qu,gL.rotationconstraint.createSnapToZero=ta,gL.rotationconstraint.disable=Hu,gL.rotationconstraint.none=Ju,gL.size={},gL.size.buffer=fa,gL.size.hasArea=ca,gL.size.scale=la,gL.size.toSize=va,gL.source={},gL.source.BingMaps=Fp,gL.source.BingMaps.quadKey=Lp,gL.source.CartoDB=Bp,gL.source.Cluster=id,gL.source.DataTile=od,gL.source.GeoTIFF=Im,gL.source.IIIF=nw,gL.source.Image=lw,gL.source.Image.ImageSourceEvent=hw,gL.source.Image.defaultImageLoadFunction=cw,gL.source.ImageArcGISRest=dw,gL.source.ImageCanvas=ww,gL.source.ImageMapGuide=xw,gL.source.ImageStatic=Sw,gL.source.ImageWMS=Aw,gL.source.OGCMapTile=Fw,gL.source.OGCVectorTile=Vw,gL.source.OSM=Zw,gL.source.OSM.ATTRIBUTION=Yw,gL.source.Raster=Ng,gL.source.Raster.Processor=_g,gL.source.Raster.RasterSourceEvent=Tg,gL.source.Raster.newImageData=bg,gL.source.Source=_p,gL.source.Stamen=Gg,gL.source.Tile=Ep,gL.source.Tile.TileSourceEvent=jp,gL.source.TileArcGISRest=Ug,gL.source.TileDebug=Vg,gL.source.TileImage=Ip,gL.source.TileJSON=Kg,gL.source.TileWMS=Hg,gL.source.UTFGrid=nb,gL.source.UTFGrid.CustomTile=Qg,gL.source.UrlTile=Pp,gL.source.Vector=Qp,gL.source.Vector.VectorSourceEvent=Jp,gL.source.VectorTile=qw,gL.source.VectorTile.defaultLoadFunction=Uw,gL.source.WMTS=eb,gL.source.WMTS.optionsFromCapabilities=function(t,n){var i=b(t.Contents.Layer,function(t,i,r){return t.Identifier==n.layer;});if(null===i)return null;var r,e=t.Contents.TileMatrixSet;(r=i.TileMatrixSetLink.length>1?M(i.TileMatrixSetLink,"projection"in n?function(t,i,r){var o=b(e,function(n){return n.Identifier==t.TileMatrixSet;}).SupportedCRS,s=br(o),u=br(n.projection);return s&&u?Tr(s,u):o==n.projection;}:function(t,i,r){return t.TileMatrixSet==n.matrixSet;}):0)<0&&(r=0);var o=i.TileMatrixSetLink[r].TileMatrixSet,s=i.TileMatrixSetLink[r].TileMatrixSetLimits,u=i.Format[0];"format"in n&&(u=n.format),(r=M(i.Style,function(t,i,r){return"style"in n?t.Title==n.style:t.isDefault;}))<0&&(r=0);var a=i.Style[r].Identifier,h={};"Dimension"in i&&i.Dimension.forEach(function(t,n,i){var r=t.Identifier,e=t.Default;void 0===e&&(e=t.Value[0]),h[r]=e;});var f,c=b(t.Contents.TileMatrixSet,function(t,n,i){return t.Identifier==o;}),l=c.SupportedCRS;if(l&&(f=br(l)),"projection"in n){var v=br(n.projection);v&&(f&&!Tr(v,f)||(f=v));}var p=!1,d="ne"==f.getAxisOrientation().substr(0,2),m=c.TileMatrix[0],w={MinTileCol:0,MinTileRow:0,MaxTileCol:m.MatrixWidth-1,MaxTileRow:m.MatrixHeight-1};if(s){w=s[s.length-1];var g=b(c.TileMatrix,function(t){return t.Identifier===w.TileMatrix||c.Identifier+":"+t.Identifier===w.TileMatrix;});g&&(m=g);}var x=28e-5*m.ScaleDenominator/f.getMetersPerUnit(),_=d?[m.TopLeftCorner[1],m.TopLeftCorner[0]]:m.TopLeftCorner,S=m.TileWidth*x,O=m.TileHeight*x,j=c.BoundingBox;j&&d&&(j=[j[1],j[0],j[3],j[2]]);var E=[_[0]+S*w.MinTileCol,_[1]-O*(1+w.MaxTileRow),_[0]+S*(1+w.MaxTileCol),_[1]-O*w.MinTileRow];if(void 0!==j&&!On(j,E)){var T=i.WGS84BoundingBox,A=br("EPSG:4326").getExtent();if(E=j,T)p=T[0]===A[0]&&T[2]===A[2];else{var P=kr(j,c.SupportedCRS,"EPSG:4326");p=P[0]-1e-10<=A[0]&&P[2]+1e-10>=A[2];}}var C=Pv(c,E,s),k=[],N=n.requestEncoding;if(N=void 0!==N?N:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var I=t.OperationsMetadata.GetTile.DCP.HTTP.Get,z=0,L=I.length;z<L;++z){if(I[z].Constraint){var R=b(I[z].Constraint,function(t){return"GetEncoding"==t.name;}).AllowedValues.Value;if(""===N&&(N=R[0]),"KVP"!==N)break;y(R,"KVP")&&k.push(I[z].href);}else I[z].href&&(N="KVP",k.push(I[z].href));}return 0===k.length&&(N="REST",i.ResourceURL.forEach(function(t){"tile"===t.resourceType&&(u=t.format,k.push(t.template));})),{urls:k,layer:n.layer,matrixSet:o,format:u,projection:f,requestEncoding:N,tileGrid:C,style:a,dimensions:h,wrapX:p,crossOrigin:n.crossOrigin};},gL.source.XYZ=qp,gL.source.Zoomify=Dm,gL.source.Zoomify.CustomTile=Fm,gL.source.common={},gL.source.common.DEFAULT_WMS_VERSION="1.3.0",gL.source.ogcTileUtil={},gL.source.ogcTileUtil.getMapTileUrlTemplate=kw,gL.source.ogcTileUtil.getTileSetInfo=zw,gL.source.ogcTileUtil.getVectorTileUrlTemplate=Nw,gL.source.sourcesFromTileGrid=function(t,n){var i=new Vh(32),r=t.getExtent();return function(e,o){i.expireCache(),r&&(e=$n(r,e));var s=t.getZForResolution(o),u=[];return t.forEachTileCoord(e,s,function(t){var r=t.toString();if(!i.containsKey(r)){var e=n(t);i.set(r,e);}u.push(i.get(r));}),u;};},gL.source.wms={},gL.source.wms.DEFAULT_VERSION=Ow,gL.sphere={},gL.sphere.DEFAULT_RADIUS=hr,gL.sphere.getArea=function t(n,i){var r=i||{},e=r.radius||hr,o=r.projection||"EPSG:3857",s=n.getType();"GeometryCollection"!==s&&(n=n.clone().transform(o,"EPSG:4326"));var u,a,h,f,c,l,v=0;switch(s){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(u=n.getCoordinates(),v=Math.abs(lr(u[0],e)),h=1,f=u.length;h<f;++h){v-=Math.abs(lr(u[h],e));}break;case"MultiPolygon":for(h=0,f=(u=n.getCoordinates()).length;h<f;++h){for(a=u[h],v+=Math.abs(lr(a[0],e)),c=1,l=a.length;c<l;++c){v-=Math.abs(lr(a[c],e));}}break;case"GeometryCollection":var p=n.getGeometries();for(h=0,f=p.length;h<f;++h){v+=t(p[h],i);}break;default:throw new Error("Unsupported geometry type: "+s);}return v;},gL.sphere.getDistance=fr,gL.sphere.getLength=function t(n,i){var r=i||{},e=r.radius||hr,o=r.projection||"EPSG:3857",s=n.getType();"GeometryCollection"!==s&&(n=n.clone().transform(o,"EPSG:4326"));var u,a,h,f,c,l,v=0;switch(s){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":v=cr(u=n.getCoordinates(),e);break;case"MultiLineString":case"Polygon":for(h=0,f=(u=n.getCoordinates()).length;h<f;++h){v+=cr(u[h],e);}break;case"MultiPolygon":for(h=0,f=(u=n.getCoordinates()).length;h<f;++h){for(c=0,l=(a=u[h]).length;c<l;++c){v+=cr(a[c],e);}}break;case"GeometryCollection":var p=n.getGeometries();for(h=0,f=p.length;h<f;++h){v+=t(p[h],i);}break;default:throw new Error("Unsupported geometry type: "+s);}return v;},gL.sphere.offset=vr,gL.string={},gL.string.compareVersions=Ki,gL.string.padNumber=Yi,gL.structs={},gL.structs.LRUCache=Vh,gL.structs.LinkedList=pp,gL.structs.PriorityQueue=zu,gL.structs.PriorityQueue.DROP=Iu,gL.structs.RBush=mp,gL.style={},gL.style.Circle=Fv,gL.style.Fill=Dv,gL.style.Icon=tp,gL.style.IconImage=Hv,gL.style.IconImage.get=$v,gL.style.IconImageCache=ts,gL.style.IconImageCache.shared=ns,gL.style.Image=kv,gL.style.RegularShape=zv,gL.style.Stroke=ip,gL.style.Style=hp,gL.style.Style.createDefaultStyle=sp,gL.style.Style.createEditingStyle=up,gL.style.Style.toFunction=ep,gL.style.Text=vp,gL.style.expressions={},gL.style.expressions.Operators=iv,gL.style.expressions.PALETTE_TEXTURE_ARRAY=xv,gL.style.expressions.arrayToGlsl=sv,gL.style.expressions.colorToGlsl=uv,gL.style.expressions.expressionToGlsl=fv,gL.style.expressions.getStringNumberEquivalent=av,gL.style.expressions.getValueType=rv,gL.style.expressions.isTypeUnique=ev,gL.style.expressions.numberToGlsl=ov,gL.style.expressions.stringToGlsl=hv,gL.style.expressions.uniformNameForVariable=bv,gL.tilecoord={},gL.tilecoord.createOrUpdate=Wh,gL.tilecoord.fromKey=$h,gL.tilecoord.getCacheKeyForTileKey=Zh,gL.tilecoord.getKey=Kh,gL.tilecoord.getKeyZXY=Yh,gL.tilecoord.hash=Hh,gL.tilecoord.withinExtentAndZ=Jh,gL.tilegrid={},gL.tilegrid.TileGrid=Yf,gL.tilegrid.WMTS=Av,gL.tilegrid.WMTS.createFromCapabilitiesMatrixSet=Pv,gL.tilegrid.common={},gL.tilegrid.common.DEFAULT_MAX_ZOOM=42,gL.tilegrid.common.DEFAULT_TILE_SIZE=Bu,gL.tilegrid.createForExtent=$f,gL.tilegrid.createForProjection=Qf,gL.tilegrid.createXYZ=Hf,gL.tilegrid.extentFromProjection=tc,gL.tilegrid.getForProjection=Kf,gL.tilegrid.wrapX=Zf,gL.tileurlfunction={};gL.tileurlfunction.createFromTemplate=nc,gL.tileurlfunction.createFromTemplates=ic,gL.tileurlfunction.createFromTileUrlFunctions=rc,gL.tileurlfunction.expandUrl=oc,gL.tileurlfunction.nullTileUrlFunction=ec,gL.transform={},gL.transform.apply=on,gL.transform.compose=fn,gL.transform.composeCssTransform=function(t,n,i,r,e,o,s){return vn(fn([1,0,0,1,0,0],t,n,i,r,e,o,s));},gL.transform.create=Qt,gL.transform.determinant=ln,gL.transform.invert=function(t){return cn(t,t);},gL.transform.makeInverse=cn,gL.transform.makeScale=an,gL.transform.multiply=nn,gL.transform.reset=tn,gL.transform.rotate=sn,gL.transform.scale=un,gL.transform.set=rn,gL.transform.setFromArray=en,gL.transform.toString=vn,gL.transform.translate=hn,gL.uri={},gL.uri.appendParams=sc,gL.util={},gL.util.VERSION=u,gL.util.abstract=r,gL.util.getUid=o,gL.vec={},gL.vec.mat4={},gL.vec.mat4.create=Zc,gL.vec.mat4.fromTransform=$c,gL.webgl={},gL.webgl.ARRAY_BUFFER=ac,gL.webgl.Buffer=Xc,gL.webgl.Buffer.getArrayClassForType=Bc,gL.webgl.DYNAMIC_DRAW=cc,gL.webgl.ELEMENT_ARRAY_BUFFER=hc,gL.webgl.FLOAT=lc,gL.webgl.Helper=cl,gL.webgl.Helper.computeAttributesStride=hl,gL.webgl.PaletteTexture=ll,gL.webgl.PostProcessingPass=Kc,gL.webgl.RenderTarget=pl,gL.webgl.STATIC_DRAW=fc,gL.webgl.STREAM_DRAW=35040,gL.webgl.ShaderBuilder={},gL.webgl.ShaderBuilder.ShaderBuilder=Ov,gL.webgl.ShaderBuilder.parseLiteralStyle=jv,gL.webgl.TileTexture=Ol,gL.webgl.UNSIGNED_BYTE=5121,gL.webgl.UNSIGNED_INT=5125,gL.webgl.UNSIGNED_SHORT=5123,gL.webgl.getContext=pc,gL.webgl.getSupportedExtensions=function(){if(!uc){var t=pc(document.createElement("canvas"));t&&(uc=t.getSupportedExtensions());}return uc;},gL.xml={},gL.xml.OBJECT_PROPERTY_NODE_FACTORY=Pc,gL.xml.XML_SCHEMA_INSTANCE_URI=dc,gL.xml.createElementNS=yc,gL.xml.getAllTextContent=mc,gL.xml.Vw=wc,gL.xml.getAttributeNS=bc,gL.xml.getDocument=Dc,gL.xml.getXMLSerializer=Fc,gL.xml.isDocument=gc,gL.xml.makeArrayExtender=Mc,gL.xml.makeArrayPusher=_c,gL.xml.makeArraySerializer=Tc,gL.xml.makeChildAppender=Ec,gL.xml.makeObjectPropertyPusher=Oc,gL.xml.makeObjectPropertySetter=jc,gL.xml.makeReplacer=Sc,gL.xml.makeSequence=Cc,gL.xml.makeSimpleNodeFactory=Ac,gL.xml.makeStructureNS=kc,gL.xml.parse=xc,gL.xml.parseNode=Nc,gL.xml.pushParseAndPop=Ic,gL.xml.pushSerializeAndPop=Lc,gL.xml.registerDocument=function(t){Gc=t;},gL.xml.registerXMLSerializer=function(t){Rc=t;},gL.xml.serialize=zc;var bL=gL;},150:function _(t,n,i){"use strict";i.d(n,{Ie:function Ie(){return a;},It:function It(){return o;},L:function L(){return r;},L5:function L5(){return f;},P1:function P1(){return l;},Qb:function Qb(){return c;},pd:function pd(){return h;},sf:function sf(){return u;}});var r={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},e={};for(var _t234 in r){r.hasOwnProperty(_t234)&&(e[r[_t234]]=parseInt(_t234,10));}var o=[e.BitsPerSample,e.ExtraSamples,e.SampleFormat,e.StripByteCounts,e.StripOffsets,e.StripRowCounts,e.TileByteCounts,e.TileOffsets,e.SubIFDs],s={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},u={};for(var _t235 in s){s.hasOwnProperty(_t235)&&(u[s[_t235]]=parseInt(_t235,10));}var a={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},h={Unspecified:0,Assocalpha:1,Unassalpha:2},f={Version:0,AddCompression:1},c={None:0,Deflate:1},l={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},v={};for(var _t236 in l){l.hasOwnProperty(_t236)&&(v[l[_t236]]=parseInt(_t236,10));}}},i={};function r(t){var e=i[t];if(void 0!==e)return e.exports;var o=i[t]={exports:{}};return n[t].call(o.exports,o,o.exports,r),o.exports;}r.m=n,r.d=function(t,n){for(var i in n){r.o(n,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]});}},r.f={},r.e=function(t){return Promise.all(Object.keys(r.f).reduce(function(n,i){return r.f[i](t,n),n;},[]));},r.u=function(t){return t+".ol.js";},r.g=function(){if("object"==(typeof globalThis==="undefined"?"undefined":_typeof(globalThis)))return globalThis;try{return this||new Function("return this")();}catch(t){if("object"==(typeof window==="undefined"?"undefined":_typeof(window)))return window;}}(),r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n);},t={},r.l=function(n,i,e,o){if(t[n])t[n].push(i);else{var s,u;if(void 0!==e)for(var a=document.getElementsByTagName("script"),h=0;h<a.length;h++){var f=a[h];if(f.getAttribute("src")==n||f.getAttribute("data-webpack")=="ol:"+e){s=f;break;}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack","ol:"+e),s.src=n),t[n]=[i];var c=function c(i,r){s.onerror=s.onload=null,clearTimeout(l);var e=t[n];if(delete t[n],s.parentNode&&s.parentNode.removeChild(s),e&&e.forEach(function(t){return t(r);}),i)return i(r);},l=setTimeout(c.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=c.bind(null,s.onerror),s.onload=c.bind(null,s.onload),u&&document.head.appendChild(s);}},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0});},function(){var t;r.g.importScripts&&(t=r.g.location+"");var n=r.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var i=n.getElementsByTagName("script");i.length&&(t=i[i.length-1].src);}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t;}(),function(){var t={179:0};r.f.j=function(n,i){var e=r.o(t,n)?t[n]:void 0;if(0!==e)if(e)i.push(e[2]);else{var o=new Promise(function(i,r){e=t[n]=[i,r];});i.push(e[2]=o);var s=r.p+r.u(n),u=new Error();r.l(s,function(i){if(r.o(t,n)&&(0!==(e=t[n])&&(t[n]=void 0),e)){var o=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;u.message="Loading chunk "+n+" failed.\n("+o+": "+s+")",u.name="ChunkLoadError",u.type=o,u.request=s,e[1](u);}},"chunk-"+n,n);}};var n=function n(_n30,i){var e,o,s=i[0],u=i[1],a=i[2],h=0;if(s.some(function(n){return 0!==t[n];})){for(e in u){r.o(u,e)&&(r.m[e]=u[e]);}if(a)a(r);}for(_n30&&_n30(i);h<s.length;h++){o=s[h],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0;}},i=self.webpackChunkol=self.webpackChunkol||[];i.forEach(n.bind(null,0)),i.push=n.bind(null,i.push.bind(i));}(),r(760);var e=r(570);return e=e.default;}();});
